{"remainingRequest":"/home/saptarsi/go/src/hackathon/shiaa3/vue/node_modules/babel-loader/lib/index.js!/home/saptarsi/go/src/hackathon/shiaa3/vue/node_modules/eslint-loader/index.js??ref--13-0!/home/saptarsi/go/src/hackathon/shiaa3/vue/src/store/generated/cosmos/cosmos-sdk/cosmos.base.abci.v1beta1/module/types/tendermint/abci/types.js","dependencies":[{"path":"/home/saptarsi/go/src/hackathon/shiaa3/vue/src/store/generated/cosmos/cosmos-sdk/cosmos.base.abci.v1beta1/module/types/tendermint/abci/types.js","mtime":1616424851800},{"path":"/home/saptarsi/go/src/hackathon/shiaa3/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/saptarsi/go/src/hackathon/shiaa3/vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/saptarsi/go/src/hackathon/shiaa3/vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5tYXgtc2FmZS1pbnRlZ2VyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS51aW50OC1hcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmNvcHktd2l0aGluLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZXZlcnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWxsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5sYXN0LWluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLXJpZ2h0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmV2ZXJzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29tZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zdWJhcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLWxvY2FsZS1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLnRvLWpzb24uanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9ob21lL3NhcHRhcnNpL2dvL3NyYy9oYWNrYXRob24vc2hpYWEzL3Z1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9ob21lL3NhcHRhcnNpL2dvL3NyYy9oYWNrYXRob24vc2hpYWEzL3Z1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiL2hvbWUvc2FwdGFyc2kvZ28vc3JjL2hhY2thdGhvbi9zaGlhYTMvdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvc2FwdGFyc2kvZ28vc3JjL2hhY2thdGhvbi9zaGlhYTMvdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKCi8qIGVzbGludC1kaXNhYmxlICovCmltcG9ydCB7IFJlYWRlciwgdXRpbCwgY29uZmlndXJlLCBXcml0ZXIgfSBmcm9tICJwcm90b2J1ZmpzL21pbmltYWwiOwppbXBvcnQgeyBUaW1lc3RhbXAgfSBmcm9tICIuLi8uLi9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wIjsKaW1wb3J0ICogYXMgTG9uZyBmcm9tICJsb25nIjsKaW1wb3J0IHsgSGVhZGVyIH0gZnJvbSAiLi4vLi4vdGVuZGVybWludC90eXBlcy90eXBlcyI7CmltcG9ydCB7IFByb29mT3BzIH0gZnJvbSAiLi4vLi4vdGVuZGVybWludC9jcnlwdG8vcHJvb2YiOwppbXBvcnQgeyBFdmlkZW5jZVBhcmFtcywgVmFsaWRhdG9yUGFyYW1zLCBWZXJzaW9uUGFyYW1zIH0gZnJvbSAiLi4vLi4vdGVuZGVybWludC90eXBlcy9wYXJhbXMiOwppbXBvcnQgeyBQdWJsaWNLZXkgfSBmcm9tICIuLi8uLi90ZW5kZXJtaW50L2NyeXB0by9rZXlzIjsKZXhwb3J0IHZhciBwcm90b2J1ZlBhY2thZ2UgPSAidGVuZGVybWludC5hYmNpIjsKZXhwb3J0IHZhciBDaGVja1R4VHlwZTsKCihmdW5jdGlvbiAoQ2hlY2tUeFR5cGUpIHsKICBDaGVja1R4VHlwZVtDaGVja1R4VHlwZVsiTkVXIl0gPSAwXSA9ICJORVciOwogIENoZWNrVHhUeXBlW0NoZWNrVHhUeXBlWyJSRUNIRUNLIl0gPSAxXSA9ICJSRUNIRUNLIjsKICBDaGVja1R4VHlwZVtDaGVja1R4VHlwZVsiVU5SRUNPR05JWkVEIl0gPSAtMV0gPSAiVU5SRUNPR05JWkVEIjsKfSkoQ2hlY2tUeFR5cGUgfHwgKENoZWNrVHhUeXBlID0ge30pKTsKCmV4cG9ydCBmdW5jdGlvbiBjaGVja1R4VHlwZUZyb21KU09OKG9iamVjdCkgewogIHN3aXRjaCAob2JqZWN0KSB7CiAgICBjYXNlIDA6CiAgICBjYXNlICJORVciOgogICAgICByZXR1cm4gQ2hlY2tUeFR5cGUuTkVXOwoKICAgIGNhc2UgMToKICAgIGNhc2UgIlJFQ0hFQ0siOgogICAgICByZXR1cm4gQ2hlY2tUeFR5cGUuUkVDSEVDSzsKCiAgICBjYXNlIC0xOgogICAgY2FzZSAiVU5SRUNPR05JWkVEIjoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBDaGVja1R4VHlwZS5VTlJFQ09HTklaRUQ7CiAgfQp9CmV4cG9ydCBmdW5jdGlvbiBjaGVja1R4VHlwZVRvSlNPTihvYmplY3QpIHsKICBzd2l0Y2ggKG9iamVjdCkgewogICAgY2FzZSBDaGVja1R4VHlwZS5ORVc6CiAgICAgIHJldHVybiAiTkVXIjsKCiAgICBjYXNlIENoZWNrVHhUeXBlLlJFQ0hFQ0s6CiAgICAgIHJldHVybiAiUkVDSEVDSyI7CgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuICJVTktOT1dOIjsKICB9Cn0KZXhwb3J0IHZhciBFdmlkZW5jZVR5cGU7CgooZnVuY3Rpb24gKEV2aWRlbmNlVHlwZSkgewogIEV2aWRlbmNlVHlwZVtFdmlkZW5jZVR5cGVbIlVOS05PV04iXSA9IDBdID0gIlVOS05PV04iOwogIEV2aWRlbmNlVHlwZVtFdmlkZW5jZVR5cGVbIkRVUExJQ0FURV9WT1RFIl0gPSAxXSA9ICJEVVBMSUNBVEVfVk9URSI7CiAgRXZpZGVuY2VUeXBlW0V2aWRlbmNlVHlwZVsiTElHSFRfQ0xJRU5UX0FUVEFDSyJdID0gMl0gPSAiTElHSFRfQ0xJRU5UX0FUVEFDSyI7CiAgRXZpZGVuY2VUeXBlW0V2aWRlbmNlVHlwZVsiVU5SRUNPR05JWkVEIl0gPSAtMV0gPSAiVU5SRUNPR05JWkVEIjsKfSkoRXZpZGVuY2VUeXBlIHx8IChFdmlkZW5jZVR5cGUgPSB7fSkpOwoKZXhwb3J0IGZ1bmN0aW9uIGV2aWRlbmNlVHlwZUZyb21KU09OKG9iamVjdCkgewogIHN3aXRjaCAob2JqZWN0KSB7CiAgICBjYXNlIDA6CiAgICBjYXNlICJVTktOT1dOIjoKICAgICAgcmV0dXJuIEV2aWRlbmNlVHlwZS5VTktOT1dOOwoKICAgIGNhc2UgMToKICAgIGNhc2UgIkRVUExJQ0FURV9WT1RFIjoKICAgICAgcmV0dXJuIEV2aWRlbmNlVHlwZS5EVVBMSUNBVEVfVk9URTsKCiAgICBjYXNlIDI6CiAgICBjYXNlICJMSUdIVF9DTElFTlRfQVRUQUNLIjoKICAgICAgcmV0dXJuIEV2aWRlbmNlVHlwZS5MSUdIVF9DTElFTlRfQVRUQUNLOwoKICAgIGNhc2UgLTE6CiAgICBjYXNlICJVTlJFQ09HTklaRUQiOgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIEV2aWRlbmNlVHlwZS5VTlJFQ09HTklaRUQ7CiAgfQp9CmV4cG9ydCBmdW5jdGlvbiBldmlkZW5jZVR5cGVUb0pTT04ob2JqZWN0KSB7CiAgc3dpdGNoIChvYmplY3QpIHsKICAgIGNhc2UgRXZpZGVuY2VUeXBlLlVOS05PV046CiAgICAgIHJldHVybiAiVU5LTk9XTiI7CgogICAgY2FzZSBFdmlkZW5jZVR5cGUuRFVQTElDQVRFX1ZPVEU6CiAgICAgIHJldHVybiAiRFVQTElDQVRFX1ZPVEUiOwoKICAgIGNhc2UgRXZpZGVuY2VUeXBlLkxJR0hUX0NMSUVOVF9BVFRBQ0s6CiAgICAgIHJldHVybiAiTElHSFRfQ0xJRU5UX0FUVEFDSyI7CgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuICJVTktOT1dOIjsKICB9Cn0KZXhwb3J0IHZhciBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0OwoKKGZ1bmN0aW9uIChSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0KSB7CiAgLyoqIFVOS05PV04gLSBVbmtub3duIHJlc3VsdCwgYWJvcnQgYWxsIHNuYXBzaG90IHJlc3RvcmF0aW9uICovCiAgUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdFtSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0WyJVTktOT1dOIl0gPSAwXSA9ICJVTktOT1dOIjsKICAvKiogQUNDRVBUIC0gU25hcHNob3QgYWNjZXB0ZWQsIGFwcGx5IGNodW5rcyAqLwoKICBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0W1Jlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHRbIkFDQ0VQVCJdID0gMV0gPSAiQUNDRVBUIjsKICAvKiogQUJPUlQgLSBBYm9ydCBhbGwgc25hcHNob3QgcmVzdG9yYXRpb24gKi8KCiAgUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdFtSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0WyJBQk9SVCJdID0gMl0gPSAiQUJPUlQiOwogIC8qKiBSRUpFQ1QgLSBSZWplY3QgdGhpcyBzcGVjaWZpYyBzbmFwc2hvdCwgdHJ5IG90aGVycyAqLwoKICBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0W1Jlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHRbIlJFSkVDVCJdID0gM10gPSAiUkVKRUNUIjsKICAvKiogUkVKRUNUX0ZPUk1BVCAtIFJlamVjdCBhbGwgc25hcHNob3RzIG9mIHRoaXMgZm9ybWF0LCB0cnkgb3RoZXJzICovCgogIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHRbUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdFsiUkVKRUNUX0ZPUk1BVCJdID0gNF0gPSAiUkVKRUNUX0ZPUk1BVCI7CiAgLyoqIFJFSkVDVF9TRU5ERVIgLSBSZWplY3QgYWxsIHNuYXBzaG90cyBmcm9tIHRoZSBzZW5kZXIocyksIHRyeSBvdGhlcnMgKi8KCiAgUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdFtSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0WyJSRUpFQ1RfU0VOREVSIl0gPSA1XSA9ICJSRUpFQ1RfU0VOREVSIjsKICBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0W1Jlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHRbIlVOUkVDT0dOSVpFRCJdID0gLTFdID0gIlVOUkVDT0dOSVpFRCI7Cn0pKFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHQgfHwgKFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHQgPSB7fSkpOwoKZXhwb3J0IGZ1bmN0aW9uIHJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHRGcm9tSlNPTihvYmplY3QpIHsKICBzd2l0Y2ggKG9iamVjdCkgewogICAgY2FzZSAwOgogICAgY2FzZSAiVU5LTk9XTiI6CiAgICAgIHJldHVybiBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0LlVOS05PV047CgogICAgY2FzZSAxOgogICAgY2FzZSAiQUNDRVBUIjoKICAgICAgcmV0dXJuIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHQuQUNDRVBUOwoKICAgIGNhc2UgMjoKICAgIGNhc2UgIkFCT1JUIjoKICAgICAgcmV0dXJuIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHQuQUJPUlQ7CgogICAgY2FzZSAzOgogICAgY2FzZSAiUkVKRUNUIjoKICAgICAgcmV0dXJuIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHQuUkVKRUNUOwoKICAgIGNhc2UgNDoKICAgIGNhc2UgIlJFSkVDVF9GT1JNQVQiOgogICAgICByZXR1cm4gUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdC5SRUpFQ1RfRk9STUFUOwoKICAgIGNhc2UgNToKICAgIGNhc2UgIlJFSkVDVF9TRU5ERVIiOgogICAgICByZXR1cm4gUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdC5SRUpFQ1RfU0VOREVSOwoKICAgIGNhc2UgLTE6CiAgICBjYXNlICJVTlJFQ09HTklaRUQiOgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHQuVU5SRUNPR05JWkVEOwogIH0KfQpleHBvcnQgZnVuY3Rpb24gcmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdFRvSlNPTihvYmplY3QpIHsKICBzd2l0Y2ggKG9iamVjdCkgewogICAgY2FzZSBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0LlVOS05PV046CiAgICAgIHJldHVybiAiVU5LTk9XTiI7CgogICAgY2FzZSBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0LkFDQ0VQVDoKICAgICAgcmV0dXJuICJBQ0NFUFQiOwoKICAgIGNhc2UgUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdC5BQk9SVDoKICAgICAgcmV0dXJuICJBQk9SVCI7CgogICAgY2FzZSBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0LlJFSkVDVDoKICAgICAgcmV0dXJuICJSRUpFQ1QiOwoKICAgIGNhc2UgUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdC5SRUpFQ1RfRk9STUFUOgogICAgICByZXR1cm4gIlJFSkVDVF9GT1JNQVQiOwoKICAgIGNhc2UgUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdC5SRUpFQ1RfU0VOREVSOgogICAgICByZXR1cm4gIlJFSkVDVF9TRU5ERVIiOwoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiAiVU5LTk9XTiI7CiAgfQp9CmV4cG9ydCB2YXIgUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0OwoKKGZ1bmN0aW9uIChSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHQpIHsKICAvKiogVU5LTk9XTiAtIFVua25vd24gcmVzdWx0LCBhYm9ydCBhbGwgc25hcHNob3QgcmVzdG9yYXRpb24gKi8KICBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHRbUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0WyJVTktOT1dOIl0gPSAwXSA9ICJVTktOT1dOIjsKICAvKiogQUNDRVBUIC0gQ2h1bmsgc3VjY2Vzc2Z1bGx5IGFjY2VwdGVkICovCgogIFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdFtSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHRbIkFDQ0VQVCJdID0gMV0gPSAiQUNDRVBUIjsKICAvKiogQUJPUlQgLSBBYm9ydCBhbGwgc25hcHNob3QgcmVzdG9yYXRpb24gKi8KCiAgUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0W1Jlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdFsiQUJPUlQiXSA9IDJdID0gIkFCT1JUIjsKICAvKiogUkVUUlkgLSBSZXRyeSBjaHVuayAoY29tYmluZSB3aXRoIHJlZmV0Y2ggYW5kIHJlamVjdCkgKi8KCiAgUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0W1Jlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdFsiUkVUUlkiXSA9IDNdID0gIlJFVFJZIjsKICAvKiogUkVUUllfU05BUFNIT1QgLSBSZXRyeSBzbmFwc2hvdCAoY29tYmluZSB3aXRoIHJlZmV0Y2ggYW5kIHJlamVjdCkgKi8KCiAgUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0W1Jlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdFsiUkVUUllfU05BUFNIT1QiXSA9IDRdID0gIlJFVFJZX1NOQVBTSE9UIjsKICAvKiogUkVKRUNUX1NOQVBTSE9UIC0gUmVqZWN0IHRoaXMgc25hcHNob3QsIHRyeSBvdGhlcnMgKi8KCiAgUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0W1Jlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdFsiUkVKRUNUX1NOQVBTSE9UIl0gPSA1XSA9ICJSRUpFQ1RfU05BUFNIT1QiOwogIFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdFtSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHRbIlVOUkVDT0dOSVpFRCJdID0gLTFdID0gIlVOUkVDT0dOSVpFRCI7Cn0pKFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdCB8fCAoUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0ID0ge30pKTsKCmV4cG9ydCBmdW5jdGlvbiByZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHRGcm9tSlNPTihvYmplY3QpIHsKICBzd2l0Y2ggKG9iamVjdCkgewogICAgY2FzZSAwOgogICAgY2FzZSAiVU5LTk9XTiI6CiAgICAgIHJldHVybiBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHQuVU5LTk9XTjsKCiAgICBjYXNlIDE6CiAgICBjYXNlICJBQ0NFUFQiOgogICAgICByZXR1cm4gUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0LkFDQ0VQVDsKCiAgICBjYXNlIDI6CiAgICBjYXNlICJBQk9SVCI6CiAgICAgIHJldHVybiBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHQuQUJPUlQ7CgogICAgY2FzZSAzOgogICAgY2FzZSAiUkVUUlkiOgogICAgICByZXR1cm4gUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0LlJFVFJZOwoKICAgIGNhc2UgNDoKICAgIGNhc2UgIlJFVFJZX1NOQVBTSE9UIjoKICAgICAgcmV0dXJuIFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdC5SRVRSWV9TTkFQU0hPVDsKCiAgICBjYXNlIDU6CiAgICBjYXNlICJSRUpFQ1RfU05BUFNIT1QiOgogICAgICByZXR1cm4gUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0LlJFSkVDVF9TTkFQU0hPVDsKCiAgICBjYXNlIC0xOgogICAgY2FzZSAiVU5SRUNPR05JWkVEIjoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHQuVU5SRUNPR05JWkVEOwogIH0KfQpleHBvcnQgZnVuY3Rpb24gcmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0VG9KU09OKG9iamVjdCkgewogIHN3aXRjaCAob2JqZWN0KSB7CiAgICBjYXNlIFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdC5VTktOT1dOOgogICAgICByZXR1cm4gIlVOS05PV04iOwoKICAgIGNhc2UgUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0LkFDQ0VQVDoKICAgICAgcmV0dXJuICJBQ0NFUFQiOwoKICAgIGNhc2UgUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0LkFCT1JUOgogICAgICByZXR1cm4gIkFCT1JUIjsKCiAgICBjYXNlIFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdC5SRVRSWToKICAgICAgcmV0dXJuICJSRVRSWSI7CgogICAgY2FzZSBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHQuUkVUUllfU05BUFNIT1Q6CiAgICAgIHJldHVybiAiUkVUUllfU05BUFNIT1QiOwoKICAgIGNhc2UgUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0LlJFSkVDVF9TTkFQU0hPVDoKICAgICAgcmV0dXJuICJSRUpFQ1RfU05BUFNIT1QiOwoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiAiVU5LTk9XTiI7CiAgfQp9CnZhciBiYXNlUmVxdWVzdCA9IHt9OwpleHBvcnQgdmFyIFJlcXVlc3QgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmVjaG8gIT09IHVuZGVmaW5lZCkgewogICAgICBSZXF1ZXN0RWNoby5lbmNvZGUobWVzc2FnZS5lY2hvLCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmZsdXNoICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVxdWVzdEZsdXNoLmVuY29kZShtZXNzYWdlLmZsdXNoLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmluZm8gIT09IHVuZGVmaW5lZCkgewogICAgICBSZXF1ZXN0SW5mby5lbmNvZGUobWVzc2FnZS5pbmZvLCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnNldE9wdGlvbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlcXVlc3RTZXRPcHRpb24uZW5jb2RlKG1lc3NhZ2Uuc2V0T3B0aW9uLCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmluaXRDaGFpbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlcXVlc3RJbml0Q2hhaW4uZW5jb2RlKG1lc3NhZ2UuaW5pdENoYWluLCB3cml0ZXIudWludDMyKDQyKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnF1ZXJ5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVxdWVzdFF1ZXJ5LmVuY29kZShtZXNzYWdlLnF1ZXJ5LCB3cml0ZXIudWludDMyKDUwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmJlZ2luQmxvY2sgIT09IHVuZGVmaW5lZCkgewogICAgICBSZXF1ZXN0QmVnaW5CbG9jay5lbmNvZGUobWVzc2FnZS5iZWdpbkJsb2NrLCB3cml0ZXIudWludDMyKDU4KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmNoZWNrVHggIT09IHVuZGVmaW5lZCkgewogICAgICBSZXF1ZXN0Q2hlY2tUeC5lbmNvZGUobWVzc2FnZS5jaGVja1R4LCB3cml0ZXIudWludDMyKDY2KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmRlbGl2ZXJUeCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlcXVlc3REZWxpdmVyVHguZW5jb2RlKG1lc3NhZ2UuZGVsaXZlclR4LCB3cml0ZXIudWludDMyKDc0KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmVuZEJsb2NrICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVxdWVzdEVuZEJsb2NrLmVuY29kZShtZXNzYWdlLmVuZEJsb2NrLCB3cml0ZXIudWludDMyKDgyKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmNvbW1pdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlcXVlc3RDb21taXQuZW5jb2RlKG1lc3NhZ2UuY29tbWl0LCB3cml0ZXIudWludDMyKDkwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmxpc3RTbmFwc2hvdHMgIT09IHVuZGVmaW5lZCkgewogICAgICBSZXF1ZXN0TGlzdFNuYXBzaG90cy5lbmNvZGUobWVzc2FnZS5saXN0U25hcHNob3RzLCB3cml0ZXIudWludDMyKDk4KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLm9mZmVyU25hcHNob3QgIT09IHVuZGVmaW5lZCkgewogICAgICBSZXF1ZXN0T2ZmZXJTbmFwc2hvdC5lbmNvZGUobWVzc2FnZS5vZmZlclNuYXBzaG90LCB3cml0ZXIudWludDMyKDEwNikuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5sb2FkU25hcHNob3RDaHVuayAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlcXVlc3RMb2FkU25hcHNob3RDaHVuay5lbmNvZGUobWVzc2FnZS5sb2FkU25hcHNob3RDaHVuaywgd3JpdGVyLnVpbnQzMigxMTQpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuYXBwbHlTbmFwc2hvdENodW5rICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVxdWVzdEFwcGx5U25hcHNob3RDaHVuay5lbmNvZGUobWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmssIHdyaXRlci51aW50MzIoMTIyKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3QpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuZWNobyA9IFJlcXVlc3RFY2hvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5mbHVzaCA9IFJlcXVlc3RGbHVzaC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UuaW5mbyA9IFJlcXVlc3RJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA0OgogICAgICAgICAgbWVzc2FnZS5zZXRPcHRpb24gPSBSZXF1ZXN0U2V0T3B0aW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA1OgogICAgICAgICAgbWVzc2FnZS5pbml0Q2hhaW4gPSBSZXF1ZXN0SW5pdENoYWluLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA2OgogICAgICAgICAgbWVzc2FnZS5xdWVyeSA9IFJlcXVlc3RRdWVyeS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIG1lc3NhZ2UuYmVnaW5CbG9jayA9IFJlcXVlc3RCZWdpbkJsb2NrLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA4OgogICAgICAgICAgbWVzc2FnZS5jaGVja1R4ID0gUmVxdWVzdENoZWNrVHguZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDk6CiAgICAgICAgICBtZXNzYWdlLmRlbGl2ZXJUeCA9IFJlcXVlc3REZWxpdmVyVHguZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgICAgbWVzc2FnZS5lbmRCbG9jayA9IFJlcXVlc3RFbmRCbG9jay5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBtZXNzYWdlLmNvbW1pdCA9IFJlcXVlc3RDb21taXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDEyOgogICAgICAgICAgbWVzc2FnZS5saXN0U25hcHNob3RzID0gUmVxdWVzdExpc3RTbmFwc2hvdHMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDEzOgogICAgICAgICAgbWVzc2FnZS5vZmZlclNuYXBzaG90ID0gUmVxdWVzdE9mZmVyU25hcHNob3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDE0OgogICAgICAgICAgbWVzc2FnZS5sb2FkU25hcHNob3RDaHVuayA9IFJlcXVlc3RMb2FkU25hcHNob3RDaHVuay5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTU6CiAgICAgICAgICBtZXNzYWdlLmFwcGx5U25hcHNob3RDaHVuayA9IFJlcXVlc3RBcHBseVNuYXBzaG90Q2h1bmsuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3QpOwoKICAgIGlmIChvYmplY3QuZWNobyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5lY2hvICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZWNobyA9IFJlcXVlc3RFY2hvLmZyb21KU09OKG9iamVjdC5lY2hvKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZWNobyA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmZsdXNoICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmZsdXNoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZmx1c2ggPSBSZXF1ZXN0Rmx1c2guZnJvbUpTT04ob2JqZWN0LmZsdXNoKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZmx1c2ggPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbmZvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZm8gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmZvID0gUmVxdWVzdEluZm8uZnJvbUpTT04ob2JqZWN0LmluZm8pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbmZvID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3Quc2V0T3B0aW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNldE9wdGlvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnNldE9wdGlvbiA9IFJlcXVlc3RTZXRPcHRpb24uZnJvbUpTT04ob2JqZWN0LnNldE9wdGlvbik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnNldE9wdGlvbiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluaXRDaGFpbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbml0Q2hhaW4gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbml0Q2hhaW4gPSBSZXF1ZXN0SW5pdENoYWluLmZyb21KU09OKG9iamVjdC5pbml0Q2hhaW4pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbml0Q2hhaW4gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5xdWVyeSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5xdWVyeSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnF1ZXJ5ID0gUmVxdWVzdFF1ZXJ5LmZyb21KU09OKG9iamVjdC5xdWVyeSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnF1ZXJ5ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuYmVnaW5CbG9jayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5iZWdpbkJsb2NrICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYmVnaW5CbG9jayA9IFJlcXVlc3RCZWdpbkJsb2NrLmZyb21KU09OKG9iamVjdC5iZWdpbkJsb2NrKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYmVnaW5CbG9jayA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNoZWNrVHggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY2hlY2tUeCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNoZWNrVHggPSBSZXF1ZXN0Q2hlY2tUeC5mcm9tSlNPTihvYmplY3QuY2hlY2tUeCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNoZWNrVHggPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5kZWxpdmVyVHggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGVsaXZlclR4ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGVsaXZlclR4ID0gUmVxdWVzdERlbGl2ZXJUeC5mcm9tSlNPTihvYmplY3QuZGVsaXZlclR4KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZGVsaXZlclR4ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuZW5kQmxvY2sgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZW5kQmxvY2sgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5lbmRCbG9jayA9IFJlcXVlc3RFbmRCbG9jay5mcm9tSlNPTihvYmplY3QuZW5kQmxvY2spOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5lbmRCbG9jayA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNvbW1pdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb21taXQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb21taXQgPSBSZXF1ZXN0Q29tbWl0LmZyb21KU09OKG9iamVjdC5jb21taXQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb21taXQgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5saXN0U25hcHNob3RzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmxpc3RTbmFwc2hvdHMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5saXN0U25hcHNob3RzID0gUmVxdWVzdExpc3RTbmFwc2hvdHMuZnJvbUpTT04ob2JqZWN0Lmxpc3RTbmFwc2hvdHMpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5saXN0U25hcHNob3RzID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3Qub2ZmZXJTbmFwc2hvdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5vZmZlclNuYXBzaG90ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCA9IFJlcXVlc3RPZmZlclNuYXBzaG90LmZyb21KU09OKG9iamVjdC5vZmZlclNuYXBzaG90KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmxvYWRTbmFwc2hvdENodW5rICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmxvYWRTbmFwc2hvdENodW5rICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubG9hZFNuYXBzaG90Q2h1bmsgPSBSZXF1ZXN0TG9hZFNuYXBzaG90Q2h1bmsuZnJvbUpTT04ob2JqZWN0LmxvYWRTbmFwc2hvdENodW5rKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubG9hZFNuYXBzaG90Q2h1bmsgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5hcHBseVNuYXBzaG90Q2h1bmsgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYXBwbHlTbmFwc2hvdENodW5rICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYXBwbHlTbmFwc2hvdENodW5rID0gUmVxdWVzdEFwcGx5U25hcHNob3RDaHVuay5mcm9tSlNPTihvYmplY3QuYXBwbHlTbmFwc2hvdENodW5rKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYXBwbHlTbmFwc2hvdENodW5rID0gdW5kZWZpbmVkOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5lY2hvICE9PSB1bmRlZmluZWQgJiYgKG9iai5lY2hvID0gbWVzc2FnZS5lY2hvID8gUmVxdWVzdEVjaG8udG9KU09OKG1lc3NhZ2UuZWNobykgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5mbHVzaCAhPT0gdW5kZWZpbmVkICYmIChvYmouZmx1c2ggPSBtZXNzYWdlLmZsdXNoID8gUmVxdWVzdEZsdXNoLnRvSlNPTihtZXNzYWdlLmZsdXNoKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmluZm8gIT09IHVuZGVmaW5lZCAmJiAob2JqLmluZm8gPSBtZXNzYWdlLmluZm8gPyBSZXF1ZXN0SW5mby50b0pTT04obWVzc2FnZS5pbmZvKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLnNldE9wdGlvbiAhPT0gdW5kZWZpbmVkICYmIChvYmouc2V0T3B0aW9uID0gbWVzc2FnZS5zZXRPcHRpb24gPyBSZXF1ZXN0U2V0T3B0aW9uLnRvSlNPTihtZXNzYWdlLnNldE9wdGlvbikgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5pbml0Q2hhaW4gIT09IHVuZGVmaW5lZCAmJiAob2JqLmluaXRDaGFpbiA9IG1lc3NhZ2UuaW5pdENoYWluID8gUmVxdWVzdEluaXRDaGFpbi50b0pTT04obWVzc2FnZS5pbml0Q2hhaW4pIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UucXVlcnkgIT09IHVuZGVmaW5lZCAmJiAob2JqLnF1ZXJ5ID0gbWVzc2FnZS5xdWVyeSA/IFJlcXVlc3RRdWVyeS50b0pTT04obWVzc2FnZS5xdWVyeSkgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5iZWdpbkJsb2NrICE9PSB1bmRlZmluZWQgJiYgKG9iai5iZWdpbkJsb2NrID0gbWVzc2FnZS5iZWdpbkJsb2NrID8gUmVxdWVzdEJlZ2luQmxvY2sudG9KU09OKG1lc3NhZ2UuYmVnaW5CbG9jaykgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5jaGVja1R4ICE9PSB1bmRlZmluZWQgJiYgKG9iai5jaGVja1R4ID0gbWVzc2FnZS5jaGVja1R4ID8gUmVxdWVzdENoZWNrVHgudG9KU09OKG1lc3NhZ2UuY2hlY2tUeCkgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5kZWxpdmVyVHggIT09IHVuZGVmaW5lZCAmJiAob2JqLmRlbGl2ZXJUeCA9IG1lc3NhZ2UuZGVsaXZlclR4ID8gUmVxdWVzdERlbGl2ZXJUeC50b0pTT04obWVzc2FnZS5kZWxpdmVyVHgpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UuZW5kQmxvY2sgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVuZEJsb2NrID0gbWVzc2FnZS5lbmRCbG9jayA/IFJlcXVlc3RFbmRCbG9jay50b0pTT04obWVzc2FnZS5lbmRCbG9jaykgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5jb21taXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNvbW1pdCA9IG1lc3NhZ2UuY29tbWl0ID8gUmVxdWVzdENvbW1pdC50b0pTT04obWVzc2FnZS5jb21taXQpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UubGlzdFNuYXBzaG90cyAhPT0gdW5kZWZpbmVkICYmIChvYmoubGlzdFNuYXBzaG90cyA9IG1lc3NhZ2UubGlzdFNuYXBzaG90cyA/IFJlcXVlc3RMaXN0U25hcHNob3RzLnRvSlNPTihtZXNzYWdlLmxpc3RTbmFwc2hvdHMpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCAhPT0gdW5kZWZpbmVkICYmIChvYmoub2ZmZXJTbmFwc2hvdCA9IG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCA/IFJlcXVlc3RPZmZlclNuYXBzaG90LnRvSlNPTihtZXNzYWdlLm9mZmVyU25hcHNob3QpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UubG9hZFNuYXBzaG90Q2h1bmsgIT09IHVuZGVmaW5lZCAmJiAob2JqLmxvYWRTbmFwc2hvdENodW5rID0gbWVzc2FnZS5sb2FkU25hcHNob3RDaHVuayA/IFJlcXVlc3RMb2FkU25hcHNob3RDaHVuay50b0pTT04obWVzc2FnZS5sb2FkU25hcHNob3RDaHVuaykgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmsgIT09IHVuZGVmaW5lZCAmJiAob2JqLmFwcGx5U25hcHNob3RDaHVuayA9IG1lc3NhZ2UuYXBwbHlTbmFwc2hvdENodW5rID8gUmVxdWVzdEFwcGx5U25hcHNob3RDaHVuay50b0pTT04obWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmspIDogdW5kZWZpbmVkKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0KTsKCiAgICBpZiAob2JqZWN0LmVjaG8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZWNobyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmVjaG8gPSBSZXF1ZXN0RWNoby5mcm9tUGFydGlhbChvYmplY3QuZWNobyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmVjaG8gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5mbHVzaCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5mbHVzaCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmZsdXNoID0gUmVxdWVzdEZsdXNoLmZyb21QYXJ0aWFsKG9iamVjdC5mbHVzaCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmZsdXNoID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuaW5mbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbmZvICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaW5mbyA9IFJlcXVlc3RJbmZvLmZyb21QYXJ0aWFsKG9iamVjdC5pbmZvKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5mbyA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnNldE9wdGlvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zZXRPcHRpb24gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5zZXRPcHRpb24gPSBSZXF1ZXN0U2V0T3B0aW9uLmZyb21QYXJ0aWFsKG9iamVjdC5zZXRPcHRpb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5zZXRPcHRpb24gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbml0Q2hhaW4gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5pdENoYWluICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaW5pdENoYWluID0gUmVxdWVzdEluaXRDaGFpbi5mcm9tUGFydGlhbChvYmplY3QuaW5pdENoYWluKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5pdENoYWluID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QucXVlcnkgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucXVlcnkgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5xdWVyeSA9IFJlcXVlc3RRdWVyeS5mcm9tUGFydGlhbChvYmplY3QucXVlcnkpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5xdWVyeSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmJlZ2luQmxvY2sgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYmVnaW5CbG9jayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmJlZ2luQmxvY2sgPSBSZXF1ZXN0QmVnaW5CbG9jay5mcm9tUGFydGlhbChvYmplY3QuYmVnaW5CbG9jayk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmJlZ2luQmxvY2sgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5jaGVja1R4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNoZWNrVHggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jaGVja1R4ID0gUmVxdWVzdENoZWNrVHguZnJvbVBhcnRpYWwob2JqZWN0LmNoZWNrVHgpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jaGVja1R4ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuZGVsaXZlclR4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmRlbGl2ZXJUeCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRlbGl2ZXJUeCA9IFJlcXVlc3REZWxpdmVyVHguZnJvbVBhcnRpYWwob2JqZWN0LmRlbGl2ZXJUeCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmRlbGl2ZXJUeCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmVuZEJsb2NrICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmVuZEJsb2NrICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZW5kQmxvY2sgPSBSZXF1ZXN0RW5kQmxvY2suZnJvbVBhcnRpYWwob2JqZWN0LmVuZEJsb2NrKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZW5kQmxvY2sgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5jb21taXQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29tbWl0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29tbWl0ID0gUmVxdWVzdENvbW1pdC5mcm9tUGFydGlhbChvYmplY3QuY29tbWl0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29tbWl0ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QubGlzdFNuYXBzaG90cyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5saXN0U25hcHNob3RzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubGlzdFNuYXBzaG90cyA9IFJlcXVlc3RMaXN0U25hcHNob3RzLmZyb21QYXJ0aWFsKG9iamVjdC5saXN0U25hcHNob3RzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubGlzdFNuYXBzaG90cyA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lm9mZmVyU25hcHNob3QgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Qub2ZmZXJTbmFwc2hvdCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLm9mZmVyU25hcHNob3QgPSBSZXF1ZXN0T2ZmZXJTbmFwc2hvdC5mcm9tUGFydGlhbChvYmplY3Qub2ZmZXJTbmFwc2hvdCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLm9mZmVyU25hcHNob3QgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5sb2FkU25hcHNob3RDaHVuayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5sb2FkU25hcHNob3RDaHVuayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmxvYWRTbmFwc2hvdENodW5rID0gUmVxdWVzdExvYWRTbmFwc2hvdENodW5rLmZyb21QYXJ0aWFsKG9iamVjdC5sb2FkU25hcHNob3RDaHVuayk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmxvYWRTbmFwc2hvdENodW5rID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuYXBwbHlTbmFwc2hvdENodW5rICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmFwcGx5U25hcHNob3RDaHVuayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmFwcGx5U25hcHNob3RDaHVuayA9IFJlcXVlc3RBcHBseVNuYXBzaG90Q2h1bmsuZnJvbVBhcnRpYWwob2JqZWN0LmFwcGx5U25hcHNob3RDaHVuayk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmFwcGx5U25hcHNob3RDaHVuayA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVxdWVzdEVjaG8gPSB7CiAgbWVzc2FnZTogIiIKfTsKZXhwb3J0IHZhciBSZXF1ZXN0RWNobyA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UubWVzc2FnZSAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UubWVzc2FnZSk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEVjaG8pOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZSA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RFY2hvKTsKCiAgICBpZiAob2JqZWN0Lm1lc3NhZ2UgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubWVzc2FnZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLm1lc3NhZ2UgPSBTdHJpbmcob2JqZWN0Lm1lc3NhZ2UpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5tZXNzYWdlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1lc3NhZ2UgPSBtZXNzYWdlLm1lc3NhZ2UpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RFY2hvKTsKCiAgICBpZiAob2JqZWN0Lm1lc3NhZ2UgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubWVzc2FnZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLm1lc3NhZ2UgPSBvYmplY3QubWVzc2FnZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubWVzc2FnZSA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXF1ZXN0Rmx1c2ggPSB7fTsKZXhwb3J0IHZhciBSZXF1ZXN0Rmx1c2ggPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUoXykgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEZsdXNoKTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihfKSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0Rmx1c2gpOwoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04oXykgewogICAgdmFyIG9iaiA9IHt9OwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChfKSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0Rmx1c2gpOwoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXF1ZXN0SW5mbyA9IHsKICB2ZXJzaW9uOiAiIiwKICBibG9ja1ZlcnNpb246IDAsCiAgcDJwVmVyc2lvbjogMAp9OwpleHBvcnQgdmFyIFJlcXVlc3RJbmZvID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS52ZXJzaW9uICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS52ZXJzaW9uKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5ibG9ja1ZlcnNpb24gIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigxNikudWludDY0KG1lc3NhZ2UuYmxvY2tWZXJzaW9uKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5wMnBWZXJzaW9uICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMjQpLnVpbnQ2NChtZXNzYWdlLnAycFZlcnNpb24pOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RJbmZvKTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLnZlcnNpb24gPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5ibG9ja1ZlcnNpb24gPSBsb25nVG9OdW1iZXIocmVhZGVyLnVpbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLnAycFZlcnNpb24gPSBsb25nVG9OdW1iZXIocmVhZGVyLnVpbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RJbmZvKTsKCiAgICBpZiAob2JqZWN0LnZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmVyc2lvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZlcnNpb24gPSBTdHJpbmcob2JqZWN0LnZlcnNpb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52ZXJzaW9uID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5ibG9ja1ZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYmxvY2tWZXJzaW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYmxvY2tWZXJzaW9uID0gTnVtYmVyKG9iamVjdC5ibG9ja1ZlcnNpb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5ibG9ja1ZlcnNpb24gPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QucDJwVmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wMnBWZXJzaW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucDJwVmVyc2lvbiA9IE51bWJlcihvYmplY3QucDJwVmVyc2lvbik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnAycFZlcnNpb24gPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS52ZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai52ZXJzaW9uID0gbWVzc2FnZS52ZXJzaW9uKTsKICAgIG1lc3NhZ2UuYmxvY2tWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5ibG9ja1ZlcnNpb24gPSBtZXNzYWdlLmJsb2NrVmVyc2lvbik7CiAgICBtZXNzYWdlLnAycFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLnAycFZlcnNpb24gPSBtZXNzYWdlLnAycFZlcnNpb24pOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RJbmZvKTsKCiAgICBpZiAob2JqZWN0LnZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmVyc2lvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZlcnNpb24gPSBvYmplY3QudmVyc2lvbjsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmVyc2lvbiA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuYmxvY2tWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmJsb2NrVmVyc2lvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmJsb2NrVmVyc2lvbiA9IG9iamVjdC5ibG9ja1ZlcnNpb247CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmJsb2NrVmVyc2lvbiA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5wMnBWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnAycFZlcnNpb24gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5wMnBWZXJzaW9uID0gb2JqZWN0LnAycFZlcnNpb247CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnAycFZlcnNpb24gPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXF1ZXN0U2V0T3B0aW9uID0gewogIGtleTogIiIsCiAgdmFsdWU6ICIiCn07CmV4cG9ydCB2YXIgUmVxdWVzdFNldE9wdGlvbiA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2Uua2V5ICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5rZXkpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnZhbHVlICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS52YWx1ZSk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdFNldE9wdGlvbik7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5rZXkgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RTZXRPcHRpb24pOwoKICAgIGlmIChvYmplY3Qua2V5ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmtleSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmtleSA9IFN0cmluZyhvYmplY3Qua2V5KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uua2V5ID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC52YWx1ZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWx1ZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZhbHVlID0gU3RyaW5nKG9iamVjdC52YWx1ZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnZhbHVlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmtleSAhPT0gdW5kZWZpbmVkICYmIChvYmoua2V5ID0gbWVzc2FnZS5rZXkpOwogICAgbWVzc2FnZS52YWx1ZSAhPT0gdW5kZWZpbmVkICYmIChvYmoudmFsdWUgPSBtZXNzYWdlLnZhbHVlKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0U2V0T3B0aW9uKTsKCiAgICBpZiAob2JqZWN0LmtleSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5rZXkgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5rZXkgPSBvYmplY3Qua2V5OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5rZXkgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbHVlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZhbHVlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmFsdWUgPSBvYmplY3QudmFsdWU7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnZhbHVlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlcXVlc3RJbml0Q2hhaW4gPSB7CiAgY2hhaW5JZDogIiIsCiAgaW5pdGlhbEhlaWdodDogMAp9OwpleHBvcnQgdmFyIFJlcXVlc3RJbml0Q2hhaW4gPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLnRpbWUgIT09IHVuZGVmaW5lZCkgewogICAgICBUaW1lc3RhbXAuZW5jb2RlKHRvVGltZXN0YW1wKG1lc3NhZ2UudGltZSksIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuY2hhaW5JZCAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UuY2hhaW5JZCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zICE9PSB1bmRlZmluZWQpIHsKICAgICAgQ29uc2Vuc3VzUGFyYW1zLmVuY29kZShtZXNzYWdlLmNvbnNlbnN1c1BhcmFtcywgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobWVzc2FnZS52YWxpZGF0b3JzKSwKICAgICAgICBfc3RlcDsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgIHZhciB2ID0gX3N0ZXAudmFsdWU7CiAgICAgICAgVmFsaWRhdG9yVXBkYXRlLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvci5mKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuYXBwU3RhdGVCeXRlcy5sZW5ndGggIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig0MikuYnl0ZXMobWVzc2FnZS5hcHBTdGF0ZUJ5dGVzKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5pbml0aWFsSGVpZ2h0ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoNDgpLmludDY0KG1lc3NhZ2UuaW5pdGlhbEhlaWdodCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEluaXRDaGFpbik7CgogICAgbWVzc2FnZS52YWxpZGF0b3JzID0gW107CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS50aW1lID0gZnJvbVRpbWVzdGFtcChUaW1lc3RhbXAuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5jaGFpbklkID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zID0gQ29uc2Vuc3VzUGFyYW1zLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA0OgogICAgICAgICAgbWVzc2FnZS52YWxpZGF0b3JzLnB1c2goVmFsaWRhdG9yVXBkYXRlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNToKICAgICAgICAgIG1lc3NhZ2UuYXBwU3RhdGVCeXRlcyA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNjoKICAgICAgICAgIG1lc3NhZ2UuaW5pdGlhbEhlaWdodCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0SW5pdENoYWluKTsKCiAgICBtZXNzYWdlLnZhbGlkYXRvcnMgPSBbXTsKCiAgICBpZiAob2JqZWN0LnRpbWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudGltZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnRpbWUgPSBmcm9tSnNvblRpbWVzdGFtcChvYmplY3QudGltZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnRpbWUgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5jaGFpbklkICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNoYWluSWQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jaGFpbklkID0gU3RyaW5nKG9iamVjdC5jaGFpbklkKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY2hhaW5JZCA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuY29uc2Vuc3VzUGFyYW1zICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvbnNlbnN1c1BhcmFtcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvbnNlbnN1c1BhcmFtcyA9IENvbnNlbnN1c1BhcmFtcy5mcm9tSlNPTihvYmplY3QuY29uc2Vuc3VzUGFyYW1zKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QudmFsaWRhdG9ycyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxpZGF0b3JzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LnZhbGlkYXRvcnMpLAogICAgICAgICAgX3N0ZXAyOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLnZhbGlkYXRvcnMucHVzaChWYWxpZGF0b3JVcGRhdGUuZnJvbUpTT04oZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAob2JqZWN0LmFwcFN0YXRlQnl0ZXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYXBwU3RhdGVCeXRlcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmFwcFN0YXRlQnl0ZXMgPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0LmFwcFN0YXRlQnl0ZXMpOwogICAgfQoKICAgIGlmIChvYmplY3QuaW5pdGlhbEhlaWdodCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbml0aWFsSGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaW5pdGlhbEhlaWdodCA9IE51bWJlcihvYmplY3QuaW5pdGlhbEhlaWdodCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluaXRpYWxIZWlnaHQgPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS50aW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai50aW1lID0gbWVzc2FnZS50aW1lICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLnRpbWUudG9JU09TdHJpbmcoKSA6IG51bGwpOwogICAgbWVzc2FnZS5jaGFpbklkICE9PSB1bmRlZmluZWQgJiYgKG9iai5jaGFpbklkID0gbWVzc2FnZS5jaGFpbklkKTsKICAgIG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zICE9PSB1bmRlZmluZWQgJiYgKG9iai5jb25zZW5zdXNQYXJhbXMgPSBtZXNzYWdlLmNvbnNlbnN1c1BhcmFtcyA/IENvbnNlbnN1c1BhcmFtcy50b0pTT04obWVzc2FnZS5jb25zZW5zdXNQYXJhbXMpIDogdW5kZWZpbmVkKTsKCiAgICBpZiAobWVzc2FnZS52YWxpZGF0b3JzKSB7CiAgICAgIG9iai52YWxpZGF0b3JzID0gbWVzc2FnZS52YWxpZGF0b3JzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlID8gVmFsaWRhdG9yVXBkYXRlLnRvSlNPTihlKSA6IHVuZGVmaW5lZDsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmoudmFsaWRhdG9ycyA9IFtdOwogICAgfQoKICAgIG1lc3NhZ2UuYXBwU3RhdGVCeXRlcyAhPT0gdW5kZWZpbmVkICYmIChvYmouYXBwU3RhdGVCeXRlcyA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLmFwcFN0YXRlQnl0ZXMgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuYXBwU3RhdGVCeXRlcyA6IG5ldyBVaW50OEFycmF5KCkpKTsKICAgIG1lc3NhZ2UuaW5pdGlhbEhlaWdodCAhPT0gdW5kZWZpbmVkICYmIChvYmouaW5pdGlhbEhlaWdodCA9IG1lc3NhZ2UuaW5pdGlhbEhlaWdodCk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEluaXRDaGFpbik7CgogICAgbWVzc2FnZS52YWxpZGF0b3JzID0gW107CgogICAgaWYgKG9iamVjdC50aW1lICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnRpbWUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS50aW1lID0gb2JqZWN0LnRpbWU7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnRpbWUgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5jaGFpbklkICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNoYWluSWQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jaGFpbklkID0gb2JqZWN0LmNoYWluSWQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNoYWluSWQgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNvbnNlbnN1c1BhcmFtcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb25zZW5zdXNQYXJhbXMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb25zZW5zdXNQYXJhbXMgPSBDb25zZW5zdXNQYXJhbXMuZnJvbVBhcnRpYWwob2JqZWN0LmNvbnNlbnN1c1BhcmFtcyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvbnNlbnN1c1BhcmFtcyA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvcnMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9ycyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC52YWxpZGF0b3JzKSwKICAgICAgICAgIF9zdGVwMzsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAzLnZhbHVlOwogICAgICAgICAgbWVzc2FnZS52YWxpZGF0b3JzLnB1c2goVmFsaWRhdG9yVXBkYXRlLmZyb21QYXJ0aWFsKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgICB9CiAgICB9CgogICAgaWYgKG9iamVjdC5hcHBTdGF0ZUJ5dGVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmFwcFN0YXRlQnl0ZXMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5hcHBTdGF0ZUJ5dGVzID0gb2JqZWN0LmFwcFN0YXRlQnl0ZXM7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmFwcFN0YXRlQnl0ZXMgPSBuZXcgVWludDhBcnJheSgpOwogICAgfQoKICAgIGlmIChvYmplY3QuaW5pdGlhbEhlaWdodCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbml0aWFsSGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaW5pdGlhbEhlaWdodCA9IG9iamVjdC5pbml0aWFsSGVpZ2h0OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbml0aWFsSGVpZ2h0ID0gMDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVxdWVzdFF1ZXJ5ID0gewogIHBhdGg6ICIiLAogIGhlaWdodDogMCwKICBwcm92ZTogZmFsc2UKfTsKZXhwb3J0IHZhciBSZXF1ZXN0UXVlcnkgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmRhdGEubGVuZ3RoICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTApLmJ5dGVzKG1lc3NhZ2UuZGF0YSk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UucGF0aCAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UucGF0aCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuaGVpZ2h0ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMjQpLmludDY0KG1lc3NhZ2UuaGVpZ2h0KTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5wcm92ZSA9PT0gdHJ1ZSkgewogICAgICB3cml0ZXIudWludDMyKDMyKS5ib29sKG1lc3NhZ2UucHJvdmUpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RRdWVyeSk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5kYXRhID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5wYXRoID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLnByb3ZlID0gcmVhZGVyLmJvb2woKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RRdWVyeSk7CgogICAgaWYgKG9iamVjdC5kYXRhICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmRhdGEgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5kYXRhID0gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC5kYXRhKTsKICAgIH0KCiAgICBpZiAob2JqZWN0LnBhdGggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucGF0aCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnBhdGggPSBTdHJpbmcob2JqZWN0LnBhdGgpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5wYXRoID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gTnVtYmVyKG9iamVjdC5oZWlnaHQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QucHJvdmUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucHJvdmUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5wcm92ZSA9IEJvb2xlYW4ob2JqZWN0LnByb3ZlKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucHJvdmUgPSBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuZGF0YSAhPT0gdW5kZWZpbmVkICYmIChvYmouZGF0YSA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLmRhdGEgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuZGF0YSA6IG5ldyBVaW50OEFycmF5KCkpKTsKICAgIG1lc3NhZ2UucGF0aCAhPT0gdW5kZWZpbmVkICYmIChvYmoucGF0aCA9IG1lc3NhZ2UucGF0aCk7CiAgICBtZXNzYWdlLmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIChvYmouaGVpZ2h0ID0gbWVzc2FnZS5oZWlnaHQpOwogICAgbWVzc2FnZS5wcm92ZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucHJvdmUgPSBtZXNzYWdlLnByb3ZlKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0UXVlcnkpOwoKICAgIGlmIChvYmplY3QuZGF0YSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kYXRhICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGF0YSA9IG9iamVjdC5kYXRhOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kYXRhID0gbmV3IFVpbnQ4QXJyYXkoKTsKICAgIH0KCiAgICBpZiAob2JqZWN0LnBhdGggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucGF0aCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnBhdGggPSBvYmplY3QucGF0aDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucGF0aCA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmhlaWdodCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmhlaWdodCA9IG9iamVjdC5oZWlnaHQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmhlaWdodCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5wcm92ZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wcm92ZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnByb3ZlID0gb2JqZWN0LnByb3ZlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5wcm92ZSA9IGZhbHNlOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXF1ZXN0QmVnaW5CbG9jayA9IHt9OwpleHBvcnQgdmFyIFJlcXVlc3RCZWdpbkJsb2NrID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5oYXNoLmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDEwKS5ieXRlcyhtZXNzYWdlLmhhc2gpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmhlYWRlciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIEhlYWRlci5lbmNvZGUobWVzc2FnZS5oZWFkZXIsIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UubGFzdENvbW1pdEluZm8gIT09IHVuZGVmaW5lZCkgewogICAgICBMYXN0Q29tbWl0SW5mby5lbmNvZGUobWVzc2FnZS5sYXN0Q29tbWl0SW5mbywgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1lc3NhZ2UuYnl6YW50aW5lVmFsaWRhdG9ycyksCiAgICAgICAgX3N0ZXA0OwoKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yNC5zKCk7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIHYgPSBfc3RlcDQudmFsdWU7CiAgICAgICAgRXZpZGVuY2UuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3I0LmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RCZWdpbkJsb2NrKTsKCiAgICBtZXNzYWdlLmJ5emFudGluZVZhbGlkYXRvcnMgPSBbXTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmhhc2ggPSByZWFkZXIuYnl0ZXMoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmhlYWRlciA9IEhlYWRlci5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UubGFzdENvbW1pdEluZm8gPSBMYXN0Q29tbWl0SW5mby5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIG1lc3NhZ2UuYnl6YW50aW5lVmFsaWRhdG9ycy5wdXNoKEV2aWRlbmNlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEJlZ2luQmxvY2spOwoKICAgIG1lc3NhZ2UuYnl6YW50aW5lVmFsaWRhdG9ycyA9IFtdOwoKICAgIGlmIChvYmplY3QuaGFzaCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oYXNoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGFzaCA9IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QuaGFzaCk7CiAgICB9CgogICAgaWYgKG9iamVjdC5oZWFkZXIgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaGVhZGVyICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGVhZGVyID0gSGVhZGVyLmZyb21KU09OKG9iamVjdC5oZWFkZXIpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5oZWFkZXIgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5sYXN0Q29tbWl0SW5mbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5sYXN0Q29tbWl0SW5mbyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmxhc3RDb21taXRJbmZvID0gTGFzdENvbW1pdEluZm8uZnJvbUpTT04ob2JqZWN0Lmxhc3RDb21taXRJbmZvKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubGFzdENvbW1pdEluZm8gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5ieXphbnRpbmVWYWxpZGF0b3JzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmJ5emFudGluZVZhbGlkYXRvcnMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QuYnl6YW50aW5lVmFsaWRhdG9ycyksCiAgICAgICAgICBfc3RlcDU7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yNS5zKCk7ICEoX3N0ZXA1ID0gX2l0ZXJhdG9yNS5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwNS52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UuYnl6YW50aW5lVmFsaWRhdG9ycy5wdXNoKEV2aWRlbmNlLmZyb21KU09OKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjUuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjUuZigpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmhhc2ggIT09IHVuZGVmaW5lZCAmJiAob2JqLmhhc2ggPSBiYXNlNjRGcm9tQnl0ZXMobWVzc2FnZS5oYXNoICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLmhhc2ggOiBuZXcgVWludDhBcnJheSgpKSk7CiAgICBtZXNzYWdlLmhlYWRlciAhPT0gdW5kZWZpbmVkICYmIChvYmouaGVhZGVyID0gbWVzc2FnZS5oZWFkZXIgPyBIZWFkZXIudG9KU09OKG1lc3NhZ2UuaGVhZGVyKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmxhc3RDb21taXRJbmZvICE9PSB1bmRlZmluZWQgJiYgKG9iai5sYXN0Q29tbWl0SW5mbyA9IG1lc3NhZ2UubGFzdENvbW1pdEluZm8gPyBMYXN0Q29tbWl0SW5mby50b0pTT04obWVzc2FnZS5sYXN0Q29tbWl0SW5mbykgOiB1bmRlZmluZWQpOwoKICAgIGlmIChtZXNzYWdlLmJ5emFudGluZVZhbGlkYXRvcnMpIHsKICAgICAgb2JqLmJ5emFudGluZVZhbGlkYXRvcnMgPSBtZXNzYWdlLmJ5emFudGluZVZhbGlkYXRvcnMubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgPyBFdmlkZW5jZS50b0pTT04oZSkgOiB1bmRlZmluZWQ7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgb2JqLmJ5emFudGluZVZhbGlkYXRvcnMgPSBbXTsKICAgIH0KCiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEJlZ2luQmxvY2spOwoKICAgIG1lc3NhZ2UuYnl6YW50aW5lVmFsaWRhdG9ycyA9IFtdOwoKICAgIGlmIChvYmplY3QuaGFzaCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oYXNoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGFzaCA9IG9iamVjdC5oYXNoOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5oYXNoID0gbmV3IFVpbnQ4QXJyYXkoKTsKICAgIH0KCiAgICBpZiAob2JqZWN0LmhlYWRlciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oZWFkZXIgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oZWFkZXIgPSBIZWFkZXIuZnJvbVBhcnRpYWwob2JqZWN0LmhlYWRlcik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmhlYWRlciA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lmxhc3RDb21taXRJbmZvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmxhc3RDb21taXRJbmZvICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubGFzdENvbW1pdEluZm8gPSBMYXN0Q29tbWl0SW5mby5mcm9tUGFydGlhbChvYmplY3QubGFzdENvbW1pdEluZm8pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sYXN0Q29tbWl0SW5mbyA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmJ5emFudGluZVZhbGlkYXRvcnMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYnl6YW50aW5lVmFsaWRhdG9ycyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yNiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC5ieXphbnRpbmVWYWxpZGF0b3JzKSwKICAgICAgICAgIF9zdGVwNjsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I2LnMoKTsgIShfc3RlcDYgPSBfaXRlcmF0b3I2Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXA2LnZhbHVlOwogICAgICAgICAgbWVzc2FnZS5ieXphbnRpbmVWYWxpZGF0b3JzLnB1c2goRXZpZGVuY2UuZnJvbVBhcnRpYWwoZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yNi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yNi5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVxdWVzdENoZWNrVHggPSB7CiAgdHlwZTogMAp9OwpleHBvcnQgdmFyIFJlcXVlc3RDaGVja1R4ID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS50eC5sZW5ndGggIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigxMCkuYnl0ZXMobWVzc2FnZS50eCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UudHlwZSAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDE2KS5pbnQzMihtZXNzYWdlLnR5cGUpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RDaGVja1R4KTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLnR4ID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS50eXBlID0gcmVhZGVyLmludDMyKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0Q2hlY2tUeCk7CgogICAgaWYgKG9iamVjdC50eCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50eCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnR4ID0gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC50eCk7CiAgICB9CgogICAgaWYgKG9iamVjdC50eXBlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnR5cGUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS50eXBlID0gY2hlY2tUeFR5cGVGcm9tSlNPTihvYmplY3QudHlwZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnR5cGUgPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS50eCAhPT0gdW5kZWZpbmVkICYmIChvYmoudHggPSBiYXNlNjRGcm9tQnl0ZXMobWVzc2FnZS50eCAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS50eCA6IG5ldyBVaW50OEFycmF5KCkpKTsKICAgIG1lc3NhZ2UudHlwZSAhPT0gdW5kZWZpbmVkICYmIChvYmoudHlwZSA9IGNoZWNrVHhUeXBlVG9KU09OKG1lc3NhZ2UudHlwZSkpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RDaGVja1R4KTsKCiAgICBpZiAob2JqZWN0LnR4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnR4ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudHggPSBvYmplY3QudHg7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnR4ID0gbmV3IFVpbnQ4QXJyYXkoKTsKICAgIH0KCiAgICBpZiAob2JqZWN0LnR5cGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudHlwZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnR5cGUgPSBvYmplY3QudHlwZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudHlwZSA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlcXVlc3REZWxpdmVyVHggPSB7fTsKZXhwb3J0IHZhciBSZXF1ZXN0RGVsaXZlclR4ID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS50eC5sZW5ndGggIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigxMCkuYnl0ZXMobWVzc2FnZS50eCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdERlbGl2ZXJUeCk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS50eCA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdERlbGl2ZXJUeCk7CgogICAgaWYgKG9iamVjdC50eCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50eCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnR4ID0gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC50eCk7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLnR4ICE9PSB1bmRlZmluZWQgJiYgKG9iai50eCA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLnR4ICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLnR4IDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3REZWxpdmVyVHgpOwoKICAgIGlmIChvYmplY3QudHggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudHggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS50eCA9IG9iamVjdC50eDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudHggPSBuZXcgVWludDhBcnJheSgpOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXF1ZXN0RW5kQmxvY2sgPSB7CiAgaGVpZ2h0OiAwCn07CmV4cG9ydCB2YXIgUmVxdWVzdEVuZEJsb2NrID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5oZWlnaHQgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQ2NChtZXNzYWdlLmhlaWdodCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEVuZEJsb2NrKTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmhlaWdodCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0RW5kQmxvY2spOwoKICAgIGlmIChvYmplY3QuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmhlaWdodCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmhlaWdodCA9IE51bWJlcihvYmplY3QuaGVpZ2h0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gMDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5oZWlnaHQgPSBtZXNzYWdlLmhlaWdodCk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEVuZEJsb2NrKTsKCiAgICBpZiAob2JqZWN0LmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSBvYmplY3QuaGVpZ2h0OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXF1ZXN0Q29tbWl0ID0ge307CmV4cG9ydCB2YXIgUmVxdWVzdENvbW1pdCA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShfKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0Q29tbWl0KTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihfKSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0Q29tbWl0KTsKCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKF8pIHsKICAgIHZhciBvYmogPSB7fTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwoXykgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdENvbW1pdCk7CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlcXVlc3RMaXN0U25hcHNob3RzID0ge307CmV4cG9ydCB2YXIgUmVxdWVzdExpc3RTbmFwc2hvdHMgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUoXykgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdExpc3RTbmFwc2hvdHMpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKF8pIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RMaXN0U25hcHNob3RzKTsKCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKF8pIHsKICAgIHZhciBvYmogPSB7fTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwoXykgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdExpc3RTbmFwc2hvdHMpOwoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXF1ZXN0T2ZmZXJTbmFwc2hvdCA9IHt9OwpleHBvcnQgdmFyIFJlcXVlc3RPZmZlclNuYXBzaG90ID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5zbmFwc2hvdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFNuYXBzaG90LmVuY29kZShtZXNzYWdlLnNuYXBzaG90LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmFwcEhhc2gubGVuZ3RoICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTgpLmJ5dGVzKG1lc3NhZ2UuYXBwSGFzaCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdE9mZmVyU25hcHNob3QpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2Uuc25hcHNob3QgPSBTbmFwc2hvdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UuYXBwSGFzaCA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdE9mZmVyU25hcHNob3QpOwoKICAgIGlmIChvYmplY3Quc25hcHNob3QgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc25hcHNob3QgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5zbmFwc2hvdCA9IFNuYXBzaG90LmZyb21KU09OKG9iamVjdC5zbmFwc2hvdCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnNuYXBzaG90ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuYXBwSGFzaCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hcHBIYXNoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYXBwSGFzaCA9IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QuYXBwSGFzaCk7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLnNuYXBzaG90ICE9PSB1bmRlZmluZWQgJiYgKG9iai5zbmFwc2hvdCA9IG1lc3NhZ2Uuc25hcHNob3QgPyBTbmFwc2hvdC50b0pTT04obWVzc2FnZS5zbmFwc2hvdCkgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5hcHBIYXNoICE9PSB1bmRlZmluZWQgJiYgKG9iai5hcHBIYXNoID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UuYXBwSGFzaCAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS5hcHBIYXNoIDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RPZmZlclNuYXBzaG90KTsKCiAgICBpZiAob2JqZWN0LnNuYXBzaG90ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNuYXBzaG90ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uuc25hcHNob3QgPSBTbmFwc2hvdC5mcm9tUGFydGlhbChvYmplY3Quc25hcHNob3QpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5zbmFwc2hvdCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmFwcEhhc2ggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYXBwSGFzaCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmFwcEhhc2ggPSBvYmplY3QuYXBwSGFzaDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYXBwSGFzaCA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlcXVlc3RMb2FkU25hcHNob3RDaHVuayA9IHsKICBoZWlnaHQ6IDAsCiAgZm9ybWF0OiAwLAogIGNodW5rOiAwCn07CmV4cG9ydCB2YXIgUmVxdWVzdExvYWRTbmFwc2hvdENodW5rID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5oZWlnaHQgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig4KS51aW50NjQobWVzc2FnZS5oZWlnaHQpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmZvcm1hdCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDE2KS51aW50MzIobWVzc2FnZS5mb3JtYXQpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmNodW5rICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMjQpLnVpbnQzMihtZXNzYWdlLmNodW5rKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0TG9hZFNuYXBzaG90Q2h1bmspOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci51aW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5mb3JtYXQgPSByZWFkZXIudWludDMyKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5jaHVuayA9IHJlYWRlci51aW50MzIoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RMb2FkU25hcHNob3RDaHVuayk7CgogICAgaWYgKG9iamVjdC5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gTnVtYmVyKG9iamVjdC5oZWlnaHQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmZvcm1hdCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmZvcm1hdCA9IE51bWJlcihvYmplY3QuZm9ybWF0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZm9ybWF0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNodW5rICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNodW5rICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY2h1bmsgPSBOdW1iZXIob2JqZWN0LmNodW5rKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY2h1bmsgPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmhlaWdodCA9IG1lc3NhZ2UuaGVpZ2h0KTsKICAgIG1lc3NhZ2UuZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5mb3JtYXQgPSBtZXNzYWdlLmZvcm1hdCk7CiAgICBtZXNzYWdlLmNodW5rICE9PSB1bmRlZmluZWQgJiYgKG9iai5jaHVuayA9IG1lc3NhZ2UuY2h1bmspOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RMb2FkU25hcHNob3RDaHVuayk7CgogICAgaWYgKG9iamVjdC5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gb2JqZWN0LmhlaWdodDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmZvcm1hdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5mb3JtYXQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5mb3JtYXQgPSBvYmplY3QuZm9ybWF0OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5mb3JtYXQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuY2h1bmsgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY2h1bmsgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jaHVuayA9IG9iamVjdC5jaHVuazsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY2h1bmsgPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXF1ZXN0QXBwbHlTbmFwc2hvdENodW5rID0gewogIGluZGV4OiAwLAogIHNlbmRlcjogIiIKfTsKZXhwb3J0IHZhciBSZXF1ZXN0QXBwbHlTbmFwc2hvdENodW5rID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5pbmRleCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDgpLnVpbnQzMihtZXNzYWdlLmluZGV4KTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5jaHVuay5sZW5ndGggIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigxOCkuYnl0ZXMobWVzc2FnZS5jaHVuayk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2Uuc2VuZGVyICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5zZW5kZXIpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RBcHBseVNuYXBzaG90Q2h1bmspOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuaW5kZXggPSByZWFkZXIudWludDMyKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5jaHVuayA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2Uuc2VuZGVyID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEFwcGx5U25hcHNob3RDaHVuayk7CgogICAgaWYgKG9iamVjdC5pbmRleCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbmRleCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZGV4ID0gTnVtYmVyKG9iamVjdC5pbmRleCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluZGV4ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNodW5rICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNodW5rICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY2h1bmsgPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0LmNodW5rKTsKICAgIH0KCiAgICBpZiAob2JqZWN0LnNlbmRlciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zZW5kZXIgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5zZW5kZXIgPSBTdHJpbmcob2JqZWN0LnNlbmRlcik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnNlbmRlciA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5pbmRleCAhPT0gdW5kZWZpbmVkICYmIChvYmouaW5kZXggPSBtZXNzYWdlLmluZGV4KTsKICAgIG1lc3NhZ2UuY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNodW5rID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UuY2h1bmsgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuY2h1bmsgOiBuZXcgVWludDhBcnJheSgpKSk7CiAgICBtZXNzYWdlLnNlbmRlciAhPT0gdW5kZWZpbmVkICYmIChvYmouc2VuZGVyID0gbWVzc2FnZS5zZW5kZXIpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RBcHBseVNuYXBzaG90Q2h1bmspOwoKICAgIGlmIChvYmplY3QuaW5kZXggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5kZXggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmRleCA9IG9iamVjdC5pbmRleDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5kZXggPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuY2h1bmsgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY2h1bmsgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jaHVuayA9IG9iamVjdC5jaHVuazsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY2h1bmsgPSBuZXcgVWludDhBcnJheSgpOwogICAgfQoKICAgIGlmIChvYmplY3Quc2VuZGVyICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNlbmRlciAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnNlbmRlciA9IG9iamVjdC5zZW5kZXI7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnNlbmRlciA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXNwb25zZSA9IHt9OwpleHBvcnQgdmFyIFJlc3BvbnNlID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5leGNlcHRpb24gIT09IHVuZGVmaW5lZCkgewogICAgICBSZXNwb25zZUV4Y2VwdGlvbi5lbmNvZGUobWVzc2FnZS5leGNlcHRpb24sIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuZWNobyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlc3BvbnNlRWNoby5lbmNvZGUobWVzc2FnZS5lY2hvLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmZsdXNoICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVzcG9uc2VGbHVzaC5lbmNvZGUobWVzc2FnZS5mbHVzaCwgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5pbmZvICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVzcG9uc2VJbmZvLmVuY29kZShtZXNzYWdlLmluZm8sIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2Uuc2V0T3B0aW9uICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVzcG9uc2VTZXRPcHRpb24uZW5jb2RlKG1lc3NhZ2Uuc2V0T3B0aW9uLCB3cml0ZXIudWludDMyKDQyKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmluaXRDaGFpbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlc3BvbnNlSW5pdENoYWluLmVuY29kZShtZXNzYWdlLmluaXRDaGFpbiwgd3JpdGVyLnVpbnQzMig1MCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5xdWVyeSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlc3BvbnNlUXVlcnkuZW5jb2RlKG1lc3NhZ2UucXVlcnksIHdyaXRlci51aW50MzIoNTgpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuYmVnaW5CbG9jayAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlc3BvbnNlQmVnaW5CbG9jay5lbmNvZGUobWVzc2FnZS5iZWdpbkJsb2NrLCB3cml0ZXIudWludDMyKDY2KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmNoZWNrVHggIT09IHVuZGVmaW5lZCkgewogICAgICBSZXNwb25zZUNoZWNrVHguZW5jb2RlKG1lc3NhZ2UuY2hlY2tUeCwgd3JpdGVyLnVpbnQzMig3NCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5kZWxpdmVyVHggIT09IHVuZGVmaW5lZCkgewogICAgICBSZXNwb25zZURlbGl2ZXJUeC5lbmNvZGUobWVzc2FnZS5kZWxpdmVyVHgsIHdyaXRlci51aW50MzIoODIpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuZW5kQmxvY2sgIT09IHVuZGVmaW5lZCkgewogICAgICBSZXNwb25zZUVuZEJsb2NrLmVuY29kZShtZXNzYWdlLmVuZEJsb2NrLCB3cml0ZXIudWludDMyKDkwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmNvbW1pdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlc3BvbnNlQ29tbWl0LmVuY29kZShtZXNzYWdlLmNvbW1pdCwgd3JpdGVyLnVpbnQzMig5OCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5saXN0U25hcHNob3RzICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVzcG9uc2VMaXN0U25hcHNob3RzLmVuY29kZShtZXNzYWdlLmxpc3RTbmFwc2hvdHMsIHdyaXRlci51aW50MzIoMTA2KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLm9mZmVyU25hcHNob3QgIT09IHVuZGVmaW5lZCkgewogICAgICBSZXNwb25zZU9mZmVyU25hcHNob3QuZW5jb2RlKG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCwgd3JpdGVyLnVpbnQzMigxMTQpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UubG9hZFNuYXBzaG90Q2h1bmsgIT09IHVuZGVmaW5lZCkgewogICAgICBSZXNwb25zZUxvYWRTbmFwc2hvdENodW5rLmVuY29kZShtZXNzYWdlLmxvYWRTbmFwc2hvdENodW5rLCB3cml0ZXIudWludDMyKDEyMikuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmsgIT09IHVuZGVmaW5lZCkgewogICAgICBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVuay5lbmNvZGUobWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmssIHdyaXRlci51aW50MzIoMTMwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlKTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmV4Y2VwdGlvbiA9IFJlc3BvbnNlRXhjZXB0aW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5lY2hvID0gUmVzcG9uc2VFY2hvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5mbHVzaCA9IFJlc3BvbnNlRmx1c2guZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLmluZm8gPSBSZXNwb25zZUluZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgICBtZXNzYWdlLnNldE9wdGlvbiA9IFJlc3BvbnNlU2V0T3B0aW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA2OgogICAgICAgICAgbWVzc2FnZS5pbml0Q2hhaW4gPSBSZXNwb25zZUluaXRDaGFpbi5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIG1lc3NhZ2UucXVlcnkgPSBSZXNwb25zZVF1ZXJ5LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA4OgogICAgICAgICAgbWVzc2FnZS5iZWdpbkJsb2NrID0gUmVzcG9uc2VCZWdpbkJsb2NrLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA5OgogICAgICAgICAgbWVzc2FnZS5jaGVja1R4ID0gUmVzcG9uc2VDaGVja1R4LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICAgIG1lc3NhZ2UuZGVsaXZlclR4ID0gUmVzcG9uc2VEZWxpdmVyVHguZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDExOgogICAgICAgICAgbWVzc2FnZS5lbmRCbG9jayA9IFJlc3BvbnNlRW5kQmxvY2suZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDEyOgogICAgICAgICAgbWVzc2FnZS5jb21taXQgPSBSZXNwb25zZUNvbW1pdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTM6CiAgICAgICAgICBtZXNzYWdlLmxpc3RTbmFwc2hvdHMgPSBSZXNwb25zZUxpc3RTbmFwc2hvdHMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDE0OgogICAgICAgICAgbWVzc2FnZS5vZmZlclNuYXBzaG90ID0gUmVzcG9uc2VPZmZlclNuYXBzaG90LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAxNToKICAgICAgICAgIG1lc3NhZ2UubG9hZFNuYXBzaG90Q2h1bmsgPSBSZXNwb25zZUxvYWRTbmFwc2hvdENodW5rLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAxNjoKICAgICAgICAgIG1lc3NhZ2UuYXBwbHlTbmFwc2hvdENodW5rID0gUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmsuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlKTsKCiAgICBpZiAob2JqZWN0LmV4Y2VwdGlvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5leGNlcHRpb24gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5leGNlcHRpb24gPSBSZXNwb25zZUV4Y2VwdGlvbi5mcm9tSlNPTihvYmplY3QuZXhjZXB0aW9uKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZXhjZXB0aW9uID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuZWNobyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5lY2hvICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZWNobyA9IFJlc3BvbnNlRWNoby5mcm9tSlNPTihvYmplY3QuZWNobyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmVjaG8gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5mbHVzaCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5mbHVzaCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmZsdXNoID0gUmVzcG9uc2VGbHVzaC5mcm9tSlNPTihvYmplY3QuZmx1c2gpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5mbHVzaCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluZm8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5mbyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZm8gPSBSZXNwb25zZUluZm8uZnJvbUpTT04ob2JqZWN0LmluZm8pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbmZvID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3Quc2V0T3B0aW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNldE9wdGlvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnNldE9wdGlvbiA9IFJlc3BvbnNlU2V0T3B0aW9uLmZyb21KU09OKG9iamVjdC5zZXRPcHRpb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5zZXRPcHRpb24gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbml0Q2hhaW4gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5pdENoYWluICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaW5pdENoYWluID0gUmVzcG9uc2VJbml0Q2hhaW4uZnJvbUpTT04ob2JqZWN0LmluaXRDaGFpbik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluaXRDaGFpbiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnF1ZXJ5ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnF1ZXJ5ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucXVlcnkgPSBSZXNwb25zZVF1ZXJ5LmZyb21KU09OKG9iamVjdC5xdWVyeSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnF1ZXJ5ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuYmVnaW5CbG9jayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5iZWdpbkJsb2NrICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYmVnaW5CbG9jayA9IFJlc3BvbnNlQmVnaW5CbG9jay5mcm9tSlNPTihvYmplY3QuYmVnaW5CbG9jayk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmJlZ2luQmxvY2sgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5jaGVja1R4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNoZWNrVHggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jaGVja1R4ID0gUmVzcG9uc2VDaGVja1R4LmZyb21KU09OKG9iamVjdC5jaGVja1R4KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY2hlY2tUeCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmRlbGl2ZXJUeCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kZWxpdmVyVHggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5kZWxpdmVyVHggPSBSZXNwb25zZURlbGl2ZXJUeC5mcm9tSlNPTihvYmplY3QuZGVsaXZlclR4KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZGVsaXZlclR4ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuZW5kQmxvY2sgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZW5kQmxvY2sgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5lbmRCbG9jayA9IFJlc3BvbnNlRW5kQmxvY2suZnJvbUpTT04ob2JqZWN0LmVuZEJsb2NrKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZW5kQmxvY2sgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5jb21taXQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29tbWl0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29tbWl0ID0gUmVzcG9uc2VDb21taXQuZnJvbUpTT04ob2JqZWN0LmNvbW1pdCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvbW1pdCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lmxpc3RTbmFwc2hvdHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubGlzdFNuYXBzaG90cyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmxpc3RTbmFwc2hvdHMgPSBSZXNwb25zZUxpc3RTbmFwc2hvdHMuZnJvbUpTT04ob2JqZWN0Lmxpc3RTbmFwc2hvdHMpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5saXN0U25hcHNob3RzID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3Qub2ZmZXJTbmFwc2hvdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5vZmZlclNuYXBzaG90ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCA9IFJlc3BvbnNlT2ZmZXJTbmFwc2hvdC5mcm9tSlNPTihvYmplY3Qub2ZmZXJTbmFwc2hvdCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLm9mZmVyU25hcHNob3QgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5sb2FkU25hcHNob3RDaHVuayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5sb2FkU25hcHNob3RDaHVuayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmxvYWRTbmFwc2hvdENodW5rID0gUmVzcG9uc2VMb2FkU25hcHNob3RDaHVuay5mcm9tSlNPTihvYmplY3QubG9hZFNuYXBzaG90Q2h1bmspOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sb2FkU25hcHNob3RDaHVuayA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmFwcGx5U25hcHNob3RDaHVuayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hcHBseVNuYXBzaG90Q2h1bmsgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmsgPSBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVuay5mcm9tSlNPTihvYmplY3QuYXBwbHlTbmFwc2hvdENodW5rKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYXBwbHlTbmFwc2hvdENodW5rID0gdW5kZWZpbmVkOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5leGNlcHRpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLmV4Y2VwdGlvbiA9IG1lc3NhZ2UuZXhjZXB0aW9uID8gUmVzcG9uc2VFeGNlcHRpb24udG9KU09OKG1lc3NhZ2UuZXhjZXB0aW9uKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmVjaG8gIT09IHVuZGVmaW5lZCAmJiAob2JqLmVjaG8gPSBtZXNzYWdlLmVjaG8gPyBSZXNwb25zZUVjaG8udG9KU09OKG1lc3NhZ2UuZWNobykgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5mbHVzaCAhPT0gdW5kZWZpbmVkICYmIChvYmouZmx1c2ggPSBtZXNzYWdlLmZsdXNoID8gUmVzcG9uc2VGbHVzaC50b0pTT04obWVzc2FnZS5mbHVzaCkgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5pbmZvICE9PSB1bmRlZmluZWQgJiYgKG9iai5pbmZvID0gbWVzc2FnZS5pbmZvID8gUmVzcG9uc2VJbmZvLnRvSlNPTihtZXNzYWdlLmluZm8pIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2Uuc2V0T3B0aW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5zZXRPcHRpb24gPSBtZXNzYWdlLnNldE9wdGlvbiA/IFJlc3BvbnNlU2V0T3B0aW9uLnRvSlNPTihtZXNzYWdlLnNldE9wdGlvbikgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5pbml0Q2hhaW4gIT09IHVuZGVmaW5lZCAmJiAob2JqLmluaXRDaGFpbiA9IG1lc3NhZ2UuaW5pdENoYWluID8gUmVzcG9uc2VJbml0Q2hhaW4udG9KU09OKG1lc3NhZ2UuaW5pdENoYWluKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLnF1ZXJ5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5xdWVyeSA9IG1lc3NhZ2UucXVlcnkgPyBSZXNwb25zZVF1ZXJ5LnRvSlNPTihtZXNzYWdlLnF1ZXJ5KSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmJlZ2luQmxvY2sgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJlZ2luQmxvY2sgPSBtZXNzYWdlLmJlZ2luQmxvY2sgPyBSZXNwb25zZUJlZ2luQmxvY2sudG9KU09OKG1lc3NhZ2UuYmVnaW5CbG9jaykgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5jaGVja1R4ICE9PSB1bmRlZmluZWQgJiYgKG9iai5jaGVja1R4ID0gbWVzc2FnZS5jaGVja1R4ID8gUmVzcG9uc2VDaGVja1R4LnRvSlNPTihtZXNzYWdlLmNoZWNrVHgpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UuZGVsaXZlclR4ICE9PSB1bmRlZmluZWQgJiYgKG9iai5kZWxpdmVyVHggPSBtZXNzYWdlLmRlbGl2ZXJUeCA/IFJlc3BvbnNlRGVsaXZlclR4LnRvSlNPTihtZXNzYWdlLmRlbGl2ZXJUeCkgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5lbmRCbG9jayAhPT0gdW5kZWZpbmVkICYmIChvYmouZW5kQmxvY2sgPSBtZXNzYWdlLmVuZEJsb2NrID8gUmVzcG9uc2VFbmRCbG9jay50b0pTT04obWVzc2FnZS5lbmRCbG9jaykgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5jb21taXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNvbW1pdCA9IG1lc3NhZ2UuY29tbWl0ID8gUmVzcG9uc2VDb21taXQudG9KU09OKG1lc3NhZ2UuY29tbWl0KSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmxpc3RTbmFwc2hvdHMgIT09IHVuZGVmaW5lZCAmJiAob2JqLmxpc3RTbmFwc2hvdHMgPSBtZXNzYWdlLmxpc3RTbmFwc2hvdHMgPyBSZXNwb25zZUxpc3RTbmFwc2hvdHMudG9KU09OKG1lc3NhZ2UubGlzdFNuYXBzaG90cykgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5vZmZlclNuYXBzaG90ICE9PSB1bmRlZmluZWQgJiYgKG9iai5vZmZlclNuYXBzaG90ID0gbWVzc2FnZS5vZmZlclNuYXBzaG90ID8gUmVzcG9uc2VPZmZlclNuYXBzaG90LnRvSlNPTihtZXNzYWdlLm9mZmVyU25hcHNob3QpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UubG9hZFNuYXBzaG90Q2h1bmsgIT09IHVuZGVmaW5lZCAmJiAob2JqLmxvYWRTbmFwc2hvdENodW5rID0gbWVzc2FnZS5sb2FkU25hcHNob3RDaHVuayA/IFJlc3BvbnNlTG9hZFNuYXBzaG90Q2h1bmsudG9KU09OKG1lc3NhZ2UubG9hZFNuYXBzaG90Q2h1bmspIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UuYXBwbHlTbmFwc2hvdENodW5rICE9PSB1bmRlZmluZWQgJiYgKG9iai5hcHBseVNuYXBzaG90Q2h1bmsgPSBtZXNzYWdlLmFwcGx5U25hcHNob3RDaHVuayA/IFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rLnRvSlNPTihtZXNzYWdlLmFwcGx5U25hcHNob3RDaHVuaykgOiB1bmRlZmluZWQpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlKTsKCiAgICBpZiAob2JqZWN0LmV4Y2VwdGlvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5leGNlcHRpb24gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5leGNlcHRpb24gPSBSZXNwb25zZUV4Y2VwdGlvbi5mcm9tUGFydGlhbChvYmplY3QuZXhjZXB0aW9uKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZXhjZXB0aW9uID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuZWNobyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5lY2hvICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZWNobyA9IFJlc3BvbnNlRWNoby5mcm9tUGFydGlhbChvYmplY3QuZWNobyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmVjaG8gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5mbHVzaCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5mbHVzaCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmZsdXNoID0gUmVzcG9uc2VGbHVzaC5mcm9tUGFydGlhbChvYmplY3QuZmx1c2gpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5mbHVzaCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluZm8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5mbyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZm8gPSBSZXNwb25zZUluZm8uZnJvbVBhcnRpYWwob2JqZWN0LmluZm8pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbmZvID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3Quc2V0T3B0aW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNldE9wdGlvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnNldE9wdGlvbiA9IFJlc3BvbnNlU2V0T3B0aW9uLmZyb21QYXJ0aWFsKG9iamVjdC5zZXRPcHRpb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5zZXRPcHRpb24gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbml0Q2hhaW4gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5pdENoYWluICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaW5pdENoYWluID0gUmVzcG9uc2VJbml0Q2hhaW4uZnJvbVBhcnRpYWwob2JqZWN0LmluaXRDaGFpbik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluaXRDaGFpbiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnF1ZXJ5ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnF1ZXJ5ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucXVlcnkgPSBSZXNwb25zZVF1ZXJ5LmZyb21QYXJ0aWFsKG9iamVjdC5xdWVyeSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnF1ZXJ5ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuYmVnaW5CbG9jayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5iZWdpbkJsb2NrICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYmVnaW5CbG9jayA9IFJlc3BvbnNlQmVnaW5CbG9jay5mcm9tUGFydGlhbChvYmplY3QuYmVnaW5CbG9jayk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmJlZ2luQmxvY2sgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5jaGVja1R4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNoZWNrVHggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jaGVja1R4ID0gUmVzcG9uc2VDaGVja1R4LmZyb21QYXJ0aWFsKG9iamVjdC5jaGVja1R4KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY2hlY2tUeCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmRlbGl2ZXJUeCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kZWxpdmVyVHggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5kZWxpdmVyVHggPSBSZXNwb25zZURlbGl2ZXJUeC5mcm9tUGFydGlhbChvYmplY3QuZGVsaXZlclR4KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZGVsaXZlclR4ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuZW5kQmxvY2sgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZW5kQmxvY2sgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5lbmRCbG9jayA9IFJlc3BvbnNlRW5kQmxvY2suZnJvbVBhcnRpYWwob2JqZWN0LmVuZEJsb2NrKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZW5kQmxvY2sgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5jb21taXQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29tbWl0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29tbWl0ID0gUmVzcG9uc2VDb21taXQuZnJvbVBhcnRpYWwob2JqZWN0LmNvbW1pdCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvbW1pdCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lmxpc3RTbmFwc2hvdHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubGlzdFNuYXBzaG90cyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmxpc3RTbmFwc2hvdHMgPSBSZXNwb25zZUxpc3RTbmFwc2hvdHMuZnJvbVBhcnRpYWwob2JqZWN0Lmxpc3RTbmFwc2hvdHMpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5saXN0U25hcHNob3RzID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3Qub2ZmZXJTbmFwc2hvdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5vZmZlclNuYXBzaG90ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCA9IFJlc3BvbnNlT2ZmZXJTbmFwc2hvdC5mcm9tUGFydGlhbChvYmplY3Qub2ZmZXJTbmFwc2hvdCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLm9mZmVyU25hcHNob3QgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5sb2FkU25hcHNob3RDaHVuayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5sb2FkU25hcHNob3RDaHVuayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmxvYWRTbmFwc2hvdENodW5rID0gUmVzcG9uc2VMb2FkU25hcHNob3RDaHVuay5mcm9tUGFydGlhbChvYmplY3QubG9hZFNuYXBzaG90Q2h1bmspOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sb2FkU25hcHNob3RDaHVuayA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmFwcGx5U25hcHNob3RDaHVuayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hcHBseVNuYXBzaG90Q2h1bmsgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmsgPSBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVuay5mcm9tUGFydGlhbChvYmplY3QuYXBwbHlTbmFwc2hvdENodW5rKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYXBwbHlTbmFwc2hvdENodW5rID0gdW5kZWZpbmVkOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXNwb25zZUV4Y2VwdGlvbiA9IHsKICBlcnJvcjogIiIKfTsKZXhwb3J0IHZhciBSZXNwb25zZUV4Y2VwdGlvbiA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UuZXJyb3IgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmVycm9yKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUV4Y2VwdGlvbik7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5lcnJvciA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlRXhjZXB0aW9uKTsKCiAgICBpZiAob2JqZWN0LmVycm9yICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmVycm9yICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZXJyb3IgPSBTdHJpbmcob2JqZWN0LmVycm9yKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZXJyb3IgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuZXJyb3IgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVycm9yID0gbWVzc2FnZS5lcnJvcik7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VFeGNlcHRpb24pOwoKICAgIGlmIChvYmplY3QuZXJyb3IgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZXJyb3IgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5lcnJvciA9IG9iamVjdC5lcnJvcjsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZXJyb3IgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVzcG9uc2VFY2hvID0gewogIG1lc3NhZ2U6ICIiCn07CmV4cG9ydCB2YXIgUmVzcG9uc2VFY2hvID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5tZXNzYWdlICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5tZXNzYWdlKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUVjaG8pOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZSA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlRWNobyk7CgogICAgaWYgKG9iamVjdC5tZXNzYWdlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm1lc3NhZ2UgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5tZXNzYWdlID0gU3RyaW5nKG9iamVjdC5tZXNzYWdlKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubWVzc2FnZSA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5tZXNzYWdlICE9PSB1bmRlZmluZWQgJiYgKG9iai5tZXNzYWdlID0gbWVzc2FnZS5tZXNzYWdlKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUVjaG8pOwoKICAgIGlmIChvYmplY3QubWVzc2FnZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5tZXNzYWdlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubWVzc2FnZSA9IG9iamVjdC5tZXNzYWdlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5tZXNzYWdlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlc3BvbnNlRmx1c2ggPSB7fTsKZXhwb3J0IHZhciBSZXNwb25zZUZsdXNoID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKF8pIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlRmx1c2gpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKF8pIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlRmx1c2gpOwoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04oXykgewogICAgdmFyIG9iaiA9IHt9OwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChfKSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUZsdXNoKTsKCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVzcG9uc2VJbmZvID0gewogIGRhdGE6ICIiLAogIHZlcnNpb246ICIiLAogIGFwcFZlcnNpb246IDAsCiAgbGFzdEJsb2NrSGVpZ2h0OiAwCn07CmV4cG9ydCB2YXIgUmVzcG9uc2VJbmZvID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5kYXRhICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5kYXRhKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS52ZXJzaW9uICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS52ZXJzaW9uKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5hcHBWZXJzaW9uICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMjQpLnVpbnQ2NChtZXNzYWdlLmFwcFZlcnNpb24pOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmxhc3RCbG9ja0hlaWdodCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDMyKS5pbnQ2NChtZXNzYWdlLmxhc3RCbG9ja0hlaWdodCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UubGFzdEJsb2NrQXBwSGFzaC5sZW5ndGggIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig0MikuYnl0ZXMobWVzc2FnZS5sYXN0QmxvY2tBcHBIYXNoKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUluZm8pOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuZGF0YSA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLnZlcnNpb24gPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5hcHBWZXJzaW9uID0gbG9uZ1RvTnVtYmVyKHJlYWRlci51aW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA0OgogICAgICAgICAgbWVzc2FnZS5sYXN0QmxvY2tIZWlnaHQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNToKICAgICAgICAgIG1lc3NhZ2UubGFzdEJsb2NrQXBwSGFzaCA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VJbmZvKTsKCiAgICBpZiAob2JqZWN0LmRhdGEgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGF0YSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRhdGEgPSBTdHJpbmcob2JqZWN0LmRhdGEpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kYXRhID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC52ZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZlcnNpb24gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52ZXJzaW9uID0gU3RyaW5nKG9iamVjdC52ZXJzaW9uKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmVyc2lvbiA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuYXBwVmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hcHBWZXJzaW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYXBwVmVyc2lvbiA9IE51bWJlcihvYmplY3QuYXBwVmVyc2lvbik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmFwcFZlcnNpb24gPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QubGFzdEJsb2NrSGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmxhc3RCbG9ja0hlaWdodCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmxhc3RCbG9ja0hlaWdodCA9IE51bWJlcihvYmplY3QubGFzdEJsb2NrSGVpZ2h0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubGFzdEJsb2NrSGVpZ2h0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lmxhc3RCbG9ja0FwcEhhc2ggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubGFzdEJsb2NrQXBwSGFzaCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmxhc3RCbG9ja0FwcEhhc2ggPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0Lmxhc3RCbG9ja0FwcEhhc2gpOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5kYXRhICE9PSB1bmRlZmluZWQgJiYgKG9iai5kYXRhID0gbWVzc2FnZS5kYXRhKTsKICAgIG1lc3NhZ2UudmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIChvYmoudmVyc2lvbiA9IG1lc3NhZ2UudmVyc2lvbik7CiAgICBtZXNzYWdlLmFwcFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLmFwcFZlcnNpb24gPSBtZXNzYWdlLmFwcFZlcnNpb24pOwogICAgbWVzc2FnZS5sYXN0QmxvY2tIZWlnaHQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmxhc3RCbG9ja0hlaWdodCA9IG1lc3NhZ2UubGFzdEJsb2NrSGVpZ2h0KTsKICAgIG1lc3NhZ2UubGFzdEJsb2NrQXBwSGFzaCAhPT0gdW5kZWZpbmVkICYmIChvYmoubGFzdEJsb2NrQXBwSGFzaCA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLmxhc3RCbG9ja0FwcEhhc2ggIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UubGFzdEJsb2NrQXBwSGFzaCA6IG5ldyBVaW50OEFycmF5KCkpKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUluZm8pOwoKICAgIGlmIChvYmplY3QuZGF0YSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kYXRhICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGF0YSA9IG9iamVjdC5kYXRhOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kYXRhID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC52ZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZlcnNpb24gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52ZXJzaW9uID0gb2JqZWN0LnZlcnNpb247CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnZlcnNpb24gPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmFwcFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYXBwVmVyc2lvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmFwcFZlcnNpb24gPSBvYmplY3QuYXBwVmVyc2lvbjsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYXBwVmVyc2lvbiA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5sYXN0QmxvY2tIZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubGFzdEJsb2NrSGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubGFzdEJsb2NrSGVpZ2h0ID0gb2JqZWN0Lmxhc3RCbG9ja0hlaWdodDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubGFzdEJsb2NrSGVpZ2h0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lmxhc3RCbG9ja0FwcEhhc2ggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubGFzdEJsb2NrQXBwSGFzaCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmxhc3RCbG9ja0FwcEhhc2ggPSBvYmplY3QubGFzdEJsb2NrQXBwSGFzaDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubGFzdEJsb2NrQXBwSGFzaCA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlc3BvbnNlU2V0T3B0aW9uID0gewogIGNvZGU6IDAsCiAgbG9nOiAiIiwKICBpbmZvOiAiIgp9OwpleHBvcnQgdmFyIFJlc3BvbnNlU2V0T3B0aW9uID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5jb2RlICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoOCkudWludDMyKG1lc3NhZ2UuY29kZSk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UubG9nICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5sb2cpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmluZm8gIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLmluZm8pOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlU2V0T3B0aW9uKTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmNvZGUgPSByZWFkZXIudWludDMyKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5sb2cgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA0OgogICAgICAgICAgbWVzc2FnZS5pbmZvID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VTZXRPcHRpb24pOwoKICAgIGlmIChvYmplY3QuY29kZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb2RlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29kZSA9IE51bWJlcihvYmplY3QuY29kZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvZGUgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QubG9nICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmxvZyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmxvZyA9IFN0cmluZyhvYmplY3QubG9nKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubG9nID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbmZvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZm8gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmZvID0gU3RyaW5nKG9iamVjdC5pbmZvKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5mbyA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5jb2RlICE9PSB1bmRlZmluZWQgJiYgKG9iai5jb2RlID0gbWVzc2FnZS5jb2RlKTsKICAgIG1lc3NhZ2UubG9nICE9PSB1bmRlZmluZWQgJiYgKG9iai5sb2cgPSBtZXNzYWdlLmxvZyk7CiAgICBtZXNzYWdlLmluZm8gIT09IHVuZGVmaW5lZCAmJiAob2JqLmluZm8gPSBtZXNzYWdlLmluZm8pOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlU2V0T3B0aW9uKTsKCiAgICBpZiAob2JqZWN0LmNvZGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29kZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvZGUgPSBvYmplY3QuY29kZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29kZSA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5sb2cgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubG9nICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubG9nID0gb2JqZWN0LmxvZzsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubG9nID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbmZvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZm8gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmZvID0gb2JqZWN0LmluZm87CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluZm8gPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVzcG9uc2VJbml0Q2hhaW4gPSB7fTsKZXhwb3J0IHZhciBSZXNwb25zZUluaXRDaGFpbiA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zICE9PSB1bmRlZmluZWQpIHsKICAgICAgQ29uc2Vuc3VzUGFyYW1zLmVuY29kZShtZXNzYWdlLmNvbnNlbnN1c1BhcmFtcywgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICB2YXIgX2l0ZXJhdG9yNyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1lc3NhZ2UudmFsaWRhdG9ycyksCiAgICAgICAgX3N0ZXA3OwoKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yNy5zKCk7ICEoX3N0ZXA3ID0gX2l0ZXJhdG9yNy5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIHYgPSBfc3RlcDcudmFsdWU7CiAgICAgICAgVmFsaWRhdG9yVXBkYXRlLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yNy5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3I3LmYoKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5hcHBIYXNoLmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDI2KS5ieXRlcyhtZXNzYWdlLmFwcEhhc2gpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlSW5pdENoYWluKTsKCiAgICBtZXNzYWdlLnZhbGlkYXRvcnMgPSBbXTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmNvbnNlbnN1c1BhcmFtcyA9IENvbnNlbnN1c1BhcmFtcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UudmFsaWRhdG9ycy5wdXNoKFZhbGlkYXRvclVwZGF0ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLmFwcEhhc2ggPSByZWFkZXIuYnl0ZXMoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlSW5pdENoYWluKTsKCiAgICBtZXNzYWdlLnZhbGlkYXRvcnMgPSBbXTsKCiAgICBpZiAob2JqZWN0LmNvbnNlbnN1c1BhcmFtcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb25zZW5zdXNQYXJhbXMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb25zZW5zdXNQYXJhbXMgPSBDb25zZW5zdXNQYXJhbXMuZnJvbUpTT04ob2JqZWN0LmNvbnNlbnN1c1BhcmFtcyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvbnNlbnN1c1BhcmFtcyA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvcnMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9ycyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yOCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC52YWxpZGF0b3JzKSwKICAgICAgICAgIF9zdGVwODsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I4LnMoKTsgIShfc3RlcDggPSBfaXRlcmF0b3I4Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXA4LnZhbHVlOwogICAgICAgICAgbWVzc2FnZS52YWxpZGF0b3JzLnB1c2goVmFsaWRhdG9yVXBkYXRlLmZyb21KU09OKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjguZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjguZigpOwogICAgICB9CiAgICB9CgogICAgaWYgKG9iamVjdC5hcHBIYXNoICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmFwcEhhc2ggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5hcHBIYXNoID0gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC5hcHBIYXNoKTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zICE9PSB1bmRlZmluZWQgJiYgKG9iai5jb25zZW5zdXNQYXJhbXMgPSBtZXNzYWdlLmNvbnNlbnN1c1BhcmFtcyA/IENvbnNlbnN1c1BhcmFtcy50b0pTT04obWVzc2FnZS5jb25zZW5zdXNQYXJhbXMpIDogdW5kZWZpbmVkKTsKCiAgICBpZiAobWVzc2FnZS52YWxpZGF0b3JzKSB7CiAgICAgIG9iai52YWxpZGF0b3JzID0gbWVzc2FnZS52YWxpZGF0b3JzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlID8gVmFsaWRhdG9yVXBkYXRlLnRvSlNPTihlKSA6IHVuZGVmaW5lZDsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmoudmFsaWRhdG9ycyA9IFtdOwogICAgfQoKICAgIG1lc3NhZ2UuYXBwSGFzaCAhPT0gdW5kZWZpbmVkICYmIChvYmouYXBwSGFzaCA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLmFwcEhhc2ggIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuYXBwSGFzaCA6IG5ldyBVaW50OEFycmF5KCkpKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUluaXRDaGFpbik7CgogICAgbWVzc2FnZS52YWxpZGF0b3JzID0gW107CgogICAgaWYgKG9iamVjdC5jb25zZW5zdXNQYXJhbXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29uc2Vuc3VzUGFyYW1zICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zID0gQ29uc2Vuc3VzUGFyYW1zLmZyb21QYXJ0aWFsKG9iamVjdC5jb25zZW5zdXNQYXJhbXMpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb25zZW5zdXNQYXJhbXMgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC52YWxpZGF0b3JzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZhbGlkYXRvcnMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjkgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QudmFsaWRhdG9ycyksCiAgICAgICAgICBfc3RlcDk7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yOS5zKCk7ICEoX3N0ZXA5ID0gX2l0ZXJhdG9yOS5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwOS52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UudmFsaWRhdG9ycy5wdXNoKFZhbGlkYXRvclVwZGF0ZS5mcm9tUGFydGlhbChlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I5LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I5LmYoKTsKICAgICAgfQogICAgfQoKICAgIGlmIChvYmplY3QuYXBwSGFzaCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hcHBIYXNoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYXBwSGFzaCA9IG9iamVjdC5hcHBIYXNoOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5hcHBIYXNoID0gbmV3IFVpbnQ4QXJyYXkoKTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVzcG9uc2VRdWVyeSA9IHsKICBjb2RlOiAwLAogIGxvZzogIiIsCiAgaW5mbzogIiIsCiAgaW5kZXg6IDAsCiAgaGVpZ2h0OiAwLAogIGNvZGVzcGFjZTogIiIKfTsKZXhwb3J0IHZhciBSZXNwb25zZVF1ZXJ5ID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5jb2RlICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoOCkudWludDMyKG1lc3NhZ2UuY29kZSk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UubG9nICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5sb2cpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmluZm8gIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLmluZm8pOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmluZGV4ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoNDApLmludDY0KG1lc3NhZ2UuaW5kZXgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmtleS5sZW5ndGggIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig1MCkuYnl0ZXMobWVzc2FnZS5rZXkpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnZhbHVlLmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDU4KS5ieXRlcyhtZXNzYWdlLnZhbHVlKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5wcm9vZk9wcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFByb29mT3BzLmVuY29kZShtZXNzYWdlLnByb29mT3BzLCB3cml0ZXIudWludDMyKDY2KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmhlaWdodCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDcyKS5pbnQ2NChtZXNzYWdlLmhlaWdodCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuY29kZXNwYWNlICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDgyKS5zdHJpbmcobWVzc2FnZS5jb2Rlc3BhY2UpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlUXVlcnkpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuY29kZSA9IHJlYWRlci51aW50MzIoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLmxvZyA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLmluZm8gPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA1OgogICAgICAgICAgbWVzc2FnZS5pbmRleCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA2OgogICAgICAgICAgbWVzc2FnZS5rZXkgPSByZWFkZXIuYnl0ZXMoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBtZXNzYWdlLnZhbHVlID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA4OgogICAgICAgICAgbWVzc2FnZS5wcm9vZk9wcyA9IFByb29mT3BzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA5OgogICAgICAgICAgbWVzc2FnZS5oZWlnaHQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBtZXNzYWdlLmNvZGVzcGFjZSA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlUXVlcnkpOwoKICAgIGlmIChvYmplY3QuY29kZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb2RlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29kZSA9IE51bWJlcihvYmplY3QuY29kZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvZGUgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QubG9nICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmxvZyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmxvZyA9IFN0cmluZyhvYmplY3QubG9nKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubG9nID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbmZvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZm8gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmZvID0gU3RyaW5nKG9iamVjdC5pbmZvKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5mbyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuaW5kZXggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5kZXggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmRleCA9IE51bWJlcihvYmplY3QuaW5kZXgpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbmRleCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5rZXkgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Qua2V5ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uua2V5ID0gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC5rZXkpOwogICAgfQoKICAgIGlmIChvYmplY3QudmFsdWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsdWUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52YWx1ZSA9IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QudmFsdWUpOwogICAgfQoKICAgIGlmIChvYmplY3QucHJvb2ZPcHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucHJvb2ZPcHMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5wcm9vZk9wcyA9IFByb29mT3BzLmZyb21KU09OKG9iamVjdC5wcm9vZk9wcyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnByb29mT3BzID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmhlaWdodCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmhlaWdodCA9IE51bWJlcihvYmplY3QuaGVpZ2h0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNvZGVzcGFjZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb2Rlc3BhY2UgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb2Rlc3BhY2UgPSBTdHJpbmcob2JqZWN0LmNvZGVzcGFjZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvZGVzcGFjZSA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5jb2RlICE9PSB1bmRlZmluZWQgJiYgKG9iai5jb2RlID0gbWVzc2FnZS5jb2RlKTsKICAgIG1lc3NhZ2UubG9nICE9PSB1bmRlZmluZWQgJiYgKG9iai5sb2cgPSBtZXNzYWdlLmxvZyk7CiAgICBtZXNzYWdlLmluZm8gIT09IHVuZGVmaW5lZCAmJiAob2JqLmluZm8gPSBtZXNzYWdlLmluZm8pOwogICAgbWVzc2FnZS5pbmRleCAhPT0gdW5kZWZpbmVkICYmIChvYmouaW5kZXggPSBtZXNzYWdlLmluZGV4KTsKICAgIG1lc3NhZ2Uua2V5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5rZXkgPSBiYXNlNjRGcm9tQnl0ZXMobWVzc2FnZS5rZXkgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2Uua2V5IDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgbWVzc2FnZS52YWx1ZSAhPT0gdW5kZWZpbmVkICYmIChvYmoudmFsdWUgPSBiYXNlNjRGcm9tQnl0ZXMobWVzc2FnZS52YWx1ZSAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS52YWx1ZSA6IG5ldyBVaW50OEFycmF5KCkpKTsKICAgIG1lc3NhZ2UucHJvb2ZPcHMgIT09IHVuZGVmaW5lZCAmJiAob2JqLnByb29mT3BzID0gbWVzc2FnZS5wcm9vZk9wcyA/IFByb29mT3BzLnRvSlNPTihtZXNzYWdlLnByb29mT3BzKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIChvYmouaGVpZ2h0ID0gbWVzc2FnZS5oZWlnaHQpOwogICAgbWVzc2FnZS5jb2Rlc3BhY2UgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNvZGVzcGFjZSA9IG1lc3NhZ2UuY29kZXNwYWNlKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZVF1ZXJ5KTsKCiAgICBpZiAob2JqZWN0LmNvZGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29kZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvZGUgPSBvYmplY3QuY29kZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29kZSA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5sb2cgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubG9nICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubG9nID0gb2JqZWN0LmxvZzsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubG9nID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbmZvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZm8gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmZvID0gb2JqZWN0LmluZm87CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluZm8gPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluZGV4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZGV4ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaW5kZXggPSBvYmplY3QuaW5kZXg7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluZGV4ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmtleSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5rZXkgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5rZXkgPSBvYmplY3Qua2V5OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5rZXkgPSBuZXcgVWludDhBcnJheSgpOwogICAgfQoKICAgIGlmIChvYmplY3QudmFsdWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsdWUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52YWx1ZSA9IG9iamVjdC52YWx1ZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmFsdWUgPSBuZXcgVWludDhBcnJheSgpOwogICAgfQoKICAgIGlmIChvYmplY3QucHJvb2ZPcHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucHJvb2ZPcHMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5wcm9vZk9wcyA9IFByb29mT3BzLmZyb21QYXJ0aWFsKG9iamVjdC5wcm9vZk9wcyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnByb29mT3BzID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmhlaWdodCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmhlaWdodCA9IG9iamVjdC5oZWlnaHQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmhlaWdodCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5jb2Rlc3BhY2UgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29kZXNwYWNlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29kZXNwYWNlID0gb2JqZWN0LmNvZGVzcGFjZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29kZXNwYWNlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlc3BvbnNlQmVnaW5CbG9jayA9IHt9OwpleHBvcnQgdmFyIFJlc3BvbnNlQmVnaW5CbG9jayA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgdmFyIF9pdGVyYXRvcjEwID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobWVzc2FnZS5ldmVudHMpLAogICAgICAgIF9zdGVwMTA7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IxMC5zKCk7ICEoX3N0ZXAxMCA9IF9pdGVyYXRvcjEwLm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgdiA9IF9zdGVwMTAudmFsdWU7CiAgICAgICAgRXZlbnQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IxMC5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3IxMC5mKCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VCZWdpbkJsb2NrKTsKCiAgICBtZXNzYWdlLmV2ZW50cyA9IFtdOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuZXZlbnRzLnB1c2goRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUJlZ2luQmxvY2spOwoKICAgIG1lc3NhZ2UuZXZlbnRzID0gW107CgogICAgaWYgKG9iamVjdC5ldmVudHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZXZlbnRzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IxMSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC5ldmVudHMpLAogICAgICAgICAgX3N0ZXAxMTsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IxMS5zKCk7ICEoX3N0ZXAxMSA9IF9pdGVyYXRvcjExLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAxMS52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UuZXZlbnRzLnB1c2goRXZlbnQuZnJvbUpTT04oZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMTEuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjExLmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwoKICAgIGlmIChtZXNzYWdlLmV2ZW50cykgewogICAgICBvYmouZXZlbnRzID0gbWVzc2FnZS5ldmVudHMubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgPyBFdmVudC50b0pTT04oZSkgOiB1bmRlZmluZWQ7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgb2JqLmV2ZW50cyA9IFtdOwogICAgfQoKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUJlZ2luQmxvY2spOwoKICAgIG1lc3NhZ2UuZXZlbnRzID0gW107CgogICAgaWYgKG9iamVjdC5ldmVudHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZXZlbnRzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IxMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC5ldmVudHMpLAogICAgICAgICAgX3N0ZXAxMjsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IxMi5zKCk7ICEoX3N0ZXAxMiA9IF9pdGVyYXRvcjEyLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAxMi52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UuZXZlbnRzLnB1c2goRXZlbnQuZnJvbVBhcnRpYWwoZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMTIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjEyLmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXNwb25zZUNoZWNrVHggPSB7CiAgY29kZTogMCwKICBsb2c6ICIiLAogIGluZm86ICIiLAogIGdhc1dhbnRlZDogMCwKICBnYXNVc2VkOiAwLAogIGNvZGVzcGFjZTogIiIKfTsKZXhwb3J0IHZhciBSZXNwb25zZUNoZWNrVHggPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmNvZGUgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig4KS51aW50MzIobWVzc2FnZS5jb2RlKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5kYXRhLmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDE4KS5ieXRlcyhtZXNzYWdlLmRhdGEpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmxvZyAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UubG9nKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5pbmZvICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5pbmZvKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5nYXNXYW50ZWQgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig0MCkuaW50NjQobWVzc2FnZS5nYXNXYW50ZWQpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmdhc1VzZWQgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig0OCkuaW50NjQobWVzc2FnZS5nYXNVc2VkKTsKICAgIH0KCiAgICB2YXIgX2l0ZXJhdG9yMTMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihtZXNzYWdlLmV2ZW50cyksCiAgICAgICAgX3N0ZXAxMzsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvcjEzLnMoKTsgIShfc3RlcDEzID0gX2l0ZXJhdG9yMTMubigpKS5kb25lOykgewogICAgICAgIHZhciB2ID0gX3N0ZXAxMy52YWx1ZTsKICAgICAgICBFdmVudC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMig1OCkuZm9yaygpKS5sZGVsaW0oKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvcjEzLmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjEzLmYoKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5jb2Rlc3BhY2UgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoNjYpLnN0cmluZyhtZXNzYWdlLmNvZGVzcGFjZSk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VDaGVja1R4KTsKCiAgICBtZXNzYWdlLmV2ZW50cyA9IFtdOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuY29kZSA9IHJlYWRlci51aW50MzIoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmRhdGEgPSByZWFkZXIuYnl0ZXMoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLmxvZyA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLmluZm8gPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA1OgogICAgICAgICAgbWVzc2FnZS5nYXNXYW50ZWQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNjoKICAgICAgICAgIG1lc3NhZ2UuZ2FzVXNlZCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgbWVzc2FnZS5ldmVudHMucHVzaChFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDg6CiAgICAgICAgICBtZXNzYWdlLmNvZGVzcGFjZSA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlQ2hlY2tUeCk7CgogICAgbWVzc2FnZS5ldmVudHMgPSBbXTsKCiAgICBpZiAob2JqZWN0LmNvZGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29kZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvZGUgPSBOdW1iZXIob2JqZWN0LmNvZGUpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb2RlID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmRhdGEgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGF0YSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRhdGEgPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0LmRhdGEpOwogICAgfQoKICAgIGlmIChvYmplY3QubG9nICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmxvZyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmxvZyA9IFN0cmluZyhvYmplY3QubG9nKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubG9nID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbmZvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZm8gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmZvID0gU3RyaW5nKG9iamVjdC5pbmZvKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5mbyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuZ2FzV2FudGVkICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmdhc1dhbnRlZCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmdhc1dhbnRlZCA9IE51bWJlcihvYmplY3QuZ2FzV2FudGVkKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZ2FzV2FudGVkID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lmdhc1VzZWQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZ2FzVXNlZCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmdhc1VzZWQgPSBOdW1iZXIob2JqZWN0Lmdhc1VzZWQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5nYXNVc2VkID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmV2ZW50cyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ldmVudHMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjE0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmV2ZW50cyksCiAgICAgICAgICBfc3RlcDE0OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjE0LnMoKTsgIShfc3RlcDE0ID0gX2l0ZXJhdG9yMTQubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDE0LnZhbHVlOwogICAgICAgICAgbWVzc2FnZS5ldmVudHMucHVzaChFdmVudC5mcm9tSlNPTihlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IxNC5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMTQuZigpOwogICAgICB9CiAgICB9CgogICAgaWYgKG9iamVjdC5jb2Rlc3BhY2UgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29kZXNwYWNlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29kZXNwYWNlID0gU3RyaW5nKG9iamVjdC5jb2Rlc3BhY2UpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb2Rlc3BhY2UgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuY29kZSAhPT0gdW5kZWZpbmVkICYmIChvYmouY29kZSA9IG1lc3NhZ2UuY29kZSk7CiAgICBtZXNzYWdlLmRhdGEgIT09IHVuZGVmaW5lZCAmJiAob2JqLmRhdGEgPSBiYXNlNjRGcm9tQnl0ZXMobWVzc2FnZS5kYXRhICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLmRhdGEgOiBuZXcgVWludDhBcnJheSgpKSk7CiAgICBtZXNzYWdlLmxvZyAhPT0gdW5kZWZpbmVkICYmIChvYmoubG9nID0gbWVzc2FnZS5sb2cpOwogICAgbWVzc2FnZS5pbmZvICE9PSB1bmRlZmluZWQgJiYgKG9iai5pbmZvID0gbWVzc2FnZS5pbmZvKTsKICAgIG1lc3NhZ2UuZ2FzV2FudGVkICE9PSB1bmRlZmluZWQgJiYgKG9iai5nYXNXYW50ZWQgPSBtZXNzYWdlLmdhc1dhbnRlZCk7CiAgICBtZXNzYWdlLmdhc1VzZWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmdhc1VzZWQgPSBtZXNzYWdlLmdhc1VzZWQpOwoKICAgIGlmIChtZXNzYWdlLmV2ZW50cykgewogICAgICBvYmouZXZlbnRzID0gbWVzc2FnZS5ldmVudHMubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgPyBFdmVudC50b0pTT04oZSkgOiB1bmRlZmluZWQ7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgb2JqLmV2ZW50cyA9IFtdOwogICAgfQoKICAgIG1lc3NhZ2UuY29kZXNwYWNlICE9PSB1bmRlZmluZWQgJiYgKG9iai5jb2Rlc3BhY2UgPSBtZXNzYWdlLmNvZGVzcGFjZSk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VDaGVja1R4KTsKCiAgICBtZXNzYWdlLmV2ZW50cyA9IFtdOwoKICAgIGlmIChvYmplY3QuY29kZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb2RlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29kZSA9IG9iamVjdC5jb2RlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb2RlID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmRhdGEgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGF0YSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRhdGEgPSBvYmplY3QuZGF0YTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZGF0YSA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgaWYgKG9iamVjdC5sb2cgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubG9nICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubG9nID0gb2JqZWN0LmxvZzsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubG9nID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbmZvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZm8gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmZvID0gb2JqZWN0LmluZm87CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluZm8gPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0Lmdhc1dhbnRlZCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5nYXNXYW50ZWQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5nYXNXYW50ZWQgPSBvYmplY3QuZ2FzV2FudGVkOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5nYXNXYW50ZWQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuZ2FzVXNlZCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5nYXNVc2VkICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZ2FzVXNlZCA9IG9iamVjdC5nYXNVc2VkOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5nYXNVc2VkID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmV2ZW50cyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ldmVudHMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjE1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmV2ZW50cyksCiAgICAgICAgICBfc3RlcDE1OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjE1LnMoKTsgIShfc3RlcDE1ID0gX2l0ZXJhdG9yMTUubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDE1LnZhbHVlOwogICAgICAgICAgbWVzc2FnZS5ldmVudHMucHVzaChFdmVudC5mcm9tUGFydGlhbChlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IxNS5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMTUuZigpOwogICAgICB9CiAgICB9CgogICAgaWYgKG9iamVjdC5jb2Rlc3BhY2UgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29kZXNwYWNlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29kZXNwYWNlID0gb2JqZWN0LmNvZGVzcGFjZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29kZXNwYWNlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlc3BvbnNlRGVsaXZlclR4ID0gewogIGNvZGU6IDAsCiAgbG9nOiAiIiwKICBpbmZvOiAiIiwKICBnYXNXYW50ZWQ6IDAsCiAgZ2FzVXNlZDogMCwKICBjb2Rlc3BhY2U6ICIiCn07CmV4cG9ydCB2YXIgUmVzcG9uc2VEZWxpdmVyVHggPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmNvZGUgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig4KS51aW50MzIobWVzc2FnZS5jb2RlKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5kYXRhLmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDE4KS5ieXRlcyhtZXNzYWdlLmRhdGEpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmxvZyAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UubG9nKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5pbmZvICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5pbmZvKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5nYXNXYW50ZWQgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig0MCkuaW50NjQobWVzc2FnZS5nYXNXYW50ZWQpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmdhc1VzZWQgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig0OCkuaW50NjQobWVzc2FnZS5nYXNVc2VkKTsKICAgIH0KCiAgICB2YXIgX2l0ZXJhdG9yMTYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihtZXNzYWdlLmV2ZW50cyksCiAgICAgICAgX3N0ZXAxNjsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvcjE2LnMoKTsgIShfc3RlcDE2ID0gX2l0ZXJhdG9yMTYubigpKS5kb25lOykgewogICAgICAgIHZhciB2ID0gX3N0ZXAxNi52YWx1ZTsKICAgICAgICBFdmVudC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMig1OCkuZm9yaygpKS5sZGVsaW0oKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvcjE2LmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjE2LmYoKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5jb2Rlc3BhY2UgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoNjYpLnN0cmluZyhtZXNzYWdlLmNvZGVzcGFjZSk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VEZWxpdmVyVHgpOwoKICAgIG1lc3NhZ2UuZXZlbnRzID0gW107CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5jb2RlID0gcmVhZGVyLnVpbnQzMigpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UuZGF0YSA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UubG9nID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIG1lc3NhZ2UuaW5mbyA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgICBtZXNzYWdlLmdhc1dhbnRlZCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA2OgogICAgICAgICAgbWVzc2FnZS5nYXNVc2VkID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBtZXNzYWdlLmV2ZW50cy5wdXNoKEV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgODoKICAgICAgICAgIG1lc3NhZ2UuY29kZXNwYWNlID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VEZWxpdmVyVHgpOwoKICAgIG1lc3NhZ2UuZXZlbnRzID0gW107CgogICAgaWYgKG9iamVjdC5jb2RlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvZGUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb2RlID0gTnVtYmVyKG9iamVjdC5jb2RlKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29kZSA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5kYXRhICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmRhdGEgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5kYXRhID0gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC5kYXRhKTsKICAgIH0KCiAgICBpZiAob2JqZWN0LmxvZyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5sb2cgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5sb2cgPSBTdHJpbmcob2JqZWN0LmxvZyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmxvZyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuaW5mbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbmZvICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaW5mbyA9IFN0cmluZyhvYmplY3QuaW5mbyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluZm8gPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0Lmdhc1dhbnRlZCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5nYXNXYW50ZWQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5nYXNXYW50ZWQgPSBOdW1iZXIob2JqZWN0Lmdhc1dhbnRlZCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmdhc1dhbnRlZCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5nYXNVc2VkICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmdhc1VzZWQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5nYXNVc2VkID0gTnVtYmVyKG9iamVjdC5nYXNVc2VkKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZ2FzVXNlZCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5ldmVudHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZXZlbnRzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IxNyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC5ldmVudHMpLAogICAgICAgICAgX3N0ZXAxNzsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IxNy5zKCk7ICEoX3N0ZXAxNyA9IF9pdGVyYXRvcjE3Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAxNy52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UuZXZlbnRzLnB1c2goRXZlbnQuZnJvbUpTT04oZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMTcuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjE3LmYoKTsKICAgICAgfQogICAgfQoKICAgIGlmIChvYmplY3QuY29kZXNwYWNlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvZGVzcGFjZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvZGVzcGFjZSA9IFN0cmluZyhvYmplY3QuY29kZXNwYWNlKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29kZXNwYWNlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmNvZGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNvZGUgPSBtZXNzYWdlLmNvZGUpOwogICAgbWVzc2FnZS5kYXRhICE9PSB1bmRlZmluZWQgJiYgKG9iai5kYXRhID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UuZGF0YSAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS5kYXRhIDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgbWVzc2FnZS5sb2cgIT09IHVuZGVmaW5lZCAmJiAob2JqLmxvZyA9IG1lc3NhZ2UubG9nKTsKICAgIG1lc3NhZ2UuaW5mbyAhPT0gdW5kZWZpbmVkICYmIChvYmouaW5mbyA9IG1lc3NhZ2UuaW5mbyk7CiAgICBtZXNzYWdlLmdhc1dhbnRlZCAhPT0gdW5kZWZpbmVkICYmIChvYmouZ2FzV2FudGVkID0gbWVzc2FnZS5nYXNXYW50ZWQpOwogICAgbWVzc2FnZS5nYXNVc2VkICE9PSB1bmRlZmluZWQgJiYgKG9iai5nYXNVc2VkID0gbWVzc2FnZS5nYXNVc2VkKTsKCiAgICBpZiAobWVzc2FnZS5ldmVudHMpIHsKICAgICAgb2JqLmV2ZW50cyA9IG1lc3NhZ2UuZXZlbnRzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlID8gRXZlbnQudG9KU09OKGUpIDogdW5kZWZpbmVkOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG9iai5ldmVudHMgPSBbXTsKICAgIH0KCiAgICBtZXNzYWdlLmNvZGVzcGFjZSAhPT0gdW5kZWZpbmVkICYmIChvYmouY29kZXNwYWNlID0gbWVzc2FnZS5jb2Rlc3BhY2UpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlRGVsaXZlclR4KTsKCiAgICBtZXNzYWdlLmV2ZW50cyA9IFtdOwoKICAgIGlmIChvYmplY3QuY29kZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb2RlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29kZSA9IG9iamVjdC5jb2RlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb2RlID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmRhdGEgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGF0YSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRhdGEgPSBvYmplY3QuZGF0YTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZGF0YSA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgaWYgKG9iamVjdC5sb2cgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubG9nICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubG9nID0gb2JqZWN0LmxvZzsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubG9nID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbmZvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZm8gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmZvID0gb2JqZWN0LmluZm87CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluZm8gPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0Lmdhc1dhbnRlZCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5nYXNXYW50ZWQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5nYXNXYW50ZWQgPSBvYmplY3QuZ2FzV2FudGVkOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5nYXNXYW50ZWQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuZ2FzVXNlZCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5nYXNVc2VkICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZ2FzVXNlZCA9IG9iamVjdC5nYXNVc2VkOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5nYXNVc2VkID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmV2ZW50cyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ldmVudHMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjE4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmV2ZW50cyksCiAgICAgICAgICBfc3RlcDE4OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjE4LnMoKTsgIShfc3RlcDE4ID0gX2l0ZXJhdG9yMTgubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDE4LnZhbHVlOwogICAgICAgICAgbWVzc2FnZS5ldmVudHMucHVzaChFdmVudC5mcm9tUGFydGlhbChlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IxOC5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMTguZigpOwogICAgICB9CiAgICB9CgogICAgaWYgKG9iamVjdC5jb2Rlc3BhY2UgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29kZXNwYWNlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29kZXNwYWNlID0gb2JqZWN0LmNvZGVzcGFjZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29kZXNwYWNlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlc3BvbnNlRW5kQmxvY2sgPSB7fTsKZXhwb3J0IHZhciBSZXNwb25zZUVuZEJsb2NrID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICB2YXIgX2l0ZXJhdG9yMTkgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihtZXNzYWdlLnZhbGlkYXRvclVwZGF0ZXMpLAogICAgICAgIF9zdGVwMTk7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IxOS5zKCk7ICEoX3N0ZXAxOSA9IF9pdGVyYXRvcjE5Lm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgdiA9IF9zdGVwMTkudmFsdWU7CiAgICAgICAgVmFsaWRhdG9yVXBkYXRlLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yMTkuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yMTkuZigpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmNvbnNlbnN1c1BhcmFtVXBkYXRlcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIENvbnNlbnN1c1BhcmFtcy5lbmNvZGUobWVzc2FnZS5jb25zZW5zdXNQYXJhbVVwZGF0ZXMsIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgdmFyIF9pdGVyYXRvcjIwID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobWVzc2FnZS5ldmVudHMpLAogICAgICAgIF9zdGVwMjA7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IyMC5zKCk7ICEoX3N0ZXAyMCA9IF9pdGVyYXRvcjIwLm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgX3YgPSBfc3RlcDIwLnZhbHVlOwogICAgICAgIEV2ZW50LmVuY29kZShfdiwgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvcjIwLmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjIwLmYoKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUVuZEJsb2NrKTsKCiAgICBtZXNzYWdlLnZhbGlkYXRvclVwZGF0ZXMgPSBbXTsKICAgIG1lc3NhZ2UuZXZlbnRzID0gW107CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS52YWxpZGF0b3JVcGRhdGVzLnB1c2goVmFsaWRhdG9yVXBkYXRlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1VcGRhdGVzID0gQ29uc2Vuc3VzUGFyYW1zLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5ldmVudHMucHVzaChFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlRW5kQmxvY2spOwoKICAgIG1lc3NhZ2UudmFsaWRhdG9yVXBkYXRlcyA9IFtdOwogICAgbWVzc2FnZS5ldmVudHMgPSBbXTsKCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvclVwZGF0ZXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9yVXBkYXRlcyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMjEgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QudmFsaWRhdG9yVXBkYXRlcyksCiAgICAgICAgICBfc3RlcDIxOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjIxLnMoKTsgIShfc3RlcDIxID0gX2l0ZXJhdG9yMjEubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDIxLnZhbHVlOwogICAgICAgICAgbWVzc2FnZS52YWxpZGF0b3JVcGRhdGVzLnB1c2goVmFsaWRhdG9yVXBkYXRlLmZyb21KU09OKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjIxLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyMS5mKCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAob2JqZWN0LmNvbnNlbnN1c1BhcmFtVXBkYXRlcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb25zZW5zdXNQYXJhbVVwZGF0ZXMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb25zZW5zdXNQYXJhbVVwZGF0ZXMgPSBDb25zZW5zdXNQYXJhbXMuZnJvbUpTT04ob2JqZWN0LmNvbnNlbnN1c1BhcmFtVXBkYXRlcyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvbnNlbnN1c1BhcmFtVXBkYXRlcyA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmV2ZW50cyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ldmVudHMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjIyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmV2ZW50cyksCiAgICAgICAgICBfc3RlcDIyOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjIyLnMoKTsgIShfc3RlcDIyID0gX2l0ZXJhdG9yMjIubigpKS5kb25lOykgewogICAgICAgICAgdmFyIF9lID0gX3N0ZXAyMi52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UuZXZlbnRzLnB1c2goRXZlbnQuZnJvbUpTT04oX2UpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjIyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyMi5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKCiAgICBpZiAobWVzc2FnZS52YWxpZGF0b3JVcGRhdGVzKSB7CiAgICAgIG9iai52YWxpZGF0b3JVcGRhdGVzID0gbWVzc2FnZS52YWxpZGF0b3JVcGRhdGVzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlID8gVmFsaWRhdG9yVXBkYXRlLnRvSlNPTihlKSA6IHVuZGVmaW5lZDsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmoudmFsaWRhdG9yVXBkYXRlcyA9IFtdOwogICAgfQoKICAgIG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1VcGRhdGVzICE9PSB1bmRlZmluZWQgJiYgKG9iai5jb25zZW5zdXNQYXJhbVVwZGF0ZXMgPSBtZXNzYWdlLmNvbnNlbnN1c1BhcmFtVXBkYXRlcyA/IENvbnNlbnN1c1BhcmFtcy50b0pTT04obWVzc2FnZS5jb25zZW5zdXNQYXJhbVVwZGF0ZXMpIDogdW5kZWZpbmVkKTsKCiAgICBpZiAobWVzc2FnZS5ldmVudHMpIHsKICAgICAgb2JqLmV2ZW50cyA9IG1lc3NhZ2UuZXZlbnRzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlID8gRXZlbnQudG9KU09OKGUpIDogdW5kZWZpbmVkOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG9iai5ldmVudHMgPSBbXTsKICAgIH0KCiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VFbmRCbG9jayk7CgogICAgbWVzc2FnZS52YWxpZGF0b3JVcGRhdGVzID0gW107CiAgICBtZXNzYWdlLmV2ZW50cyA9IFtdOwoKICAgIGlmIChvYmplY3QudmFsaWRhdG9yVXBkYXRlcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxpZGF0b3JVcGRhdGVzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IyMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC52YWxpZGF0b3JVcGRhdGVzKSwKICAgICAgICAgIF9zdGVwMjM7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMjMucygpOyAhKF9zdGVwMjMgPSBfaXRlcmF0b3IyMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwMjMudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLnZhbGlkYXRvclVwZGF0ZXMucHVzaChWYWxpZGF0b3JVcGRhdGUuZnJvbVBhcnRpYWwoZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMjMuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIzLmYoKTsKICAgICAgfQogICAgfQoKICAgIGlmIChvYmplY3QuY29uc2Vuc3VzUGFyYW1VcGRhdGVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvbnNlbnN1c1BhcmFtVXBkYXRlcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvbnNlbnN1c1BhcmFtVXBkYXRlcyA9IENvbnNlbnN1c1BhcmFtcy5mcm9tUGFydGlhbChvYmplY3QuY29uc2Vuc3VzUGFyYW1VcGRhdGVzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1VcGRhdGVzID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuZXZlbnRzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmV2ZW50cyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QuZXZlbnRzKSwKICAgICAgICAgIF9zdGVwMjQ7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMjQucygpOyAhKF9zdGVwMjQgPSBfaXRlcmF0b3IyNC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgX2UyID0gX3N0ZXAyNC52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UuZXZlbnRzLnB1c2goRXZlbnQuZnJvbVBhcnRpYWwoX2UyKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IyNC5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMjQuZigpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlc3BvbnNlQ29tbWl0ID0gewogIHJldGFpbkhlaWdodDogMAp9OwpleHBvcnQgdmFyIFJlc3BvbnNlQ29tbWl0ID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5kYXRhLmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDE4KS5ieXRlcyhtZXNzYWdlLmRhdGEpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnJldGFpbkhlaWdodCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDI0KS5pbnQ2NChtZXNzYWdlLnJldGFpbkhlaWdodCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VDb21taXQpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UuZGF0YSA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UucmV0YWluSGVpZ2h0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlQ29tbWl0KTsKCiAgICBpZiAob2JqZWN0LmRhdGEgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGF0YSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRhdGEgPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0LmRhdGEpOwogICAgfQoKICAgIGlmIChvYmplY3QucmV0YWluSGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJldGFpbkhlaWdodCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnJldGFpbkhlaWdodCA9IE51bWJlcihvYmplY3QucmV0YWluSGVpZ2h0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucmV0YWluSGVpZ2h0ID0gMDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuZGF0YSAhPT0gdW5kZWZpbmVkICYmIChvYmouZGF0YSA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLmRhdGEgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuZGF0YSA6IG5ldyBVaW50OEFycmF5KCkpKTsKICAgIG1lc3NhZ2UucmV0YWluSGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5yZXRhaW5IZWlnaHQgPSBtZXNzYWdlLnJldGFpbkhlaWdodCk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VDb21taXQpOwoKICAgIGlmIChvYmplY3QuZGF0YSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kYXRhICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGF0YSA9IG9iamVjdC5kYXRhOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kYXRhID0gbmV3IFVpbnQ4QXJyYXkoKTsKICAgIH0KCiAgICBpZiAob2JqZWN0LnJldGFpbkhlaWdodCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yZXRhaW5IZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5yZXRhaW5IZWlnaHQgPSBvYmplY3QucmV0YWluSGVpZ2h0OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5yZXRhaW5IZWlnaHQgPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXNwb25zZUxpc3RTbmFwc2hvdHMgPSB7fTsKZXhwb3J0IHZhciBSZXNwb25zZUxpc3RTbmFwc2hvdHMgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIHZhciBfaXRlcmF0b3IyNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1lc3NhZ2Uuc25hcHNob3RzKSwKICAgICAgICBfc3RlcDI1OwoKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yMjUucygpOyAhKF9zdGVwMjUgPSBfaXRlcmF0b3IyNS5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIHYgPSBfc3RlcDI1LnZhbHVlOwogICAgICAgIFNuYXBzaG90LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yMjUuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yMjUuZigpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlTGlzdFNuYXBzaG90cyk7CgogICAgbWVzc2FnZS5zbmFwc2hvdHMgPSBbXTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLnNuYXBzaG90cy5wdXNoKFNuYXBzaG90LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VMaXN0U25hcHNob3RzKTsKCiAgICBtZXNzYWdlLnNuYXBzaG90cyA9IFtdOwoKICAgIGlmIChvYmplY3Quc25hcHNob3RzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNuYXBzaG90cyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMjYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3Quc25hcHNob3RzKSwKICAgICAgICAgIF9zdGVwMjY7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMjYucygpOyAhKF9zdGVwMjYgPSBfaXRlcmF0b3IyNi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwMjYudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLnNuYXBzaG90cy5wdXNoKFNuYXBzaG90LmZyb21KU09OKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjI2LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyNi5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKCiAgICBpZiAobWVzc2FnZS5zbmFwc2hvdHMpIHsKICAgICAgb2JqLnNuYXBzaG90cyA9IG1lc3NhZ2Uuc25hcHNob3RzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlID8gU25hcHNob3QudG9KU09OKGUpIDogdW5kZWZpbmVkOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG9iai5zbmFwc2hvdHMgPSBbXTsKICAgIH0KCiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VMaXN0U25hcHNob3RzKTsKCiAgICBtZXNzYWdlLnNuYXBzaG90cyA9IFtdOwoKICAgIGlmIChvYmplY3Quc25hcHNob3RzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNuYXBzaG90cyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMjcgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3Quc25hcHNob3RzKSwKICAgICAgICAgIF9zdGVwMjc7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMjcucygpOyAhKF9zdGVwMjcgPSBfaXRlcmF0b3IyNy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwMjcudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLnNuYXBzaG90cy5wdXNoKFNuYXBzaG90LmZyb21QYXJ0aWFsKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjI3LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyNy5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVzcG9uc2VPZmZlclNuYXBzaG90ID0gewogIHJlc3VsdDogMAp9OwpleHBvcnQgdmFyIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdCA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UucmVzdWx0ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5yZXN1bHQpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlT2ZmZXJTbmFwc2hvdCk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5yZXN1bHQgPSByZWFkZXIuaW50MzIoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlT2ZmZXJTbmFwc2hvdCk7CgogICAgaWYgKG9iamVjdC5yZXN1bHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucmVzdWx0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucmVzdWx0ID0gcmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdEZyb21KU09OKG9iamVjdC5yZXN1bHQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5yZXN1bHQgPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5yZXN1bHQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJlc3VsdCA9IHJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHRUb0pTT04obWVzc2FnZS5yZXN1bHQpKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZU9mZmVyU25hcHNob3QpOwoKICAgIGlmIChvYmplY3QucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJlc3VsdCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnJlc3VsdCA9IG9iamVjdC5yZXN1bHQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnJlc3VsdCA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlc3BvbnNlTG9hZFNuYXBzaG90Q2h1bmsgPSB7fTsKZXhwb3J0IHZhciBSZXNwb25zZUxvYWRTbmFwc2hvdENodW5rID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5jaHVuay5sZW5ndGggIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigxMCkuYnl0ZXMobWVzc2FnZS5jaHVuayk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VMb2FkU25hcHNob3RDaHVuayk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5jaHVuayA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VMb2FkU25hcHNob3RDaHVuayk7CgogICAgaWYgKG9iamVjdC5jaHVuayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jaHVuayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNodW5rID0gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC5jaHVuayk7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmNodW5rICE9PSB1bmRlZmluZWQgJiYgKG9iai5jaHVuayA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLmNodW5rICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLmNodW5rIDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlTG9hZFNuYXBzaG90Q2h1bmspOwoKICAgIGlmIChvYmplY3QuY2h1bmsgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY2h1bmsgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jaHVuayA9IG9iamVjdC5jaHVuazsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY2h1bmsgPSBuZXcgVWludDhBcnJheSgpOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXNwb25zZUFwcGx5U25hcHNob3RDaHVuayA9IHsKICByZXN1bHQ6IDAsCiAgcmVmZXRjaENodW5rczogMCwKICByZWplY3RTZW5kZXJzOiAiIgp9OwpleHBvcnQgdmFyIFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5yZXN1bHQgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQzMihtZXNzYWdlLnJlc3VsdCk7CiAgICB9CgogICAgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpOwoKICAgIHZhciBfaXRlcmF0b3IyOCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1lc3NhZ2UucmVmZXRjaENodW5rcyksCiAgICAgICAgX3N0ZXAyODsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvcjI4LnMoKTsgIShfc3RlcDI4ID0gX2l0ZXJhdG9yMjgubigpKS5kb25lOykgewogICAgICAgIHZhciB2ID0gX3N0ZXAyOC52YWx1ZTsKICAgICAgICB3cml0ZXIudWludDMyKHYpOwogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yMjguZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yMjguZigpOwogICAgfQoKICAgIHdyaXRlci5sZGVsaW0oKTsKCiAgICB2YXIgX2l0ZXJhdG9yMjkgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihtZXNzYWdlLnJlamVjdFNlbmRlcnMpLAogICAgICAgIF9zdGVwMjk7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IyOS5zKCk7ICEoX3N0ZXAyOSA9IF9pdGVyYXRvcjI5Lm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgX3YyID0gX3N0ZXAyOS52YWx1ZTsKICAgICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcoX3YyKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvcjI5LmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjI5LmYoKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUFwcGx5U25hcHNob3RDaHVuayk7CgogICAgbWVzc2FnZS5yZWZldGNoQ2h1bmtzID0gW107CiAgICBtZXNzYWdlLnJlamVjdFNlbmRlcnMgPSBbXTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLnJlc3VsdCA9IHJlYWRlci5pbnQzMigpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIGlmICgodGFnICYgNykgPT09IDIpIHsKICAgICAgICAgICAgdmFyIGVuZDIgPSByZWFkZXIudWludDMyKCkgKyByZWFkZXIucG9zOwoKICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQyKSB7CiAgICAgICAgICAgICAgbWVzc2FnZS5yZWZldGNoQ2h1bmtzLnB1c2gocmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWVzc2FnZS5yZWZldGNoQ2h1bmtzLnB1c2gocmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5yZWplY3RTZW5kZXJzLnB1c2gocmVhZGVyLnN0cmluZygpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rKTsKCiAgICBtZXNzYWdlLnJlZmV0Y2hDaHVua3MgPSBbXTsKICAgIG1lc3NhZ2UucmVqZWN0U2VuZGVycyA9IFtdOwoKICAgIGlmIChvYmplY3QucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJlc3VsdCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnJlc3VsdCA9IHJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdEZyb21KU09OKG9iamVjdC5yZXN1bHQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5yZXN1bHQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QucmVmZXRjaENodW5rcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yZWZldGNoQ2h1bmtzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IzMCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC5yZWZldGNoQ2h1bmtzKSwKICAgICAgICAgIF9zdGVwMzA7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMzAucygpOyAhKF9zdGVwMzAgPSBfaXRlcmF0b3IzMC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwMzAudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLnJlZmV0Y2hDaHVua3MucHVzaChOdW1iZXIoZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMzAuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjMwLmYoKTsKICAgICAgfQogICAgfQoKICAgIGlmIChvYmplY3QucmVqZWN0U2VuZGVycyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yZWplY3RTZW5kZXJzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IzMSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC5yZWplY3RTZW5kZXJzKSwKICAgICAgICAgIF9zdGVwMzE7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMzEucygpOyAhKF9zdGVwMzEgPSBfaXRlcmF0b3IzMS5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgX2UzID0gX3N0ZXAzMS52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UucmVqZWN0U2VuZGVycy5wdXNoKFN0cmluZyhfZTMpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjMxLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IzMS5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5yZXN1bHQgPSByZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHRUb0pTT04obWVzc2FnZS5yZXN1bHQpKTsKCiAgICBpZiAobWVzc2FnZS5yZWZldGNoQ2h1bmtzKSB7CiAgICAgIG9iai5yZWZldGNoQ2h1bmtzID0gbWVzc2FnZS5yZWZldGNoQ2h1bmtzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG9iai5yZWZldGNoQ2h1bmtzID0gW107CiAgICB9CgogICAgaWYgKG1lc3NhZ2UucmVqZWN0U2VuZGVycykgewogICAgICBvYmoucmVqZWN0U2VuZGVycyA9IG1lc3NhZ2UucmVqZWN0U2VuZGVycy5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmoucmVqZWN0U2VuZGVycyA9IFtdOwogICAgfQoKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUFwcGx5U25hcHNob3RDaHVuayk7CgogICAgbWVzc2FnZS5yZWZldGNoQ2h1bmtzID0gW107CiAgICBtZXNzYWdlLnJlamVjdFNlbmRlcnMgPSBbXTsKCiAgICBpZiAob2JqZWN0LnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yZXN1bHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5yZXN1bHQgPSBvYmplY3QucmVzdWx0OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5yZXN1bHQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QucmVmZXRjaENodW5rcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yZWZldGNoQ2h1bmtzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IzMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC5yZWZldGNoQ2h1bmtzKSwKICAgICAgICAgIF9zdGVwMzI7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMzIucygpOyAhKF9zdGVwMzIgPSBfaXRlcmF0b3IzMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwMzIudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLnJlZmV0Y2hDaHVua3MucHVzaChlKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjMyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IzMi5mKCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAob2JqZWN0LnJlamVjdFNlbmRlcnMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucmVqZWN0U2VuZGVycyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMzMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QucmVqZWN0U2VuZGVycyksCiAgICAgICAgICBfc3RlcDMzOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjMzLnMoKTsgIShfc3RlcDMzID0gX2l0ZXJhdG9yMzMubigpKS5kb25lOykgewogICAgICAgICAgdmFyIF9lNCA9IF9zdGVwMzMudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLnJlamVjdFNlbmRlcnMucHVzaChfZTQpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMzMuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjMzLmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VDb25zZW5zdXNQYXJhbXMgPSB7fTsKZXhwb3J0IHZhciBDb25zZW5zdXNQYXJhbXMgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmJsb2NrICE9PSB1bmRlZmluZWQpIHsKICAgICAgQmxvY2tQYXJhbXMuZW5jb2RlKG1lc3NhZ2UuYmxvY2ssIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuZXZpZGVuY2UgIT09IHVuZGVmaW5lZCkgewogICAgICBFdmlkZW5jZVBhcmFtcy5lbmNvZGUobWVzc2FnZS5ldmlkZW5jZSwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS52YWxpZGF0b3IgIT09IHVuZGVmaW5lZCkgewogICAgICBWYWxpZGF0b3JQYXJhbXMuZW5jb2RlKG1lc3NhZ2UudmFsaWRhdG9yLCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnZlcnNpb24gIT09IHVuZGVmaW5lZCkgewogICAgICBWZXJzaW9uUGFyYW1zLmVuY29kZShtZXNzYWdlLnZlcnNpb24sIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlQ29uc2Vuc3VzUGFyYW1zKTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmJsb2NrID0gQmxvY2tQYXJhbXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmV2aWRlbmNlID0gRXZpZGVuY2VQYXJhbXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLnZhbGlkYXRvciA9IFZhbGlkYXRvclBhcmFtcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIG1lc3NhZ2UudmVyc2lvbiA9IFZlcnNpb25QYXJhbXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUNvbnNlbnN1c1BhcmFtcyk7CgogICAgaWYgKG9iamVjdC5ibG9jayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ibG9jayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmJsb2NrID0gQmxvY2tQYXJhbXMuZnJvbUpTT04ob2JqZWN0LmJsb2NrKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYmxvY2sgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5ldmlkZW5jZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ldmlkZW5jZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmV2aWRlbmNlID0gRXZpZGVuY2VQYXJhbXMuZnJvbUpTT04ob2JqZWN0LmV2aWRlbmNlKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZXZpZGVuY2UgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC52YWxpZGF0b3IgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9yICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yID0gVmFsaWRhdG9yUGFyYW1zLmZyb21KU09OKG9iamVjdC52YWxpZGF0b3IpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3IgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC52ZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZlcnNpb24gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52ZXJzaW9uID0gVmVyc2lvblBhcmFtcy5mcm9tSlNPTihvYmplY3QudmVyc2lvbik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnZlcnNpb24gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmJsb2NrICE9PSB1bmRlZmluZWQgJiYgKG9iai5ibG9jayA9IG1lc3NhZ2UuYmxvY2sgPyBCbG9ja1BhcmFtcy50b0pTT04obWVzc2FnZS5ibG9jaykgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5ldmlkZW5jZSAhPT0gdW5kZWZpbmVkICYmIChvYmouZXZpZGVuY2UgPSBtZXNzYWdlLmV2aWRlbmNlID8gRXZpZGVuY2VQYXJhbXMudG9KU09OKG1lc3NhZ2UuZXZpZGVuY2UpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UudmFsaWRhdG9yICE9PSB1bmRlZmluZWQgJiYgKG9iai52YWxpZGF0b3IgPSBtZXNzYWdlLnZhbGlkYXRvciA/IFZhbGlkYXRvclBhcmFtcy50b0pTT04obWVzc2FnZS52YWxpZGF0b3IpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UudmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIChvYmoudmVyc2lvbiA9IG1lc3NhZ2UudmVyc2lvbiA/IFZlcnNpb25QYXJhbXMudG9KU09OKG1lc3NhZ2UudmVyc2lvbikgOiB1bmRlZmluZWQpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUNvbnNlbnN1c1BhcmFtcyk7CgogICAgaWYgKG9iamVjdC5ibG9jayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ibG9jayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmJsb2NrID0gQmxvY2tQYXJhbXMuZnJvbVBhcnRpYWwob2JqZWN0LmJsb2NrKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYmxvY2sgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5ldmlkZW5jZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ldmlkZW5jZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmV2aWRlbmNlID0gRXZpZGVuY2VQYXJhbXMuZnJvbVBhcnRpYWwob2JqZWN0LmV2aWRlbmNlKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZXZpZGVuY2UgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC52YWxpZGF0b3IgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9yICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yID0gVmFsaWRhdG9yUGFyYW1zLmZyb21QYXJ0aWFsKG9iamVjdC52YWxpZGF0b3IpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3IgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC52ZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZlcnNpb24gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52ZXJzaW9uID0gVmVyc2lvblBhcmFtcy5mcm9tUGFydGlhbChvYmplY3QudmVyc2lvbik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnZlcnNpb24gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZUJsb2NrUGFyYW1zID0gewogIG1heEJ5dGVzOiAwLAogIG1heEdhczogMAp9OwpleHBvcnQgdmFyIEJsb2NrUGFyYW1zID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5tYXhCeXRlcyAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDgpLmludDY0KG1lc3NhZ2UubWF4Qnl0ZXMpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLm1heEdhcyAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDE2KS5pbnQ2NChtZXNzYWdlLm1heEdhcyk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlQmxvY2tQYXJhbXMpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UubWF4Qnl0ZXMgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UubWF4R2FzID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUJsb2NrUGFyYW1zKTsKCiAgICBpZiAob2JqZWN0Lm1heEJ5dGVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm1heEJ5dGVzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubWF4Qnl0ZXMgPSBOdW1iZXIob2JqZWN0Lm1heEJ5dGVzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubWF4Qnl0ZXMgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QubWF4R2FzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm1heEdhcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLm1heEdhcyA9IE51bWJlcihvYmplY3QubWF4R2FzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubWF4R2FzID0gMDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UubWF4Qnl0ZXMgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1heEJ5dGVzID0gbWVzc2FnZS5tYXhCeXRlcyk7CiAgICBtZXNzYWdlLm1heEdhcyAhPT0gdW5kZWZpbmVkICYmIChvYmoubWF4R2FzID0gbWVzc2FnZS5tYXhHYXMpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUJsb2NrUGFyYW1zKTsKCiAgICBpZiAob2JqZWN0Lm1heEJ5dGVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm1heEJ5dGVzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubWF4Qnl0ZXMgPSBvYmplY3QubWF4Qnl0ZXM7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLm1heEJ5dGVzID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lm1heEdhcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5tYXhHYXMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5tYXhHYXMgPSBvYmplY3QubWF4R2FzOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5tYXhHYXMgPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VMYXN0Q29tbWl0SW5mbyA9IHsKICByb3VuZDogMAp9OwpleHBvcnQgdmFyIExhc3RDb21taXRJbmZvID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5yb3VuZCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2Uucm91bmQpOwogICAgfQoKICAgIHZhciBfaXRlcmF0b3IzNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1lc3NhZ2Uudm90ZXMpLAogICAgICAgIF9zdGVwMzQ7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IzNC5zKCk7ICEoX3N0ZXAzNCA9IF9pdGVyYXRvcjM0Lm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgdiA9IF9zdGVwMzQudmFsdWU7CiAgICAgICAgVm90ZUluZm8uZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IzNC5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3IzNC5mKCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlTGFzdENvbW1pdEluZm8pOwoKICAgIG1lc3NhZ2Uudm90ZXMgPSBbXTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLnJvdW5kID0gcmVhZGVyLmludDMyKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS52b3Rlcy5wdXNoKFZvdGVJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlTGFzdENvbW1pdEluZm8pOwoKICAgIG1lc3NhZ2Uudm90ZXMgPSBbXTsKCiAgICBpZiAob2JqZWN0LnJvdW5kICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJvdW5kICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uucm91bmQgPSBOdW1iZXIob2JqZWN0LnJvdW5kKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uucm91bmQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3Qudm90ZXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Qudm90ZXMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjM1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LnZvdGVzKSwKICAgICAgICAgIF9zdGVwMzU7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMzUucygpOyAhKF9zdGVwMzUgPSBfaXRlcmF0b3IzNS5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwMzUudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLnZvdGVzLnB1c2goVm90ZUluZm8uZnJvbUpTT04oZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMzUuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjM1LmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5yb3VuZCAhPT0gdW5kZWZpbmVkICYmIChvYmoucm91bmQgPSBtZXNzYWdlLnJvdW5kKTsKCiAgICBpZiAobWVzc2FnZS52b3RlcykgewogICAgICBvYmoudm90ZXMgPSBtZXNzYWdlLnZvdGVzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlID8gVm90ZUluZm8udG9KU09OKGUpIDogdW5kZWZpbmVkOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG9iai52b3RlcyA9IFtdOwogICAgfQoKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VMYXN0Q29tbWl0SW5mbyk7CgogICAgbWVzc2FnZS52b3RlcyA9IFtdOwoKICAgIGlmIChvYmplY3Qucm91bmQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Qucm91bmQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5yb3VuZCA9IG9iamVjdC5yb3VuZDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uucm91bmQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3Qudm90ZXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Qudm90ZXMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjM2ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LnZvdGVzKSwKICAgICAgICAgIF9zdGVwMzY7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMzYucygpOyAhKF9zdGVwMzYgPSBfaXRlcmF0b3IzNi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwMzYudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLnZvdGVzLnB1c2goVm90ZUluZm8uZnJvbVBhcnRpYWwoZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMzYuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjM2LmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VFdmVudCA9IHsKICB0eXBlOiAiIgp9OwpleHBvcnQgdmFyIEV2ZW50ID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS50eXBlICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS50eXBlKTsKICAgIH0KCiAgICB2YXIgX2l0ZXJhdG9yMzcgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihtZXNzYWdlLmF0dHJpYnV0ZXMpLAogICAgICAgIF9zdGVwMzc7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IzNy5zKCk7ICEoX3N0ZXAzNyA9IF9pdGVyYXRvcjM3Lm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgdiA9IF9zdGVwMzcudmFsdWU7CiAgICAgICAgRXZlbnRBdHRyaWJ1dGUuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IzNy5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3IzNy5mKCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRXZlbnQpOwoKICAgIG1lc3NhZ2UuYXR0cmlidXRlcyA9IFtdOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UudHlwZSA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmF0dHJpYnV0ZXMucHVzaChFdmVudEF0dHJpYnV0ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUV2ZW50KTsKCiAgICBtZXNzYWdlLmF0dHJpYnV0ZXMgPSBbXTsKCiAgICBpZiAob2JqZWN0LnR5cGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudHlwZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnR5cGUgPSBTdHJpbmcob2JqZWN0LnR5cGUpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS50eXBlID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5hdHRyaWJ1dGVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmF0dHJpYnV0ZXMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjM4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmF0dHJpYnV0ZXMpLAogICAgICAgICAgX3N0ZXAzODsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IzOC5zKCk7ICEoX3N0ZXAzOCA9IF9pdGVyYXRvcjM4Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAzOC52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UuYXR0cmlidXRlcy5wdXNoKEV2ZW50QXR0cmlidXRlLmZyb21KU09OKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjM4LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IzOC5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UudHlwZSAhPT0gdW5kZWZpbmVkICYmIChvYmoudHlwZSA9IG1lc3NhZ2UudHlwZSk7CgogICAgaWYgKG1lc3NhZ2UuYXR0cmlidXRlcykgewogICAgICBvYmouYXR0cmlidXRlcyA9IG1lc3NhZ2UuYXR0cmlidXRlcy5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZSA/IEV2ZW50QXR0cmlidXRlLnRvSlNPTihlKSA6IHVuZGVmaW5lZDsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmouYXR0cmlidXRlcyA9IFtdOwogICAgfQoKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VFdmVudCk7CgogICAgbWVzc2FnZS5hdHRyaWJ1dGVzID0gW107CgogICAgaWYgKG9iamVjdC50eXBlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnR5cGUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS50eXBlID0gb2JqZWN0LnR5cGU7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnR5cGUgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmF0dHJpYnV0ZXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYXR0cmlidXRlcyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMzkgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QuYXR0cmlidXRlcyksCiAgICAgICAgICBfc3RlcDM5OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjM5LnMoKTsgIShfc3RlcDM5ID0gX2l0ZXJhdG9yMzkubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDM5LnZhbHVlOwogICAgICAgICAgbWVzc2FnZS5hdHRyaWJ1dGVzLnB1c2goRXZlbnRBdHRyaWJ1dGUuZnJvbVBhcnRpYWwoZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMzkuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjM5LmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VFdmVudEF0dHJpYnV0ZSA9IHsKICBpbmRleDogZmFsc2UKfTsKZXhwb3J0IHZhciBFdmVudEF0dHJpYnV0ZSA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2Uua2V5Lmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDEwKS5ieXRlcyhtZXNzYWdlLmtleSk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UudmFsdWUubGVuZ3RoICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTgpLmJ5dGVzKG1lc3NhZ2UudmFsdWUpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmluZGV4ID09PSB0cnVlKSB7CiAgICAgIHdyaXRlci51aW50MzIoMjQpLmJvb2wobWVzc2FnZS5pbmRleCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRXZlbnRBdHRyaWJ1dGUpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2Uua2V5ID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UuaW5kZXggPSByZWFkZXIuYm9vbCgpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRXZlbnRBdHRyaWJ1dGUpOwoKICAgIGlmIChvYmplY3Qua2V5ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmtleSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmtleSA9IGJ5dGVzRnJvbUJhc2U2NChvYmplY3Qua2V5KTsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbHVlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZhbHVlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmFsdWUgPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0LnZhbHVlKTsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluZGV4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZGV4ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaW5kZXggPSBCb29sZWFuKG9iamVjdC5pbmRleCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluZGV4ID0gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmtleSAhPT0gdW5kZWZpbmVkICYmIChvYmoua2V5ID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2Uua2V5ICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLmtleSA6IG5ldyBVaW50OEFycmF5KCkpKTsKICAgIG1lc3NhZ2UudmFsdWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnZhbHVlID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UudmFsdWUgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UudmFsdWUgOiBuZXcgVWludDhBcnJheSgpKSk7CiAgICBtZXNzYWdlLmluZGV4ICE9PSB1bmRlZmluZWQgJiYgKG9iai5pbmRleCA9IG1lc3NhZ2UuaW5kZXgpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUV2ZW50QXR0cmlidXRlKTsKCiAgICBpZiAob2JqZWN0LmtleSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5rZXkgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5rZXkgPSBvYmplY3Qua2V5OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5rZXkgPSBuZXcgVWludDhBcnJheSgpOwogICAgfQoKICAgIGlmIChvYmplY3QudmFsdWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsdWUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52YWx1ZSA9IG9iamVjdC52YWx1ZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmFsdWUgPSBuZXcgVWludDhBcnJheSgpOwogICAgfQoKICAgIGlmIChvYmplY3QuaW5kZXggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5kZXggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmRleCA9IG9iamVjdC5pbmRleDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5kZXggPSBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlVHhSZXN1bHQgPSB7CiAgaGVpZ2h0OiAwLAogIGluZGV4OiAwCn07CmV4cG9ydCB2YXIgVHhSZXN1bHQgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmhlaWdodCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDgpLmludDY0KG1lc3NhZ2UuaGVpZ2h0KTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5pbmRleCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDE2KS51aW50MzIobWVzc2FnZS5pbmRleCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UudHgubGVuZ3RoICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMjYpLmJ5dGVzKG1lc3NhZ2UudHgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlc3BvbnNlRGVsaXZlclR4LmVuY29kZShtZXNzYWdlLnJlc3VsdCwgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VUeFJlc3VsdCk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5oZWlnaHQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UuaW5kZXggPSByZWFkZXIudWludDMyKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS50eCA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIG1lc3NhZ2UucmVzdWx0ID0gUmVzcG9uc2VEZWxpdmVyVHguZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVR4UmVzdWx0KTsKCiAgICBpZiAob2JqZWN0LmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSBOdW1iZXIob2JqZWN0LmhlaWdodCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmhlaWdodCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbmRleCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbmRleCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZGV4ID0gTnVtYmVyKG9iamVjdC5pbmRleCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluZGV4ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnR4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnR4ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudHggPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0LnR4KTsKICAgIH0KCiAgICBpZiAob2JqZWN0LnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yZXN1bHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5yZXN1bHQgPSBSZXNwb25zZURlbGl2ZXJUeC5mcm9tSlNPTihvYmplY3QucmVzdWx0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucmVzdWx0ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmhlaWdodCA9IG1lc3NhZ2UuaGVpZ2h0KTsKICAgIG1lc3NhZ2UuaW5kZXggIT09IHVuZGVmaW5lZCAmJiAob2JqLmluZGV4ID0gbWVzc2FnZS5pbmRleCk7CiAgICBtZXNzYWdlLnR4ICE9PSB1bmRlZmluZWQgJiYgKG9iai50eCA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLnR4ICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLnR4IDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgbWVzc2FnZS5yZXN1bHQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJlc3VsdCA9IG1lc3NhZ2UucmVzdWx0ID8gUmVzcG9uc2VEZWxpdmVyVHgudG9KU09OKG1lc3NhZ2UucmVzdWx0KSA6IHVuZGVmaW5lZCk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlVHhSZXN1bHQpOwoKICAgIGlmIChvYmplY3QuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmhlaWdodCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmhlaWdodCA9IG9iamVjdC5oZWlnaHQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmhlaWdodCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbmRleCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbmRleCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZGV4ID0gb2JqZWN0LmluZGV4OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbmRleCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC50eCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50eCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnR4ID0gb2JqZWN0LnR4OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS50eCA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgaWYgKG9iamVjdC5yZXN1bHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucmVzdWx0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucmVzdWx0ID0gUmVzcG9uc2VEZWxpdmVyVHguZnJvbVBhcnRpYWwob2JqZWN0LnJlc3VsdCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnJlc3VsdCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlVmFsaWRhdG9yID0gewogIHBvd2VyOiAwCn07CmV4cG9ydCB2YXIgVmFsaWRhdG9yID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5hZGRyZXNzLmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDEwKS5ieXRlcyhtZXNzYWdlLmFkZHJlc3MpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnBvd2VyICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMjQpLmludDY0KG1lc3NhZ2UucG93ZXIpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVZhbGlkYXRvcik7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5hZGRyZXNzID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5wb3dlciA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VWYWxpZGF0b3IpOwoKICAgIGlmIChvYmplY3QuYWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hZGRyZXNzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYWRkcmVzcyA9IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QuYWRkcmVzcyk7CiAgICB9CgogICAgaWYgKG9iamVjdC5wb3dlciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wb3dlciAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnBvd2VyID0gTnVtYmVyKG9iamVjdC5wb3dlcik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnBvd2VyID0gMDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuYWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmIChvYmouYWRkcmVzcyA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLmFkZHJlc3MgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuYWRkcmVzcyA6IG5ldyBVaW50OEFycmF5KCkpKTsKICAgIG1lc3NhZ2UucG93ZXIgIT09IHVuZGVmaW5lZCAmJiAob2JqLnBvd2VyID0gbWVzc2FnZS5wb3dlcik7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlVmFsaWRhdG9yKTsKCiAgICBpZiAob2JqZWN0LmFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYWRkcmVzcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmFkZHJlc3MgPSBvYmplY3QuYWRkcmVzczsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYWRkcmVzcyA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgaWYgKG9iamVjdC5wb3dlciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wb3dlciAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnBvd2VyID0gb2JqZWN0LnBvd2VyOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5wb3dlciA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVZhbGlkYXRvclVwZGF0ZSA9IHsKICBwb3dlcjogMAp9OwpleHBvcnQgdmFyIFZhbGlkYXRvclVwZGF0ZSA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UucHViS2V5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgUHVibGljS2V5LmVuY29kZShtZXNzYWdlLnB1YktleSwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5wb3dlciAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDE2KS5pbnQ2NChtZXNzYWdlLnBvd2VyKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VWYWxpZGF0b3JVcGRhdGUpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UucHViS2V5ID0gUHVibGljS2V5LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5wb3dlciA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VWYWxpZGF0b3JVcGRhdGUpOwoKICAgIGlmIChvYmplY3QucHViS2V5ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnB1YktleSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnB1YktleSA9IFB1YmxpY0tleS5mcm9tSlNPTihvYmplY3QucHViS2V5KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucHViS2V5ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QucG93ZXIgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucG93ZXIgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5wb3dlciA9IE51bWJlcihvYmplY3QucG93ZXIpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5wb3dlciA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLnB1YktleSAhPT0gdW5kZWZpbmVkICYmIChvYmoucHViS2V5ID0gbWVzc2FnZS5wdWJLZXkgPyBQdWJsaWNLZXkudG9KU09OKG1lc3NhZ2UucHViS2V5KSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLnBvd2VyICE9PSB1bmRlZmluZWQgJiYgKG9iai5wb3dlciA9IG1lc3NhZ2UucG93ZXIpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVZhbGlkYXRvclVwZGF0ZSk7CgogICAgaWYgKG9iamVjdC5wdWJLZXkgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucHViS2V5ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucHViS2V5ID0gUHVibGljS2V5LmZyb21QYXJ0aWFsKG9iamVjdC5wdWJLZXkpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5wdWJLZXkgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5wb3dlciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wb3dlciAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnBvd2VyID0gb2JqZWN0LnBvd2VyOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5wb3dlciA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVZvdGVJbmZvID0gewogIHNpZ25lZExhc3RCbG9jazogZmFsc2UKfTsKZXhwb3J0IHZhciBWb3RlSW5mbyA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UudmFsaWRhdG9yICE9PSB1bmRlZmluZWQpIHsKICAgICAgVmFsaWRhdG9yLmVuY29kZShtZXNzYWdlLnZhbGlkYXRvciwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5zaWduZWRMYXN0QmxvY2sgPT09IHRydWUpIHsKICAgICAgd3JpdGVyLnVpbnQzMigxNikuYm9vbChtZXNzYWdlLnNpZ25lZExhc3RCbG9jayk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlVm90ZUluZm8pOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UudmFsaWRhdG9yID0gVmFsaWRhdG9yLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5zaWduZWRMYXN0QmxvY2sgPSByZWFkZXIuYm9vbCgpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlVm90ZUluZm8pOwoKICAgIGlmIChvYmplY3QudmFsaWRhdG9yICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZhbGlkYXRvciAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZhbGlkYXRvciA9IFZhbGlkYXRvci5mcm9tSlNPTihvYmplY3QudmFsaWRhdG9yKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3Quc2lnbmVkTGFzdEJsb2NrICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNpZ25lZExhc3RCbG9jayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnNpZ25lZExhc3RCbG9jayA9IEJvb2xlYW4ob2JqZWN0LnNpZ25lZExhc3RCbG9jayk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnNpZ25lZExhc3RCbG9jayA9IGZhbHNlOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS52YWxpZGF0b3IgIT09IHVuZGVmaW5lZCAmJiAob2JqLnZhbGlkYXRvciA9IG1lc3NhZ2UudmFsaWRhdG9yID8gVmFsaWRhdG9yLnRvSlNPTihtZXNzYWdlLnZhbGlkYXRvcikgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5zaWduZWRMYXN0QmxvY2sgIT09IHVuZGVmaW5lZCAmJiAob2JqLnNpZ25lZExhc3RCbG9jayA9IG1lc3NhZ2Uuc2lnbmVkTGFzdEJsb2NrKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VWb3RlSW5mbyk7CgogICAgaWYgKG9iamVjdC52YWxpZGF0b3IgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9yICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yID0gVmFsaWRhdG9yLmZyb21QYXJ0aWFsKG9iamVjdC52YWxpZGF0b3IpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3IgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5zaWduZWRMYXN0QmxvY2sgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc2lnbmVkTGFzdEJsb2NrICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uuc2lnbmVkTGFzdEJsb2NrID0gb2JqZWN0LnNpZ25lZExhc3RCbG9jazsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uuc2lnbmVkTGFzdEJsb2NrID0gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZUV2aWRlbmNlID0gewogIHR5cGU6IDAsCiAgaGVpZ2h0OiAwLAogIHRvdGFsVm90aW5nUG93ZXI6IDAKfTsKZXhwb3J0IHZhciBFdmlkZW5jZSA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UudHlwZSAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2UudHlwZSk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UudmFsaWRhdG9yICE9PSB1bmRlZmluZWQpIHsKICAgICAgVmFsaWRhdG9yLmVuY29kZShtZXNzYWdlLnZhbGlkYXRvciwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5oZWlnaHQgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50NjQobWVzc2FnZS5oZWlnaHQpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnRpbWUgIT09IHVuZGVmaW5lZCkgewogICAgICBUaW1lc3RhbXAuZW5jb2RlKHRvVGltZXN0YW1wKG1lc3NhZ2UudGltZSksIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UudG90YWxWb3RpbmdQb3dlciAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDQwKS5pbnQ2NChtZXNzYWdlLnRvdGFsVm90aW5nUG93ZXIpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUV2aWRlbmNlKTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLnR5cGUgPSByZWFkZXIuaW50MzIoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLnZhbGlkYXRvciA9IFZhbGlkYXRvci5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLnRpbWUgPSBmcm9tVGltZXN0YW1wKFRpbWVzdGFtcC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgICBtZXNzYWdlLnRvdGFsVm90aW5nUG93ZXIgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRXZpZGVuY2UpOwoKICAgIGlmIChvYmplY3QudHlwZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50eXBlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudHlwZSA9IGV2aWRlbmNlVHlwZUZyb21KU09OKG9iamVjdC50eXBlKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudHlwZSA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC52YWxpZGF0b3IgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9yICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yID0gVmFsaWRhdG9yLmZyb21KU09OKG9iamVjdC52YWxpZGF0b3IpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3IgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gTnVtYmVyKG9iamVjdC5oZWlnaHQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QudGltZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50aW1lICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudGltZSA9IGZyb21Kc29uVGltZXN0YW1wKG9iamVjdC50aW1lKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudGltZSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnRvdGFsVm90aW5nUG93ZXIgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudG90YWxWb3RpbmdQb3dlciAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnRvdGFsVm90aW5nUG93ZXIgPSBOdW1iZXIob2JqZWN0LnRvdGFsVm90aW5nUG93ZXIpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS50b3RhbFZvdGluZ1Bvd2VyID0gMDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UudHlwZSAhPT0gdW5kZWZpbmVkICYmIChvYmoudHlwZSA9IGV2aWRlbmNlVHlwZVRvSlNPTihtZXNzYWdlLnR5cGUpKTsKICAgIG1lc3NhZ2UudmFsaWRhdG9yICE9PSB1bmRlZmluZWQgJiYgKG9iai52YWxpZGF0b3IgPSBtZXNzYWdlLnZhbGlkYXRvciA/IFZhbGlkYXRvci50b0pTT04obWVzc2FnZS52YWxpZGF0b3IpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5oZWlnaHQgPSBtZXNzYWdlLmhlaWdodCk7CiAgICBtZXNzYWdlLnRpbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnRpbWUgPSBtZXNzYWdlLnRpbWUgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UudGltZS50b0lTT1N0cmluZygpIDogbnVsbCk7CiAgICBtZXNzYWdlLnRvdGFsVm90aW5nUG93ZXIgIT09IHVuZGVmaW5lZCAmJiAob2JqLnRvdGFsVm90aW5nUG93ZXIgPSBtZXNzYWdlLnRvdGFsVm90aW5nUG93ZXIpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUV2aWRlbmNlKTsKCiAgICBpZiAob2JqZWN0LnR5cGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudHlwZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnR5cGUgPSBvYmplY3QudHlwZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudHlwZSA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC52YWxpZGF0b3IgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9yICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yID0gVmFsaWRhdG9yLmZyb21QYXJ0aWFsKG9iamVjdC52YWxpZGF0b3IpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3IgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gb2JqZWN0LmhlaWdodDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnRpbWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudGltZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnRpbWUgPSBvYmplY3QudGltZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudGltZSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnRvdGFsVm90aW5nUG93ZXIgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudG90YWxWb3RpbmdQb3dlciAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnRvdGFsVm90aW5nUG93ZXIgPSBvYmplY3QudG90YWxWb3RpbmdQb3dlcjsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudG90YWxWb3RpbmdQb3dlciA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVNuYXBzaG90ID0gewogIGhlaWdodDogMCwKICBmb3JtYXQ6IDAsCiAgY2h1bmtzOiAwCn07CmV4cG9ydCB2YXIgU25hcHNob3QgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmhlaWdodCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDgpLnVpbnQ2NChtZXNzYWdlLmhlaWdodCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuZm9ybWF0ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTYpLnVpbnQzMihtZXNzYWdlLmZvcm1hdCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuY2h1bmtzICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMjQpLnVpbnQzMihtZXNzYWdlLmNodW5rcyk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuaGFzaC5sZW5ndGggIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigzNCkuYnl0ZXMobWVzc2FnZS5oYXNoKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5tZXRhZGF0YS5sZW5ndGggIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig0MikuYnl0ZXMobWVzc2FnZS5tZXRhZGF0YSk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlU25hcHNob3QpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci51aW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5mb3JtYXQgPSByZWFkZXIudWludDMyKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5jaHVua3MgPSByZWFkZXIudWludDMyKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA0OgogICAgICAgICAgbWVzc2FnZS5oYXNoID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA1OgogICAgICAgICAgbWVzc2FnZS5tZXRhZGF0YSA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlU25hcHNob3QpOwoKICAgIGlmIChvYmplY3QuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmhlaWdodCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmhlaWdodCA9IE51bWJlcihvYmplY3QuaGVpZ2h0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmZvcm1hdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5mb3JtYXQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5mb3JtYXQgPSBOdW1iZXIob2JqZWN0LmZvcm1hdCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmZvcm1hdCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5jaHVua3MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY2h1bmtzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY2h1bmtzID0gTnVtYmVyKG9iamVjdC5jaHVua3MpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jaHVua3MgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuaGFzaCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oYXNoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGFzaCA9IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QuaGFzaCk7CiAgICB9CgogICAgaWYgKG9iamVjdC5tZXRhZGF0YSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5tZXRhZGF0YSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLm1ldGFkYXRhID0gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC5tZXRhZGF0YSk7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIChvYmouaGVpZ2h0ID0gbWVzc2FnZS5oZWlnaHQpOwogICAgbWVzc2FnZS5mb3JtYXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmZvcm1hdCA9IG1lc3NhZ2UuZm9ybWF0KTsKICAgIG1lc3NhZ2UuY2h1bmtzICE9PSB1bmRlZmluZWQgJiYgKG9iai5jaHVua3MgPSBtZXNzYWdlLmNodW5rcyk7CiAgICBtZXNzYWdlLmhhc2ggIT09IHVuZGVmaW5lZCAmJiAob2JqLmhhc2ggPSBiYXNlNjRGcm9tQnl0ZXMobWVzc2FnZS5oYXNoICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLmhhc2ggOiBuZXcgVWludDhBcnJheSgpKSk7CiAgICBtZXNzYWdlLm1ldGFkYXRhICE9PSB1bmRlZmluZWQgJiYgKG9iai5tZXRhZGF0YSA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLm1ldGFkYXRhICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLm1ldGFkYXRhIDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVNuYXBzaG90KTsKCiAgICBpZiAob2JqZWN0LmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSBvYmplY3QuaGVpZ2h0OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmZvcm1hdCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmZvcm1hdCA9IG9iamVjdC5mb3JtYXQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmZvcm1hdCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5jaHVua3MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY2h1bmtzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY2h1bmtzID0gb2JqZWN0LmNodW5rczsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY2h1bmtzID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lmhhc2ggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaGFzaCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmhhc2ggPSBvYmplY3QuaGFzaDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaGFzaCA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgaWYgKG9iamVjdC5tZXRhZGF0YSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5tZXRhZGF0YSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLm1ldGFkYXRhID0gb2JqZWN0Lm1ldGFkYXRhOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5tZXRhZGF0YSA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9OwpleHBvcnQgdmFyIEFCQ0lBcHBsaWNhdGlvbkNsaWVudEltcGwgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEFCQ0lBcHBsaWNhdGlvbkNsaWVudEltcGwocnBjKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQUJDSUFwcGxpY2F0aW9uQ2xpZW50SW1wbCk7CgogICAgdGhpcy5ycGMgPSBycGM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQUJDSUFwcGxpY2F0aW9uQ2xpZW50SW1wbCwgW3sKICAgIGtleTogIkVjaG8iLAogICAgdmFsdWU6IGZ1bmN0aW9uIEVjaG8ocmVxdWVzdCkgewogICAgICB2YXIgZGF0YSA9IFJlcXVlc3RFY2hvLmVuY29kZShyZXF1ZXN0KS5maW5pc2goKTsKICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnJwYy5yZXF1ZXN0KCJ0ZW5kZXJtaW50LmFiY2kuQUJDSUFwcGxpY2F0aW9uIiwgIkVjaG8iLCBkYXRhKTsKICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBSZXNwb25zZUVjaG8uZGVjb2RlKG5ldyBSZWFkZXIoZGF0YSkpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJGbHVzaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gRmx1c2gocmVxdWVzdCkgewogICAgICB2YXIgZGF0YSA9IFJlcXVlc3RGbHVzaC5lbmNvZGUocmVxdWVzdCkuZmluaXNoKCk7CiAgICAgIHZhciBwcm9taXNlID0gdGhpcy5ycGMucmVxdWVzdCgidGVuZGVybWludC5hYmNpLkFCQ0lBcHBsaWNhdGlvbiIsICJGbHVzaCIsIGRhdGEpOwogICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIFJlc3BvbnNlRmx1c2guZGVjb2RlKG5ldyBSZWFkZXIoZGF0YSkpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJJbmZvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBJbmZvKHJlcXVlc3QpIHsKICAgICAgdmFyIGRhdGEgPSBSZXF1ZXN0SW5mby5lbmNvZGUocmVxdWVzdCkuZmluaXNoKCk7CiAgICAgIHZhciBwcm9taXNlID0gdGhpcy5ycGMucmVxdWVzdCgidGVuZGVybWludC5hYmNpLkFCQ0lBcHBsaWNhdGlvbiIsICJJbmZvIiwgZGF0YSk7CiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gUmVzcG9uc2VJbmZvLmRlY29kZShuZXcgUmVhZGVyKGRhdGEpKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiU2V0T3B0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBTZXRPcHRpb24ocmVxdWVzdCkgewogICAgICB2YXIgZGF0YSA9IFJlcXVlc3RTZXRPcHRpb24uZW5jb2RlKHJlcXVlc3QpLmZpbmlzaCgpOwogICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucnBjLnJlcXVlc3QoInRlbmRlcm1pbnQuYWJjaS5BQkNJQXBwbGljYXRpb24iLCAiU2V0T3B0aW9uIiwgZGF0YSk7CiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gUmVzcG9uc2VTZXRPcHRpb24uZGVjb2RlKG5ldyBSZWFkZXIoZGF0YSkpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJEZWxpdmVyVHgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIERlbGl2ZXJUeChyZXF1ZXN0KSB7CiAgICAgIHZhciBkYXRhID0gUmVxdWVzdERlbGl2ZXJUeC5lbmNvZGUocmVxdWVzdCkuZmluaXNoKCk7CiAgICAgIHZhciBwcm9taXNlID0gdGhpcy5ycGMucmVxdWVzdCgidGVuZGVybWludC5hYmNpLkFCQ0lBcHBsaWNhdGlvbiIsICJEZWxpdmVyVHgiLCBkYXRhKTsKICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBSZXNwb25zZURlbGl2ZXJUeC5kZWNvZGUobmV3IFJlYWRlcihkYXRhKSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIkNoZWNrVHgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIENoZWNrVHgocmVxdWVzdCkgewogICAgICB2YXIgZGF0YSA9IFJlcXVlc3RDaGVja1R4LmVuY29kZShyZXF1ZXN0KS5maW5pc2goKTsKICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnJwYy5yZXF1ZXN0KCJ0ZW5kZXJtaW50LmFiY2kuQUJDSUFwcGxpY2F0aW9uIiwgIkNoZWNrVHgiLCBkYXRhKTsKICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBSZXNwb25zZUNoZWNrVHguZGVjb2RlKG5ldyBSZWFkZXIoZGF0YSkpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJRdWVyeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gUXVlcnkocmVxdWVzdCkgewogICAgICB2YXIgZGF0YSA9IFJlcXVlc3RRdWVyeS5lbmNvZGUocmVxdWVzdCkuZmluaXNoKCk7CiAgICAgIHZhciBwcm9taXNlID0gdGhpcy5ycGMucmVxdWVzdCgidGVuZGVybWludC5hYmNpLkFCQ0lBcHBsaWNhdGlvbiIsICJRdWVyeSIsIGRhdGEpOwogICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIFJlc3BvbnNlUXVlcnkuZGVjb2RlKG5ldyBSZWFkZXIoZGF0YSkpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJDb21taXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIENvbW1pdChyZXF1ZXN0KSB7CiAgICAgIHZhciBkYXRhID0gUmVxdWVzdENvbW1pdC5lbmNvZGUocmVxdWVzdCkuZmluaXNoKCk7CiAgICAgIHZhciBwcm9taXNlID0gdGhpcy5ycGMucmVxdWVzdCgidGVuZGVybWludC5hYmNpLkFCQ0lBcHBsaWNhdGlvbiIsICJDb21taXQiLCBkYXRhKTsKICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBSZXNwb25zZUNvbW1pdC5kZWNvZGUobmV3IFJlYWRlcihkYXRhKSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIkluaXRDaGFpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gSW5pdENoYWluKHJlcXVlc3QpIHsKICAgICAgdmFyIGRhdGEgPSBSZXF1ZXN0SW5pdENoYWluLmVuY29kZShyZXF1ZXN0KS5maW5pc2goKTsKICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnJwYy5yZXF1ZXN0KCJ0ZW5kZXJtaW50LmFiY2kuQUJDSUFwcGxpY2F0aW9uIiwgIkluaXRDaGFpbiIsIGRhdGEpOwogICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIFJlc3BvbnNlSW5pdENoYWluLmRlY29kZShuZXcgUmVhZGVyKGRhdGEpKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiQmVnaW5CbG9jayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gQmVnaW5CbG9jayhyZXF1ZXN0KSB7CiAgICAgIHZhciBkYXRhID0gUmVxdWVzdEJlZ2luQmxvY2suZW5jb2RlKHJlcXVlc3QpLmZpbmlzaCgpOwogICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucnBjLnJlcXVlc3QoInRlbmRlcm1pbnQuYWJjaS5BQkNJQXBwbGljYXRpb24iLCAiQmVnaW5CbG9jayIsIGRhdGEpOwogICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIFJlc3BvbnNlQmVnaW5CbG9jay5kZWNvZGUobmV3IFJlYWRlcihkYXRhKSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIkVuZEJsb2NrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBFbmRCbG9jayhyZXF1ZXN0KSB7CiAgICAgIHZhciBkYXRhID0gUmVxdWVzdEVuZEJsb2NrLmVuY29kZShyZXF1ZXN0KS5maW5pc2goKTsKICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnJwYy5yZXF1ZXN0KCJ0ZW5kZXJtaW50LmFiY2kuQUJDSUFwcGxpY2F0aW9uIiwgIkVuZEJsb2NrIiwgZGF0YSk7CiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gUmVzcG9uc2VFbmRCbG9jay5kZWNvZGUobmV3IFJlYWRlcihkYXRhKSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIkxpc3RTbmFwc2hvdHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIExpc3RTbmFwc2hvdHMocmVxdWVzdCkgewogICAgICB2YXIgZGF0YSA9IFJlcXVlc3RMaXN0U25hcHNob3RzLmVuY29kZShyZXF1ZXN0KS5maW5pc2goKTsKICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnJwYy5yZXF1ZXN0KCJ0ZW5kZXJtaW50LmFiY2kuQUJDSUFwcGxpY2F0aW9uIiwgIkxpc3RTbmFwc2hvdHMiLCBkYXRhKTsKICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBSZXNwb25zZUxpc3RTbmFwc2hvdHMuZGVjb2RlKG5ldyBSZWFkZXIoZGF0YSkpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJPZmZlclNuYXBzaG90IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBPZmZlclNuYXBzaG90KHJlcXVlc3QpIHsKICAgICAgdmFyIGRhdGEgPSBSZXF1ZXN0T2ZmZXJTbmFwc2hvdC5lbmNvZGUocmVxdWVzdCkuZmluaXNoKCk7CiAgICAgIHZhciBwcm9taXNlID0gdGhpcy5ycGMucmVxdWVzdCgidGVuZGVybWludC5hYmNpLkFCQ0lBcHBsaWNhdGlvbiIsICJPZmZlclNuYXBzaG90IiwgZGF0YSk7CiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gUmVzcG9uc2VPZmZlclNuYXBzaG90LmRlY29kZShuZXcgUmVhZGVyKGRhdGEpKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiTG9hZFNuYXBzaG90Q2h1bmsiLAogICAgdmFsdWU6IGZ1bmN0aW9uIExvYWRTbmFwc2hvdENodW5rKHJlcXVlc3QpIHsKICAgICAgdmFyIGRhdGEgPSBSZXF1ZXN0TG9hZFNuYXBzaG90Q2h1bmsuZW5jb2RlKHJlcXVlc3QpLmZpbmlzaCgpOwogICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucnBjLnJlcXVlc3QoInRlbmRlcm1pbnQuYWJjaS5BQkNJQXBwbGljYXRpb24iLCAiTG9hZFNuYXBzaG90Q2h1bmsiLCBkYXRhKTsKICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBSZXNwb25zZUxvYWRTbmFwc2hvdENodW5rLmRlY29kZShuZXcgUmVhZGVyKGRhdGEpKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiQXBwbHlTbmFwc2hvdENodW5rIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBBcHBseVNuYXBzaG90Q2h1bmsocmVxdWVzdCkgewogICAgICB2YXIgZGF0YSA9IFJlcXVlc3RBcHBseVNuYXBzaG90Q2h1bmsuZW5jb2RlKHJlcXVlc3QpLmZpbmlzaCgpOwogICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucnBjLnJlcXVlc3QoInRlbmRlcm1pbnQuYWJjaS5BQkNJQXBwbGljYXRpb24iLCAiQXBwbHlTbmFwc2hvdENodW5rIiwgZGF0YSk7CiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmsuZGVjb2RlKG5ldyBSZWFkZXIoZGF0YSkpOwogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBBQkNJQXBwbGljYXRpb25DbGllbnRJbXBsOwp9KCk7Cgp2YXIgZ2xvYmFsVGhpcyA9IGZ1bmN0aW9uICgpIHsKICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09ICJ1bmRlZmluZWQiKSByZXR1cm4gZ2xvYmFsVGhpczsKICBpZiAodHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiKSByZXR1cm4gc2VsZjsKICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIpIHJldHVybiB3aW5kb3c7CiAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiKSByZXR1cm4gZ2xvYmFsOwogIHRocm93ICJVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QiOwp9KCk7Cgp2YXIgYXRvYiA9IGdsb2JhbFRoaXMuYXRvYiB8fCBmdW5jdGlvbiAoYjY0KSB7CiAgcmV0dXJuIGdsb2JhbFRoaXMuQnVmZmVyLmZyb20oYjY0LCAiYmFzZTY0IikudG9TdHJpbmcoImJpbmFyeSIpOwp9OwoKZnVuY3Rpb24gYnl0ZXNGcm9tQmFzZTY0KGI2NCkgewogIHZhciBiaW4gPSBhdG9iKGI2NCk7CiAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KGJpbi5sZW5ndGgpOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IGJpbi5sZW5ndGg7ICsraSkgewogICAgYXJyW2ldID0gYmluLmNoYXJDb2RlQXQoaSk7CiAgfQoKICByZXR1cm4gYXJyOwp9Cgp2YXIgYnRvYSA9IGdsb2JhbFRoaXMuYnRvYSB8fCBmdW5jdGlvbiAoYmluKSB7CiAgcmV0dXJuIGdsb2JhbFRoaXMuQnVmZmVyLmZyb20oYmluLCAiYmluYXJ5IikudG9TdHJpbmcoImJhc2U2NCIpOwp9OwoKZnVuY3Rpb24gYmFzZTY0RnJvbUJ5dGVzKGFycikgewogIHZhciBiaW4gPSBbXTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIuYnl0ZUxlbmd0aDsgKytpKSB7CiAgICBiaW4ucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGFycltpXSkpOwogIH0KCiAgcmV0dXJuIGJ0b2EoYmluLmpvaW4oIiIpKTsKfQoKZnVuY3Rpb24gdG9UaW1lc3RhbXAoZGF0ZSkgewogIHZhciBzZWNvbmRzID0gZGF0ZS5nZXRUaW1lKCkgLyAxMDAwOwogIHZhciBuYW5vcyA9IGRhdGUuZ2V0VGltZSgpICUgMTAwMCAqIDEwMDAwMDA7CiAgcmV0dXJuIHsKICAgIHNlY29uZHM6IHNlY29uZHMsCiAgICBuYW5vczogbmFub3MKICB9Owp9CgpmdW5jdGlvbiBmcm9tVGltZXN0YW1wKHQpIHsKICB2YXIgbWlsbGlzID0gdC5zZWNvbmRzICogMTAwMDsKICBtaWxsaXMgKz0gdC5uYW5vcyAvIDEwMDAwMDA7CiAgcmV0dXJuIG5ldyBEYXRlKG1pbGxpcyk7Cn0KCmZ1bmN0aW9uIGZyb21Kc29uVGltZXN0YW1wKG8pIHsKICBpZiAobyBpbnN0YW5jZW9mIERhdGUpIHsKICAgIHJldHVybiBvOwogIH0gZWxzZSBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSB7CiAgICByZXR1cm4gbmV3IERhdGUobyk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBmcm9tVGltZXN0YW1wKFRpbWVzdGFtcC5mcm9tSlNPTihvKSk7CiAgfQp9CgpmdW5jdGlvbiBsb25nVG9OdW1iZXIobG9uZykgewogIGlmIChsb25nLmd0KE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSkgewogICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoIlZhbHVlIGlzIGxhcmdlciB0aGFuIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIik7CiAgfQoKICByZXR1cm4gbG9uZy50b051bWJlcigpOwp9CgppZiAodXRpbC5Mb25nICE9PSBMb25nKSB7CiAgdXRpbC5Mb25nID0gTG9uZzsKICBjb25maWd1cmUoKTsKfQ=="},{"version":3,"sources":["/home/saptarsi/go/src/hackathon/shiaa3/vue/src/store/generated/cosmos/cosmos-sdk/cosmos.base.abci.v1beta1/module/types/tendermint/abci/types.js"],"names":["Reader","util","configure","Writer","Timestamp","Long","Header","ProofOps","EvidenceParams","ValidatorParams","VersionParams","PublicKey","protobufPackage","CheckTxType","checkTxTypeFromJSON","object","NEW","RECHECK","UNRECOGNIZED","checkTxTypeToJSON","EvidenceType","evidenceTypeFromJSON","UNKNOWN","DUPLICATE_VOTE","LIGHT_CLIENT_ATTACK","evidenceTypeToJSON","ResponseOfferSnapshot_Result","responseOfferSnapshot_ResultFromJSON","ACCEPT","ABORT","REJECT","REJECT_FORMAT","REJECT_SENDER","responseOfferSnapshot_ResultToJSON","ResponseApplySnapshotChunk_Result","responseApplySnapshotChunk_ResultFromJSON","RETRY","RETRY_SNAPSHOT","REJECT_SNAPSHOT","responseApplySnapshotChunk_ResultToJSON","baseRequest","Request","encode","message","writer","create","echo","undefined","RequestEcho","uint32","fork","ldelim","flush","RequestFlush","info","RequestInfo","setOption","RequestSetOption","initChain","RequestInitChain","query","RequestQuery","beginBlock","RequestBeginBlock","checkTx","RequestCheckTx","deliverTx","RequestDeliverTx","endBlock","RequestEndBlock","commit","RequestCommit","listSnapshots","RequestListSnapshots","offerSnapshot","RequestOfferSnapshot","loadSnapshotChunk","RequestLoadSnapshotChunk","applySnapshotChunk","RequestApplySnapshotChunk","decode","input","length","reader","Uint8Array","end","len","pos","tag","skipType","fromJSON","toJSON","obj","fromPartial","baseRequestEcho","string","String","baseRequestFlush","_","baseRequestInfo","version","blockVersion","p2pVersion","uint64","longToNumber","Number","baseRequestSetOption","key","value","baseRequestInitChain","chainId","initialHeight","time","toTimestamp","consensusParams","ConsensusParams","validators","v","ValidatorUpdate","appStateBytes","bytes","int64","fromTimestamp","push","fromJsonTimestamp","e","bytesFromBase64","toISOString","map","base64FromBytes","baseRequestQuery","path","height","prove","data","bool","Boolean","baseRequestBeginBlock","hash","header","lastCommitInfo","LastCommitInfo","byzantineValidators","Evidence","baseRequestCheckTx","type","tx","int32","baseRequestDeliverTx","baseRequestEndBlock","baseRequestCommit","baseRequestListSnapshots","baseRequestOfferSnapshot","snapshot","Snapshot","appHash","baseRequestLoadSnapshotChunk","format","chunk","baseRequestApplySnapshotChunk","index","sender","baseResponse","Response","exception","ResponseException","ResponseEcho","ResponseFlush","ResponseInfo","ResponseSetOption","ResponseInitChain","ResponseQuery","ResponseBeginBlock","ResponseCheckTx","ResponseDeliverTx","ResponseEndBlock","ResponseCommit","ResponseListSnapshots","ResponseOfferSnapshot","ResponseLoadSnapshotChunk","ResponseApplySnapshotChunk","baseResponseException","error","baseResponseEcho","baseResponseFlush","baseResponseInfo","appVersion","lastBlockHeight","lastBlockAppHash","baseResponseSetOption","code","log","baseResponseInitChain","baseResponseQuery","codespace","proofOps","baseResponseBeginBlock","events","Event","baseResponseCheckTx","gasWanted","gasUsed","baseResponseDeliverTx","baseResponseEndBlock","validatorUpdates","consensusParamUpdates","baseResponseCommit","retainHeight","baseResponseListSnapshots","snapshots","baseResponseOfferSnapshot","result","baseResponseLoadSnapshotChunk","baseResponseApplySnapshotChunk","refetchChunks","rejectSenders","end2","baseConsensusParams","block","BlockParams","evidence","validator","baseBlockParams","maxBytes","maxGas","baseLastCommitInfo","round","votes","VoteInfo","baseEvent","attributes","EventAttribute","baseEventAttribute","baseTxResult","TxResult","baseValidator","power","Validator","address","baseValidatorUpdate","pubKey","baseVoteInfo","signedLastBlock","baseEvidence","totalVotingPower","baseSnapshot","chunks","metadata","ABCIApplicationClientImpl","rpc","request","finish","promise","then","globalThis","self","window","global","atob","b64","Buffer","from","toString","bin","arr","i","charCodeAt","btoa","byteLength","fromCharCode","join","date","seconds","getTime","nanos","t","millis","Date","o","long","gt","MAX_SAFE_INTEGER","Error","toNumber"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA,SAASA,MAAT,EAAiBC,IAAjB,EAAuBC,SAAvB,EAAkCC,MAAlC,QAAgD,oBAAhD;AACA,SAASC,SAAT,QAA0B,iCAA1B;AACA,OAAO,KAAKC,IAAZ,MAAsB,MAAtB;AACA,SAASC,MAAT,QAAuB,8BAAvB;AACA,SAASC,QAAT,QAAyB,+BAAzB;AACA,SAASC,cAAT,EAAyBC,eAAzB,EAA0CC,aAA1C,QAAgE,+BAAhE;AACA,SAASC,SAAT,QAA0B,8BAA1B;AACA,OAAO,IAAMC,eAAe,GAAG,iBAAxB;AACP,OAAO,IAAIC,WAAJ;;AACP,CAAC,UAAUA,WAAV,EAAuB;AACpBA,EAAAA,WAAW,CAACA,WAAW,CAAC,KAAD,CAAX,GAAqB,CAAtB,CAAX,GAAsC,KAAtC;AACAA,EAAAA,WAAW,CAACA,WAAW,CAAC,SAAD,CAAX,GAAyB,CAA1B,CAAX,GAA0C,SAA1C;AACAA,EAAAA,WAAW,CAACA,WAAW,CAAC,cAAD,CAAX,GAA8B,CAAC,CAAhC,CAAX,GAAgD,cAAhD;AACH,CAJD,EAIGA,WAAW,KAAKA,WAAW,GAAG,EAAnB,CAJd;;AAKA,OAAO,SAASC,mBAAT,CAA6BC,MAA7B,EAAqC;AACxC,UAAQA,MAAR;AACI,SAAK,CAAL;AACA,SAAK,KAAL;AACI,aAAOF,WAAW,CAACG,GAAnB;;AACJ,SAAK,CAAL;AACA,SAAK,SAAL;AACI,aAAOH,WAAW,CAACI,OAAnB;;AACJ,SAAK,CAAC,CAAN;AACA,SAAK,cAAL;AACA;AACI,aAAOJ,WAAW,CAACK,YAAnB;AAVR;AAYH;AACD,OAAO,SAASC,iBAAT,CAA2BJ,MAA3B,EAAmC;AACtC,UAAQA,MAAR;AACI,SAAKF,WAAW,CAACG,GAAjB;AACI,aAAO,KAAP;;AACJ,SAAKH,WAAW,CAACI,OAAjB;AACI,aAAO,SAAP;;AACJ;AACI,aAAO,SAAP;AANR;AAQH;AACD,OAAO,IAAIG,YAAJ;;AACP,CAAC,UAAUA,YAAV,EAAwB;AACrBA,EAAAA,YAAY,CAACA,YAAY,CAAC,SAAD,CAAZ,GAA0B,CAA3B,CAAZ,GAA4C,SAA5C;AACAA,EAAAA,YAAY,CAACA,YAAY,CAAC,gBAAD,CAAZ,GAAiC,CAAlC,CAAZ,GAAmD,gBAAnD;AACAA,EAAAA,YAAY,CAACA,YAAY,CAAC,qBAAD,CAAZ,GAAsC,CAAvC,CAAZ,GAAwD,qBAAxD;AACAA,EAAAA,YAAY,CAACA,YAAY,CAAC,cAAD,CAAZ,GAA+B,CAAC,CAAjC,CAAZ,GAAkD,cAAlD;AACH,CALD,EAKGA,YAAY,KAAKA,YAAY,GAAG,EAApB,CALf;;AAMA,OAAO,SAASC,oBAAT,CAA8BN,MAA9B,EAAsC;AACzC,UAAQA,MAAR;AACI,SAAK,CAAL;AACA,SAAK,SAAL;AACI,aAAOK,YAAY,CAACE,OAApB;;AACJ,SAAK,CAAL;AACA,SAAK,gBAAL;AACI,aAAOF,YAAY,CAACG,cAApB;;AACJ,SAAK,CAAL;AACA,SAAK,qBAAL;AACI,aAAOH,YAAY,CAACI,mBAApB;;AACJ,SAAK,CAAC,CAAN;AACA,SAAK,cAAL;AACA;AACI,aAAOJ,YAAY,CAACF,YAApB;AAbR;AAeH;AACD,OAAO,SAASO,kBAAT,CAA4BV,MAA5B,EAAoC;AACvC,UAAQA,MAAR;AACI,SAAKK,YAAY,CAACE,OAAlB;AACI,aAAO,SAAP;;AACJ,SAAKF,YAAY,CAACG,cAAlB;AACI,aAAO,gBAAP;;AACJ,SAAKH,YAAY,CAACI,mBAAlB;AACI,aAAO,qBAAP;;AACJ;AACI,aAAO,SAAP;AARR;AAUH;AACD,OAAO,IAAIE,4BAAJ;;AACP,CAAC,UAAUA,4BAAV,EAAwC;AACrC;AACAA,EAAAA,4BAA4B,CAACA,4BAA4B,CAAC,SAAD,CAA5B,GAA0C,CAA3C,CAA5B,GAA4E,SAA5E;AACA;;AACAA,EAAAA,4BAA4B,CAACA,4BAA4B,CAAC,QAAD,CAA5B,GAAyC,CAA1C,CAA5B,GAA2E,QAA3E;AACA;;AACAA,EAAAA,4BAA4B,CAACA,4BAA4B,CAAC,OAAD,CAA5B,GAAwC,CAAzC,CAA5B,GAA0E,OAA1E;AACA;;AACAA,EAAAA,4BAA4B,CAACA,4BAA4B,CAAC,QAAD,CAA5B,GAAyC,CAA1C,CAA5B,GAA2E,QAA3E;AACA;;AACAA,EAAAA,4BAA4B,CAACA,4BAA4B,CAAC,eAAD,CAA5B,GAAgD,CAAjD,CAA5B,GAAkF,eAAlF;AACA;;AACAA,EAAAA,4BAA4B,CAACA,4BAA4B,CAAC,eAAD,CAA5B,GAAgD,CAAjD,CAA5B,GAAkF,eAAlF;AACAA,EAAAA,4BAA4B,CAACA,4BAA4B,CAAC,cAAD,CAA5B,GAA+C,CAAC,CAAjD,CAA5B,GAAkF,cAAlF;AACH,CAdD,EAcGA,4BAA4B,KAAKA,4BAA4B,GAAG,EAApC,CAd/B;;AAeA,OAAO,SAASC,oCAAT,CAA8CZ,MAA9C,EAAsD;AACzD,UAAQA,MAAR;AACI,SAAK,CAAL;AACA,SAAK,SAAL;AACI,aAAOW,4BAA4B,CAACJ,OAApC;;AACJ,SAAK,CAAL;AACA,SAAK,QAAL;AACI,aAAOI,4BAA4B,CAACE,MAApC;;AACJ,SAAK,CAAL;AACA,SAAK,OAAL;AACI,aAAOF,4BAA4B,CAACG,KAApC;;AACJ,SAAK,CAAL;AACA,SAAK,QAAL;AACI,aAAOH,4BAA4B,CAACI,MAApC;;AACJ,SAAK,CAAL;AACA,SAAK,eAAL;AACI,aAAOJ,4BAA4B,CAACK,aAApC;;AACJ,SAAK,CAAL;AACA,SAAK,eAAL;AACI,aAAOL,4BAA4B,CAACM,aAApC;;AACJ,SAAK,CAAC,CAAN;AACA,SAAK,cAAL;AACA;AACI,aAAON,4BAA4B,CAACR,YAApC;AAtBR;AAwBH;AACD,OAAO,SAASe,kCAAT,CAA4ClB,MAA5C,EAAoD;AACvD,UAAQA,MAAR;AACI,SAAKW,4BAA4B,CAACJ,OAAlC;AACI,aAAO,SAAP;;AACJ,SAAKI,4BAA4B,CAACE,MAAlC;AACI,aAAO,QAAP;;AACJ,SAAKF,4BAA4B,CAACG,KAAlC;AACI,aAAO,OAAP;;AACJ,SAAKH,4BAA4B,CAACI,MAAlC;AACI,aAAO,QAAP;;AACJ,SAAKJ,4BAA4B,CAACK,aAAlC;AACI,aAAO,eAAP;;AACJ,SAAKL,4BAA4B,CAACM,aAAlC;AACI,aAAO,eAAP;;AACJ;AACI,aAAO,SAAP;AAdR;AAgBH;AACD,OAAO,IAAIE,iCAAJ;;AACP,CAAC,UAAUA,iCAAV,EAA6C;AAC1C;AACAA,EAAAA,iCAAiC,CAACA,iCAAiC,CAAC,SAAD,CAAjC,GAA+C,CAAhD,CAAjC,GAAsF,SAAtF;AACA;;AACAA,EAAAA,iCAAiC,CAACA,iCAAiC,CAAC,QAAD,CAAjC,GAA8C,CAA/C,CAAjC,GAAqF,QAArF;AACA;;AACAA,EAAAA,iCAAiC,CAACA,iCAAiC,CAAC,OAAD,CAAjC,GAA6C,CAA9C,CAAjC,GAAoF,OAApF;AACA;;AACAA,EAAAA,iCAAiC,CAACA,iCAAiC,CAAC,OAAD,CAAjC,GAA6C,CAA9C,CAAjC,GAAoF,OAApF;AACA;;AACAA,EAAAA,iCAAiC,CAACA,iCAAiC,CAAC,gBAAD,CAAjC,GAAsD,CAAvD,CAAjC,GAA6F,gBAA7F;AACA;;AACAA,EAAAA,iCAAiC,CAACA,iCAAiC,CAAC,iBAAD,CAAjC,GAAuD,CAAxD,CAAjC,GAA8F,iBAA9F;AACAA,EAAAA,iCAAiC,CAACA,iCAAiC,CAAC,cAAD,CAAjC,GAAoD,CAAC,CAAtD,CAAjC,GAA4F,cAA5F;AACH,CAdD,EAcGA,iCAAiC,KAAKA,iCAAiC,GAAG,EAAzC,CAdpC;;AAeA,OAAO,SAASC,yCAAT,CAAmDpB,MAAnD,EAA2D;AAC9D,UAAQA,MAAR;AACI,SAAK,CAAL;AACA,SAAK,SAAL;AACI,aAAOmB,iCAAiC,CAACZ,OAAzC;;AACJ,SAAK,CAAL;AACA,SAAK,QAAL;AACI,aAAOY,iCAAiC,CAACN,MAAzC;;AACJ,SAAK,CAAL;AACA,SAAK,OAAL;AACI,aAAOM,iCAAiC,CAACL,KAAzC;;AACJ,SAAK,CAAL;AACA,SAAK,OAAL;AACI,aAAOK,iCAAiC,CAACE,KAAzC;;AACJ,SAAK,CAAL;AACA,SAAK,gBAAL;AACI,aAAOF,iCAAiC,CAACG,cAAzC;;AACJ,SAAK,CAAL;AACA,SAAK,iBAAL;AACI,aAAOH,iCAAiC,CAACI,eAAzC;;AACJ,SAAK,CAAC,CAAN;AACA,SAAK,cAAL;AACA;AACI,aAAOJ,iCAAiC,CAAChB,YAAzC;AAtBR;AAwBH;AACD,OAAO,SAASqB,uCAAT,CAAiDxB,MAAjD,EAAyD;AAC5D,UAAQA,MAAR;AACI,SAAKmB,iCAAiC,CAACZ,OAAvC;AACI,aAAO,SAAP;;AACJ,SAAKY,iCAAiC,CAACN,MAAvC;AACI,aAAO,QAAP;;AACJ,SAAKM,iCAAiC,CAACL,KAAvC;AACI,aAAO,OAAP;;AACJ,SAAKK,iCAAiC,CAACE,KAAvC;AACI,aAAO,OAAP;;AACJ,SAAKF,iCAAiC,CAACG,cAAvC;AACI,aAAO,gBAAP;;AACJ,SAAKH,iCAAiC,CAACI,eAAvC;AACI,aAAO,iBAAP;;AACJ;AACI,aAAO,SAAP;AAdR;AAgBH;AACD,IAAME,WAAW,GAAG,EAApB;AACA,OAAO,IAAMC,OAAO,GAAG;AACnBC,EAAAA,MADmB,kBACZC,OADY,EACuB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACG,IAAR,KAAiBC,SAArB,EAAgC;AAC5BC,MAAAA,WAAW,CAACN,MAAZ,CAAmBC,OAAO,CAACG,IAA3B,EAAiCF,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAjC,EAA2DC,MAA3D;AACH;;AACD,QAAIR,OAAO,CAACS,KAAR,KAAkBL,SAAtB,EAAiC;AAC7BM,MAAAA,YAAY,CAACX,MAAb,CAAoBC,OAAO,CAACS,KAA5B,EAAmCR,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAnC,EAA6DC,MAA7D;AACH;;AACD,QAAIR,OAAO,CAACW,IAAR,KAAiBP,SAArB,EAAgC;AAC5BQ,MAAAA,WAAW,CAACb,MAAZ,CAAmBC,OAAO,CAACW,IAA3B,EAAiCV,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAjC,EAA2DC,MAA3D;AACH;;AACD,QAAIR,OAAO,CAACa,SAAR,KAAsBT,SAA1B,EAAqC;AACjCU,MAAAA,gBAAgB,CAACf,MAAjB,CAAwBC,OAAO,CAACa,SAAhC,EAA2CZ,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA3C,EAAqEC,MAArE;AACH;;AACD,QAAIR,OAAO,CAACe,SAAR,KAAsBX,SAA1B,EAAqC;AACjCY,MAAAA,gBAAgB,CAACjB,MAAjB,CAAwBC,OAAO,CAACe,SAAhC,EAA2Cd,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA3C,EAAqEC,MAArE;AACH;;AACD,QAAIR,OAAO,CAACiB,KAAR,KAAkBb,SAAtB,EAAiC;AAC7Bc,MAAAA,YAAY,CAACnB,MAAb,CAAoBC,OAAO,CAACiB,KAA5B,EAAmChB,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAnC,EAA6DC,MAA7D;AACH;;AACD,QAAIR,OAAO,CAACmB,UAAR,KAAuBf,SAA3B,EAAsC;AAClCgB,MAAAA,iBAAiB,CAACrB,MAAlB,CAAyBC,OAAO,CAACmB,UAAjC,EAA6ClB,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA7C,EAAuEC,MAAvE;AACH;;AACD,QAAIR,OAAO,CAACqB,OAAR,KAAoBjB,SAAxB,EAAmC;AAC/BkB,MAAAA,cAAc,CAACvB,MAAf,CAAsBC,OAAO,CAACqB,OAA9B,EAAuCpB,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAvC,EAAiEC,MAAjE;AACH;;AACD,QAAIR,OAAO,CAACuB,SAAR,KAAsBnB,SAA1B,EAAqC;AACjCoB,MAAAA,gBAAgB,CAACzB,MAAjB,CAAwBC,OAAO,CAACuB,SAAhC,EAA2CtB,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA3C,EAAqEC,MAArE;AACH;;AACD,QAAIR,OAAO,CAACyB,QAAR,KAAqBrB,SAAzB,EAAoC;AAChCsB,MAAAA,eAAe,CAAC3B,MAAhB,CAAuBC,OAAO,CAACyB,QAA/B,EAAyCxB,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAzC,EAAmEC,MAAnE;AACH;;AACD,QAAIR,OAAO,CAAC2B,MAAR,KAAmBvB,SAAvB,EAAkC;AAC9BwB,MAAAA,aAAa,CAAC7B,MAAd,CAAqBC,OAAO,CAAC2B,MAA7B,EAAqC1B,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAArC,EAA+DC,MAA/D;AACH;;AACD,QAAIR,OAAO,CAAC6B,aAAR,KAA0BzB,SAA9B,EAAyC;AACrC0B,MAAAA,oBAAoB,CAAC/B,MAArB,CAA4BC,OAAO,CAAC6B,aAApC,EAAmD5B,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAnD,EAA6EC,MAA7E;AACH;;AACD,QAAIR,OAAO,CAAC+B,aAAR,KAA0B3B,SAA9B,EAAyC;AACrC4B,MAAAA,oBAAoB,CAACjC,MAArB,CAA4BC,OAAO,CAAC+B,aAApC,EAAmD9B,MAAM,CAACK,MAAP,CAAc,GAAd,EAAmBC,IAAnB,EAAnD,EAA8EC,MAA9E;AACH;;AACD,QAAIR,OAAO,CAACiC,iBAAR,KAA8B7B,SAAlC,EAA6C;AACzC8B,MAAAA,wBAAwB,CAACnC,MAAzB,CAAgCC,OAAO,CAACiC,iBAAxC,EAA2DhC,MAAM,CAACK,MAAP,CAAc,GAAd,EAAmBC,IAAnB,EAA3D,EAAsFC,MAAtF;AACH;;AACD,QAAIR,OAAO,CAACmC,kBAAR,KAA+B/B,SAAnC,EAA8C;AAC1CgC,MAAAA,yBAAyB,CAACrC,MAA1B,CAAiCC,OAAO,CAACmC,kBAAzC,EAA6DlC,MAAM,CAACK,MAAP,CAAc,GAAd,EAAmBC,IAAnB,EAA7D,EAAwFC,MAAxF;AACH;;AACD,WAAOP,MAAP;AACH,GAhDkB;AAiDnBoC,EAAAA,MAjDmB,kBAiDZC,KAjDY,EAiDLC,MAjDK,EAiDG;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQH,WAAR,CAAb;;AACA,WAAO2C,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACG,IAAR,GAAeE,WAAW,CAACgC,MAAZ,CAAmBG,MAAnB,EAA2BA,MAAM,CAAClC,MAAP,EAA3B,CAAf;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACS,KAAR,GAAgBC,YAAY,CAAC2B,MAAb,CAAoBG,MAApB,EAA4BA,MAAM,CAAClC,MAAP,EAA5B,CAAhB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACW,IAAR,GAAeC,WAAW,CAACyB,MAAZ,CAAmBG,MAAnB,EAA2BA,MAAM,CAAClC,MAAP,EAA3B,CAAf;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACa,SAAR,GAAoBC,gBAAgB,CAACuB,MAAjB,CAAwBG,MAAxB,EAAgCA,MAAM,CAAClC,MAAP,EAAhC,CAApB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACe,SAAR,GAAoBC,gBAAgB,CAACqB,MAAjB,CAAwBG,MAAxB,EAAgCA,MAAM,CAAClC,MAAP,EAAhC,CAApB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACiB,KAAR,GAAgBC,YAAY,CAACmB,MAAb,CAAoBG,MAApB,EAA4BA,MAAM,CAAClC,MAAP,EAA5B,CAAhB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACmB,UAAR,GAAqBC,iBAAiB,CAACiB,MAAlB,CAAyBG,MAAzB,EAAiCA,MAAM,CAAClC,MAAP,EAAjC,CAArB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACqB,OAAR,GAAkBC,cAAc,CAACe,MAAf,CAAsBG,MAAtB,EAA8BA,MAAM,CAAClC,MAAP,EAA9B,CAAlB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACuB,SAAR,GAAoBC,gBAAgB,CAACa,MAAjB,CAAwBG,MAAxB,EAAgCA,MAAM,CAAClC,MAAP,EAAhC,CAApB;AACA;;AACJ,aAAK,EAAL;AACIN,UAAAA,OAAO,CAACyB,QAAR,GAAmBC,eAAe,CAACW,MAAhB,CAAuBG,MAAvB,EAA+BA,MAAM,CAAClC,MAAP,EAA/B,CAAnB;AACA;;AACJ,aAAK,EAAL;AACIN,UAAAA,OAAO,CAAC2B,MAAR,GAAiBC,aAAa,CAACS,MAAd,CAAqBG,MAArB,EAA6BA,MAAM,CAAClC,MAAP,EAA7B,CAAjB;AACA;;AACJ,aAAK,EAAL;AACIN,UAAAA,OAAO,CAAC6B,aAAR,GAAwBC,oBAAoB,CAACO,MAArB,CAA4BG,MAA5B,EAAoCA,MAAM,CAAClC,MAAP,EAApC,CAAxB;AACA;;AACJ,aAAK,EAAL;AACIN,UAAAA,OAAO,CAAC+B,aAAR,GAAwBC,oBAAoB,CAACK,MAArB,CAA4BG,MAA5B,EAAoCA,MAAM,CAAClC,MAAP,EAApC,CAAxB;AACA;;AACJ,aAAK,EAAL;AACIN,UAAAA,OAAO,CAACiC,iBAAR,GAA4BC,wBAAwB,CAACG,MAAzB,CAAgCG,MAAhC,EAAwCA,MAAM,CAAClC,MAAP,EAAxC,CAA5B;AACA;;AACJ,aAAK,EAAL;AACIN,UAAAA,OAAO,CAACmC,kBAAR,GAA6BC,yBAAyB,CAACC,MAA1B,CAAiCG,MAAjC,EAAyCA,MAAM,CAAClC,MAAP,EAAzC,CAA7B;AACA;;AACJ;AACIkC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAhDR;AAkDH;;AACD,WAAO7C,OAAP;AACH,GA3GkB;AA4GnB+C,EAAAA,QA5GmB,oBA4GV3E,MA5GU,EA4GF;AACb,QAAM4B,OAAO,qBAAQH,WAAR,CAAb;;AACA,QAAIzB,MAAM,CAAC+B,IAAP,KAAgBC,SAAhB,IAA6BhC,MAAM,CAAC+B,IAAP,KAAgB,IAAjD,EAAuD;AACnDH,MAAAA,OAAO,CAACG,IAAR,GAAeE,WAAW,CAAC0C,QAAZ,CAAqB3E,MAAM,CAAC+B,IAA5B,CAAf;AACH,KAFD,MAGK;AACDH,MAAAA,OAAO,CAACG,IAAR,GAAeC,SAAf;AACH;;AACD,QAAIhC,MAAM,CAACqC,KAAP,KAAiBL,SAAjB,IAA8BhC,MAAM,CAACqC,KAAP,KAAiB,IAAnD,EAAyD;AACrDT,MAAAA,OAAO,CAACS,KAAR,GAAgBC,YAAY,CAACqC,QAAb,CAAsB3E,MAAM,CAACqC,KAA7B,CAAhB;AACH,KAFD,MAGK;AACDT,MAAAA,OAAO,CAACS,KAAR,GAAgBL,SAAhB;AACH;;AACD,QAAIhC,MAAM,CAACuC,IAAP,KAAgBP,SAAhB,IAA6BhC,MAAM,CAACuC,IAAP,KAAgB,IAAjD,EAAuD;AACnDX,MAAAA,OAAO,CAACW,IAAR,GAAeC,WAAW,CAACmC,QAAZ,CAAqB3E,MAAM,CAACuC,IAA5B,CAAf;AACH,KAFD,MAGK;AACDX,MAAAA,OAAO,CAACW,IAAR,GAAeP,SAAf;AACH;;AACD,QAAIhC,MAAM,CAACyC,SAAP,KAAqBT,SAArB,IAAkChC,MAAM,CAACyC,SAAP,KAAqB,IAA3D,EAAiE;AAC7Db,MAAAA,OAAO,CAACa,SAAR,GAAoBC,gBAAgB,CAACiC,QAAjB,CAA0B3E,MAAM,CAACyC,SAAjC,CAApB;AACH,KAFD,MAGK;AACDb,MAAAA,OAAO,CAACa,SAAR,GAAoBT,SAApB;AACH;;AACD,QAAIhC,MAAM,CAAC2C,SAAP,KAAqBX,SAArB,IAAkChC,MAAM,CAAC2C,SAAP,KAAqB,IAA3D,EAAiE;AAC7Df,MAAAA,OAAO,CAACe,SAAR,GAAoBC,gBAAgB,CAAC+B,QAAjB,CAA0B3E,MAAM,CAAC2C,SAAjC,CAApB;AACH,KAFD,MAGK;AACDf,MAAAA,OAAO,CAACe,SAAR,GAAoBX,SAApB;AACH;;AACD,QAAIhC,MAAM,CAAC6C,KAAP,KAAiBb,SAAjB,IAA8BhC,MAAM,CAAC6C,KAAP,KAAiB,IAAnD,EAAyD;AACrDjB,MAAAA,OAAO,CAACiB,KAAR,GAAgBC,YAAY,CAAC6B,QAAb,CAAsB3E,MAAM,CAAC6C,KAA7B,CAAhB;AACH,KAFD,MAGK;AACDjB,MAAAA,OAAO,CAACiB,KAAR,GAAgBb,SAAhB;AACH;;AACD,QAAIhC,MAAM,CAAC+C,UAAP,KAAsBf,SAAtB,IAAmChC,MAAM,CAAC+C,UAAP,KAAsB,IAA7D,EAAmE;AAC/DnB,MAAAA,OAAO,CAACmB,UAAR,GAAqBC,iBAAiB,CAAC2B,QAAlB,CAA2B3E,MAAM,CAAC+C,UAAlC,CAArB;AACH,KAFD,MAGK;AACDnB,MAAAA,OAAO,CAACmB,UAAR,GAAqBf,SAArB;AACH;;AACD,QAAIhC,MAAM,CAACiD,OAAP,KAAmBjB,SAAnB,IAAgChC,MAAM,CAACiD,OAAP,KAAmB,IAAvD,EAA6D;AACzDrB,MAAAA,OAAO,CAACqB,OAAR,GAAkBC,cAAc,CAACyB,QAAf,CAAwB3E,MAAM,CAACiD,OAA/B,CAAlB;AACH,KAFD,MAGK;AACDrB,MAAAA,OAAO,CAACqB,OAAR,GAAkBjB,SAAlB;AACH;;AACD,QAAIhC,MAAM,CAACmD,SAAP,KAAqBnB,SAArB,IAAkChC,MAAM,CAACmD,SAAP,KAAqB,IAA3D,EAAiE;AAC7DvB,MAAAA,OAAO,CAACuB,SAAR,GAAoBC,gBAAgB,CAACuB,QAAjB,CAA0B3E,MAAM,CAACmD,SAAjC,CAApB;AACH,KAFD,MAGK;AACDvB,MAAAA,OAAO,CAACuB,SAAR,GAAoBnB,SAApB;AACH;;AACD,QAAIhC,MAAM,CAACqD,QAAP,KAAoBrB,SAApB,IAAiChC,MAAM,CAACqD,QAAP,KAAoB,IAAzD,EAA+D;AAC3DzB,MAAAA,OAAO,CAACyB,QAAR,GAAmBC,eAAe,CAACqB,QAAhB,CAAyB3E,MAAM,CAACqD,QAAhC,CAAnB;AACH,KAFD,MAGK;AACDzB,MAAAA,OAAO,CAACyB,QAAR,GAAmBrB,SAAnB;AACH;;AACD,QAAIhC,MAAM,CAACuD,MAAP,KAAkBvB,SAAlB,IAA+BhC,MAAM,CAACuD,MAAP,KAAkB,IAArD,EAA2D;AACvD3B,MAAAA,OAAO,CAAC2B,MAAR,GAAiBC,aAAa,CAACmB,QAAd,CAAuB3E,MAAM,CAACuD,MAA9B,CAAjB;AACH,KAFD,MAGK;AACD3B,MAAAA,OAAO,CAAC2B,MAAR,GAAiBvB,SAAjB;AACH;;AACD,QAAIhC,MAAM,CAACyD,aAAP,KAAyBzB,SAAzB,IAAsChC,MAAM,CAACyD,aAAP,KAAyB,IAAnE,EAAyE;AACrE7B,MAAAA,OAAO,CAAC6B,aAAR,GAAwBC,oBAAoB,CAACiB,QAArB,CAA8B3E,MAAM,CAACyD,aAArC,CAAxB;AACH,KAFD,MAGK;AACD7B,MAAAA,OAAO,CAAC6B,aAAR,GAAwBzB,SAAxB;AACH;;AACD,QAAIhC,MAAM,CAAC2D,aAAP,KAAyB3B,SAAzB,IAAsChC,MAAM,CAAC2D,aAAP,KAAyB,IAAnE,EAAyE;AACrE/B,MAAAA,OAAO,CAAC+B,aAAR,GAAwBC,oBAAoB,CAACe,QAArB,CAA8B3E,MAAM,CAAC2D,aAArC,CAAxB;AACH,KAFD,MAGK;AACD/B,MAAAA,OAAO,CAAC+B,aAAR,GAAwB3B,SAAxB;AACH;;AACD,QAAIhC,MAAM,CAAC6D,iBAAP,KAA6B7B,SAA7B,IACAhC,MAAM,CAAC6D,iBAAP,KAA6B,IADjC,EACuC;AACnCjC,MAAAA,OAAO,CAACiC,iBAAR,GAA4BC,wBAAwB,CAACa,QAAzB,CAAkC3E,MAAM,CAAC6D,iBAAzC,CAA5B;AACH,KAHD,MAIK;AACDjC,MAAAA,OAAO,CAACiC,iBAAR,GAA4B7B,SAA5B;AACH;;AACD,QAAIhC,MAAM,CAAC+D,kBAAP,KAA8B/B,SAA9B,IACAhC,MAAM,CAAC+D,kBAAP,KAA8B,IADlC,EACwC;AACpCnC,MAAAA,OAAO,CAACmC,kBAAR,GAA6BC,yBAAyB,CAACW,QAA1B,CAAmC3E,MAAM,CAAC+D,kBAA1C,CAA7B;AACH,KAHD,MAIK;AACDnC,MAAAA,OAAO,CAACmC,kBAAR,GAA6B/B,SAA7B;AACH;;AACD,WAAOJ,OAAP;AACH,GA3MkB;AA4MnBgD,EAAAA,MA5MmB,kBA4MZhD,OA5MY,EA4MH;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACG,IAAR,KAAiBC,SAAjB,KACK6C,GAAG,CAAC9C,IAAJ,GAAWH,OAAO,CAACG,IAAR,GAAeE,WAAW,CAAC2C,MAAZ,CAAmBhD,OAAO,CAACG,IAA3B,CAAf,GAAkDC,SADlE;AAEAJ,IAAAA,OAAO,CAACS,KAAR,KAAkBL,SAAlB,KACK6C,GAAG,CAACxC,KAAJ,GAAYT,OAAO,CAACS,KAAR,GACPC,YAAY,CAACsC,MAAb,CAAoBhD,OAAO,CAACS,KAA5B,CADO,GAEPL,SAHV;AAIAJ,IAAAA,OAAO,CAACW,IAAR,KAAiBP,SAAjB,KACK6C,GAAG,CAACtC,IAAJ,GAAWX,OAAO,CAACW,IAAR,GAAeC,WAAW,CAACoC,MAAZ,CAAmBhD,OAAO,CAACW,IAA3B,CAAf,GAAkDP,SADlE;AAEAJ,IAAAA,OAAO,CAACa,SAAR,KAAsBT,SAAtB,KACK6C,GAAG,CAACpC,SAAJ,GAAgBb,OAAO,CAACa,SAAR,GACXC,gBAAgB,CAACkC,MAAjB,CAAwBhD,OAAO,CAACa,SAAhC,CADW,GAEXT,SAHV;AAIAJ,IAAAA,OAAO,CAACe,SAAR,KAAsBX,SAAtB,KACK6C,GAAG,CAAClC,SAAJ,GAAgBf,OAAO,CAACe,SAAR,GACXC,gBAAgB,CAACgC,MAAjB,CAAwBhD,OAAO,CAACe,SAAhC,CADW,GAEXX,SAHV;AAIAJ,IAAAA,OAAO,CAACiB,KAAR,KAAkBb,SAAlB,KACK6C,GAAG,CAAChC,KAAJ,GAAYjB,OAAO,CAACiB,KAAR,GACPC,YAAY,CAAC8B,MAAb,CAAoBhD,OAAO,CAACiB,KAA5B,CADO,GAEPb,SAHV;AAIAJ,IAAAA,OAAO,CAACmB,UAAR,KAAuBf,SAAvB,KACK6C,GAAG,CAAC9B,UAAJ,GAAiBnB,OAAO,CAACmB,UAAR,GACZC,iBAAiB,CAAC4B,MAAlB,CAAyBhD,OAAO,CAACmB,UAAjC,CADY,GAEZf,SAHV;AAIAJ,IAAAA,OAAO,CAACqB,OAAR,KAAoBjB,SAApB,KACK6C,GAAG,CAAC5B,OAAJ,GAAcrB,OAAO,CAACqB,OAAR,GACTC,cAAc,CAAC0B,MAAf,CAAsBhD,OAAO,CAACqB,OAA9B,CADS,GAETjB,SAHV;AAIAJ,IAAAA,OAAO,CAACuB,SAAR,KAAsBnB,SAAtB,KACK6C,GAAG,CAAC1B,SAAJ,GAAgBvB,OAAO,CAACuB,SAAR,GACXC,gBAAgB,CAACwB,MAAjB,CAAwBhD,OAAO,CAACuB,SAAhC,CADW,GAEXnB,SAHV;AAIAJ,IAAAA,OAAO,CAACyB,QAAR,KAAqBrB,SAArB,KACK6C,GAAG,CAACxB,QAAJ,GAAezB,OAAO,CAACyB,QAAR,GACVC,eAAe,CAACsB,MAAhB,CAAuBhD,OAAO,CAACyB,QAA/B,CADU,GAEVrB,SAHV;AAIAJ,IAAAA,OAAO,CAAC2B,MAAR,KAAmBvB,SAAnB,KACK6C,GAAG,CAACtB,MAAJ,GAAa3B,OAAO,CAAC2B,MAAR,GACRC,aAAa,CAACoB,MAAd,CAAqBhD,OAAO,CAAC2B,MAA7B,CADQ,GAERvB,SAHV;AAIAJ,IAAAA,OAAO,CAAC6B,aAAR,KAA0BzB,SAA1B,KACK6C,GAAG,CAACpB,aAAJ,GAAoB7B,OAAO,CAAC6B,aAAR,GACfC,oBAAoB,CAACkB,MAArB,CAA4BhD,OAAO,CAAC6B,aAApC,CADe,GAEfzB,SAHV;AAIAJ,IAAAA,OAAO,CAAC+B,aAAR,KAA0B3B,SAA1B,KACK6C,GAAG,CAAClB,aAAJ,GAAoB/B,OAAO,CAAC+B,aAAR,GACfC,oBAAoB,CAACgB,MAArB,CAA4BhD,OAAO,CAAC+B,aAApC,CADe,GAEf3B,SAHV;AAIAJ,IAAAA,OAAO,CAACiC,iBAAR,KAA8B7B,SAA9B,KACK6C,GAAG,CAAChB,iBAAJ,GAAwBjC,OAAO,CAACiC,iBAAR,GACnBC,wBAAwB,CAACc,MAAzB,CAAgChD,OAAO,CAACiC,iBAAxC,CADmB,GAEnB7B,SAHV;AAIAJ,IAAAA,OAAO,CAACmC,kBAAR,KAA+B/B,SAA/B,KACK6C,GAAG,CAACd,kBAAJ,GAAyBnC,OAAO,CAACmC,kBAAR,GACpBC,yBAAyB,CAACY,MAA1B,CAAiChD,OAAO,CAACmC,kBAAzC,CADoB,GAEpB/B,SAHV;AAIA,WAAO6C,GAAP;AACH,GAvQkB;AAwQnBC,EAAAA,WAxQmB,uBAwQP9E,MAxQO,EAwQC;AAChB,QAAM4B,OAAO,qBAAQH,WAAR,CAAb;;AACA,QAAIzB,MAAM,CAAC+B,IAAP,KAAgBC,SAAhB,IAA6BhC,MAAM,CAAC+B,IAAP,KAAgB,IAAjD,EAAuD;AACnDH,MAAAA,OAAO,CAACG,IAAR,GAAeE,WAAW,CAAC6C,WAAZ,CAAwB9E,MAAM,CAAC+B,IAA/B,CAAf;AACH,KAFD,MAGK;AACDH,MAAAA,OAAO,CAACG,IAAR,GAAeC,SAAf;AACH;;AACD,QAAIhC,MAAM,CAACqC,KAAP,KAAiBL,SAAjB,IAA8BhC,MAAM,CAACqC,KAAP,KAAiB,IAAnD,EAAyD;AACrDT,MAAAA,OAAO,CAACS,KAAR,GAAgBC,YAAY,CAACwC,WAAb,CAAyB9E,MAAM,CAACqC,KAAhC,CAAhB;AACH,KAFD,MAGK;AACDT,MAAAA,OAAO,CAACS,KAAR,GAAgBL,SAAhB;AACH;;AACD,QAAIhC,MAAM,CAACuC,IAAP,KAAgBP,SAAhB,IAA6BhC,MAAM,CAACuC,IAAP,KAAgB,IAAjD,EAAuD;AACnDX,MAAAA,OAAO,CAACW,IAAR,GAAeC,WAAW,CAACsC,WAAZ,CAAwB9E,MAAM,CAACuC,IAA/B,CAAf;AACH,KAFD,MAGK;AACDX,MAAAA,OAAO,CAACW,IAAR,GAAeP,SAAf;AACH;;AACD,QAAIhC,MAAM,CAACyC,SAAP,KAAqBT,SAArB,IAAkChC,MAAM,CAACyC,SAAP,KAAqB,IAA3D,EAAiE;AAC7Db,MAAAA,OAAO,CAACa,SAAR,GAAoBC,gBAAgB,CAACoC,WAAjB,CAA6B9E,MAAM,CAACyC,SAApC,CAApB;AACH,KAFD,MAGK;AACDb,MAAAA,OAAO,CAACa,SAAR,GAAoBT,SAApB;AACH;;AACD,QAAIhC,MAAM,CAAC2C,SAAP,KAAqBX,SAArB,IAAkChC,MAAM,CAAC2C,SAAP,KAAqB,IAA3D,EAAiE;AAC7Df,MAAAA,OAAO,CAACe,SAAR,GAAoBC,gBAAgB,CAACkC,WAAjB,CAA6B9E,MAAM,CAAC2C,SAApC,CAApB;AACH,KAFD,MAGK;AACDf,MAAAA,OAAO,CAACe,SAAR,GAAoBX,SAApB;AACH;;AACD,QAAIhC,MAAM,CAAC6C,KAAP,KAAiBb,SAAjB,IAA8BhC,MAAM,CAAC6C,KAAP,KAAiB,IAAnD,EAAyD;AACrDjB,MAAAA,OAAO,CAACiB,KAAR,GAAgBC,YAAY,CAACgC,WAAb,CAAyB9E,MAAM,CAAC6C,KAAhC,CAAhB;AACH,KAFD,MAGK;AACDjB,MAAAA,OAAO,CAACiB,KAAR,GAAgBb,SAAhB;AACH;;AACD,QAAIhC,MAAM,CAAC+C,UAAP,KAAsBf,SAAtB,IAAmChC,MAAM,CAAC+C,UAAP,KAAsB,IAA7D,EAAmE;AAC/DnB,MAAAA,OAAO,CAACmB,UAAR,GAAqBC,iBAAiB,CAAC8B,WAAlB,CAA8B9E,MAAM,CAAC+C,UAArC,CAArB;AACH,KAFD,MAGK;AACDnB,MAAAA,OAAO,CAACmB,UAAR,GAAqBf,SAArB;AACH;;AACD,QAAIhC,MAAM,CAACiD,OAAP,KAAmBjB,SAAnB,IAAgChC,MAAM,CAACiD,OAAP,KAAmB,IAAvD,EAA6D;AACzDrB,MAAAA,OAAO,CAACqB,OAAR,GAAkBC,cAAc,CAAC4B,WAAf,CAA2B9E,MAAM,CAACiD,OAAlC,CAAlB;AACH,KAFD,MAGK;AACDrB,MAAAA,OAAO,CAACqB,OAAR,GAAkBjB,SAAlB;AACH;;AACD,QAAIhC,MAAM,CAACmD,SAAP,KAAqBnB,SAArB,IAAkChC,MAAM,CAACmD,SAAP,KAAqB,IAA3D,EAAiE;AAC7DvB,MAAAA,OAAO,CAACuB,SAAR,GAAoBC,gBAAgB,CAAC0B,WAAjB,CAA6B9E,MAAM,CAACmD,SAApC,CAApB;AACH,KAFD,MAGK;AACDvB,MAAAA,OAAO,CAACuB,SAAR,GAAoBnB,SAApB;AACH;;AACD,QAAIhC,MAAM,CAACqD,QAAP,KAAoBrB,SAApB,IAAiChC,MAAM,CAACqD,QAAP,KAAoB,IAAzD,EAA+D;AAC3DzB,MAAAA,OAAO,CAACyB,QAAR,GAAmBC,eAAe,CAACwB,WAAhB,CAA4B9E,MAAM,CAACqD,QAAnC,CAAnB;AACH,KAFD,MAGK;AACDzB,MAAAA,OAAO,CAACyB,QAAR,GAAmBrB,SAAnB;AACH;;AACD,QAAIhC,MAAM,CAACuD,MAAP,KAAkBvB,SAAlB,IAA+BhC,MAAM,CAACuD,MAAP,KAAkB,IAArD,EAA2D;AACvD3B,MAAAA,OAAO,CAAC2B,MAAR,GAAiBC,aAAa,CAACsB,WAAd,CAA0B9E,MAAM,CAACuD,MAAjC,CAAjB;AACH,KAFD,MAGK;AACD3B,MAAAA,OAAO,CAAC2B,MAAR,GAAiBvB,SAAjB;AACH;;AACD,QAAIhC,MAAM,CAACyD,aAAP,KAAyBzB,SAAzB,IAAsChC,MAAM,CAACyD,aAAP,KAAyB,IAAnE,EAAyE;AACrE7B,MAAAA,OAAO,CAAC6B,aAAR,GAAwBC,oBAAoB,CAACoB,WAArB,CAAiC9E,MAAM,CAACyD,aAAxC,CAAxB;AACH,KAFD,MAGK;AACD7B,MAAAA,OAAO,CAAC6B,aAAR,GAAwBzB,SAAxB;AACH;;AACD,QAAIhC,MAAM,CAAC2D,aAAP,KAAyB3B,SAAzB,IAAsChC,MAAM,CAAC2D,aAAP,KAAyB,IAAnE,EAAyE;AACrE/B,MAAAA,OAAO,CAAC+B,aAAR,GAAwBC,oBAAoB,CAACkB,WAArB,CAAiC9E,MAAM,CAAC2D,aAAxC,CAAxB;AACH,KAFD,MAGK;AACD/B,MAAAA,OAAO,CAAC+B,aAAR,GAAwB3B,SAAxB;AACH;;AACD,QAAIhC,MAAM,CAAC6D,iBAAP,KAA6B7B,SAA7B,IACAhC,MAAM,CAAC6D,iBAAP,KAA6B,IADjC,EACuC;AACnCjC,MAAAA,OAAO,CAACiC,iBAAR,GAA4BC,wBAAwB,CAACgB,WAAzB,CAAqC9E,MAAM,CAAC6D,iBAA5C,CAA5B;AACH,KAHD,MAIK;AACDjC,MAAAA,OAAO,CAACiC,iBAAR,GAA4B7B,SAA5B;AACH;;AACD,QAAIhC,MAAM,CAAC+D,kBAAP,KAA8B/B,SAA9B,IACAhC,MAAM,CAAC+D,kBAAP,KAA8B,IADlC,EACwC;AACpCnC,MAAAA,OAAO,CAACmC,kBAAR,GAA6BC,yBAAyB,CAACc,WAA1B,CAAsC9E,MAAM,CAAC+D,kBAA7C,CAA7B;AACH,KAHD,MAIK;AACDnC,MAAAA,OAAO,CAACmC,kBAAR,GAA6B/B,SAA7B;AACH;;AACD,WAAOJ,OAAP;AACH;AAvWkB,CAAhB;AAyWP,IAAMmD,eAAe,GAAG;AAAEnD,EAAAA,OAAO,EAAE;AAAX,CAAxB;AACA,OAAO,IAAMK,WAAW,GAAG;AACvBN,EAAAA,MADuB,kBAChBC,OADgB,EACmB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACA,OAAR,KAAoB,EAAxB,EAA4B;AACxBC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACA,OAAjC;AACH;;AACD,WAAOC,MAAP;AACH,GANsB;AAOvBoC,EAAAA,MAPuB,kBAOhBC,KAPgB,EAOTC,MAPS,EAOD;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQmD,eAAR,CAAb;;AACA,WAAOX,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACA,OAAR,GAAkBwC,MAAM,CAACY,MAAP,EAAlB;AACA;;AACJ;AACIZ,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AANR;AAQH;;AACD,WAAO7C,OAAP;AACH,GAvBsB;AAwBvB+C,EAAAA,QAxBuB,oBAwBd3E,MAxBc,EAwBN;AACb,QAAM4B,OAAO,qBAAQmD,eAAR,CAAb;;AACA,QAAI/E,MAAM,CAAC4B,OAAP,KAAmBI,SAAnB,IAAgChC,MAAM,CAAC4B,OAAP,KAAmB,IAAvD,EAA6D;AACzDA,MAAAA,OAAO,CAACA,OAAR,GAAkBqD,MAAM,CAACjF,MAAM,CAAC4B,OAAR,CAAxB;AACH,KAFD,MAGK;AACDA,MAAAA,OAAO,CAACA,OAAR,GAAkB,EAAlB;AACH;;AACD,WAAOA,OAAP;AACH,GAjCsB;AAkCvBgD,EAAAA,MAlCuB,kBAkChBhD,OAlCgB,EAkCP;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACA,OAAR,KAAoBI,SAApB,KAAkC6C,GAAG,CAACjD,OAAJ,GAAcA,OAAO,CAACA,OAAxD;AACA,WAAOiD,GAAP;AACH,GAtCsB;AAuCvBC,EAAAA,WAvCuB,uBAuCX9E,MAvCW,EAuCH;AAChB,QAAM4B,OAAO,qBAAQmD,eAAR,CAAb;;AACA,QAAI/E,MAAM,CAAC4B,OAAP,KAAmBI,SAAnB,IAAgChC,MAAM,CAAC4B,OAAP,KAAmB,IAAvD,EAA6D;AACzDA,MAAAA,OAAO,CAACA,OAAR,GAAkB5B,MAAM,CAAC4B,OAAzB;AACH,KAFD,MAGK;AACDA,MAAAA,OAAO,CAACA,OAAR,GAAkB,EAAlB;AACH;;AACD,WAAOA,OAAP;AACH;AAhDsB,CAApB;AAkDP,IAAMsD,gBAAgB,GAAG,EAAzB;AACA,OAAO,IAAM5C,YAAY,GAAG;AACxBX,EAAAA,MADwB,kBACjBwD,CADiB,EACY;AAAA,QAA1BtD,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;AAChC,WAAOD,MAAP;AACH,GAHuB;AAIxBoC,EAAAA,MAJwB,kBAIjBC,KAJiB,EAIVC,MAJU,EAIF;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQsD,gBAAR,CAAb;;AACA,WAAOd,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI;AACIL,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAHR;AAKH;;AACD,WAAO7C,OAAP;AACH,GAjBuB;AAkBxB+C,EAAAA,QAlBwB,oBAkBfQ,CAlBe,EAkBZ;AACR,QAAMvD,OAAO,qBAAQsD,gBAAR,CAAb;;AACA,WAAOtD,OAAP;AACH,GArBuB;AAsBxBgD,EAAAA,MAtBwB,kBAsBjBO,CAtBiB,EAsBd;AACN,QAAMN,GAAG,GAAG,EAAZ;AACA,WAAOA,GAAP;AACH,GAzBuB;AA0BxBC,EAAAA,WA1BwB,uBA0BZK,CA1BY,EA0BT;AACX,QAAMvD,OAAO,qBAAQsD,gBAAR,CAAb;;AACA,WAAOtD,OAAP;AACH;AA7BuB,CAArB;AA+BP,IAAMwD,eAAe,GAAG;AAAEC,EAAAA,OAAO,EAAE,EAAX;AAAeC,EAAAA,YAAY,EAAE,CAA7B;AAAgCC,EAAAA,UAAU,EAAE;AAA5C,CAAxB;AACA,OAAO,IAAM/C,WAAW,GAAG;AACvBb,EAAAA,MADuB,kBAChBC,OADgB,EACmB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACyD,OAAR,KAAoB,EAAxB,EAA4B;AACxBxD,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACyD,OAAjC;AACH;;AACD,QAAIzD,OAAO,CAAC0D,YAAR,KAAyB,CAA7B,EAAgC;AAC5BzD,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBsD,MAAlB,CAAyB5D,OAAO,CAAC0D,YAAjC;AACH;;AACD,QAAI1D,OAAO,CAAC2D,UAAR,KAAuB,CAA3B,EAA8B;AAC1B1D,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBsD,MAAlB,CAAyB5D,OAAO,CAAC2D,UAAjC;AACH;;AACD,WAAO1D,MAAP;AACH,GAZsB;AAavBoC,EAAAA,MAbuB,kBAahBC,KAbgB,EAaTC,MAbS,EAaD;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQwD,eAAR,CAAb;;AACA,WAAOhB,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACyD,OAAR,GAAkBjB,MAAM,CAACY,MAAP,EAAlB;AACA;;AACJ,aAAK,CAAL;AACIpD,UAAAA,OAAO,CAAC0D,YAAR,GAAuBG,YAAY,CAACrB,MAAM,CAACoB,MAAP,EAAD,CAAnC;AACA;;AACJ,aAAK,CAAL;AACI5D,UAAAA,OAAO,CAAC2D,UAAR,GAAqBE,YAAY,CAACrB,MAAM,CAACoB,MAAP,EAAD,CAAjC;AACA;;AACJ;AACIpB,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAZR;AAcH;;AACD,WAAO7C,OAAP;AACH,GAnCsB;AAoCvB+C,EAAAA,QApCuB,oBAoCd3E,MApCc,EAoCN;AACb,QAAM4B,OAAO,qBAAQwD,eAAR,CAAb;;AACA,QAAIpF,MAAM,CAACqF,OAAP,KAAmBrD,SAAnB,IAAgChC,MAAM,CAACqF,OAAP,KAAmB,IAAvD,EAA6D;AACzDzD,MAAAA,OAAO,CAACyD,OAAR,GAAkBJ,MAAM,CAACjF,MAAM,CAACqF,OAAR,CAAxB;AACH,KAFD,MAGK;AACDzD,MAAAA,OAAO,CAACyD,OAAR,GAAkB,EAAlB;AACH;;AACD,QAAIrF,MAAM,CAACsF,YAAP,KAAwBtD,SAAxB,IAAqChC,MAAM,CAACsF,YAAP,KAAwB,IAAjE,EAAuE;AACnE1D,MAAAA,OAAO,CAAC0D,YAAR,GAAuBI,MAAM,CAAC1F,MAAM,CAACsF,YAAR,CAA7B;AACH,KAFD,MAGK;AACD1D,MAAAA,OAAO,CAAC0D,YAAR,GAAuB,CAAvB;AACH;;AACD,QAAItF,MAAM,CAACuF,UAAP,KAAsBvD,SAAtB,IAAmChC,MAAM,CAACuF,UAAP,KAAsB,IAA7D,EAAmE;AAC/D3D,MAAAA,OAAO,CAAC2D,UAAR,GAAqBG,MAAM,CAAC1F,MAAM,CAACuF,UAAR,CAA3B;AACH,KAFD,MAGK;AACD3D,MAAAA,OAAO,CAAC2D,UAAR,GAAqB,CAArB;AACH;;AACD,WAAO3D,OAAP;AACH,GAzDsB;AA0DvBgD,EAAAA,MA1DuB,kBA0DhBhD,OA1DgB,EA0DP;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACyD,OAAR,KAAoBrD,SAApB,KAAkC6C,GAAG,CAACQ,OAAJ,GAAczD,OAAO,CAACyD,OAAxD;AACAzD,IAAAA,OAAO,CAAC0D,YAAR,KAAyBtD,SAAzB,KACK6C,GAAG,CAACS,YAAJ,GAAmB1D,OAAO,CAAC0D,YADhC;AAEA1D,IAAAA,OAAO,CAAC2D,UAAR,KAAuBvD,SAAvB,KAAqC6C,GAAG,CAACU,UAAJ,GAAiB3D,OAAO,CAAC2D,UAA9D;AACA,WAAOV,GAAP;AACH,GAjEsB;AAkEvBC,EAAAA,WAlEuB,uBAkEX9E,MAlEW,EAkEH;AAChB,QAAM4B,OAAO,qBAAQwD,eAAR,CAAb;;AACA,QAAIpF,MAAM,CAACqF,OAAP,KAAmBrD,SAAnB,IAAgChC,MAAM,CAACqF,OAAP,KAAmB,IAAvD,EAA6D;AACzDzD,MAAAA,OAAO,CAACyD,OAAR,GAAkBrF,MAAM,CAACqF,OAAzB;AACH,KAFD,MAGK;AACDzD,MAAAA,OAAO,CAACyD,OAAR,GAAkB,EAAlB;AACH;;AACD,QAAIrF,MAAM,CAACsF,YAAP,KAAwBtD,SAAxB,IAAqChC,MAAM,CAACsF,YAAP,KAAwB,IAAjE,EAAuE;AACnE1D,MAAAA,OAAO,CAAC0D,YAAR,GAAuBtF,MAAM,CAACsF,YAA9B;AACH,KAFD,MAGK;AACD1D,MAAAA,OAAO,CAAC0D,YAAR,GAAuB,CAAvB;AACH;;AACD,QAAItF,MAAM,CAACuF,UAAP,KAAsBvD,SAAtB,IAAmChC,MAAM,CAACuF,UAAP,KAAsB,IAA7D,EAAmE;AAC/D3D,MAAAA,OAAO,CAAC2D,UAAR,GAAqBvF,MAAM,CAACuF,UAA5B;AACH,KAFD,MAGK;AACD3D,MAAAA,OAAO,CAAC2D,UAAR,GAAqB,CAArB;AACH;;AACD,WAAO3D,OAAP;AACH;AAvFsB,CAApB;AAyFP,IAAM+D,oBAAoB,GAAG;AAAEC,EAAAA,GAAG,EAAE,EAAP;AAAWC,EAAAA,KAAK,EAAE;AAAlB,CAA7B;AACA,OAAO,IAAMnD,gBAAgB,GAAG;AAC5Bf,EAAAA,MAD4B,kBACrBC,OADqB,EACc;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACgE,GAAR,KAAgB,EAApB,EAAwB;AACpB/D,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACgE,GAAjC;AACH;;AACD,QAAIhE,OAAO,CAACiE,KAAR,KAAkB,EAAtB,EAA0B;AACtBhE,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACiE,KAAjC;AACH;;AACD,WAAOhE,MAAP;AACH,GAT2B;AAU5BoC,EAAAA,MAV4B,kBAUrBC,KAVqB,EAUdC,MAVc,EAUN;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ+D,oBAAR,CAAb;;AACA,WAAOvB,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACgE,GAAR,GAAcxB,MAAM,CAACY,MAAP,EAAd;AACA;;AACJ,aAAK,CAAL;AACIpD,UAAAA,OAAO,CAACiE,KAAR,GAAgBzB,MAAM,CAACY,MAAP,EAAhB;AACA;;AACJ;AACIZ,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAO7C,OAAP;AACH,GA7B2B;AA8B5B+C,EAAAA,QA9B4B,oBA8BnB3E,MA9BmB,EA8BX;AACb,QAAM4B,OAAO,qBAAQ+D,oBAAR,CAAb;;AACA,QAAI3F,MAAM,CAAC4F,GAAP,KAAe5D,SAAf,IAA4BhC,MAAM,CAAC4F,GAAP,KAAe,IAA/C,EAAqD;AACjDhE,MAAAA,OAAO,CAACgE,GAAR,GAAcX,MAAM,CAACjF,MAAM,CAAC4F,GAAR,CAApB;AACH,KAFD,MAGK;AACDhE,MAAAA,OAAO,CAACgE,GAAR,GAAc,EAAd;AACH;;AACD,QAAI5F,MAAM,CAAC6F,KAAP,KAAiB7D,SAAjB,IAA8BhC,MAAM,CAAC6F,KAAP,KAAiB,IAAnD,EAAyD;AACrDjE,MAAAA,OAAO,CAACiE,KAAR,GAAgBZ,MAAM,CAACjF,MAAM,CAAC6F,KAAR,CAAtB;AACH,KAFD,MAGK;AACDjE,MAAAA,OAAO,CAACiE,KAAR,GAAgB,EAAhB;AACH;;AACD,WAAOjE,OAAP;AACH,GA7C2B;AA8C5BgD,EAAAA,MA9C4B,kBA8CrBhD,OA9CqB,EA8CZ;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACgE,GAAR,KAAgB5D,SAAhB,KAA8B6C,GAAG,CAACe,GAAJ,GAAUhE,OAAO,CAACgE,GAAhD;AACAhE,IAAAA,OAAO,CAACiE,KAAR,KAAkB7D,SAAlB,KAAgC6C,GAAG,CAACgB,KAAJ,GAAYjE,OAAO,CAACiE,KAApD;AACA,WAAOhB,GAAP;AACH,GAnD2B;AAoD5BC,EAAAA,WApD4B,uBAoDhB9E,MApDgB,EAoDR;AAChB,QAAM4B,OAAO,qBAAQ+D,oBAAR,CAAb;;AACA,QAAI3F,MAAM,CAAC4F,GAAP,KAAe5D,SAAf,IAA4BhC,MAAM,CAAC4F,GAAP,KAAe,IAA/C,EAAqD;AACjDhE,MAAAA,OAAO,CAACgE,GAAR,GAAc5F,MAAM,CAAC4F,GAArB;AACH,KAFD,MAGK;AACDhE,MAAAA,OAAO,CAACgE,GAAR,GAAc,EAAd;AACH;;AACD,QAAI5F,MAAM,CAAC6F,KAAP,KAAiB7D,SAAjB,IAA8BhC,MAAM,CAAC6F,KAAP,KAAiB,IAAnD,EAAyD;AACrDjE,MAAAA,OAAO,CAACiE,KAAR,GAAgB7F,MAAM,CAAC6F,KAAvB;AACH,KAFD,MAGK;AACDjE,MAAAA,OAAO,CAACiE,KAAR,GAAgB,EAAhB;AACH;;AACD,WAAOjE,OAAP;AACH;AAnE2B,CAAzB;AAqEP,IAAMkE,oBAAoB,GAAG;AAAEC,EAAAA,OAAO,EAAE,EAAX;AAAeC,EAAAA,aAAa,EAAE;AAA9B,CAA7B;AACA,OAAO,IAAMpD,gBAAgB,GAAG;AAC5BjB,EAAAA,MAD4B,kBACrBC,OADqB,EACc;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACqE,IAAR,KAAiBjE,SAArB,EAAgC;AAC5B3C,MAAAA,SAAS,CAACsC,MAAV,CAAiBuE,WAAW,CAACtE,OAAO,CAACqE,IAAT,CAA5B,EAA4CpE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA5C,EAAsEC,MAAtE;AACH;;AACD,QAAIR,OAAO,CAACmE,OAAR,KAAoB,EAAxB,EAA4B;AACxBlE,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACmE,OAAjC;AACH;;AACD,QAAInE,OAAO,CAACuE,eAAR,KAA4BnE,SAAhC,EAA2C;AACvCoE,MAAAA,eAAe,CAACzE,MAAhB,CAAuBC,OAAO,CAACuE,eAA/B,EAAgDtE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAhD,EAA0EC,MAA1E;AACH;;AATqC,+CAUtBR,OAAO,CAACyE,UAVc;AAAA;;AAAA;AAUtC,0DAAoC;AAAA,YAAzBC,CAAyB;AAChCC,QAAAA,eAAe,CAAC5E,MAAhB,CAAuB2E,CAAvB,EAA0BzE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA1B,EAAoDC,MAApD;AACH;AAZqC;AAAA;AAAA;AAAA;AAAA;;AAatC,QAAIR,OAAO,CAAC4E,aAAR,CAAsBrC,MAAtB,KAAiC,CAArC,EAAwC;AACpCtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAAC4E,aAAhC;AACH;;AACD,QAAI5E,OAAO,CAACoE,aAAR,KAA0B,CAA9B,EAAiC;AAC7BnE,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAACoE,aAAhC;AACH;;AACD,WAAOnE,MAAP;AACH,GArB2B;AAsB5BoC,EAAAA,MAtB4B,kBAsBrBC,KAtBqB,EAsBdC,MAtBc,EAsBN;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQkE,oBAAR,CAAb;;AACAlE,IAAAA,OAAO,CAACyE,UAAR,GAAqB,EAArB;;AACA,WAAOjC,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACqE,IAAR,GAAeU,aAAa,CAACtH,SAAS,CAAC4E,MAAV,CAAiBG,MAAjB,EAAyBA,MAAM,CAAClC,MAAP,EAAzB,CAAD,CAA5B;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACmE,OAAR,GAAkB3B,MAAM,CAACY,MAAP,EAAlB;AACA;;AACJ,aAAK,CAAL;AACIpD,UAAAA,OAAO,CAACuE,eAAR,GAA0BC,eAAe,CAACnC,MAAhB,CAAuBG,MAAvB,EAA+BA,MAAM,CAAClC,MAAP,EAA/B,CAA1B;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACyE,UAAR,CAAmBO,IAAnB,CAAwBL,eAAe,CAACtC,MAAhB,CAAuBG,MAAvB,EAA+BA,MAAM,CAAClC,MAAP,EAA/B,CAAxB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAAC4E,aAAR,GAAwBpC,MAAM,CAACqC,KAAP,EAAxB;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAACoE,aAAR,GAAwBP,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAApC;AACA;;AACJ;AACItC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AArBR;AAuBH;;AACD,WAAO7C,OAAP;AACH,GAtD2B;AAuD5B+C,EAAAA,QAvD4B,oBAuDnB3E,MAvDmB,EAuDX;AACb,QAAM4B,OAAO,qBAAQkE,oBAAR,CAAb;;AACAlE,IAAAA,OAAO,CAACyE,UAAR,GAAqB,EAArB;;AACA,QAAIrG,MAAM,CAACiG,IAAP,KAAgBjE,SAAhB,IAA6BhC,MAAM,CAACiG,IAAP,KAAgB,IAAjD,EAAuD;AACnDrE,MAAAA,OAAO,CAACqE,IAAR,GAAeY,iBAAiB,CAAC7G,MAAM,CAACiG,IAAR,CAAhC;AACH,KAFD,MAGK;AACDrE,MAAAA,OAAO,CAACqE,IAAR,GAAejE,SAAf;AACH;;AACD,QAAIhC,MAAM,CAAC+F,OAAP,KAAmB/D,SAAnB,IAAgChC,MAAM,CAAC+F,OAAP,KAAmB,IAAvD,EAA6D;AACzDnE,MAAAA,OAAO,CAACmE,OAAR,GAAkBd,MAAM,CAACjF,MAAM,CAAC+F,OAAR,CAAxB;AACH,KAFD,MAGK;AACDnE,MAAAA,OAAO,CAACmE,OAAR,GAAkB,EAAlB;AACH;;AACD,QAAI/F,MAAM,CAACmG,eAAP,KAA2BnE,SAA3B,IACAhC,MAAM,CAACmG,eAAP,KAA2B,IAD/B,EACqC;AACjCvE,MAAAA,OAAO,CAACuE,eAAR,GAA0BC,eAAe,CAACzB,QAAhB,CAAyB3E,MAAM,CAACmG,eAAhC,CAA1B;AACH,KAHD,MAIK;AACDvE,MAAAA,OAAO,CAACuE,eAAR,GAA0BnE,SAA1B;AACH;;AACD,QAAIhC,MAAM,CAACqG,UAAP,KAAsBrE,SAAtB,IAAmChC,MAAM,CAACqG,UAAP,KAAsB,IAA7D,EAAmE;AAAA,kDAC/CrG,MAAM,CAACqG,UADwC;AAAA;;AAAA;AAC/D,+DAAmC;AAAA,cAAxBS,CAAwB;AAC/BlF,UAAAA,OAAO,CAACyE,UAAR,CAAmBO,IAAnB,CAAwBL,eAAe,CAAC5B,QAAhB,CAAyBmC,CAAzB,CAAxB;AACH;AAH8D;AAAA;AAAA;AAAA;AAAA;AAIlE;;AACD,QAAI9G,MAAM,CAACwG,aAAP,KAAyBxE,SAAzB,IAAsChC,MAAM,CAACwG,aAAP,KAAyB,IAAnE,EAAyE;AACrE5E,MAAAA,OAAO,CAAC4E,aAAR,GAAwBO,eAAe,CAAC/G,MAAM,CAACwG,aAAR,CAAvC;AACH;;AACD,QAAIxG,MAAM,CAACgG,aAAP,KAAyBhE,SAAzB,IAAsChC,MAAM,CAACgG,aAAP,KAAyB,IAAnE,EAAyE;AACrEpE,MAAAA,OAAO,CAACoE,aAAR,GAAwBN,MAAM,CAAC1F,MAAM,CAACgG,aAAR,CAA9B;AACH,KAFD,MAGK;AACDpE,MAAAA,OAAO,CAACoE,aAAR,GAAwB,CAAxB;AACH;;AACD,WAAOpE,OAAP;AACH,GA5F2B;AA6F5BgD,EAAAA,MA7F4B,kBA6FrBhD,OA7FqB,EA6FZ;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACqE,IAAR,KAAiBjE,SAAjB,KACK6C,GAAG,CAACoB,IAAJ,GACGrE,OAAO,CAACqE,IAAR,KAAiBjE,SAAjB,GAA6BJ,OAAO,CAACqE,IAAR,CAAae,WAAb,EAA7B,GAA0D,IAFlE;AAGApF,IAAAA,OAAO,CAACmE,OAAR,KAAoB/D,SAApB,KAAkC6C,GAAG,CAACkB,OAAJ,GAAcnE,OAAO,CAACmE,OAAxD;AACAnE,IAAAA,OAAO,CAACuE,eAAR,KAA4BnE,SAA5B,KACK6C,GAAG,CAACsB,eAAJ,GAAsBvE,OAAO,CAACuE,eAAR,GACjBC,eAAe,CAACxB,MAAhB,CAAuBhD,OAAO,CAACuE,eAA/B,CADiB,GAEjBnE,SAHV;;AAIA,QAAIJ,OAAO,CAACyE,UAAZ,EAAwB;AACpBxB,MAAAA,GAAG,CAACwB,UAAJ,GAAiBzE,OAAO,CAACyE,UAAR,CAAmBY,GAAnB,CAAuB,UAACH,CAAD;AAAA,eAAOA,CAAC,GAAGP,eAAe,CAAC3B,MAAhB,CAAuBkC,CAAvB,CAAH,GAA+B9E,SAAvC;AAAA,OAAvB,CAAjB;AACH,KAFD,MAGK;AACD6C,MAAAA,GAAG,CAACwB,UAAJ,GAAiB,EAAjB;AACH;;AACDzE,IAAAA,OAAO,CAAC4E,aAAR,KAA0BxE,SAA1B,KACK6C,GAAG,CAAC2B,aAAJ,GAAoBU,eAAe,CAACtF,OAAO,CAAC4E,aAAR,KAA0BxE,SAA1B,GAC/BJ,OAAO,CAAC4E,aADuB,GAE/B,IAAInC,UAAJ,EAF8B,CADxC;AAIAzC,IAAAA,OAAO,CAACoE,aAAR,KAA0BhE,SAA1B,KACK6C,GAAG,CAACmB,aAAJ,GAAoBpE,OAAO,CAACoE,aADjC;AAEA,WAAOnB,GAAP;AACH,GApH2B;AAqH5BC,EAAAA,WArH4B,uBAqHhB9E,MArHgB,EAqHR;AAChB,QAAM4B,OAAO,qBAAQkE,oBAAR,CAAb;;AACAlE,IAAAA,OAAO,CAACyE,UAAR,GAAqB,EAArB;;AACA,QAAIrG,MAAM,CAACiG,IAAP,KAAgBjE,SAAhB,IAA6BhC,MAAM,CAACiG,IAAP,KAAgB,IAAjD,EAAuD;AACnDrE,MAAAA,OAAO,CAACqE,IAAR,GAAejG,MAAM,CAACiG,IAAtB;AACH,KAFD,MAGK;AACDrE,MAAAA,OAAO,CAACqE,IAAR,GAAejE,SAAf;AACH;;AACD,QAAIhC,MAAM,CAAC+F,OAAP,KAAmB/D,SAAnB,IAAgChC,MAAM,CAAC+F,OAAP,KAAmB,IAAvD,EAA6D;AACzDnE,MAAAA,OAAO,CAACmE,OAAR,GAAkB/F,MAAM,CAAC+F,OAAzB;AACH,KAFD,MAGK;AACDnE,MAAAA,OAAO,CAACmE,OAAR,GAAkB,EAAlB;AACH;;AACD,QAAI/F,MAAM,CAACmG,eAAP,KAA2BnE,SAA3B,IACAhC,MAAM,CAACmG,eAAP,KAA2B,IAD/B,EACqC;AACjCvE,MAAAA,OAAO,CAACuE,eAAR,GAA0BC,eAAe,CAACtB,WAAhB,CAA4B9E,MAAM,CAACmG,eAAnC,CAA1B;AACH,KAHD,MAIK;AACDvE,MAAAA,OAAO,CAACuE,eAAR,GAA0BnE,SAA1B;AACH;;AACD,QAAIhC,MAAM,CAACqG,UAAP,KAAsBrE,SAAtB,IAAmChC,MAAM,CAACqG,UAAP,KAAsB,IAA7D,EAAmE;AAAA,kDAC/CrG,MAAM,CAACqG,UADwC;AAAA;;AAAA;AAC/D,+DAAmC;AAAA,cAAxBS,CAAwB;AAC/BlF,UAAAA,OAAO,CAACyE,UAAR,CAAmBO,IAAnB,CAAwBL,eAAe,CAACzB,WAAhB,CAA4BgC,CAA5B,CAAxB;AACH;AAH8D;AAAA;AAAA;AAAA;AAAA;AAIlE;;AACD,QAAI9G,MAAM,CAACwG,aAAP,KAAyBxE,SAAzB,IAAsChC,MAAM,CAACwG,aAAP,KAAyB,IAAnE,EAAyE;AACrE5E,MAAAA,OAAO,CAAC4E,aAAR,GAAwBxG,MAAM,CAACwG,aAA/B;AACH,KAFD,MAGK;AACD5E,MAAAA,OAAO,CAAC4E,aAAR,GAAwB,IAAInC,UAAJ,EAAxB;AACH;;AACD,QAAIrE,MAAM,CAACgG,aAAP,KAAyBhE,SAAzB,IAAsChC,MAAM,CAACgG,aAAP,KAAyB,IAAnE,EAAyE;AACrEpE,MAAAA,OAAO,CAACoE,aAAR,GAAwBhG,MAAM,CAACgG,aAA/B;AACH,KAFD,MAGK;AACDpE,MAAAA,OAAO,CAACoE,aAAR,GAAwB,CAAxB;AACH;;AACD,WAAOpE,OAAP;AACH;AA7J2B,CAAzB;AA+JP,IAAMuF,gBAAgB,GAAG;AAAEC,EAAAA,IAAI,EAAE,EAAR;AAAYC,EAAAA,MAAM,EAAE,CAApB;AAAuBC,EAAAA,KAAK,EAAE;AAA9B,CAAzB;AACA,OAAO,IAAMxE,YAAY,GAAG;AACxBnB,EAAAA,MADwB,kBACjBC,OADiB,EACkB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAAC2F,IAAR,CAAapD,MAAb,KAAwB,CAA5B,EAA+B;AAC3BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAAC2F,IAAhC;AACH;;AACD,QAAI3F,OAAO,CAACwF,IAAR,KAAiB,EAArB,EAAyB;AACrBvF,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACwF,IAAjC;AACH;;AACD,QAAIxF,OAAO,CAACyF,MAAR,KAAmB,CAAvB,EAA0B;AACtBxF,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAACyF,MAAhC;AACH;;AACD,QAAIzF,OAAO,CAAC0F,KAAR,KAAkB,IAAtB,EAA4B;AACxBzF,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBsF,IAAlB,CAAuB5F,OAAO,CAAC0F,KAA/B;AACH;;AACD,WAAOzF,MAAP;AACH,GAfuB;AAgBxBoC,EAAAA,MAhBwB,kBAgBjBC,KAhBiB,EAgBVC,MAhBU,EAgBF;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQuF,gBAAR,CAAb;;AACA,WAAO/C,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAAC2F,IAAR,GAAenD,MAAM,CAACqC,KAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAACwF,IAAR,GAAehD,MAAM,CAACY,MAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACIpD,UAAAA,OAAO,CAACyF,MAAR,GAAiB5B,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAA7B;AACA;;AACJ,aAAK,CAAL;AACI9E,UAAAA,OAAO,CAAC0F,KAAR,GAAgBlD,MAAM,CAACoD,IAAP,EAAhB;AACA;;AACJ;AACIpD,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAfR;AAiBH;;AACD,WAAO7C,OAAP;AACH,GAzCuB;AA0CxB+C,EAAAA,QA1CwB,oBA0Cf3E,MA1Ce,EA0CP;AACb,QAAM4B,OAAO,qBAAQuF,gBAAR,CAAb;;AACA,QAAInH,MAAM,CAACuH,IAAP,KAAgBvF,SAAhB,IAA6BhC,MAAM,CAACuH,IAAP,KAAgB,IAAjD,EAAuD;AACnD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAeR,eAAe,CAAC/G,MAAM,CAACuH,IAAR,CAA9B;AACH;;AACD,QAAIvH,MAAM,CAACoH,IAAP,KAAgBpF,SAAhB,IAA6BhC,MAAM,CAACoH,IAAP,KAAgB,IAAjD,EAAuD;AACnDxF,MAAAA,OAAO,CAACwF,IAAR,GAAenC,MAAM,CAACjF,MAAM,CAACoH,IAAR,CAArB;AACH,KAFD,MAGK;AACDxF,MAAAA,OAAO,CAACwF,IAAR,GAAe,EAAf;AACH;;AACD,QAAIpH,MAAM,CAACqH,MAAP,KAAkBrF,SAAlB,IAA+BhC,MAAM,CAACqH,MAAP,KAAkB,IAArD,EAA2D;AACvDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB3B,MAAM,CAAC1F,MAAM,CAACqH,MAAR,CAAvB;AACH,KAFD,MAGK;AACDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIrH,MAAM,CAACsH,KAAP,KAAiBtF,SAAjB,IAA8BhC,MAAM,CAACsH,KAAP,KAAiB,IAAnD,EAAyD;AACrD1F,MAAAA,OAAO,CAAC0F,KAAR,GAAgBG,OAAO,CAACzH,MAAM,CAACsH,KAAR,CAAvB;AACH,KAFD,MAGK;AACD1F,MAAAA,OAAO,CAAC0F,KAAR,GAAgB,KAAhB;AACH;;AACD,WAAO1F,OAAP;AACH,GAlEuB;AAmExBgD,EAAAA,MAnEwB,kBAmEjBhD,OAnEiB,EAmER;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAAC2F,IAAR,KAAiBvF,SAAjB,KACK6C,GAAG,CAAC0C,IAAJ,GAAWL,eAAe,CAACtF,OAAO,CAAC2F,IAAR,KAAiBvF,SAAjB,GAA6BJ,OAAO,CAAC2F,IAArC,GAA4C,IAAIlD,UAAJ,EAA7C,CAD/B;AAEAzC,IAAAA,OAAO,CAACwF,IAAR,KAAiBpF,SAAjB,KAA+B6C,GAAG,CAACuC,IAAJ,GAAWxF,OAAO,CAACwF,IAAlD;AACAxF,IAAAA,OAAO,CAACyF,MAAR,KAAmBrF,SAAnB,KAAiC6C,GAAG,CAACwC,MAAJ,GAAazF,OAAO,CAACyF,MAAtD;AACAzF,IAAAA,OAAO,CAAC0F,KAAR,KAAkBtF,SAAlB,KAAgC6C,GAAG,CAACyC,KAAJ,GAAY1F,OAAO,CAAC0F,KAApD;AACA,WAAOzC,GAAP;AACH,GA3EuB;AA4ExBC,EAAAA,WA5EwB,uBA4EZ9E,MA5EY,EA4EJ;AAChB,QAAM4B,OAAO,qBAAQuF,gBAAR,CAAb;;AACA,QAAInH,MAAM,CAACuH,IAAP,KAAgBvF,SAAhB,IAA6BhC,MAAM,CAACuH,IAAP,KAAgB,IAAjD,EAAuD;AACnD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAevH,MAAM,CAACuH,IAAtB;AACH,KAFD,MAGK;AACD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAe,IAAIlD,UAAJ,EAAf;AACH;;AACD,QAAIrE,MAAM,CAACoH,IAAP,KAAgBpF,SAAhB,IAA6BhC,MAAM,CAACoH,IAAP,KAAgB,IAAjD,EAAuD;AACnDxF,MAAAA,OAAO,CAACwF,IAAR,GAAepH,MAAM,CAACoH,IAAtB;AACH,KAFD,MAGK;AACDxF,MAAAA,OAAO,CAACwF,IAAR,GAAe,EAAf;AACH;;AACD,QAAIpH,MAAM,CAACqH,MAAP,KAAkBrF,SAAlB,IAA+BhC,MAAM,CAACqH,MAAP,KAAkB,IAArD,EAA2D;AACvDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiBrH,MAAM,CAACqH,MAAxB;AACH,KAFD,MAGK;AACDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIrH,MAAM,CAACsH,KAAP,KAAiBtF,SAAjB,IAA8BhC,MAAM,CAACsH,KAAP,KAAiB,IAAnD,EAAyD;AACrD1F,MAAAA,OAAO,CAAC0F,KAAR,GAAgBtH,MAAM,CAACsH,KAAvB;AACH,KAFD,MAGK;AACD1F,MAAAA,OAAO,CAAC0F,KAAR,GAAgB,KAAhB;AACH;;AACD,WAAO1F,OAAP;AACH;AAvGuB,CAArB;AAyGP,IAAM8F,qBAAqB,GAAG,EAA9B;AACA,OAAO,IAAM1E,iBAAiB,GAAG;AAC7BrB,EAAAA,MAD6B,kBACtBC,OADsB,EACa;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAAC+F,IAAR,CAAaxD,MAAb,KAAwB,CAA5B,EAA+B;AAC3BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAAC+F,IAAhC;AACH;;AACD,QAAI/F,OAAO,CAACgG,MAAR,KAAmB5F,SAAvB,EAAkC;AAC9BzC,MAAAA,MAAM,CAACoC,MAAP,CAAcC,OAAO,CAACgG,MAAtB,EAA8B/F,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA9B,EAAwDC,MAAxD;AACH;;AACD,QAAIR,OAAO,CAACiG,cAAR,KAA2B7F,SAA/B,EAA0C;AACtC8F,MAAAA,cAAc,CAACnG,MAAf,CAAsBC,OAAO,CAACiG,cAA9B,EAA8ChG,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA9C,EAAwEC,MAAxE;AACH;;AATqC,gDAUtBR,OAAO,CAACmG,mBAVc;AAAA;;AAAA;AAUtC,6DAA6C;AAAA,YAAlCzB,CAAkC;AACzC0B,QAAAA,QAAQ,CAACrG,MAAT,CAAgB2E,CAAhB,EAAmBzE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAnB,EAA6CC,MAA7C;AACH;AAZqC;AAAA;AAAA;AAAA;AAAA;;AAatC,WAAOP,MAAP;AACH,GAf4B;AAgB7BoC,EAAAA,MAhB6B,kBAgBtBC,KAhBsB,EAgBfC,MAhBe,EAgBP;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ8F,qBAAR,CAAb;;AACA9F,IAAAA,OAAO,CAACmG,mBAAR,GAA8B,EAA9B;;AACA,WAAO3D,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAAC+F,IAAR,GAAevD,MAAM,CAACqC,KAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAACgG,MAAR,GAAiBrI,MAAM,CAAC0E,MAAP,CAAcG,MAAd,EAAsBA,MAAM,CAAClC,MAAP,EAAtB,CAAjB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACiG,cAAR,GAAyBC,cAAc,CAAC7D,MAAf,CAAsBG,MAAtB,EAA8BA,MAAM,CAAClC,MAAP,EAA9B,CAAzB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACmG,mBAAR,CAA4BnB,IAA5B,CAAiCoB,QAAQ,CAAC/D,MAAT,CAAgBG,MAAhB,EAAwBA,MAAM,CAAClC,MAAP,EAAxB,CAAjC;AACA;;AACJ;AACIkC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAfR;AAiBH;;AACD,WAAO7C,OAAP;AACH,GA1C4B;AA2C7B+C,EAAAA,QA3C6B,oBA2CpB3E,MA3CoB,EA2CZ;AACb,QAAM4B,OAAO,qBAAQ8F,qBAAR,CAAb;;AACA9F,IAAAA,OAAO,CAACmG,mBAAR,GAA8B,EAA9B;;AACA,QAAI/H,MAAM,CAAC2H,IAAP,KAAgB3F,SAAhB,IAA6BhC,MAAM,CAAC2H,IAAP,KAAgB,IAAjD,EAAuD;AACnD/F,MAAAA,OAAO,CAAC+F,IAAR,GAAeZ,eAAe,CAAC/G,MAAM,CAAC2H,IAAR,CAA9B;AACH;;AACD,QAAI3H,MAAM,CAAC4H,MAAP,KAAkB5F,SAAlB,IAA+BhC,MAAM,CAAC4H,MAAP,KAAkB,IAArD,EAA2D;AACvDhG,MAAAA,OAAO,CAACgG,MAAR,GAAiBrI,MAAM,CAACoF,QAAP,CAAgB3E,MAAM,CAAC4H,MAAvB,CAAjB;AACH,KAFD,MAGK;AACDhG,MAAAA,OAAO,CAACgG,MAAR,GAAiB5F,SAAjB;AACH;;AACD,QAAIhC,MAAM,CAAC6H,cAAP,KAA0B7F,SAA1B,IAAuChC,MAAM,CAAC6H,cAAP,KAA0B,IAArE,EAA2E;AACvEjG,MAAAA,OAAO,CAACiG,cAAR,GAAyBC,cAAc,CAACnD,QAAf,CAAwB3E,MAAM,CAAC6H,cAA/B,CAAzB;AACH,KAFD,MAGK;AACDjG,MAAAA,OAAO,CAACiG,cAAR,GAAyB7F,SAAzB;AACH;;AACD,QAAIhC,MAAM,CAAC+H,mBAAP,KAA+B/F,SAA/B,IACAhC,MAAM,CAAC+H,mBAAP,KAA+B,IADnC,EACyC;AAAA,kDACrB/H,MAAM,CAAC+H,mBADc;AAAA;;AAAA;AACrC,+DAA4C;AAAA,cAAjCjB,CAAiC;AACxClF,UAAAA,OAAO,CAACmG,mBAAR,CAA4BnB,IAA5B,CAAiCoB,QAAQ,CAACrD,QAAT,CAAkBmC,CAAlB,CAAjC;AACH;AAHoC;AAAA;AAAA;AAAA;AAAA;AAIxC;;AACD,WAAOlF,OAAP;AACH,GApE4B;AAqE7BgD,EAAAA,MArE6B,kBAqEtBhD,OArEsB,EAqEb;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAAC+F,IAAR,KAAiB3F,SAAjB,KACK6C,GAAG,CAAC8C,IAAJ,GAAWT,eAAe,CAACtF,OAAO,CAAC+F,IAAR,KAAiB3F,SAAjB,GAA6BJ,OAAO,CAAC+F,IAArC,GAA4C,IAAItD,UAAJ,EAA7C,CAD/B;AAEAzC,IAAAA,OAAO,CAACgG,MAAR,KAAmB5F,SAAnB,KACK6C,GAAG,CAAC+C,MAAJ,GAAahG,OAAO,CAACgG,MAAR,GAAiBrI,MAAM,CAACqF,MAAP,CAAchD,OAAO,CAACgG,MAAtB,CAAjB,GAAiD5F,SADnE;AAEAJ,IAAAA,OAAO,CAACiG,cAAR,KAA2B7F,SAA3B,KACK6C,GAAG,CAACgD,cAAJ,GAAqBjG,OAAO,CAACiG,cAAR,GAChBC,cAAc,CAAClD,MAAf,CAAsBhD,OAAO,CAACiG,cAA9B,CADgB,GAEhB7F,SAHV;;AAIA,QAAIJ,OAAO,CAACmG,mBAAZ,EAAiC;AAC7BlD,MAAAA,GAAG,CAACkD,mBAAJ,GAA0BnG,OAAO,CAACmG,mBAAR,CAA4Bd,GAA5B,CAAgC,UAACH,CAAD;AAAA,eAAOA,CAAC,GAAGkB,QAAQ,CAACpD,MAAT,CAAgBkC,CAAhB,CAAH,GAAwB9E,SAAhC;AAAA,OAAhC,CAA1B;AACH,KAFD,MAGK;AACD6C,MAAAA,GAAG,CAACkD,mBAAJ,GAA0B,EAA1B;AACH;;AACD,WAAOlD,GAAP;AACH,GAtF4B;AAuF7BC,EAAAA,WAvF6B,uBAuFjB9E,MAvFiB,EAuFT;AAChB,QAAM4B,OAAO,qBAAQ8F,qBAAR,CAAb;;AACA9F,IAAAA,OAAO,CAACmG,mBAAR,GAA8B,EAA9B;;AACA,QAAI/H,MAAM,CAAC2H,IAAP,KAAgB3F,SAAhB,IAA6BhC,MAAM,CAAC2H,IAAP,KAAgB,IAAjD,EAAuD;AACnD/F,MAAAA,OAAO,CAAC+F,IAAR,GAAe3H,MAAM,CAAC2H,IAAtB;AACH,KAFD,MAGK;AACD/F,MAAAA,OAAO,CAAC+F,IAAR,GAAe,IAAItD,UAAJ,EAAf;AACH;;AACD,QAAIrE,MAAM,CAAC4H,MAAP,KAAkB5F,SAAlB,IAA+BhC,MAAM,CAAC4H,MAAP,KAAkB,IAArD,EAA2D;AACvDhG,MAAAA,OAAO,CAACgG,MAAR,GAAiBrI,MAAM,CAACuF,WAAP,CAAmB9E,MAAM,CAAC4H,MAA1B,CAAjB;AACH,KAFD,MAGK;AACDhG,MAAAA,OAAO,CAACgG,MAAR,GAAiB5F,SAAjB;AACH;;AACD,QAAIhC,MAAM,CAAC6H,cAAP,KAA0B7F,SAA1B,IAAuChC,MAAM,CAAC6H,cAAP,KAA0B,IAArE,EAA2E;AACvEjG,MAAAA,OAAO,CAACiG,cAAR,GAAyBC,cAAc,CAAChD,WAAf,CAA2B9E,MAAM,CAAC6H,cAAlC,CAAzB;AACH,KAFD,MAGK;AACDjG,MAAAA,OAAO,CAACiG,cAAR,GAAyB7F,SAAzB;AACH;;AACD,QAAIhC,MAAM,CAAC+H,mBAAP,KAA+B/F,SAA/B,IACAhC,MAAM,CAAC+H,mBAAP,KAA+B,IADnC,EACyC;AAAA,kDACrB/H,MAAM,CAAC+H,mBADc;AAAA;;AAAA;AACrC,+DAA4C;AAAA,cAAjCjB,CAAiC;AACxClF,UAAAA,OAAO,CAACmG,mBAAR,CAA4BnB,IAA5B,CAAiCoB,QAAQ,CAAClD,WAAT,CAAqBgC,CAArB,CAAjC;AACH;AAHoC;AAAA;AAAA;AAAA;AAAA;AAIxC;;AACD,WAAOlF,OAAP;AACH;AAnH4B,CAA1B;AAqHP,IAAMqG,kBAAkB,GAAG;AAAEC,EAAAA,IAAI,EAAE;AAAR,CAA3B;AACA,OAAO,IAAMhF,cAAc,GAAG;AAC1BvB,EAAAA,MAD0B,kBACnBC,OADmB,EACgB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACuG,EAAR,CAAWhE,MAAX,KAAsB,CAA1B,EAA6B;AACzBtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAACuG,EAAhC;AACH;;AACD,QAAIvG,OAAO,CAACsG,IAAR,KAAiB,CAArB,EAAwB;AACpBrG,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBkG,KAAlB,CAAwBxG,OAAO,CAACsG,IAAhC;AACH;;AACD,WAAOrG,MAAP;AACH,GATyB;AAU1BoC,EAAAA,MAV0B,kBAUnBC,KAVmB,EAUZC,MAVY,EAUJ;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQqG,kBAAR,CAAb;;AACA,WAAO7D,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACuG,EAAR,GAAa/D,MAAM,CAACqC,KAAP,EAAb;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAACsG,IAAR,GAAe9D,MAAM,CAACgE,KAAP,EAAf;AACA;;AACJ;AACIhE,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAO7C,OAAP;AACH,GA7ByB;AA8B1B+C,EAAAA,QA9B0B,oBA8BjB3E,MA9BiB,EA8BT;AACb,QAAM4B,OAAO,qBAAQqG,kBAAR,CAAb;;AACA,QAAIjI,MAAM,CAACmI,EAAP,KAAcnG,SAAd,IAA2BhC,MAAM,CAACmI,EAAP,KAAc,IAA7C,EAAmD;AAC/CvG,MAAAA,OAAO,CAACuG,EAAR,GAAapB,eAAe,CAAC/G,MAAM,CAACmI,EAAR,CAA5B;AACH;;AACD,QAAInI,MAAM,CAACkI,IAAP,KAAgBlG,SAAhB,IAA6BhC,MAAM,CAACkI,IAAP,KAAgB,IAAjD,EAAuD;AACnDtG,MAAAA,OAAO,CAACsG,IAAR,GAAenI,mBAAmB,CAACC,MAAM,CAACkI,IAAR,CAAlC;AACH,KAFD,MAGK;AACDtG,MAAAA,OAAO,CAACsG,IAAR,GAAe,CAAf;AACH;;AACD,WAAOtG,OAAP;AACH,GA1CyB;AA2C1BgD,EAAAA,MA3C0B,kBA2CnBhD,OA3CmB,EA2CV;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACuG,EAAR,KAAenG,SAAf,KACK6C,GAAG,CAACsD,EAAJ,GAASjB,eAAe,CAACtF,OAAO,CAACuG,EAAR,KAAenG,SAAf,GAA2BJ,OAAO,CAACuG,EAAnC,GAAwC,IAAI9D,UAAJ,EAAzC,CAD7B;AAEAzC,IAAAA,OAAO,CAACsG,IAAR,KAAiBlG,SAAjB,KAA+B6C,GAAG,CAACqD,IAAJ,GAAW9H,iBAAiB,CAACwB,OAAO,CAACsG,IAAT,CAA3D;AACA,WAAOrD,GAAP;AACH,GAjDyB;AAkD1BC,EAAAA,WAlD0B,uBAkDd9E,MAlDc,EAkDN;AAChB,QAAM4B,OAAO,qBAAQqG,kBAAR,CAAb;;AACA,QAAIjI,MAAM,CAACmI,EAAP,KAAcnG,SAAd,IAA2BhC,MAAM,CAACmI,EAAP,KAAc,IAA7C,EAAmD;AAC/CvG,MAAAA,OAAO,CAACuG,EAAR,GAAanI,MAAM,CAACmI,EAApB;AACH,KAFD,MAGK;AACDvG,MAAAA,OAAO,CAACuG,EAAR,GAAa,IAAI9D,UAAJ,EAAb;AACH;;AACD,QAAIrE,MAAM,CAACkI,IAAP,KAAgBlG,SAAhB,IAA6BhC,MAAM,CAACkI,IAAP,KAAgB,IAAjD,EAAuD;AACnDtG,MAAAA,OAAO,CAACsG,IAAR,GAAelI,MAAM,CAACkI,IAAtB;AACH,KAFD,MAGK;AACDtG,MAAAA,OAAO,CAACsG,IAAR,GAAe,CAAf;AACH;;AACD,WAAOtG,OAAP;AACH;AAjEyB,CAAvB;AAmEP,IAAMyG,oBAAoB,GAAG,EAA7B;AACA,OAAO,IAAMjF,gBAAgB,GAAG;AAC5BzB,EAAAA,MAD4B,kBACrBC,OADqB,EACc;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACuG,EAAR,CAAWhE,MAAX,KAAsB,CAA1B,EAA6B;AACzBtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAACuG,EAAhC;AACH;;AACD,WAAOtG,MAAP;AACH,GAN2B;AAO5BoC,EAAAA,MAP4B,kBAOrBC,KAPqB,EAOdC,MAPc,EAON;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQyG,oBAAR,CAAb;;AACA,WAAOjE,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACuG,EAAR,GAAa/D,MAAM,CAACqC,KAAP,EAAb;AACA;;AACJ;AACIrC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AANR;AAQH;;AACD,WAAO7C,OAAP;AACH,GAvB2B;AAwB5B+C,EAAAA,QAxB4B,oBAwBnB3E,MAxBmB,EAwBX;AACb,QAAM4B,OAAO,qBAAQyG,oBAAR,CAAb;;AACA,QAAIrI,MAAM,CAACmI,EAAP,KAAcnG,SAAd,IAA2BhC,MAAM,CAACmI,EAAP,KAAc,IAA7C,EAAmD;AAC/CvG,MAAAA,OAAO,CAACuG,EAAR,GAAapB,eAAe,CAAC/G,MAAM,CAACmI,EAAR,CAA5B;AACH;;AACD,WAAOvG,OAAP;AACH,GA9B2B;AA+B5BgD,EAAAA,MA/B4B,kBA+BrBhD,OA/BqB,EA+BZ;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACuG,EAAR,KAAenG,SAAf,KACK6C,GAAG,CAACsD,EAAJ,GAASjB,eAAe,CAACtF,OAAO,CAACuG,EAAR,KAAenG,SAAf,GAA2BJ,OAAO,CAACuG,EAAnC,GAAwC,IAAI9D,UAAJ,EAAzC,CAD7B;AAEA,WAAOQ,GAAP;AACH,GApC2B;AAqC5BC,EAAAA,WArC4B,uBAqChB9E,MArCgB,EAqCR;AAChB,QAAM4B,OAAO,qBAAQyG,oBAAR,CAAb;;AACA,QAAIrI,MAAM,CAACmI,EAAP,KAAcnG,SAAd,IAA2BhC,MAAM,CAACmI,EAAP,KAAc,IAA7C,EAAmD;AAC/CvG,MAAAA,OAAO,CAACuG,EAAR,GAAanI,MAAM,CAACmI,EAApB;AACH,KAFD,MAGK;AACDvG,MAAAA,OAAO,CAACuG,EAAR,GAAa,IAAI9D,UAAJ,EAAb;AACH;;AACD,WAAOzC,OAAP;AACH;AA9C2B,CAAzB;AAgDP,IAAM0G,mBAAmB,GAAG;AAAEjB,EAAAA,MAAM,EAAE;AAAV,CAA5B;AACA,OAAO,IAAM/D,eAAe,GAAG;AAC3B3B,EAAAA,MAD2B,kBACpBC,OADoB,EACe;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACyF,MAAR,KAAmB,CAAvB,EAA0B;AACtBxF,MAAAA,MAAM,CAACK,MAAP,CAAc,CAAd,EAAiBwE,KAAjB,CAAuB9E,OAAO,CAACyF,MAA/B;AACH;;AACD,WAAOxF,MAAP;AACH,GAN0B;AAO3BoC,EAAAA,MAP2B,kBAOpBC,KAPoB,EAObC,MAPa,EAOL;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ0G,mBAAR,CAAb;;AACA,WAAOlE,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACyF,MAAR,GAAiB5B,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAA7B;AACA;;AACJ;AACItC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AANR;AAQH;;AACD,WAAO7C,OAAP;AACH,GAvB0B;AAwB3B+C,EAAAA,QAxB2B,oBAwBlB3E,MAxBkB,EAwBV;AACb,QAAM4B,OAAO,qBAAQ0G,mBAAR,CAAb;;AACA,QAAItI,MAAM,CAACqH,MAAP,KAAkBrF,SAAlB,IAA+BhC,MAAM,CAACqH,MAAP,KAAkB,IAArD,EAA2D;AACvDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB3B,MAAM,CAAC1F,MAAM,CAACqH,MAAR,CAAvB;AACH,KAFD,MAGK;AACDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB,CAAjB;AACH;;AACD,WAAOzF,OAAP;AACH,GAjC0B;AAkC3BgD,EAAAA,MAlC2B,kBAkCpBhD,OAlCoB,EAkCX;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACyF,MAAR,KAAmBrF,SAAnB,KAAiC6C,GAAG,CAACwC,MAAJ,GAAazF,OAAO,CAACyF,MAAtD;AACA,WAAOxC,GAAP;AACH,GAtC0B;AAuC3BC,EAAAA,WAvC2B,uBAuCf9E,MAvCe,EAuCP;AAChB,QAAM4B,OAAO,qBAAQ0G,mBAAR,CAAb;;AACA,QAAItI,MAAM,CAACqH,MAAP,KAAkBrF,SAAlB,IAA+BhC,MAAM,CAACqH,MAAP,KAAkB,IAArD,EAA2D;AACvDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiBrH,MAAM,CAACqH,MAAxB;AACH,KAFD,MAGK;AACDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB,CAAjB;AACH;;AACD,WAAOzF,OAAP;AACH;AAhD0B,CAAxB;AAkDP,IAAM2G,iBAAiB,GAAG,EAA1B;AACA,OAAO,IAAM/E,aAAa,GAAG;AACzB7B,EAAAA,MADyB,kBAClBwD,CADkB,EACW;AAAA,QAA1BtD,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;AAChC,WAAOD,MAAP;AACH,GAHwB;AAIzBoC,EAAAA,MAJyB,kBAIlBC,KAJkB,EAIXC,MAJW,EAIH;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ2G,iBAAR,CAAb;;AACA,WAAOnE,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI;AACIL,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAHR;AAKH;;AACD,WAAO7C,OAAP;AACH,GAjBwB;AAkBzB+C,EAAAA,QAlByB,oBAkBhBQ,CAlBgB,EAkBb;AACR,QAAMvD,OAAO,qBAAQ2G,iBAAR,CAAb;;AACA,WAAO3G,OAAP;AACH,GArBwB;AAsBzBgD,EAAAA,MAtByB,kBAsBlBO,CAtBkB,EAsBf;AACN,QAAMN,GAAG,GAAG,EAAZ;AACA,WAAOA,GAAP;AACH,GAzBwB;AA0BzBC,EAAAA,WA1ByB,uBA0BbK,CA1Ba,EA0BV;AACX,QAAMvD,OAAO,qBAAQ2G,iBAAR,CAAb;;AACA,WAAO3G,OAAP;AACH;AA7BwB,CAAtB;AA+BP,IAAM4G,wBAAwB,GAAG,EAAjC;AACA,OAAO,IAAM9E,oBAAoB,GAAG;AAChC/B,EAAAA,MADgC,kBACzBwD,CADyB,EACI;AAAA,QAA1BtD,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;AAChC,WAAOD,MAAP;AACH,GAH+B;AAIhCoC,EAAAA,MAJgC,kBAIzBC,KAJyB,EAIlBC,MAJkB,EAIV;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ4G,wBAAR,CAAb;;AACA,WAAOpE,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI;AACIL,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAHR;AAKH;;AACD,WAAO7C,OAAP;AACH,GAjB+B;AAkBhC+C,EAAAA,QAlBgC,oBAkBvBQ,CAlBuB,EAkBpB;AACR,QAAMvD,OAAO,qBAAQ4G,wBAAR,CAAb;;AACA,WAAO5G,OAAP;AACH,GArB+B;AAsBhCgD,EAAAA,MAtBgC,kBAsBzBO,CAtByB,EAsBtB;AACN,QAAMN,GAAG,GAAG,EAAZ;AACA,WAAOA,GAAP;AACH,GAzB+B;AA0BhCC,EAAAA,WA1BgC,uBA0BpBK,CA1BoB,EA0BjB;AACX,QAAMvD,OAAO,qBAAQ4G,wBAAR,CAAb;;AACA,WAAO5G,OAAP;AACH;AA7B+B,CAA7B;AA+BP,IAAM6G,wBAAwB,GAAG,EAAjC;AACA,OAAO,IAAM7E,oBAAoB,GAAG;AAChCjC,EAAAA,MADgC,kBACzBC,OADyB,EACU;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAAC8G,QAAR,KAAqB1G,SAAzB,EAAoC;AAChC2G,MAAAA,QAAQ,CAAChH,MAAT,CAAgBC,OAAO,CAAC8G,QAAxB,EAAkC7G,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAlC,EAA4DC,MAA5D;AACH;;AACD,QAAIR,OAAO,CAACgH,OAAR,CAAgBzE,MAAhB,KAA2B,CAA/B,EAAkC;AAC9BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAACgH,OAAhC;AACH;;AACD,WAAO/G,MAAP;AACH,GAT+B;AAUhCoC,EAAAA,MAVgC,kBAUzBC,KAVyB,EAUlBC,MAVkB,EAUV;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ6G,wBAAR,CAAb;;AACA,WAAOrE,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAAC8G,QAAR,GAAmBC,QAAQ,CAAC1E,MAAT,CAAgBG,MAAhB,EAAwBA,MAAM,CAAClC,MAAP,EAAxB,CAAnB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACgH,OAAR,GAAkBxE,MAAM,CAACqC,KAAP,EAAlB;AACA;;AACJ;AACIrC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAO7C,OAAP;AACH,GA7B+B;AA8BhC+C,EAAAA,QA9BgC,oBA8BvB3E,MA9BuB,EA8Bf;AACb,QAAM4B,OAAO,qBAAQ6G,wBAAR,CAAb;;AACA,QAAIzI,MAAM,CAAC0I,QAAP,KAAoB1G,SAApB,IAAiChC,MAAM,CAAC0I,QAAP,KAAoB,IAAzD,EAA+D;AAC3D9G,MAAAA,OAAO,CAAC8G,QAAR,GAAmBC,QAAQ,CAAChE,QAAT,CAAkB3E,MAAM,CAAC0I,QAAzB,CAAnB;AACH,KAFD,MAGK;AACD9G,MAAAA,OAAO,CAAC8G,QAAR,GAAmB1G,SAAnB;AACH;;AACD,QAAIhC,MAAM,CAAC4I,OAAP,KAAmB5G,SAAnB,IAAgChC,MAAM,CAAC4I,OAAP,KAAmB,IAAvD,EAA6D;AACzDhH,MAAAA,OAAO,CAACgH,OAAR,GAAkB7B,eAAe,CAAC/G,MAAM,CAAC4I,OAAR,CAAjC;AACH;;AACD,WAAOhH,OAAP;AACH,GA1C+B;AA2ChCgD,EAAAA,MA3CgC,kBA2CzBhD,OA3CyB,EA2ChB;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAAC8G,QAAR,KAAqB1G,SAArB,KACK6C,GAAG,CAAC6D,QAAJ,GAAe9G,OAAO,CAAC8G,QAAR,GACVC,QAAQ,CAAC/D,MAAT,CAAgBhD,OAAO,CAAC8G,QAAxB,CADU,GAEV1G,SAHV;AAIAJ,IAAAA,OAAO,CAACgH,OAAR,KAAoB5G,SAApB,KACK6C,GAAG,CAAC+D,OAAJ,GAAc1B,eAAe,CAACtF,OAAO,CAACgH,OAAR,KAAoB5G,SAApB,GAAgCJ,OAAO,CAACgH,OAAxC,GAAkD,IAAIvE,UAAJ,EAAnD,CADlC;AAEA,WAAOQ,GAAP;AACH,GApD+B;AAqDhCC,EAAAA,WArDgC,uBAqDpB9E,MArDoB,EAqDZ;AAChB,QAAM4B,OAAO,qBAAQ6G,wBAAR,CAAb;;AACA,QAAIzI,MAAM,CAAC0I,QAAP,KAAoB1G,SAApB,IAAiChC,MAAM,CAAC0I,QAAP,KAAoB,IAAzD,EAA+D;AAC3D9G,MAAAA,OAAO,CAAC8G,QAAR,GAAmBC,QAAQ,CAAC7D,WAAT,CAAqB9E,MAAM,CAAC0I,QAA5B,CAAnB;AACH,KAFD,MAGK;AACD9G,MAAAA,OAAO,CAAC8G,QAAR,GAAmB1G,SAAnB;AACH;;AACD,QAAIhC,MAAM,CAAC4I,OAAP,KAAmB5G,SAAnB,IAAgChC,MAAM,CAAC4I,OAAP,KAAmB,IAAvD,EAA6D;AACzDhH,MAAAA,OAAO,CAACgH,OAAR,GAAkB5I,MAAM,CAAC4I,OAAzB;AACH,KAFD,MAGK;AACDhH,MAAAA,OAAO,CAACgH,OAAR,GAAkB,IAAIvE,UAAJ,EAAlB;AACH;;AACD,WAAOzC,OAAP;AACH;AApE+B,CAA7B;AAsEP,IAAMiH,4BAA4B,GAAG;AAAExB,EAAAA,MAAM,EAAE,CAAV;AAAayB,EAAAA,MAAM,EAAE,CAArB;AAAwBC,EAAAA,KAAK,EAAE;AAA/B,CAArC;AACA,OAAO,IAAMjF,wBAAwB,GAAG;AACpCnC,EAAAA,MADoC,kBAC7BC,OAD6B,EACM;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACyF,MAAR,KAAmB,CAAvB,EAA0B;AACtBxF,MAAAA,MAAM,CAACK,MAAP,CAAc,CAAd,EAAiBsD,MAAjB,CAAwB5D,OAAO,CAACyF,MAAhC;AACH;;AACD,QAAIzF,OAAO,CAACkH,MAAR,KAAmB,CAAvB,EAA0B;AACtBjH,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBA,MAAlB,CAAyBN,OAAO,CAACkH,MAAjC;AACH;;AACD,QAAIlH,OAAO,CAACmH,KAAR,KAAkB,CAAtB,EAAyB;AACrBlH,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBA,MAAlB,CAAyBN,OAAO,CAACmH,KAAjC;AACH;;AACD,WAAOlH,MAAP;AACH,GAZmC;AAapCoC,EAAAA,MAboC,kBAa7BC,KAb6B,EAatBC,MAbsB,EAad;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBACNiH,4BADM,CAAb;;AAGA,WAAOzE,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACyF,MAAR,GAAiB5B,YAAY,CAACrB,MAAM,CAACoB,MAAP,EAAD,CAA7B;AACA;;AACJ,aAAK,CAAL;AACI5D,UAAAA,OAAO,CAACkH,MAAR,GAAiB1E,MAAM,CAAClC,MAAP,EAAjB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACmH,KAAR,GAAgB3E,MAAM,CAAClC,MAAP,EAAhB;AACA;;AACJ;AACIkC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAZR;AAcH;;AACD,WAAO7C,OAAP;AACH,GArCmC;AAsCpC+C,EAAAA,QAtCoC,oBAsC3B3E,MAtC2B,EAsCnB;AACb,QAAM4B,OAAO,qBACNiH,4BADM,CAAb;;AAGA,QAAI7I,MAAM,CAACqH,MAAP,KAAkBrF,SAAlB,IAA+BhC,MAAM,CAACqH,MAAP,KAAkB,IAArD,EAA2D;AACvDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB3B,MAAM,CAAC1F,MAAM,CAACqH,MAAR,CAAvB;AACH,KAFD,MAGK;AACDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIrH,MAAM,CAAC8I,MAAP,KAAkB9G,SAAlB,IAA+BhC,MAAM,CAAC8I,MAAP,KAAkB,IAArD,EAA2D;AACvDlH,MAAAA,OAAO,CAACkH,MAAR,GAAiBpD,MAAM,CAAC1F,MAAM,CAAC8I,MAAR,CAAvB;AACH,KAFD,MAGK;AACDlH,MAAAA,OAAO,CAACkH,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAI9I,MAAM,CAAC+I,KAAP,KAAiB/G,SAAjB,IAA8BhC,MAAM,CAAC+I,KAAP,KAAiB,IAAnD,EAAyD;AACrDnH,MAAAA,OAAO,CAACmH,KAAR,GAAgBrD,MAAM,CAAC1F,MAAM,CAAC+I,KAAR,CAAtB;AACH,KAFD,MAGK;AACDnH,MAAAA,OAAO,CAACmH,KAAR,GAAgB,CAAhB;AACH;;AACD,WAAOnH,OAAP;AACH,GA7DmC;AA8DpCgD,EAAAA,MA9DoC,kBA8D7BhD,OA9D6B,EA8DpB;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACyF,MAAR,KAAmBrF,SAAnB,KAAiC6C,GAAG,CAACwC,MAAJ,GAAazF,OAAO,CAACyF,MAAtD;AACAzF,IAAAA,OAAO,CAACkH,MAAR,KAAmB9G,SAAnB,KAAiC6C,GAAG,CAACiE,MAAJ,GAAalH,OAAO,CAACkH,MAAtD;AACAlH,IAAAA,OAAO,CAACmH,KAAR,KAAkB/G,SAAlB,KAAgC6C,GAAG,CAACkE,KAAJ,GAAYnH,OAAO,CAACmH,KAApD;AACA,WAAOlE,GAAP;AACH,GApEmC;AAqEpCC,EAAAA,WArEoC,uBAqExB9E,MArEwB,EAqEhB;AAChB,QAAM4B,OAAO,qBACNiH,4BADM,CAAb;;AAGA,QAAI7I,MAAM,CAACqH,MAAP,KAAkBrF,SAAlB,IAA+BhC,MAAM,CAACqH,MAAP,KAAkB,IAArD,EAA2D;AACvDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiBrH,MAAM,CAACqH,MAAxB;AACH,KAFD,MAGK;AACDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIrH,MAAM,CAAC8I,MAAP,KAAkB9G,SAAlB,IAA+BhC,MAAM,CAAC8I,MAAP,KAAkB,IAArD,EAA2D;AACvDlH,MAAAA,OAAO,CAACkH,MAAR,GAAiB9I,MAAM,CAAC8I,MAAxB;AACH,KAFD,MAGK;AACDlH,MAAAA,OAAO,CAACkH,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAI9I,MAAM,CAAC+I,KAAP,KAAiB/G,SAAjB,IAA8BhC,MAAM,CAAC+I,KAAP,KAAiB,IAAnD,EAAyD;AACrDnH,MAAAA,OAAO,CAACmH,KAAR,GAAgB/I,MAAM,CAAC+I,KAAvB;AACH,KAFD,MAGK;AACDnH,MAAAA,OAAO,CAACmH,KAAR,GAAgB,CAAhB;AACH;;AACD,WAAOnH,OAAP;AACH;AA5FmC,CAAjC;AA8FP,IAAMoH,6BAA6B,GAAG;AAAEC,EAAAA,KAAK,EAAE,CAAT;AAAYC,EAAAA,MAAM,EAAE;AAApB,CAAtC;AACA,OAAO,IAAMlF,yBAAyB,GAAG;AACrCrC,EAAAA,MADqC,kBAC9BC,OAD8B,EACK;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACqH,KAAR,KAAkB,CAAtB,EAAyB;AACrBpH,MAAAA,MAAM,CAACK,MAAP,CAAc,CAAd,EAAiBA,MAAjB,CAAwBN,OAAO,CAACqH,KAAhC;AACH;;AACD,QAAIrH,OAAO,CAACmH,KAAR,CAAc5E,MAAd,KAAyB,CAA7B,EAAgC;AAC5BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAACmH,KAAhC;AACH;;AACD,QAAInH,OAAO,CAACsH,MAAR,KAAmB,EAAvB,EAA2B;AACvBrH,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACsH,MAAjC;AACH;;AACD,WAAOrH,MAAP;AACH,GAZoC;AAarCoC,EAAAA,MAbqC,kBAa9BC,KAb8B,EAavBC,MAbuB,EAaf;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBACNoH,6BADM,CAAb;;AAGA,WAAO5E,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACqH,KAAR,GAAgB7E,MAAM,CAAClC,MAAP,EAAhB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACmH,KAAR,GAAgB3E,MAAM,CAACqC,KAAP,EAAhB;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAACsH,MAAR,GAAiB9E,MAAM,CAACY,MAAP,EAAjB;AACA;;AACJ;AACIZ,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAZR;AAcH;;AACD,WAAO7C,OAAP;AACH,GArCoC;AAsCrC+C,EAAAA,QAtCqC,oBAsC5B3E,MAtC4B,EAsCpB;AACb,QAAM4B,OAAO,qBACNoH,6BADM,CAAb;;AAGA,QAAIhJ,MAAM,CAACiJ,KAAP,KAAiBjH,SAAjB,IAA8BhC,MAAM,CAACiJ,KAAP,KAAiB,IAAnD,EAAyD;AACrDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgBvD,MAAM,CAAC1F,MAAM,CAACiJ,KAAR,CAAtB;AACH,KAFD,MAGK;AACDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgB,CAAhB;AACH;;AACD,QAAIjJ,MAAM,CAAC+I,KAAP,KAAiB/G,SAAjB,IAA8BhC,MAAM,CAAC+I,KAAP,KAAiB,IAAnD,EAAyD;AACrDnH,MAAAA,OAAO,CAACmH,KAAR,GAAgBhC,eAAe,CAAC/G,MAAM,CAAC+I,KAAR,CAA/B;AACH;;AACD,QAAI/I,MAAM,CAACkJ,MAAP,KAAkBlH,SAAlB,IAA+BhC,MAAM,CAACkJ,MAAP,KAAkB,IAArD,EAA2D;AACvDtH,MAAAA,OAAO,CAACsH,MAAR,GAAiBjE,MAAM,CAACjF,MAAM,CAACkJ,MAAR,CAAvB;AACH,KAFD,MAGK;AACDtH,MAAAA,OAAO,CAACsH,MAAR,GAAiB,EAAjB;AACH;;AACD,WAAOtH,OAAP;AACH,GA1DoC;AA2DrCgD,EAAAA,MA3DqC,kBA2D9BhD,OA3D8B,EA2DrB;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACqH,KAAR,KAAkBjH,SAAlB,KAAgC6C,GAAG,CAACoE,KAAJ,GAAYrH,OAAO,CAACqH,KAApD;AACArH,IAAAA,OAAO,CAACmH,KAAR,KAAkB/G,SAAlB,KACK6C,GAAG,CAACkE,KAAJ,GAAY7B,eAAe,CAACtF,OAAO,CAACmH,KAAR,KAAkB/G,SAAlB,GAA8BJ,OAAO,CAACmH,KAAtC,GAA8C,IAAI1E,UAAJ,EAA/C,CADhC;AAEAzC,IAAAA,OAAO,CAACsH,MAAR,KAAmBlH,SAAnB,KAAiC6C,GAAG,CAACqE,MAAJ,GAAatH,OAAO,CAACsH,MAAtD;AACA,WAAOrE,GAAP;AACH,GAlEoC;AAmErCC,EAAAA,WAnEqC,uBAmEzB9E,MAnEyB,EAmEjB;AAChB,QAAM4B,OAAO,qBACNoH,6BADM,CAAb;;AAGA,QAAIhJ,MAAM,CAACiJ,KAAP,KAAiBjH,SAAjB,IAA8BhC,MAAM,CAACiJ,KAAP,KAAiB,IAAnD,EAAyD;AACrDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgBjJ,MAAM,CAACiJ,KAAvB;AACH,KAFD,MAGK;AACDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgB,CAAhB;AACH;;AACD,QAAIjJ,MAAM,CAAC+I,KAAP,KAAiB/G,SAAjB,IAA8BhC,MAAM,CAAC+I,KAAP,KAAiB,IAAnD,EAAyD;AACrDnH,MAAAA,OAAO,CAACmH,KAAR,GAAgB/I,MAAM,CAAC+I,KAAvB;AACH,KAFD,MAGK;AACDnH,MAAAA,OAAO,CAACmH,KAAR,GAAgB,IAAI1E,UAAJ,EAAhB;AACH;;AACD,QAAIrE,MAAM,CAACkJ,MAAP,KAAkBlH,SAAlB,IAA+BhC,MAAM,CAACkJ,MAAP,KAAkB,IAArD,EAA2D;AACvDtH,MAAAA,OAAO,CAACsH,MAAR,GAAiBlJ,MAAM,CAACkJ,MAAxB;AACH,KAFD,MAGK;AACDtH,MAAAA,OAAO,CAACsH,MAAR,GAAiB,EAAjB;AACH;;AACD,WAAOtH,OAAP;AACH;AA1FoC,CAAlC;AA4FP,IAAMuH,YAAY,GAAG,EAArB;AACA,OAAO,IAAMC,QAAQ,GAAG;AACpBzH,EAAAA,MADoB,kBACbC,OADa,EACsB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACyH,SAAR,KAAsBrH,SAA1B,EAAqC;AACjCsH,MAAAA,iBAAiB,CAAC3H,MAAlB,CAAyBC,OAAO,CAACyH,SAAjC,EAA4CxH,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA5C,EAAsEC,MAAtE;AACH;;AACD,QAAIR,OAAO,CAACG,IAAR,KAAiBC,SAArB,EAAgC;AAC5BuH,MAAAA,YAAY,CAAC5H,MAAb,CAAoBC,OAAO,CAACG,IAA5B,EAAkCF,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAlC,EAA4DC,MAA5D;AACH;;AACD,QAAIR,OAAO,CAACS,KAAR,KAAkBL,SAAtB,EAAiC;AAC7BwH,MAAAA,aAAa,CAAC7H,MAAd,CAAqBC,OAAO,CAACS,KAA7B,EAAoCR,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAApC,EAA8DC,MAA9D;AACH;;AACD,QAAIR,OAAO,CAACW,IAAR,KAAiBP,SAArB,EAAgC;AAC5ByH,MAAAA,YAAY,CAAC9H,MAAb,CAAoBC,OAAO,CAACW,IAA5B,EAAkCV,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAlC,EAA4DC,MAA5D;AACH;;AACD,QAAIR,OAAO,CAACa,SAAR,KAAsBT,SAA1B,EAAqC;AACjC0H,MAAAA,iBAAiB,CAAC/H,MAAlB,CAAyBC,OAAO,CAACa,SAAjC,EAA4CZ,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA5C,EAAsEC,MAAtE;AACH;;AACD,QAAIR,OAAO,CAACe,SAAR,KAAsBX,SAA1B,EAAqC;AACjC2H,MAAAA,iBAAiB,CAAChI,MAAlB,CAAyBC,OAAO,CAACe,SAAjC,EAA4Cd,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA5C,EAAsEC,MAAtE;AACH;;AACD,QAAIR,OAAO,CAACiB,KAAR,KAAkBb,SAAtB,EAAiC;AAC7B4H,MAAAA,aAAa,CAACjI,MAAd,CAAqBC,OAAO,CAACiB,KAA7B,EAAoChB,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAApC,EAA8DC,MAA9D;AACH;;AACD,QAAIR,OAAO,CAACmB,UAAR,KAAuBf,SAA3B,EAAsC;AAClC6H,MAAAA,kBAAkB,CAAClI,MAAnB,CAA0BC,OAAO,CAACmB,UAAlC,EAA8ClB,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA9C,EAAwEC,MAAxE;AACH;;AACD,QAAIR,OAAO,CAACqB,OAAR,KAAoBjB,SAAxB,EAAmC;AAC/B8H,MAAAA,eAAe,CAACnI,MAAhB,CAAuBC,OAAO,CAACqB,OAA/B,EAAwCpB,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAxC,EAAkEC,MAAlE;AACH;;AACD,QAAIR,OAAO,CAACuB,SAAR,KAAsBnB,SAA1B,EAAqC;AACjC+H,MAAAA,iBAAiB,CAACpI,MAAlB,CAAyBC,OAAO,CAACuB,SAAjC,EAA4CtB,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA5C,EAAsEC,MAAtE;AACH;;AACD,QAAIR,OAAO,CAACyB,QAAR,KAAqBrB,SAAzB,EAAoC;AAChCgI,MAAAA,gBAAgB,CAACrI,MAAjB,CAAwBC,OAAO,CAACyB,QAAhC,EAA0CxB,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA1C,EAAoEC,MAApE;AACH;;AACD,QAAIR,OAAO,CAAC2B,MAAR,KAAmBvB,SAAvB,EAAkC;AAC9BiI,MAAAA,cAAc,CAACtI,MAAf,CAAsBC,OAAO,CAAC2B,MAA9B,EAAsC1B,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAtC,EAAgEC,MAAhE;AACH;;AACD,QAAIR,OAAO,CAAC6B,aAAR,KAA0BzB,SAA9B,EAAyC;AACrCkI,MAAAA,qBAAqB,CAACvI,MAAtB,CAA6BC,OAAO,CAAC6B,aAArC,EAAoD5B,MAAM,CAACK,MAAP,CAAc,GAAd,EAAmBC,IAAnB,EAApD,EAA+EC,MAA/E;AACH;;AACD,QAAIR,OAAO,CAAC+B,aAAR,KAA0B3B,SAA9B,EAAyC;AACrCmI,MAAAA,qBAAqB,CAACxI,MAAtB,CAA6BC,OAAO,CAAC+B,aAArC,EAAoD9B,MAAM,CAACK,MAAP,CAAc,GAAd,EAAmBC,IAAnB,EAApD,EAA+EC,MAA/E;AACH;;AACD,QAAIR,OAAO,CAACiC,iBAAR,KAA8B7B,SAAlC,EAA6C;AACzCoI,MAAAA,yBAAyB,CAACzI,MAA1B,CAAiCC,OAAO,CAACiC,iBAAzC,EAA4DhC,MAAM,CAACK,MAAP,CAAc,GAAd,EAAmBC,IAAnB,EAA5D,EAAuFC,MAAvF;AACH;;AACD,QAAIR,OAAO,CAACmC,kBAAR,KAA+B/B,SAAnC,EAA8C;AAC1CqI,MAAAA,0BAA0B,CAAC1I,MAA3B,CAAkCC,OAAO,CAACmC,kBAA1C,EAA8DlC,MAAM,CAACK,MAAP,CAAc,GAAd,EAAmBC,IAAnB,EAA9D,EAAyFC,MAAzF;AACH;;AACD,WAAOP,MAAP;AACH,GAnDmB;AAoDpBoC,EAAAA,MApDoB,kBAoDbC,KApDa,EAoDNC,MApDM,EAoDE;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQuH,YAAR,CAAb;;AACA,WAAO/E,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACyH,SAAR,GAAoBC,iBAAiB,CAACrF,MAAlB,CAAyBG,MAAzB,EAAiCA,MAAM,CAAClC,MAAP,EAAjC,CAApB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACG,IAAR,GAAewH,YAAY,CAACtF,MAAb,CAAoBG,MAApB,EAA4BA,MAAM,CAAClC,MAAP,EAA5B,CAAf;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACS,KAAR,GAAgBmH,aAAa,CAACvF,MAAd,CAAqBG,MAArB,EAA6BA,MAAM,CAAClC,MAAP,EAA7B,CAAhB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACW,IAAR,GAAekH,YAAY,CAACxF,MAAb,CAAoBG,MAApB,EAA4BA,MAAM,CAAClC,MAAP,EAA5B,CAAf;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACa,SAAR,GAAoBiH,iBAAiB,CAACzF,MAAlB,CAAyBG,MAAzB,EAAiCA,MAAM,CAAClC,MAAP,EAAjC,CAApB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACe,SAAR,GAAoBgH,iBAAiB,CAAC1F,MAAlB,CAAyBG,MAAzB,EAAiCA,MAAM,CAAClC,MAAP,EAAjC,CAApB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACiB,KAAR,GAAgB+G,aAAa,CAAC3F,MAAd,CAAqBG,MAArB,EAA6BA,MAAM,CAAClC,MAAP,EAA7B,CAAhB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACmB,UAAR,GAAqB8G,kBAAkB,CAAC5F,MAAnB,CAA0BG,MAA1B,EAAkCA,MAAM,CAAClC,MAAP,EAAlC,CAArB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACqB,OAAR,GAAkB6G,eAAe,CAAC7F,MAAhB,CAAuBG,MAAvB,EAA+BA,MAAM,CAAClC,MAAP,EAA/B,CAAlB;AACA;;AACJ,aAAK,EAAL;AACIN,UAAAA,OAAO,CAACuB,SAAR,GAAoB4G,iBAAiB,CAAC9F,MAAlB,CAAyBG,MAAzB,EAAiCA,MAAM,CAAClC,MAAP,EAAjC,CAApB;AACA;;AACJ,aAAK,EAAL;AACIN,UAAAA,OAAO,CAACyB,QAAR,GAAmB2G,gBAAgB,CAAC/F,MAAjB,CAAwBG,MAAxB,EAAgCA,MAAM,CAAClC,MAAP,EAAhC,CAAnB;AACA;;AACJ,aAAK,EAAL;AACIN,UAAAA,OAAO,CAAC2B,MAAR,GAAiB0G,cAAc,CAAChG,MAAf,CAAsBG,MAAtB,EAA8BA,MAAM,CAAClC,MAAP,EAA9B,CAAjB;AACA;;AACJ,aAAK,EAAL;AACIN,UAAAA,OAAO,CAAC6B,aAAR,GAAwByG,qBAAqB,CAACjG,MAAtB,CAA6BG,MAA7B,EAAqCA,MAAM,CAAClC,MAAP,EAArC,CAAxB;AACA;;AACJ,aAAK,EAAL;AACIN,UAAAA,OAAO,CAAC+B,aAAR,GAAwBwG,qBAAqB,CAAClG,MAAtB,CAA6BG,MAA7B,EAAqCA,MAAM,CAAClC,MAAP,EAArC,CAAxB;AACA;;AACJ,aAAK,EAAL;AACIN,UAAAA,OAAO,CAACiC,iBAAR,GAA4BuG,yBAAyB,CAACnG,MAA1B,CAAiCG,MAAjC,EAAyCA,MAAM,CAAClC,MAAP,EAAzC,CAA5B;AACA;;AACJ,aAAK,EAAL;AACIN,UAAAA,OAAO,CAACmC,kBAAR,GAA6BsG,0BAA0B,CAACpG,MAA3B,CAAkCG,MAAlC,EAA0CA,MAAM,CAAClC,MAAP,EAA1C,CAA7B;AACA;;AACJ;AACIkC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAnDR;AAqDH;;AACD,WAAO7C,OAAP;AACH,GAjHmB;AAkHpB+C,EAAAA,QAlHoB,oBAkHX3E,MAlHW,EAkHH;AACb,QAAM4B,OAAO,qBAAQuH,YAAR,CAAb;;AACA,QAAInJ,MAAM,CAACqJ,SAAP,KAAqBrH,SAArB,IAAkChC,MAAM,CAACqJ,SAAP,KAAqB,IAA3D,EAAiE;AAC7DzH,MAAAA,OAAO,CAACyH,SAAR,GAAoBC,iBAAiB,CAAC3E,QAAlB,CAA2B3E,MAAM,CAACqJ,SAAlC,CAApB;AACH,KAFD,MAGK;AACDzH,MAAAA,OAAO,CAACyH,SAAR,GAAoBrH,SAApB;AACH;;AACD,QAAIhC,MAAM,CAAC+B,IAAP,KAAgBC,SAAhB,IAA6BhC,MAAM,CAAC+B,IAAP,KAAgB,IAAjD,EAAuD;AACnDH,MAAAA,OAAO,CAACG,IAAR,GAAewH,YAAY,CAAC5E,QAAb,CAAsB3E,MAAM,CAAC+B,IAA7B,CAAf;AACH,KAFD,MAGK;AACDH,MAAAA,OAAO,CAACG,IAAR,GAAeC,SAAf;AACH;;AACD,QAAIhC,MAAM,CAACqC,KAAP,KAAiBL,SAAjB,IAA8BhC,MAAM,CAACqC,KAAP,KAAiB,IAAnD,EAAyD;AACrDT,MAAAA,OAAO,CAACS,KAAR,GAAgBmH,aAAa,CAAC7E,QAAd,CAAuB3E,MAAM,CAACqC,KAA9B,CAAhB;AACH,KAFD,MAGK;AACDT,MAAAA,OAAO,CAACS,KAAR,GAAgBL,SAAhB;AACH;;AACD,QAAIhC,MAAM,CAACuC,IAAP,KAAgBP,SAAhB,IAA6BhC,MAAM,CAACuC,IAAP,KAAgB,IAAjD,EAAuD;AACnDX,MAAAA,OAAO,CAACW,IAAR,GAAekH,YAAY,CAAC9E,QAAb,CAAsB3E,MAAM,CAACuC,IAA7B,CAAf;AACH,KAFD,MAGK;AACDX,MAAAA,OAAO,CAACW,IAAR,GAAeP,SAAf;AACH;;AACD,QAAIhC,MAAM,CAACyC,SAAP,KAAqBT,SAArB,IAAkChC,MAAM,CAACyC,SAAP,KAAqB,IAA3D,EAAiE;AAC7Db,MAAAA,OAAO,CAACa,SAAR,GAAoBiH,iBAAiB,CAAC/E,QAAlB,CAA2B3E,MAAM,CAACyC,SAAlC,CAApB;AACH,KAFD,MAGK;AACDb,MAAAA,OAAO,CAACa,SAAR,GAAoBT,SAApB;AACH;;AACD,QAAIhC,MAAM,CAAC2C,SAAP,KAAqBX,SAArB,IAAkChC,MAAM,CAAC2C,SAAP,KAAqB,IAA3D,EAAiE;AAC7Df,MAAAA,OAAO,CAACe,SAAR,GAAoBgH,iBAAiB,CAAChF,QAAlB,CAA2B3E,MAAM,CAAC2C,SAAlC,CAApB;AACH,KAFD,MAGK;AACDf,MAAAA,OAAO,CAACe,SAAR,GAAoBX,SAApB;AACH;;AACD,QAAIhC,MAAM,CAAC6C,KAAP,KAAiBb,SAAjB,IAA8BhC,MAAM,CAAC6C,KAAP,KAAiB,IAAnD,EAAyD;AACrDjB,MAAAA,OAAO,CAACiB,KAAR,GAAgB+G,aAAa,CAACjF,QAAd,CAAuB3E,MAAM,CAAC6C,KAA9B,CAAhB;AACH,KAFD,MAGK;AACDjB,MAAAA,OAAO,CAACiB,KAAR,GAAgBb,SAAhB;AACH;;AACD,QAAIhC,MAAM,CAAC+C,UAAP,KAAsBf,SAAtB,IAAmChC,MAAM,CAAC+C,UAAP,KAAsB,IAA7D,EAAmE;AAC/DnB,MAAAA,OAAO,CAACmB,UAAR,GAAqB8G,kBAAkB,CAAClF,QAAnB,CAA4B3E,MAAM,CAAC+C,UAAnC,CAArB;AACH,KAFD,MAGK;AACDnB,MAAAA,OAAO,CAACmB,UAAR,GAAqBf,SAArB;AACH;;AACD,QAAIhC,MAAM,CAACiD,OAAP,KAAmBjB,SAAnB,IAAgChC,MAAM,CAACiD,OAAP,KAAmB,IAAvD,EAA6D;AACzDrB,MAAAA,OAAO,CAACqB,OAAR,GAAkB6G,eAAe,CAACnF,QAAhB,CAAyB3E,MAAM,CAACiD,OAAhC,CAAlB;AACH,KAFD,MAGK;AACDrB,MAAAA,OAAO,CAACqB,OAAR,GAAkBjB,SAAlB;AACH;;AACD,QAAIhC,MAAM,CAACmD,SAAP,KAAqBnB,SAArB,IAAkChC,MAAM,CAACmD,SAAP,KAAqB,IAA3D,EAAiE;AAC7DvB,MAAAA,OAAO,CAACuB,SAAR,GAAoB4G,iBAAiB,CAACpF,QAAlB,CAA2B3E,MAAM,CAACmD,SAAlC,CAApB;AACH,KAFD,MAGK;AACDvB,MAAAA,OAAO,CAACuB,SAAR,GAAoBnB,SAApB;AACH;;AACD,QAAIhC,MAAM,CAACqD,QAAP,KAAoBrB,SAApB,IAAiChC,MAAM,CAACqD,QAAP,KAAoB,IAAzD,EAA+D;AAC3DzB,MAAAA,OAAO,CAACyB,QAAR,GAAmB2G,gBAAgB,CAACrF,QAAjB,CAA0B3E,MAAM,CAACqD,QAAjC,CAAnB;AACH,KAFD,MAGK;AACDzB,MAAAA,OAAO,CAACyB,QAAR,GAAmBrB,SAAnB;AACH;;AACD,QAAIhC,MAAM,CAACuD,MAAP,KAAkBvB,SAAlB,IAA+BhC,MAAM,CAACuD,MAAP,KAAkB,IAArD,EAA2D;AACvD3B,MAAAA,OAAO,CAAC2B,MAAR,GAAiB0G,cAAc,CAACtF,QAAf,CAAwB3E,MAAM,CAACuD,MAA/B,CAAjB;AACH,KAFD,MAGK;AACD3B,MAAAA,OAAO,CAAC2B,MAAR,GAAiBvB,SAAjB;AACH;;AACD,QAAIhC,MAAM,CAACyD,aAAP,KAAyBzB,SAAzB,IAAsChC,MAAM,CAACyD,aAAP,KAAyB,IAAnE,EAAyE;AACrE7B,MAAAA,OAAO,CAAC6B,aAAR,GAAwByG,qBAAqB,CAACvF,QAAtB,CAA+B3E,MAAM,CAACyD,aAAtC,CAAxB;AACH,KAFD,MAGK;AACD7B,MAAAA,OAAO,CAAC6B,aAAR,GAAwBzB,SAAxB;AACH;;AACD,QAAIhC,MAAM,CAAC2D,aAAP,KAAyB3B,SAAzB,IAAsChC,MAAM,CAAC2D,aAAP,KAAyB,IAAnE,EAAyE;AACrE/B,MAAAA,OAAO,CAAC+B,aAAR,GAAwBwG,qBAAqB,CAACxF,QAAtB,CAA+B3E,MAAM,CAAC2D,aAAtC,CAAxB;AACH,KAFD,MAGK;AACD/B,MAAAA,OAAO,CAAC+B,aAAR,GAAwB3B,SAAxB;AACH;;AACD,QAAIhC,MAAM,CAAC6D,iBAAP,KAA6B7B,SAA7B,IACAhC,MAAM,CAAC6D,iBAAP,KAA6B,IADjC,EACuC;AACnCjC,MAAAA,OAAO,CAACiC,iBAAR,GAA4BuG,yBAAyB,CAACzF,QAA1B,CAAmC3E,MAAM,CAAC6D,iBAA1C,CAA5B;AACH,KAHD,MAIK;AACDjC,MAAAA,OAAO,CAACiC,iBAAR,GAA4B7B,SAA5B;AACH;;AACD,QAAIhC,MAAM,CAAC+D,kBAAP,KAA8B/B,SAA9B,IACAhC,MAAM,CAAC+D,kBAAP,KAA8B,IADlC,EACwC;AACpCnC,MAAAA,OAAO,CAACmC,kBAAR,GAA6BsG,0BAA0B,CAAC1F,QAA3B,CAAoC3E,MAAM,CAAC+D,kBAA3C,CAA7B;AACH,KAHD,MAIK;AACDnC,MAAAA,OAAO,CAACmC,kBAAR,GAA6B/B,SAA7B;AACH;;AACD,WAAOJ,OAAP;AACH,GAvNmB;AAwNpBgD,EAAAA,MAxNoB,kBAwNbhD,OAxNa,EAwNJ;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACyH,SAAR,KAAsBrH,SAAtB,KACK6C,GAAG,CAACwE,SAAJ,GAAgBzH,OAAO,CAACyH,SAAR,GACXC,iBAAiB,CAAC1E,MAAlB,CAAyBhD,OAAO,CAACyH,SAAjC,CADW,GAEXrH,SAHV;AAIAJ,IAAAA,OAAO,CAACG,IAAR,KAAiBC,SAAjB,KACK6C,GAAG,CAAC9C,IAAJ,GAAWH,OAAO,CAACG,IAAR,GAAewH,YAAY,CAAC3E,MAAb,CAAoBhD,OAAO,CAACG,IAA5B,CAAf,GAAmDC,SADnE;AAEAJ,IAAAA,OAAO,CAACS,KAAR,KAAkBL,SAAlB,KACK6C,GAAG,CAACxC,KAAJ,GAAYT,OAAO,CAACS,KAAR,GACPmH,aAAa,CAAC5E,MAAd,CAAqBhD,OAAO,CAACS,KAA7B,CADO,GAEPL,SAHV;AAIAJ,IAAAA,OAAO,CAACW,IAAR,KAAiBP,SAAjB,KACK6C,GAAG,CAACtC,IAAJ,GAAWX,OAAO,CAACW,IAAR,GAAekH,YAAY,CAAC7E,MAAb,CAAoBhD,OAAO,CAACW,IAA5B,CAAf,GAAmDP,SADnE;AAEAJ,IAAAA,OAAO,CAACa,SAAR,KAAsBT,SAAtB,KACK6C,GAAG,CAACpC,SAAJ,GAAgBb,OAAO,CAACa,SAAR,GACXiH,iBAAiB,CAAC9E,MAAlB,CAAyBhD,OAAO,CAACa,SAAjC,CADW,GAEXT,SAHV;AAIAJ,IAAAA,OAAO,CAACe,SAAR,KAAsBX,SAAtB,KACK6C,GAAG,CAAClC,SAAJ,GAAgBf,OAAO,CAACe,SAAR,GACXgH,iBAAiB,CAAC/E,MAAlB,CAAyBhD,OAAO,CAACe,SAAjC,CADW,GAEXX,SAHV;AAIAJ,IAAAA,OAAO,CAACiB,KAAR,KAAkBb,SAAlB,KACK6C,GAAG,CAAChC,KAAJ,GAAYjB,OAAO,CAACiB,KAAR,GACP+G,aAAa,CAAChF,MAAd,CAAqBhD,OAAO,CAACiB,KAA7B,CADO,GAEPb,SAHV;AAIAJ,IAAAA,OAAO,CAACmB,UAAR,KAAuBf,SAAvB,KACK6C,GAAG,CAAC9B,UAAJ,GAAiBnB,OAAO,CAACmB,UAAR,GACZ8G,kBAAkB,CAACjF,MAAnB,CAA0BhD,OAAO,CAACmB,UAAlC,CADY,GAEZf,SAHV;AAIAJ,IAAAA,OAAO,CAACqB,OAAR,KAAoBjB,SAApB,KACK6C,GAAG,CAAC5B,OAAJ,GAAcrB,OAAO,CAACqB,OAAR,GACT6G,eAAe,CAAClF,MAAhB,CAAuBhD,OAAO,CAACqB,OAA/B,CADS,GAETjB,SAHV;AAIAJ,IAAAA,OAAO,CAACuB,SAAR,KAAsBnB,SAAtB,KACK6C,GAAG,CAAC1B,SAAJ,GAAgBvB,OAAO,CAACuB,SAAR,GACX4G,iBAAiB,CAACnF,MAAlB,CAAyBhD,OAAO,CAACuB,SAAjC,CADW,GAEXnB,SAHV;AAIAJ,IAAAA,OAAO,CAACyB,QAAR,KAAqBrB,SAArB,KACK6C,GAAG,CAACxB,QAAJ,GAAezB,OAAO,CAACyB,QAAR,GACV2G,gBAAgB,CAACpF,MAAjB,CAAwBhD,OAAO,CAACyB,QAAhC,CADU,GAEVrB,SAHV;AAIAJ,IAAAA,OAAO,CAAC2B,MAAR,KAAmBvB,SAAnB,KACK6C,GAAG,CAACtB,MAAJ,GAAa3B,OAAO,CAAC2B,MAAR,GACR0G,cAAc,CAACrF,MAAf,CAAsBhD,OAAO,CAAC2B,MAA9B,CADQ,GAERvB,SAHV;AAIAJ,IAAAA,OAAO,CAAC6B,aAAR,KAA0BzB,SAA1B,KACK6C,GAAG,CAACpB,aAAJ,GAAoB7B,OAAO,CAAC6B,aAAR,GACfyG,qBAAqB,CAACtF,MAAtB,CAA6BhD,OAAO,CAAC6B,aAArC,CADe,GAEfzB,SAHV;AAIAJ,IAAAA,OAAO,CAAC+B,aAAR,KAA0B3B,SAA1B,KACK6C,GAAG,CAAClB,aAAJ,GAAoB/B,OAAO,CAAC+B,aAAR,GACfwG,qBAAqB,CAACvF,MAAtB,CAA6BhD,OAAO,CAAC+B,aAArC,CADe,GAEf3B,SAHV;AAIAJ,IAAAA,OAAO,CAACiC,iBAAR,KAA8B7B,SAA9B,KACK6C,GAAG,CAAChB,iBAAJ,GAAwBjC,OAAO,CAACiC,iBAAR,GACnBuG,yBAAyB,CAACxF,MAA1B,CAAiChD,OAAO,CAACiC,iBAAzC,CADmB,GAEnB7B,SAHV;AAIAJ,IAAAA,OAAO,CAACmC,kBAAR,KAA+B/B,SAA/B,KACK6C,GAAG,CAACd,kBAAJ,GAAyBnC,OAAO,CAACmC,kBAAR,GACpBsG,0BAA0B,CAACzF,MAA3B,CAAkChD,OAAO,CAACmC,kBAA1C,CADoB,GAEpB/B,SAHV;AAIA,WAAO6C,GAAP;AACH,GAvRmB;AAwRpBC,EAAAA,WAxRoB,uBAwRR9E,MAxRQ,EAwRA;AAChB,QAAM4B,OAAO,qBAAQuH,YAAR,CAAb;;AACA,QAAInJ,MAAM,CAACqJ,SAAP,KAAqBrH,SAArB,IAAkChC,MAAM,CAACqJ,SAAP,KAAqB,IAA3D,EAAiE;AAC7DzH,MAAAA,OAAO,CAACyH,SAAR,GAAoBC,iBAAiB,CAACxE,WAAlB,CAA8B9E,MAAM,CAACqJ,SAArC,CAApB;AACH,KAFD,MAGK;AACDzH,MAAAA,OAAO,CAACyH,SAAR,GAAoBrH,SAApB;AACH;;AACD,QAAIhC,MAAM,CAAC+B,IAAP,KAAgBC,SAAhB,IAA6BhC,MAAM,CAAC+B,IAAP,KAAgB,IAAjD,EAAuD;AACnDH,MAAAA,OAAO,CAACG,IAAR,GAAewH,YAAY,CAACzE,WAAb,CAAyB9E,MAAM,CAAC+B,IAAhC,CAAf;AACH,KAFD,MAGK;AACDH,MAAAA,OAAO,CAACG,IAAR,GAAeC,SAAf;AACH;;AACD,QAAIhC,MAAM,CAACqC,KAAP,KAAiBL,SAAjB,IAA8BhC,MAAM,CAACqC,KAAP,KAAiB,IAAnD,EAAyD;AACrDT,MAAAA,OAAO,CAACS,KAAR,GAAgBmH,aAAa,CAAC1E,WAAd,CAA0B9E,MAAM,CAACqC,KAAjC,CAAhB;AACH,KAFD,MAGK;AACDT,MAAAA,OAAO,CAACS,KAAR,GAAgBL,SAAhB;AACH;;AACD,QAAIhC,MAAM,CAACuC,IAAP,KAAgBP,SAAhB,IAA6BhC,MAAM,CAACuC,IAAP,KAAgB,IAAjD,EAAuD;AACnDX,MAAAA,OAAO,CAACW,IAAR,GAAekH,YAAY,CAAC3E,WAAb,CAAyB9E,MAAM,CAACuC,IAAhC,CAAf;AACH,KAFD,MAGK;AACDX,MAAAA,OAAO,CAACW,IAAR,GAAeP,SAAf;AACH;;AACD,QAAIhC,MAAM,CAACyC,SAAP,KAAqBT,SAArB,IAAkChC,MAAM,CAACyC,SAAP,KAAqB,IAA3D,EAAiE;AAC7Db,MAAAA,OAAO,CAACa,SAAR,GAAoBiH,iBAAiB,CAAC5E,WAAlB,CAA8B9E,MAAM,CAACyC,SAArC,CAApB;AACH,KAFD,MAGK;AACDb,MAAAA,OAAO,CAACa,SAAR,GAAoBT,SAApB;AACH;;AACD,QAAIhC,MAAM,CAAC2C,SAAP,KAAqBX,SAArB,IAAkChC,MAAM,CAAC2C,SAAP,KAAqB,IAA3D,EAAiE;AAC7Df,MAAAA,OAAO,CAACe,SAAR,GAAoBgH,iBAAiB,CAAC7E,WAAlB,CAA8B9E,MAAM,CAAC2C,SAArC,CAApB;AACH,KAFD,MAGK;AACDf,MAAAA,OAAO,CAACe,SAAR,GAAoBX,SAApB;AACH;;AACD,QAAIhC,MAAM,CAAC6C,KAAP,KAAiBb,SAAjB,IAA8BhC,MAAM,CAAC6C,KAAP,KAAiB,IAAnD,EAAyD;AACrDjB,MAAAA,OAAO,CAACiB,KAAR,GAAgB+G,aAAa,CAAC9E,WAAd,CAA0B9E,MAAM,CAAC6C,KAAjC,CAAhB;AACH,KAFD,MAGK;AACDjB,MAAAA,OAAO,CAACiB,KAAR,GAAgBb,SAAhB;AACH;;AACD,QAAIhC,MAAM,CAAC+C,UAAP,KAAsBf,SAAtB,IAAmChC,MAAM,CAAC+C,UAAP,KAAsB,IAA7D,EAAmE;AAC/DnB,MAAAA,OAAO,CAACmB,UAAR,GAAqB8G,kBAAkB,CAAC/E,WAAnB,CAA+B9E,MAAM,CAAC+C,UAAtC,CAArB;AACH,KAFD,MAGK;AACDnB,MAAAA,OAAO,CAACmB,UAAR,GAAqBf,SAArB;AACH;;AACD,QAAIhC,MAAM,CAACiD,OAAP,KAAmBjB,SAAnB,IAAgChC,MAAM,CAACiD,OAAP,KAAmB,IAAvD,EAA6D;AACzDrB,MAAAA,OAAO,CAACqB,OAAR,GAAkB6G,eAAe,CAAChF,WAAhB,CAA4B9E,MAAM,CAACiD,OAAnC,CAAlB;AACH,KAFD,MAGK;AACDrB,MAAAA,OAAO,CAACqB,OAAR,GAAkBjB,SAAlB;AACH;;AACD,QAAIhC,MAAM,CAACmD,SAAP,KAAqBnB,SAArB,IAAkChC,MAAM,CAACmD,SAAP,KAAqB,IAA3D,EAAiE;AAC7DvB,MAAAA,OAAO,CAACuB,SAAR,GAAoB4G,iBAAiB,CAACjF,WAAlB,CAA8B9E,MAAM,CAACmD,SAArC,CAApB;AACH,KAFD,MAGK;AACDvB,MAAAA,OAAO,CAACuB,SAAR,GAAoBnB,SAApB;AACH;;AACD,QAAIhC,MAAM,CAACqD,QAAP,KAAoBrB,SAApB,IAAiChC,MAAM,CAACqD,QAAP,KAAoB,IAAzD,EAA+D;AAC3DzB,MAAAA,OAAO,CAACyB,QAAR,GAAmB2G,gBAAgB,CAAClF,WAAjB,CAA6B9E,MAAM,CAACqD,QAApC,CAAnB;AACH,KAFD,MAGK;AACDzB,MAAAA,OAAO,CAACyB,QAAR,GAAmBrB,SAAnB;AACH;;AACD,QAAIhC,MAAM,CAACuD,MAAP,KAAkBvB,SAAlB,IAA+BhC,MAAM,CAACuD,MAAP,KAAkB,IAArD,EAA2D;AACvD3B,MAAAA,OAAO,CAAC2B,MAAR,GAAiB0G,cAAc,CAACnF,WAAf,CAA2B9E,MAAM,CAACuD,MAAlC,CAAjB;AACH,KAFD,MAGK;AACD3B,MAAAA,OAAO,CAAC2B,MAAR,GAAiBvB,SAAjB;AACH;;AACD,QAAIhC,MAAM,CAACyD,aAAP,KAAyBzB,SAAzB,IAAsChC,MAAM,CAACyD,aAAP,KAAyB,IAAnE,EAAyE;AACrE7B,MAAAA,OAAO,CAAC6B,aAAR,GAAwByG,qBAAqB,CAACpF,WAAtB,CAAkC9E,MAAM,CAACyD,aAAzC,CAAxB;AACH,KAFD,MAGK;AACD7B,MAAAA,OAAO,CAAC6B,aAAR,GAAwBzB,SAAxB;AACH;;AACD,QAAIhC,MAAM,CAAC2D,aAAP,KAAyB3B,SAAzB,IAAsChC,MAAM,CAAC2D,aAAP,KAAyB,IAAnE,EAAyE;AACrE/B,MAAAA,OAAO,CAAC+B,aAAR,GAAwBwG,qBAAqB,CAACrF,WAAtB,CAAkC9E,MAAM,CAAC2D,aAAzC,CAAxB;AACH,KAFD,MAGK;AACD/B,MAAAA,OAAO,CAAC+B,aAAR,GAAwB3B,SAAxB;AACH;;AACD,QAAIhC,MAAM,CAAC6D,iBAAP,KAA6B7B,SAA7B,IACAhC,MAAM,CAAC6D,iBAAP,KAA6B,IADjC,EACuC;AACnCjC,MAAAA,OAAO,CAACiC,iBAAR,GAA4BuG,yBAAyB,CAACtF,WAA1B,CAAsC9E,MAAM,CAAC6D,iBAA7C,CAA5B;AACH,KAHD,MAIK;AACDjC,MAAAA,OAAO,CAACiC,iBAAR,GAA4B7B,SAA5B;AACH;;AACD,QAAIhC,MAAM,CAAC+D,kBAAP,KAA8B/B,SAA9B,IACAhC,MAAM,CAAC+D,kBAAP,KAA8B,IADlC,EACwC;AACpCnC,MAAAA,OAAO,CAACmC,kBAAR,GAA6BsG,0BAA0B,CAACvF,WAA3B,CAAuC9E,MAAM,CAAC+D,kBAA9C,CAA7B;AACH,KAHD,MAIK;AACDnC,MAAAA,OAAO,CAACmC,kBAAR,GAA6B/B,SAA7B;AACH;;AACD,WAAOJ,OAAP;AACH;AA7XmB,CAAjB;AA+XP,IAAM0I,qBAAqB,GAAG;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA9B;AACA,OAAO,IAAMjB,iBAAiB,GAAG;AAC7B3H,EAAAA,MAD6B,kBACtBC,OADsB,EACa;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAAC2I,KAAR,KAAkB,EAAtB,EAA0B;AACtB1I,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAAC2I,KAAjC;AACH;;AACD,WAAO1I,MAAP;AACH,GAN4B;AAO7BoC,EAAAA,MAP6B,kBAOtBC,KAPsB,EAOfC,MAPe,EAOP;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ0I,qBAAR,CAAb;;AACA,WAAOlG,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAAC2I,KAAR,GAAgBnG,MAAM,CAACY,MAAP,EAAhB;AACA;;AACJ;AACIZ,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AANR;AAQH;;AACD,WAAO7C,OAAP;AACH,GAvB4B;AAwB7B+C,EAAAA,QAxB6B,oBAwBpB3E,MAxBoB,EAwBZ;AACb,QAAM4B,OAAO,qBAAQ0I,qBAAR,CAAb;;AACA,QAAItK,MAAM,CAACuK,KAAP,KAAiBvI,SAAjB,IAA8BhC,MAAM,CAACuK,KAAP,KAAiB,IAAnD,EAAyD;AACrD3I,MAAAA,OAAO,CAAC2I,KAAR,GAAgBtF,MAAM,CAACjF,MAAM,CAACuK,KAAR,CAAtB;AACH,KAFD,MAGK;AACD3I,MAAAA,OAAO,CAAC2I,KAAR,GAAgB,EAAhB;AACH;;AACD,WAAO3I,OAAP;AACH,GAjC4B;AAkC7BgD,EAAAA,MAlC6B,kBAkCtBhD,OAlCsB,EAkCb;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAAC2I,KAAR,KAAkBvI,SAAlB,KAAgC6C,GAAG,CAAC0F,KAAJ,GAAY3I,OAAO,CAAC2I,KAApD;AACA,WAAO1F,GAAP;AACH,GAtC4B;AAuC7BC,EAAAA,WAvC6B,uBAuCjB9E,MAvCiB,EAuCT;AAChB,QAAM4B,OAAO,qBAAQ0I,qBAAR,CAAb;;AACA,QAAItK,MAAM,CAACuK,KAAP,KAAiBvI,SAAjB,IAA8BhC,MAAM,CAACuK,KAAP,KAAiB,IAAnD,EAAyD;AACrD3I,MAAAA,OAAO,CAAC2I,KAAR,GAAgBvK,MAAM,CAACuK,KAAvB;AACH,KAFD,MAGK;AACD3I,MAAAA,OAAO,CAAC2I,KAAR,GAAgB,EAAhB;AACH;;AACD,WAAO3I,OAAP;AACH;AAhD4B,CAA1B;AAkDP,IAAM4I,gBAAgB,GAAG;AAAE5I,EAAAA,OAAO,EAAE;AAAX,CAAzB;AACA,OAAO,IAAM2H,YAAY,GAAG;AACxB5H,EAAAA,MADwB,kBACjBC,OADiB,EACkB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACA,OAAR,KAAoB,EAAxB,EAA4B;AACxBC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACA,OAAjC;AACH;;AACD,WAAOC,MAAP;AACH,GANuB;AAOxBoC,EAAAA,MAPwB,kBAOjBC,KAPiB,EAOVC,MAPU,EAOF;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ4I,gBAAR,CAAb;;AACA,WAAOpG,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACA,OAAR,GAAkBwC,MAAM,CAACY,MAAP,EAAlB;AACA;;AACJ;AACIZ,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AANR;AAQH;;AACD,WAAO7C,OAAP;AACH,GAvBuB;AAwBxB+C,EAAAA,QAxBwB,oBAwBf3E,MAxBe,EAwBP;AACb,QAAM4B,OAAO,qBAAQ4I,gBAAR,CAAb;;AACA,QAAIxK,MAAM,CAAC4B,OAAP,KAAmBI,SAAnB,IAAgChC,MAAM,CAAC4B,OAAP,KAAmB,IAAvD,EAA6D;AACzDA,MAAAA,OAAO,CAACA,OAAR,GAAkBqD,MAAM,CAACjF,MAAM,CAAC4B,OAAR,CAAxB;AACH,KAFD,MAGK;AACDA,MAAAA,OAAO,CAACA,OAAR,GAAkB,EAAlB;AACH;;AACD,WAAOA,OAAP;AACH,GAjCuB;AAkCxBgD,EAAAA,MAlCwB,kBAkCjBhD,OAlCiB,EAkCR;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACA,OAAR,KAAoBI,SAApB,KAAkC6C,GAAG,CAACjD,OAAJ,GAAcA,OAAO,CAACA,OAAxD;AACA,WAAOiD,GAAP;AACH,GAtCuB;AAuCxBC,EAAAA,WAvCwB,uBAuCZ9E,MAvCY,EAuCJ;AAChB,QAAM4B,OAAO,qBAAQ4I,gBAAR,CAAb;;AACA,QAAIxK,MAAM,CAAC4B,OAAP,KAAmBI,SAAnB,IAAgChC,MAAM,CAAC4B,OAAP,KAAmB,IAAvD,EAA6D;AACzDA,MAAAA,OAAO,CAACA,OAAR,GAAkB5B,MAAM,CAAC4B,OAAzB;AACH,KAFD,MAGK;AACDA,MAAAA,OAAO,CAACA,OAAR,GAAkB,EAAlB;AACH;;AACD,WAAOA,OAAP;AACH;AAhDuB,CAArB;AAkDP,IAAM6I,iBAAiB,GAAG,EAA1B;AACA,OAAO,IAAMjB,aAAa,GAAG;AACzB7H,EAAAA,MADyB,kBAClBwD,CADkB,EACW;AAAA,QAA1BtD,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;AAChC,WAAOD,MAAP;AACH,GAHwB;AAIzBoC,EAAAA,MAJyB,kBAIlBC,KAJkB,EAIXC,MAJW,EAIH;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ6I,iBAAR,CAAb;;AACA,WAAOrG,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI;AACIL,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAHR;AAKH;;AACD,WAAO7C,OAAP;AACH,GAjBwB;AAkBzB+C,EAAAA,QAlByB,oBAkBhBQ,CAlBgB,EAkBb;AACR,QAAMvD,OAAO,qBAAQ6I,iBAAR,CAAb;;AACA,WAAO7I,OAAP;AACH,GArBwB;AAsBzBgD,EAAAA,MAtByB,kBAsBlBO,CAtBkB,EAsBf;AACN,QAAMN,GAAG,GAAG,EAAZ;AACA,WAAOA,GAAP;AACH,GAzBwB;AA0BzBC,EAAAA,WA1ByB,uBA0BbK,CA1Ba,EA0BV;AACX,QAAMvD,OAAO,qBAAQ6I,iBAAR,CAAb;;AACA,WAAO7I,OAAP;AACH;AA7BwB,CAAtB;AA+BP,IAAM8I,gBAAgB,GAAG;AACrBnD,EAAAA,IAAI,EAAE,EADe;AAErBlC,EAAAA,OAAO,EAAE,EAFY;AAGrBsF,EAAAA,UAAU,EAAE,CAHS;AAIrBC,EAAAA,eAAe,EAAE;AAJI,CAAzB;AAMA,OAAO,IAAMnB,YAAY,GAAG;AACxB9H,EAAAA,MADwB,kBACjBC,OADiB,EACkB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAAC2F,IAAR,KAAiB,EAArB,EAAyB;AACrB1F,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAAC2F,IAAjC;AACH;;AACD,QAAI3F,OAAO,CAACyD,OAAR,KAAoB,EAAxB,EAA4B;AACxBxD,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACyD,OAAjC;AACH;;AACD,QAAIzD,OAAO,CAAC+I,UAAR,KAAuB,CAA3B,EAA8B;AAC1B9I,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBsD,MAAlB,CAAyB5D,OAAO,CAAC+I,UAAjC;AACH;;AACD,QAAI/I,OAAO,CAACgJ,eAAR,KAA4B,CAAhC,EAAmC;AAC/B/I,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAACgJ,eAAhC;AACH;;AACD,QAAIhJ,OAAO,CAACiJ,gBAAR,CAAyB1G,MAAzB,KAAoC,CAAxC,EAA2C;AACvCtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAACiJ,gBAAhC;AACH;;AACD,WAAOhJ,MAAP;AACH,GAlBuB;AAmBxBoC,EAAAA,MAnBwB,kBAmBjBC,KAnBiB,EAmBVC,MAnBU,EAmBF;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ8I,gBAAR,CAAb;;AACA,WAAOtG,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAAC2F,IAAR,GAAenD,MAAM,CAACY,MAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACIpD,UAAAA,OAAO,CAACyD,OAAR,GAAkBjB,MAAM,CAACY,MAAP,EAAlB;AACA;;AACJ,aAAK,CAAL;AACIpD,UAAAA,OAAO,CAAC+I,UAAR,GAAqBlF,YAAY,CAACrB,MAAM,CAACoB,MAAP,EAAD,CAAjC;AACA;;AACJ,aAAK,CAAL;AACI5D,UAAAA,OAAO,CAACgJ,eAAR,GAA0BnF,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAAtC;AACA;;AACJ,aAAK,CAAL;AACI9E,UAAAA,OAAO,CAACiJ,gBAAR,GAA2BzG,MAAM,CAACqC,KAAP,EAA3B;AACA;;AACJ;AACIrC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAlBR;AAoBH;;AACD,WAAO7C,OAAP;AACH,GA/CuB;AAgDxB+C,EAAAA,QAhDwB,oBAgDf3E,MAhDe,EAgDP;AACb,QAAM4B,OAAO,qBAAQ8I,gBAAR,CAAb;;AACA,QAAI1K,MAAM,CAACuH,IAAP,KAAgBvF,SAAhB,IAA6BhC,MAAM,CAACuH,IAAP,KAAgB,IAAjD,EAAuD;AACnD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAetC,MAAM,CAACjF,MAAM,CAACuH,IAAR,CAArB;AACH,KAFD,MAGK;AACD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAe,EAAf;AACH;;AACD,QAAIvH,MAAM,CAACqF,OAAP,KAAmBrD,SAAnB,IAAgChC,MAAM,CAACqF,OAAP,KAAmB,IAAvD,EAA6D;AACzDzD,MAAAA,OAAO,CAACyD,OAAR,GAAkBJ,MAAM,CAACjF,MAAM,CAACqF,OAAR,CAAxB;AACH,KAFD,MAGK;AACDzD,MAAAA,OAAO,CAACyD,OAAR,GAAkB,EAAlB;AACH;;AACD,QAAIrF,MAAM,CAAC2K,UAAP,KAAsB3I,SAAtB,IAAmChC,MAAM,CAAC2K,UAAP,KAAsB,IAA7D,EAAmE;AAC/D/I,MAAAA,OAAO,CAAC+I,UAAR,GAAqBjF,MAAM,CAAC1F,MAAM,CAAC2K,UAAR,CAA3B;AACH,KAFD,MAGK;AACD/I,MAAAA,OAAO,CAAC+I,UAAR,GAAqB,CAArB;AACH;;AACD,QAAI3K,MAAM,CAAC4K,eAAP,KAA2B5I,SAA3B,IACAhC,MAAM,CAAC4K,eAAP,KAA2B,IAD/B,EACqC;AACjChJ,MAAAA,OAAO,CAACgJ,eAAR,GAA0BlF,MAAM,CAAC1F,MAAM,CAAC4K,eAAR,CAAhC;AACH,KAHD,MAIK;AACDhJ,MAAAA,OAAO,CAACgJ,eAAR,GAA0B,CAA1B;AACH;;AACD,QAAI5K,MAAM,CAAC6K,gBAAP,KAA4B7I,SAA5B,IACAhC,MAAM,CAAC6K,gBAAP,KAA4B,IADhC,EACsC;AAClCjJ,MAAAA,OAAO,CAACiJ,gBAAR,GAA2B9D,eAAe,CAAC/G,MAAM,CAAC6K,gBAAR,CAA1C;AACH;;AACD,WAAOjJ,OAAP;AACH,GAhFuB;AAiFxBgD,EAAAA,MAjFwB,kBAiFjBhD,OAjFiB,EAiFR;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAAC2F,IAAR,KAAiBvF,SAAjB,KAA+B6C,GAAG,CAAC0C,IAAJ,GAAW3F,OAAO,CAAC2F,IAAlD;AACA3F,IAAAA,OAAO,CAACyD,OAAR,KAAoBrD,SAApB,KAAkC6C,GAAG,CAACQ,OAAJ,GAAczD,OAAO,CAACyD,OAAxD;AACAzD,IAAAA,OAAO,CAAC+I,UAAR,KAAuB3I,SAAvB,KAAqC6C,GAAG,CAAC8F,UAAJ,GAAiB/I,OAAO,CAAC+I,UAA9D;AACA/I,IAAAA,OAAO,CAACgJ,eAAR,KAA4B5I,SAA5B,KACK6C,GAAG,CAAC+F,eAAJ,GAAsBhJ,OAAO,CAACgJ,eADnC;AAEAhJ,IAAAA,OAAO,CAACiJ,gBAAR,KAA6B7I,SAA7B,KACK6C,GAAG,CAACgG,gBAAJ,GAAuB3D,eAAe,CAACtF,OAAO,CAACiJ,gBAAR,KAA6B7I,SAA7B,GAClCJ,OAAO,CAACiJ,gBAD0B,GAElC,IAAIxG,UAAJ,EAFiC,CAD3C;AAIA,WAAOQ,GAAP;AACH,GA7FuB;AA8FxBC,EAAAA,WA9FwB,uBA8FZ9E,MA9FY,EA8FJ;AAChB,QAAM4B,OAAO,qBAAQ8I,gBAAR,CAAb;;AACA,QAAI1K,MAAM,CAACuH,IAAP,KAAgBvF,SAAhB,IAA6BhC,MAAM,CAACuH,IAAP,KAAgB,IAAjD,EAAuD;AACnD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAevH,MAAM,CAACuH,IAAtB;AACH,KAFD,MAGK;AACD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAe,EAAf;AACH;;AACD,QAAIvH,MAAM,CAACqF,OAAP,KAAmBrD,SAAnB,IAAgChC,MAAM,CAACqF,OAAP,KAAmB,IAAvD,EAA6D;AACzDzD,MAAAA,OAAO,CAACyD,OAAR,GAAkBrF,MAAM,CAACqF,OAAzB;AACH,KAFD,MAGK;AACDzD,MAAAA,OAAO,CAACyD,OAAR,GAAkB,EAAlB;AACH;;AACD,QAAIrF,MAAM,CAAC2K,UAAP,KAAsB3I,SAAtB,IAAmChC,MAAM,CAAC2K,UAAP,KAAsB,IAA7D,EAAmE;AAC/D/I,MAAAA,OAAO,CAAC+I,UAAR,GAAqB3K,MAAM,CAAC2K,UAA5B;AACH,KAFD,MAGK;AACD/I,MAAAA,OAAO,CAAC+I,UAAR,GAAqB,CAArB;AACH;;AACD,QAAI3K,MAAM,CAAC4K,eAAP,KAA2B5I,SAA3B,IACAhC,MAAM,CAAC4K,eAAP,KAA2B,IAD/B,EACqC;AACjChJ,MAAAA,OAAO,CAACgJ,eAAR,GAA0B5K,MAAM,CAAC4K,eAAjC;AACH,KAHD,MAIK;AACDhJ,MAAAA,OAAO,CAACgJ,eAAR,GAA0B,CAA1B;AACH;;AACD,QAAI5K,MAAM,CAAC6K,gBAAP,KAA4B7I,SAA5B,IACAhC,MAAM,CAAC6K,gBAAP,KAA4B,IADhC,EACsC;AAClCjJ,MAAAA,OAAO,CAACiJ,gBAAR,GAA2B7K,MAAM,CAAC6K,gBAAlC;AACH,KAHD,MAIK;AACDjJ,MAAAA,OAAO,CAACiJ,gBAAR,GAA2B,IAAIxG,UAAJ,EAA3B;AACH;;AACD,WAAOzC,OAAP;AACH;AAjIuB,CAArB;AAmIP,IAAMkJ,qBAAqB,GAAG;AAAEC,EAAAA,IAAI,EAAE,CAAR;AAAWC,EAAAA,GAAG,EAAE,EAAhB;AAAoBzI,EAAAA,IAAI,EAAE;AAA1B,CAA9B;AACA,OAAO,IAAMmH,iBAAiB,GAAG;AAC7B/H,EAAAA,MAD6B,kBACtBC,OADsB,EACa;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACmJ,IAAR,KAAiB,CAArB,EAAwB;AACpBlJ,MAAAA,MAAM,CAACK,MAAP,CAAc,CAAd,EAAiBA,MAAjB,CAAwBN,OAAO,CAACmJ,IAAhC;AACH;;AACD,QAAInJ,OAAO,CAACoJ,GAAR,KAAgB,EAApB,EAAwB;AACpBnJ,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACoJ,GAAjC;AACH;;AACD,QAAIpJ,OAAO,CAACW,IAAR,KAAiB,EAArB,EAAyB;AACrBV,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACW,IAAjC;AACH;;AACD,WAAOV,MAAP;AACH,GAZ4B;AAa7BoC,EAAAA,MAb6B,kBAatBC,KAbsB,EAafC,MAbe,EAaP;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQkJ,qBAAR,CAAb;;AACA,WAAO1G,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACmJ,IAAR,GAAe3G,MAAM,CAAClC,MAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACoJ,GAAR,GAAc5G,MAAM,CAACY,MAAP,EAAd;AACA;;AACJ,aAAK,CAAL;AACIpD,UAAAA,OAAO,CAACW,IAAR,GAAe6B,MAAM,CAACY,MAAP,EAAf;AACA;;AACJ;AACIZ,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAZR;AAcH;;AACD,WAAO7C,OAAP;AACH,GAnC4B;AAoC7B+C,EAAAA,QApC6B,oBAoCpB3E,MApCoB,EAoCZ;AACb,QAAM4B,OAAO,qBAAQkJ,qBAAR,CAAb;;AACA,QAAI9K,MAAM,CAAC+K,IAAP,KAAgB/I,SAAhB,IAA6BhC,MAAM,CAAC+K,IAAP,KAAgB,IAAjD,EAAuD;AACnDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAerF,MAAM,CAAC1F,MAAM,CAAC+K,IAAR,CAArB;AACH,KAFD,MAGK;AACDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAe,CAAf;AACH;;AACD,QAAI/K,MAAM,CAACgL,GAAP,KAAehJ,SAAf,IAA4BhC,MAAM,CAACgL,GAAP,KAAe,IAA/C,EAAqD;AACjDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAc/F,MAAM,CAACjF,MAAM,CAACgL,GAAR,CAApB;AACH,KAFD,MAGK;AACDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAc,EAAd;AACH;;AACD,QAAIhL,MAAM,CAACuC,IAAP,KAAgBP,SAAhB,IAA6BhC,MAAM,CAACuC,IAAP,KAAgB,IAAjD,EAAuD;AACnDX,MAAAA,OAAO,CAACW,IAAR,GAAe0C,MAAM,CAACjF,MAAM,CAACuC,IAAR,CAArB;AACH,KAFD,MAGK;AACDX,MAAAA,OAAO,CAACW,IAAR,GAAe,EAAf;AACH;;AACD,WAAOX,OAAP;AACH,GAzD4B;AA0D7BgD,EAAAA,MA1D6B,kBA0DtBhD,OA1DsB,EA0Db;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACmJ,IAAR,KAAiB/I,SAAjB,KAA+B6C,GAAG,CAACkG,IAAJ,GAAWnJ,OAAO,CAACmJ,IAAlD;AACAnJ,IAAAA,OAAO,CAACoJ,GAAR,KAAgBhJ,SAAhB,KAA8B6C,GAAG,CAACmG,GAAJ,GAAUpJ,OAAO,CAACoJ,GAAhD;AACApJ,IAAAA,OAAO,CAACW,IAAR,KAAiBP,SAAjB,KAA+B6C,GAAG,CAACtC,IAAJ,GAAWX,OAAO,CAACW,IAAlD;AACA,WAAOsC,GAAP;AACH,GAhE4B;AAiE7BC,EAAAA,WAjE6B,uBAiEjB9E,MAjEiB,EAiET;AAChB,QAAM4B,OAAO,qBAAQkJ,qBAAR,CAAb;;AACA,QAAI9K,MAAM,CAAC+K,IAAP,KAAgB/I,SAAhB,IAA6BhC,MAAM,CAAC+K,IAAP,KAAgB,IAAjD,EAAuD;AACnDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAe/K,MAAM,CAAC+K,IAAtB;AACH,KAFD,MAGK;AACDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAe,CAAf;AACH;;AACD,QAAI/K,MAAM,CAACgL,GAAP,KAAehJ,SAAf,IAA4BhC,MAAM,CAACgL,GAAP,KAAe,IAA/C,EAAqD;AACjDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAchL,MAAM,CAACgL,GAArB;AACH,KAFD,MAGK;AACDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAc,EAAd;AACH;;AACD,QAAIhL,MAAM,CAACuC,IAAP,KAAgBP,SAAhB,IAA6BhC,MAAM,CAACuC,IAAP,KAAgB,IAAjD,EAAuD;AACnDX,MAAAA,OAAO,CAACW,IAAR,GAAevC,MAAM,CAACuC,IAAtB;AACH,KAFD,MAGK;AACDX,MAAAA,OAAO,CAACW,IAAR,GAAe,EAAf;AACH;;AACD,WAAOX,OAAP;AACH;AAtF4B,CAA1B;AAwFP,IAAMqJ,qBAAqB,GAAG,EAA9B;AACA,OAAO,IAAMtB,iBAAiB,GAAG;AAC7BhI,EAAAA,MAD6B,kBACtBC,OADsB,EACa;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACuE,eAAR,KAA4BnE,SAAhC,EAA2C;AACvCoE,MAAAA,eAAe,CAACzE,MAAhB,CAAuBC,OAAO,CAACuE,eAA/B,EAAgDtE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAhD,EAA0EC,MAA1E;AACH;;AAHqC,gDAItBR,OAAO,CAACyE,UAJc;AAAA;;AAAA;AAItC,6DAAoC;AAAA,YAAzBC,CAAyB;AAChCC,QAAAA,eAAe,CAAC5E,MAAhB,CAAuB2E,CAAvB,EAA0BzE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA1B,EAAoDC,MAApD;AACH;AANqC;AAAA;AAAA;AAAA;AAAA;;AAOtC,QAAIR,OAAO,CAACgH,OAAR,CAAgBzE,MAAhB,KAA2B,CAA/B,EAAkC;AAC9BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAACgH,OAAhC;AACH;;AACD,WAAO/G,MAAP;AACH,GAZ4B;AAa7BoC,EAAAA,MAb6B,kBAatBC,KAbsB,EAafC,MAbe,EAaP;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQqJ,qBAAR,CAAb;;AACArJ,IAAAA,OAAO,CAACyE,UAAR,GAAqB,EAArB;;AACA,WAAOjC,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACuE,eAAR,GAA0BC,eAAe,CAACnC,MAAhB,CAAuBG,MAAvB,EAA+BA,MAAM,CAAClC,MAAP,EAA/B,CAA1B;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACyE,UAAR,CAAmBO,IAAnB,CAAwBL,eAAe,CAACtC,MAAhB,CAAuBG,MAAvB,EAA+BA,MAAM,CAAClC,MAAP,EAA/B,CAAxB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACgH,OAAR,GAAkBxE,MAAM,CAACqC,KAAP,EAAlB;AACA;;AACJ;AACIrC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAZR;AAcH;;AACD,WAAO7C,OAAP;AACH,GApC4B;AAqC7B+C,EAAAA,QArC6B,oBAqCpB3E,MArCoB,EAqCZ;AACb,QAAM4B,OAAO,qBAAQqJ,qBAAR,CAAb;;AACArJ,IAAAA,OAAO,CAACyE,UAAR,GAAqB,EAArB;;AACA,QAAIrG,MAAM,CAACmG,eAAP,KAA2BnE,SAA3B,IACAhC,MAAM,CAACmG,eAAP,KAA2B,IAD/B,EACqC;AACjCvE,MAAAA,OAAO,CAACuE,eAAR,GAA0BC,eAAe,CAACzB,QAAhB,CAAyB3E,MAAM,CAACmG,eAAhC,CAA1B;AACH,KAHD,MAIK;AACDvE,MAAAA,OAAO,CAACuE,eAAR,GAA0BnE,SAA1B;AACH;;AACD,QAAIhC,MAAM,CAACqG,UAAP,KAAsBrE,SAAtB,IAAmChC,MAAM,CAACqG,UAAP,KAAsB,IAA7D,EAAmE;AAAA,kDAC/CrG,MAAM,CAACqG,UADwC;AAAA;;AAAA;AAC/D,+DAAmC;AAAA,cAAxBS,CAAwB;AAC/BlF,UAAAA,OAAO,CAACyE,UAAR,CAAmBO,IAAnB,CAAwBL,eAAe,CAAC5B,QAAhB,CAAyBmC,CAAzB,CAAxB;AACH;AAH8D;AAAA;AAAA;AAAA;AAAA;AAIlE;;AACD,QAAI9G,MAAM,CAAC4I,OAAP,KAAmB5G,SAAnB,IAAgChC,MAAM,CAAC4I,OAAP,KAAmB,IAAvD,EAA6D;AACzDhH,MAAAA,OAAO,CAACgH,OAAR,GAAkB7B,eAAe,CAAC/G,MAAM,CAAC4I,OAAR,CAAjC;AACH;;AACD,WAAOhH,OAAP;AACH,GAxD4B;AAyD7BgD,EAAAA,MAzD6B,kBAyDtBhD,OAzDsB,EAyDb;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACuE,eAAR,KAA4BnE,SAA5B,KACK6C,GAAG,CAACsB,eAAJ,GAAsBvE,OAAO,CAACuE,eAAR,GACjBC,eAAe,CAACxB,MAAhB,CAAuBhD,OAAO,CAACuE,eAA/B,CADiB,GAEjBnE,SAHV;;AAIA,QAAIJ,OAAO,CAACyE,UAAZ,EAAwB;AACpBxB,MAAAA,GAAG,CAACwB,UAAJ,GAAiBzE,OAAO,CAACyE,UAAR,CAAmBY,GAAnB,CAAuB,UAACH,CAAD;AAAA,eAAOA,CAAC,GAAGP,eAAe,CAAC3B,MAAhB,CAAuBkC,CAAvB,CAAH,GAA+B9E,SAAvC;AAAA,OAAvB,CAAjB;AACH,KAFD,MAGK;AACD6C,MAAAA,GAAG,CAACwB,UAAJ,GAAiB,EAAjB;AACH;;AACDzE,IAAAA,OAAO,CAACgH,OAAR,KAAoB5G,SAApB,KACK6C,GAAG,CAAC+D,OAAJ,GAAc1B,eAAe,CAACtF,OAAO,CAACgH,OAAR,KAAoB5G,SAApB,GAAgCJ,OAAO,CAACgH,OAAxC,GAAkD,IAAIvE,UAAJ,EAAnD,CADlC;AAEA,WAAOQ,GAAP;AACH,GAxE4B;AAyE7BC,EAAAA,WAzE6B,uBAyEjB9E,MAzEiB,EAyET;AAChB,QAAM4B,OAAO,qBAAQqJ,qBAAR,CAAb;;AACArJ,IAAAA,OAAO,CAACyE,UAAR,GAAqB,EAArB;;AACA,QAAIrG,MAAM,CAACmG,eAAP,KAA2BnE,SAA3B,IACAhC,MAAM,CAACmG,eAAP,KAA2B,IAD/B,EACqC;AACjCvE,MAAAA,OAAO,CAACuE,eAAR,GAA0BC,eAAe,CAACtB,WAAhB,CAA4B9E,MAAM,CAACmG,eAAnC,CAA1B;AACH,KAHD,MAIK;AACDvE,MAAAA,OAAO,CAACuE,eAAR,GAA0BnE,SAA1B;AACH;;AACD,QAAIhC,MAAM,CAACqG,UAAP,KAAsBrE,SAAtB,IAAmChC,MAAM,CAACqG,UAAP,KAAsB,IAA7D,EAAmE;AAAA,kDAC/CrG,MAAM,CAACqG,UADwC;AAAA;;AAAA;AAC/D,+DAAmC;AAAA,cAAxBS,CAAwB;AAC/BlF,UAAAA,OAAO,CAACyE,UAAR,CAAmBO,IAAnB,CAAwBL,eAAe,CAACzB,WAAhB,CAA4BgC,CAA5B,CAAxB;AACH;AAH8D;AAAA;AAAA;AAAA;AAAA;AAIlE;;AACD,QAAI9G,MAAM,CAAC4I,OAAP,KAAmB5G,SAAnB,IAAgChC,MAAM,CAAC4I,OAAP,KAAmB,IAAvD,EAA6D;AACzDhH,MAAAA,OAAO,CAACgH,OAAR,GAAkB5I,MAAM,CAAC4I,OAAzB;AACH,KAFD,MAGK;AACDhH,MAAAA,OAAO,CAACgH,OAAR,GAAkB,IAAIvE,UAAJ,EAAlB;AACH;;AACD,WAAOzC,OAAP;AACH;AA/F4B,CAA1B;AAiGP,IAAMsJ,iBAAiB,GAAG;AACtBH,EAAAA,IAAI,EAAE,CADgB;AAEtBC,EAAAA,GAAG,EAAE,EAFiB;AAGtBzI,EAAAA,IAAI,EAAE,EAHgB;AAItB0G,EAAAA,KAAK,EAAE,CAJe;AAKtB5B,EAAAA,MAAM,EAAE,CALc;AAMtB8D,EAAAA,SAAS,EAAE;AANW,CAA1B;AAQA,OAAO,IAAMvB,aAAa,GAAG;AACzBjI,EAAAA,MADyB,kBAClBC,OADkB,EACiB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACmJ,IAAR,KAAiB,CAArB,EAAwB;AACpBlJ,MAAAA,MAAM,CAACK,MAAP,CAAc,CAAd,EAAiBA,MAAjB,CAAwBN,OAAO,CAACmJ,IAAhC;AACH;;AACD,QAAInJ,OAAO,CAACoJ,GAAR,KAAgB,EAApB,EAAwB;AACpBnJ,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACoJ,GAAjC;AACH;;AACD,QAAIpJ,OAAO,CAACW,IAAR,KAAiB,EAArB,EAAyB;AACrBV,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACW,IAAjC;AACH;;AACD,QAAIX,OAAO,CAACqH,KAAR,KAAkB,CAAtB,EAAyB;AACrBpH,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAACqH,KAAhC;AACH;;AACD,QAAIrH,OAAO,CAACgE,GAAR,CAAYzB,MAAZ,KAAuB,CAA3B,EAA8B;AAC1BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAACgE,GAAhC;AACH;;AACD,QAAIhE,OAAO,CAACiE,KAAR,CAAc1B,MAAd,KAAyB,CAA7B,EAAgC;AAC5BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAACiE,KAAhC;AACH;;AACD,QAAIjE,OAAO,CAACwJ,QAAR,KAAqBpJ,SAAzB,EAAoC;AAChCxC,MAAAA,QAAQ,CAACmC,MAAT,CAAgBC,OAAO,CAACwJ,QAAxB,EAAkCvJ,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAlC,EAA4DC,MAA5D;AACH;;AACD,QAAIR,OAAO,CAACyF,MAAR,KAAmB,CAAvB,EAA0B;AACtBxF,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAACyF,MAAhC;AACH;;AACD,QAAIzF,OAAO,CAACuJ,SAAR,KAAsB,EAA1B,EAA8B;AAC1BtJ,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACuJ,SAAjC;AACH;;AACD,WAAOtJ,MAAP;AACH,GA9BwB;AA+BzBoC,EAAAA,MA/ByB,kBA+BlBC,KA/BkB,EA+BXC,MA/BW,EA+BH;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQsJ,iBAAR,CAAb;;AACA,WAAO9G,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACmJ,IAAR,GAAe3G,MAAM,CAAClC,MAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACoJ,GAAR,GAAc5G,MAAM,CAACY,MAAP,EAAd;AACA;;AACJ,aAAK,CAAL;AACIpD,UAAAA,OAAO,CAACW,IAAR,GAAe6B,MAAM,CAACY,MAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACIpD,UAAAA,OAAO,CAACqH,KAAR,GAAgBxD,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAA5B;AACA;;AACJ,aAAK,CAAL;AACI9E,UAAAA,OAAO,CAACgE,GAAR,GAAcxB,MAAM,CAACqC,KAAP,EAAd;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAACiE,KAAR,GAAgBzB,MAAM,CAACqC,KAAP,EAAhB;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAACwJ,QAAR,GAAmB5L,QAAQ,CAACyE,MAAT,CAAgBG,MAAhB,EAAwBA,MAAM,CAAClC,MAAP,EAAxB,CAAnB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACyF,MAAR,GAAiB5B,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAA7B;AACA;;AACJ,aAAK,EAAL;AACI9E,UAAAA,OAAO,CAACuJ,SAAR,GAAoB/G,MAAM,CAACY,MAAP,EAApB;AACA;;AACJ;AACIZ,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AA9BR;AAgCH;;AACD,WAAO7C,OAAP;AACH,GAvEwB;AAwEzB+C,EAAAA,QAxEyB,oBAwEhB3E,MAxEgB,EAwER;AACb,QAAM4B,OAAO,qBAAQsJ,iBAAR,CAAb;;AACA,QAAIlL,MAAM,CAAC+K,IAAP,KAAgB/I,SAAhB,IAA6BhC,MAAM,CAAC+K,IAAP,KAAgB,IAAjD,EAAuD;AACnDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAerF,MAAM,CAAC1F,MAAM,CAAC+K,IAAR,CAArB;AACH,KAFD,MAGK;AACDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAe,CAAf;AACH;;AACD,QAAI/K,MAAM,CAACgL,GAAP,KAAehJ,SAAf,IAA4BhC,MAAM,CAACgL,GAAP,KAAe,IAA/C,EAAqD;AACjDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAc/F,MAAM,CAACjF,MAAM,CAACgL,GAAR,CAApB;AACH,KAFD,MAGK;AACDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAc,EAAd;AACH;;AACD,QAAIhL,MAAM,CAACuC,IAAP,KAAgBP,SAAhB,IAA6BhC,MAAM,CAACuC,IAAP,KAAgB,IAAjD,EAAuD;AACnDX,MAAAA,OAAO,CAACW,IAAR,GAAe0C,MAAM,CAACjF,MAAM,CAACuC,IAAR,CAArB;AACH,KAFD,MAGK;AACDX,MAAAA,OAAO,CAACW,IAAR,GAAe,EAAf;AACH;;AACD,QAAIvC,MAAM,CAACiJ,KAAP,KAAiBjH,SAAjB,IAA8BhC,MAAM,CAACiJ,KAAP,KAAiB,IAAnD,EAAyD;AACrDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgBvD,MAAM,CAAC1F,MAAM,CAACiJ,KAAR,CAAtB;AACH,KAFD,MAGK;AACDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgB,CAAhB;AACH;;AACD,QAAIjJ,MAAM,CAAC4F,GAAP,KAAe5D,SAAf,IAA4BhC,MAAM,CAAC4F,GAAP,KAAe,IAA/C,EAAqD;AACjDhE,MAAAA,OAAO,CAACgE,GAAR,GAAcmB,eAAe,CAAC/G,MAAM,CAAC4F,GAAR,CAA7B;AACH;;AACD,QAAI5F,MAAM,CAAC6F,KAAP,KAAiB7D,SAAjB,IAA8BhC,MAAM,CAAC6F,KAAP,KAAiB,IAAnD,EAAyD;AACrDjE,MAAAA,OAAO,CAACiE,KAAR,GAAgBkB,eAAe,CAAC/G,MAAM,CAAC6F,KAAR,CAA/B;AACH;;AACD,QAAI7F,MAAM,CAACoL,QAAP,KAAoBpJ,SAApB,IAAiChC,MAAM,CAACoL,QAAP,KAAoB,IAAzD,EAA+D;AAC3DxJ,MAAAA,OAAO,CAACwJ,QAAR,GAAmB5L,QAAQ,CAACmF,QAAT,CAAkB3E,MAAM,CAACoL,QAAzB,CAAnB;AACH,KAFD,MAGK;AACDxJ,MAAAA,OAAO,CAACwJ,QAAR,GAAmBpJ,SAAnB;AACH;;AACD,QAAIhC,MAAM,CAACqH,MAAP,KAAkBrF,SAAlB,IAA+BhC,MAAM,CAACqH,MAAP,KAAkB,IAArD,EAA2D;AACvDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB3B,MAAM,CAAC1F,MAAM,CAACqH,MAAR,CAAvB;AACH,KAFD,MAGK;AACDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIrH,MAAM,CAACmL,SAAP,KAAqBnJ,SAArB,IAAkChC,MAAM,CAACmL,SAAP,KAAqB,IAA3D,EAAiE;AAC7DvJ,MAAAA,OAAO,CAACuJ,SAAR,GAAoBlG,MAAM,CAACjF,MAAM,CAACmL,SAAR,CAA1B;AACH,KAFD,MAGK;AACDvJ,MAAAA,OAAO,CAACuJ,SAAR,GAAoB,EAApB;AACH;;AACD,WAAOvJ,OAAP;AACH,GA3HwB;AA4HzBgD,EAAAA,MA5HyB,kBA4HlBhD,OA5HkB,EA4HT;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACmJ,IAAR,KAAiB/I,SAAjB,KAA+B6C,GAAG,CAACkG,IAAJ,GAAWnJ,OAAO,CAACmJ,IAAlD;AACAnJ,IAAAA,OAAO,CAACoJ,GAAR,KAAgBhJ,SAAhB,KAA8B6C,GAAG,CAACmG,GAAJ,GAAUpJ,OAAO,CAACoJ,GAAhD;AACApJ,IAAAA,OAAO,CAACW,IAAR,KAAiBP,SAAjB,KAA+B6C,GAAG,CAACtC,IAAJ,GAAWX,OAAO,CAACW,IAAlD;AACAX,IAAAA,OAAO,CAACqH,KAAR,KAAkBjH,SAAlB,KAAgC6C,GAAG,CAACoE,KAAJ,GAAYrH,OAAO,CAACqH,KAApD;AACArH,IAAAA,OAAO,CAACgE,GAAR,KAAgB5D,SAAhB,KACK6C,GAAG,CAACe,GAAJ,GAAUsB,eAAe,CAACtF,OAAO,CAACgE,GAAR,KAAgB5D,SAAhB,GAA4BJ,OAAO,CAACgE,GAApC,GAA0C,IAAIvB,UAAJ,EAA3C,CAD9B;AAEAzC,IAAAA,OAAO,CAACiE,KAAR,KAAkB7D,SAAlB,KACK6C,GAAG,CAACgB,KAAJ,GAAYqB,eAAe,CAACtF,OAAO,CAACiE,KAAR,KAAkB7D,SAAlB,GAA8BJ,OAAO,CAACiE,KAAtC,GAA8C,IAAIxB,UAAJ,EAA/C,CADhC;AAEAzC,IAAAA,OAAO,CAACwJ,QAAR,KAAqBpJ,SAArB,KACK6C,GAAG,CAACuG,QAAJ,GAAexJ,OAAO,CAACwJ,QAAR,GACV5L,QAAQ,CAACoF,MAAT,CAAgBhD,OAAO,CAACwJ,QAAxB,CADU,GAEVpJ,SAHV;AAIAJ,IAAAA,OAAO,CAACyF,MAAR,KAAmBrF,SAAnB,KAAiC6C,GAAG,CAACwC,MAAJ,GAAazF,OAAO,CAACyF,MAAtD;AACAzF,IAAAA,OAAO,CAACuJ,SAAR,KAAsBnJ,SAAtB,KAAoC6C,GAAG,CAACsG,SAAJ,GAAgBvJ,OAAO,CAACuJ,SAA5D;AACA,WAAOtG,GAAP;AACH,GA7IwB;AA8IzBC,EAAAA,WA9IyB,uBA8Ib9E,MA9Ia,EA8IL;AAChB,QAAM4B,OAAO,qBAAQsJ,iBAAR,CAAb;;AACA,QAAIlL,MAAM,CAAC+K,IAAP,KAAgB/I,SAAhB,IAA6BhC,MAAM,CAAC+K,IAAP,KAAgB,IAAjD,EAAuD;AACnDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAe/K,MAAM,CAAC+K,IAAtB;AACH,KAFD,MAGK;AACDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAe,CAAf;AACH;;AACD,QAAI/K,MAAM,CAACgL,GAAP,KAAehJ,SAAf,IAA4BhC,MAAM,CAACgL,GAAP,KAAe,IAA/C,EAAqD;AACjDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAchL,MAAM,CAACgL,GAArB;AACH,KAFD,MAGK;AACDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAc,EAAd;AACH;;AACD,QAAIhL,MAAM,CAACuC,IAAP,KAAgBP,SAAhB,IAA6BhC,MAAM,CAACuC,IAAP,KAAgB,IAAjD,EAAuD;AACnDX,MAAAA,OAAO,CAACW,IAAR,GAAevC,MAAM,CAACuC,IAAtB;AACH,KAFD,MAGK;AACDX,MAAAA,OAAO,CAACW,IAAR,GAAe,EAAf;AACH;;AACD,QAAIvC,MAAM,CAACiJ,KAAP,KAAiBjH,SAAjB,IAA8BhC,MAAM,CAACiJ,KAAP,KAAiB,IAAnD,EAAyD;AACrDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgBjJ,MAAM,CAACiJ,KAAvB;AACH,KAFD,MAGK;AACDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgB,CAAhB;AACH;;AACD,QAAIjJ,MAAM,CAAC4F,GAAP,KAAe5D,SAAf,IAA4BhC,MAAM,CAAC4F,GAAP,KAAe,IAA/C,EAAqD;AACjDhE,MAAAA,OAAO,CAACgE,GAAR,GAAc5F,MAAM,CAAC4F,GAArB;AACH,KAFD,MAGK;AACDhE,MAAAA,OAAO,CAACgE,GAAR,GAAc,IAAIvB,UAAJ,EAAd;AACH;;AACD,QAAIrE,MAAM,CAAC6F,KAAP,KAAiB7D,SAAjB,IAA8BhC,MAAM,CAAC6F,KAAP,KAAiB,IAAnD,EAAyD;AACrDjE,MAAAA,OAAO,CAACiE,KAAR,GAAgB7F,MAAM,CAAC6F,KAAvB;AACH,KAFD,MAGK;AACDjE,MAAAA,OAAO,CAACiE,KAAR,GAAgB,IAAIxB,UAAJ,EAAhB;AACH;;AACD,QAAIrE,MAAM,CAACoL,QAAP,KAAoBpJ,SAApB,IAAiChC,MAAM,CAACoL,QAAP,KAAoB,IAAzD,EAA+D;AAC3DxJ,MAAAA,OAAO,CAACwJ,QAAR,GAAmB5L,QAAQ,CAACsF,WAAT,CAAqB9E,MAAM,CAACoL,QAA5B,CAAnB;AACH,KAFD,MAGK;AACDxJ,MAAAA,OAAO,CAACwJ,QAAR,GAAmBpJ,SAAnB;AACH;;AACD,QAAIhC,MAAM,CAACqH,MAAP,KAAkBrF,SAAlB,IAA+BhC,MAAM,CAACqH,MAAP,KAAkB,IAArD,EAA2D;AACvDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiBrH,MAAM,CAACqH,MAAxB;AACH,KAFD,MAGK;AACDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIrH,MAAM,CAACmL,SAAP,KAAqBnJ,SAArB,IAAkChC,MAAM,CAACmL,SAAP,KAAqB,IAA3D,EAAiE;AAC7DvJ,MAAAA,OAAO,CAACuJ,SAAR,GAAoBnL,MAAM,CAACmL,SAA3B;AACH,KAFD,MAGK;AACDvJ,MAAAA,OAAO,CAACuJ,SAAR,GAAoB,EAApB;AACH;;AACD,WAAOvJ,OAAP;AACH;AAvMwB,CAAtB;AAyMP,IAAMyJ,sBAAsB,GAAG,EAA/B;AACA,OAAO,IAAMxB,kBAAkB,GAAG;AAC9BlI,EAAAA,MAD8B,kBACvBC,OADuB,EACY;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AAAA,iDACtBF,OAAO,CAAC0J,MADc;AAAA;;AAAA;AACtC,gEAAgC;AAAA,YAArBhF,CAAqB;AAC5BiF,QAAAA,KAAK,CAAC5J,MAAN,CAAa2E,CAAb,EAAgBzE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAhB,EAA0CC,MAA1C;AACH;AAHqC;AAAA;AAAA;AAAA;AAAA;;AAItC,WAAOP,MAAP;AACH,GAN6B;AAO9BoC,EAAAA,MAP8B,kBAOvBC,KAPuB,EAOhBC,MAPgB,EAOR;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQyJ,sBAAR,CAAb;;AACAzJ,IAAAA,OAAO,CAAC0J,MAAR,GAAiB,EAAjB;;AACA,WAAOlH,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAAC0J,MAAR,CAAe1E,IAAf,CAAoB2E,KAAK,CAACtH,MAAN,CAAaG,MAAb,EAAqBA,MAAM,CAAClC,MAAP,EAArB,CAApB;AACA;;AACJ;AACIkC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AANR;AAQH;;AACD,WAAO7C,OAAP;AACH,GAxB6B;AAyB9B+C,EAAAA,QAzB8B,oBAyBrB3E,MAzBqB,EAyBb;AACb,QAAM4B,OAAO,qBAAQyJ,sBAAR,CAAb;;AACAzJ,IAAAA,OAAO,CAAC0J,MAAR,GAAiB,EAAjB;;AACA,QAAItL,MAAM,CAACsL,MAAP,KAAkBtJ,SAAlB,IAA+BhC,MAAM,CAACsL,MAAP,KAAkB,IAArD,EAA2D;AAAA,mDACvCtL,MAAM,CAACsL,MADgC;AAAA;;AAAA;AACvD,kEAA+B;AAAA,cAApBxE,CAAoB;AAC3BlF,UAAAA,OAAO,CAAC0J,MAAR,CAAe1E,IAAf,CAAoB2E,KAAK,CAAC5G,QAAN,CAAemC,CAAf,CAApB;AACH;AAHsD;AAAA;AAAA;AAAA;AAAA;AAI1D;;AACD,WAAOlF,OAAP;AACH,GAlC6B;AAmC9BgD,EAAAA,MAnC8B,kBAmCvBhD,OAnCuB,EAmCd;AACZ,QAAMiD,GAAG,GAAG,EAAZ;;AACA,QAAIjD,OAAO,CAAC0J,MAAZ,EAAoB;AAChBzG,MAAAA,GAAG,CAACyG,MAAJ,GAAa1J,OAAO,CAAC0J,MAAR,CAAerE,GAAf,CAAmB,UAACH,CAAD;AAAA,eAAQA,CAAC,GAAGyE,KAAK,CAAC3G,MAAN,CAAakC,CAAb,CAAH,GAAqB9E,SAA9B;AAAA,OAAnB,CAAb;AACH,KAFD,MAGK;AACD6C,MAAAA,GAAG,CAACyG,MAAJ,GAAa,EAAb;AACH;;AACD,WAAOzG,GAAP;AACH,GA5C6B;AA6C9BC,EAAAA,WA7C8B,uBA6ClB9E,MA7CkB,EA6CV;AAChB,QAAM4B,OAAO,qBAAQyJ,sBAAR,CAAb;;AACAzJ,IAAAA,OAAO,CAAC0J,MAAR,GAAiB,EAAjB;;AACA,QAAItL,MAAM,CAACsL,MAAP,KAAkBtJ,SAAlB,IAA+BhC,MAAM,CAACsL,MAAP,KAAkB,IAArD,EAA2D;AAAA,mDACvCtL,MAAM,CAACsL,MADgC;AAAA;;AAAA;AACvD,kEAA+B;AAAA,cAApBxE,CAAoB;AAC3BlF,UAAAA,OAAO,CAAC0J,MAAR,CAAe1E,IAAf,CAAoB2E,KAAK,CAACzG,WAAN,CAAkBgC,CAAlB,CAApB;AACH;AAHsD;AAAA;AAAA;AAAA;AAAA;AAI1D;;AACD,WAAOlF,OAAP;AACH;AAtD6B,CAA3B;AAwDP,IAAM4J,mBAAmB,GAAG;AACxBT,EAAAA,IAAI,EAAE,CADkB;AAExBC,EAAAA,GAAG,EAAE,EAFmB;AAGxBzI,EAAAA,IAAI,EAAE,EAHkB;AAIxBkJ,EAAAA,SAAS,EAAE,CAJa;AAKxBC,EAAAA,OAAO,EAAE,CALe;AAMxBP,EAAAA,SAAS,EAAE;AANa,CAA5B;AAQA,OAAO,IAAMrB,eAAe,GAAG;AAC3BnI,EAAAA,MAD2B,kBACpBC,OADoB,EACe;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACmJ,IAAR,KAAiB,CAArB,EAAwB;AACpBlJ,MAAAA,MAAM,CAACK,MAAP,CAAc,CAAd,EAAiBA,MAAjB,CAAwBN,OAAO,CAACmJ,IAAhC;AACH;;AACD,QAAInJ,OAAO,CAAC2F,IAAR,CAAapD,MAAb,KAAwB,CAA5B,EAA+B;AAC3BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAAC2F,IAAhC;AACH;;AACD,QAAI3F,OAAO,CAACoJ,GAAR,KAAgB,EAApB,EAAwB;AACpBnJ,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACoJ,GAAjC;AACH;;AACD,QAAIpJ,OAAO,CAACW,IAAR,KAAiB,EAArB,EAAyB;AACrBV,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACW,IAAjC;AACH;;AACD,QAAIX,OAAO,CAAC6J,SAAR,KAAsB,CAA1B,EAA6B;AACzB5J,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAAC6J,SAAhC;AACH;;AACD,QAAI7J,OAAO,CAAC8J,OAAR,KAAoB,CAAxB,EAA2B;AACvB7J,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAAC8J,OAAhC;AACH;;AAlBqC,iDAmBtB9J,OAAO,CAAC0J,MAnBc;AAAA;;AAAA;AAmBtC,gEAAgC;AAAA,YAArBhF,CAAqB;AAC5BiF,QAAAA,KAAK,CAAC5J,MAAN,CAAa2E,CAAb,EAAgBzE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAhB,EAA0CC,MAA1C;AACH;AArBqC;AAAA;AAAA;AAAA;AAAA;;AAsBtC,QAAIR,OAAO,CAACuJ,SAAR,KAAsB,EAA1B,EAA8B;AAC1BtJ,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACuJ,SAAjC;AACH;;AACD,WAAOtJ,MAAP;AACH,GA3B0B;AA4B3BoC,EAAAA,MA5B2B,kBA4BpBC,KA5BoB,EA4BbC,MA5Ba,EA4BL;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ4J,mBAAR,CAAb;;AACA5J,IAAAA,OAAO,CAAC0J,MAAR,GAAiB,EAAjB;;AACA,WAAOlH,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACmJ,IAAR,GAAe3G,MAAM,CAAClC,MAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAAC2F,IAAR,GAAenD,MAAM,CAACqC,KAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAACoJ,GAAR,GAAc5G,MAAM,CAACY,MAAP,EAAd;AACA;;AACJ,aAAK,CAAL;AACIpD,UAAAA,OAAO,CAACW,IAAR,GAAe6B,MAAM,CAACY,MAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACIpD,UAAAA,OAAO,CAAC6J,SAAR,GAAoBhG,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAAhC;AACA;;AACJ,aAAK,CAAL;AACI9E,UAAAA,OAAO,CAAC8J,OAAR,GAAkBjG,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAA9B;AACA;;AACJ,aAAK,CAAL;AACI9E,UAAAA,OAAO,CAAC0J,MAAR,CAAe1E,IAAf,CAAoB2E,KAAK,CAACtH,MAAN,CAAaG,MAAb,EAAqBA,MAAM,CAAClC,MAAP,EAArB,CAApB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACuJ,SAAR,GAAoB/G,MAAM,CAACY,MAAP,EAApB;AACA;;AACJ;AACIZ,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AA3BR;AA6BH;;AACD,WAAO7C,OAAP;AACH,GAlE0B;AAmE3B+C,EAAAA,QAnE2B,oBAmElB3E,MAnEkB,EAmEV;AACb,QAAM4B,OAAO,qBAAQ4J,mBAAR,CAAb;;AACA5J,IAAAA,OAAO,CAAC0J,MAAR,GAAiB,EAAjB;;AACA,QAAItL,MAAM,CAAC+K,IAAP,KAAgB/I,SAAhB,IAA6BhC,MAAM,CAAC+K,IAAP,KAAgB,IAAjD,EAAuD;AACnDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAerF,MAAM,CAAC1F,MAAM,CAAC+K,IAAR,CAArB;AACH,KAFD,MAGK;AACDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAe,CAAf;AACH;;AACD,QAAI/K,MAAM,CAACuH,IAAP,KAAgBvF,SAAhB,IAA6BhC,MAAM,CAACuH,IAAP,KAAgB,IAAjD,EAAuD;AACnD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAeR,eAAe,CAAC/G,MAAM,CAACuH,IAAR,CAA9B;AACH;;AACD,QAAIvH,MAAM,CAACgL,GAAP,KAAehJ,SAAf,IAA4BhC,MAAM,CAACgL,GAAP,KAAe,IAA/C,EAAqD;AACjDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAc/F,MAAM,CAACjF,MAAM,CAACgL,GAAR,CAApB;AACH,KAFD,MAGK;AACDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAc,EAAd;AACH;;AACD,QAAIhL,MAAM,CAACuC,IAAP,KAAgBP,SAAhB,IAA6BhC,MAAM,CAACuC,IAAP,KAAgB,IAAjD,EAAuD;AACnDX,MAAAA,OAAO,CAACW,IAAR,GAAe0C,MAAM,CAACjF,MAAM,CAACuC,IAAR,CAArB;AACH,KAFD,MAGK;AACDX,MAAAA,OAAO,CAACW,IAAR,GAAe,EAAf;AACH;;AACD,QAAIvC,MAAM,CAACyL,SAAP,KAAqBzJ,SAArB,IAAkChC,MAAM,CAACyL,SAAP,KAAqB,IAA3D,EAAiE;AAC7D7J,MAAAA,OAAO,CAAC6J,SAAR,GAAoB/F,MAAM,CAAC1F,MAAM,CAACyL,SAAR,CAA1B;AACH,KAFD,MAGK;AACD7J,MAAAA,OAAO,CAAC6J,SAAR,GAAoB,CAApB;AACH;;AACD,QAAIzL,MAAM,CAAC0L,OAAP,KAAmB1J,SAAnB,IAAgChC,MAAM,CAAC0L,OAAP,KAAmB,IAAvD,EAA6D;AACzD9J,MAAAA,OAAO,CAAC8J,OAAR,GAAkBhG,MAAM,CAAC1F,MAAM,CAAC0L,OAAR,CAAxB;AACH,KAFD,MAGK;AACD9J,MAAAA,OAAO,CAAC8J,OAAR,GAAkB,CAAlB;AACH;;AACD,QAAI1L,MAAM,CAACsL,MAAP,KAAkBtJ,SAAlB,IAA+BhC,MAAM,CAACsL,MAAP,KAAkB,IAArD,EAA2D;AAAA,mDACvCtL,MAAM,CAACsL,MADgC;AAAA;;AAAA;AACvD,kEAA+B;AAAA,cAApBxE,CAAoB;AAC3BlF,UAAAA,OAAO,CAAC0J,MAAR,CAAe1E,IAAf,CAAoB2E,KAAK,CAAC5G,QAAN,CAAemC,CAAf,CAApB;AACH;AAHsD;AAAA;AAAA;AAAA;AAAA;AAI1D;;AACD,QAAI9G,MAAM,CAACmL,SAAP,KAAqBnJ,SAArB,IAAkChC,MAAM,CAACmL,SAAP,KAAqB,IAA3D,EAAiE;AAC7DvJ,MAAAA,OAAO,CAACuJ,SAAR,GAAoBlG,MAAM,CAACjF,MAAM,CAACmL,SAAR,CAA1B;AACH,KAFD,MAGK;AACDvJ,MAAAA,OAAO,CAACuJ,SAAR,GAAoB,EAApB;AACH;;AACD,WAAOvJ,OAAP;AACH,GAnH0B;AAoH3BgD,EAAAA,MApH2B,kBAoHpBhD,OApHoB,EAoHX;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACmJ,IAAR,KAAiB/I,SAAjB,KAA+B6C,GAAG,CAACkG,IAAJ,GAAWnJ,OAAO,CAACmJ,IAAlD;AACAnJ,IAAAA,OAAO,CAAC2F,IAAR,KAAiBvF,SAAjB,KACK6C,GAAG,CAAC0C,IAAJ,GAAWL,eAAe,CAACtF,OAAO,CAAC2F,IAAR,KAAiBvF,SAAjB,GAA6BJ,OAAO,CAAC2F,IAArC,GAA4C,IAAIlD,UAAJ,EAA7C,CAD/B;AAEAzC,IAAAA,OAAO,CAACoJ,GAAR,KAAgBhJ,SAAhB,KAA8B6C,GAAG,CAACmG,GAAJ,GAAUpJ,OAAO,CAACoJ,GAAhD;AACApJ,IAAAA,OAAO,CAACW,IAAR,KAAiBP,SAAjB,KAA+B6C,GAAG,CAACtC,IAAJ,GAAWX,OAAO,CAACW,IAAlD;AACAX,IAAAA,OAAO,CAAC6J,SAAR,KAAsBzJ,SAAtB,KAAoC6C,GAAG,CAAC4G,SAAJ,GAAgB7J,OAAO,CAAC6J,SAA5D;AACA7J,IAAAA,OAAO,CAAC8J,OAAR,KAAoB1J,SAApB,KAAkC6C,GAAG,CAAC6G,OAAJ,GAAc9J,OAAO,CAAC8J,OAAxD;;AACA,QAAI9J,OAAO,CAAC0J,MAAZ,EAAoB;AAChBzG,MAAAA,GAAG,CAACyG,MAAJ,GAAa1J,OAAO,CAAC0J,MAAR,CAAerE,GAAf,CAAmB,UAACH,CAAD;AAAA,eAAQA,CAAC,GAAGyE,KAAK,CAAC3G,MAAN,CAAakC,CAAb,CAAH,GAAqB9E,SAA9B;AAAA,OAAnB,CAAb;AACH,KAFD,MAGK;AACD6C,MAAAA,GAAG,CAACyG,MAAJ,GAAa,EAAb;AACH;;AACD1J,IAAAA,OAAO,CAACuJ,SAAR,KAAsBnJ,SAAtB,KAAoC6C,GAAG,CAACsG,SAAJ,GAAgBvJ,OAAO,CAACuJ,SAA5D;AACA,WAAOtG,GAAP;AACH,GArI0B;AAsI3BC,EAAAA,WAtI2B,uBAsIf9E,MAtIe,EAsIP;AAChB,QAAM4B,OAAO,qBAAQ4J,mBAAR,CAAb;;AACA5J,IAAAA,OAAO,CAAC0J,MAAR,GAAiB,EAAjB;;AACA,QAAItL,MAAM,CAAC+K,IAAP,KAAgB/I,SAAhB,IAA6BhC,MAAM,CAAC+K,IAAP,KAAgB,IAAjD,EAAuD;AACnDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAe/K,MAAM,CAAC+K,IAAtB;AACH,KAFD,MAGK;AACDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAe,CAAf;AACH;;AACD,QAAI/K,MAAM,CAACuH,IAAP,KAAgBvF,SAAhB,IAA6BhC,MAAM,CAACuH,IAAP,KAAgB,IAAjD,EAAuD;AACnD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAevH,MAAM,CAACuH,IAAtB;AACH,KAFD,MAGK;AACD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAe,IAAIlD,UAAJ,EAAf;AACH;;AACD,QAAIrE,MAAM,CAACgL,GAAP,KAAehJ,SAAf,IAA4BhC,MAAM,CAACgL,GAAP,KAAe,IAA/C,EAAqD;AACjDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAchL,MAAM,CAACgL,GAArB;AACH,KAFD,MAGK;AACDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAc,EAAd;AACH;;AACD,QAAIhL,MAAM,CAACuC,IAAP,KAAgBP,SAAhB,IAA6BhC,MAAM,CAACuC,IAAP,KAAgB,IAAjD,EAAuD;AACnDX,MAAAA,OAAO,CAACW,IAAR,GAAevC,MAAM,CAACuC,IAAtB;AACH,KAFD,MAGK;AACDX,MAAAA,OAAO,CAACW,IAAR,GAAe,EAAf;AACH;;AACD,QAAIvC,MAAM,CAACyL,SAAP,KAAqBzJ,SAArB,IAAkChC,MAAM,CAACyL,SAAP,KAAqB,IAA3D,EAAiE;AAC7D7J,MAAAA,OAAO,CAAC6J,SAAR,GAAoBzL,MAAM,CAACyL,SAA3B;AACH,KAFD,MAGK;AACD7J,MAAAA,OAAO,CAAC6J,SAAR,GAAoB,CAApB;AACH;;AACD,QAAIzL,MAAM,CAAC0L,OAAP,KAAmB1J,SAAnB,IAAgChC,MAAM,CAAC0L,OAAP,KAAmB,IAAvD,EAA6D;AACzD9J,MAAAA,OAAO,CAAC8J,OAAR,GAAkB1L,MAAM,CAAC0L,OAAzB;AACH,KAFD,MAGK;AACD9J,MAAAA,OAAO,CAAC8J,OAAR,GAAkB,CAAlB;AACH;;AACD,QAAI1L,MAAM,CAACsL,MAAP,KAAkBtJ,SAAlB,IAA+BhC,MAAM,CAACsL,MAAP,KAAkB,IAArD,EAA2D;AAAA,mDACvCtL,MAAM,CAACsL,MADgC;AAAA;;AAAA;AACvD,kEAA+B;AAAA,cAApBxE,CAAoB;AAC3BlF,UAAAA,OAAO,CAAC0J,MAAR,CAAe1E,IAAf,CAAoB2E,KAAK,CAACzG,WAAN,CAAkBgC,CAAlB,CAApB;AACH;AAHsD;AAAA;AAAA;AAAA;AAAA;AAI1D;;AACD,QAAI9G,MAAM,CAACmL,SAAP,KAAqBnJ,SAArB,IAAkChC,MAAM,CAACmL,SAAP,KAAqB,IAA3D,EAAiE;AAC7DvJ,MAAAA,OAAO,CAACuJ,SAAR,GAAoBnL,MAAM,CAACmL,SAA3B;AACH,KAFD,MAGK;AACDvJ,MAAAA,OAAO,CAACuJ,SAAR,GAAoB,EAApB;AACH;;AACD,WAAOvJ,OAAP;AACH;AAzL0B,CAAxB;AA2LP,IAAM+J,qBAAqB,GAAG;AAC1BZ,EAAAA,IAAI,EAAE,CADoB;AAE1BC,EAAAA,GAAG,EAAE,EAFqB;AAG1BzI,EAAAA,IAAI,EAAE,EAHoB;AAI1BkJ,EAAAA,SAAS,EAAE,CAJe;AAK1BC,EAAAA,OAAO,EAAE,CALiB;AAM1BP,EAAAA,SAAS,EAAE;AANe,CAA9B;AAQA,OAAO,IAAMpB,iBAAiB,GAAG;AAC7BpI,EAAAA,MAD6B,kBACtBC,OADsB,EACa;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACmJ,IAAR,KAAiB,CAArB,EAAwB;AACpBlJ,MAAAA,MAAM,CAACK,MAAP,CAAc,CAAd,EAAiBA,MAAjB,CAAwBN,OAAO,CAACmJ,IAAhC;AACH;;AACD,QAAInJ,OAAO,CAAC2F,IAAR,CAAapD,MAAb,KAAwB,CAA5B,EAA+B;AAC3BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAAC2F,IAAhC;AACH;;AACD,QAAI3F,OAAO,CAACoJ,GAAR,KAAgB,EAApB,EAAwB;AACpBnJ,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACoJ,GAAjC;AACH;;AACD,QAAIpJ,OAAO,CAACW,IAAR,KAAiB,EAArB,EAAyB;AACrBV,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACW,IAAjC;AACH;;AACD,QAAIX,OAAO,CAAC6J,SAAR,KAAsB,CAA1B,EAA6B;AACzB5J,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAAC6J,SAAhC;AACH;;AACD,QAAI7J,OAAO,CAAC8J,OAAR,KAAoB,CAAxB,EAA2B;AACvB7J,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAAC8J,OAAhC;AACH;;AAlBqC,iDAmBtB9J,OAAO,CAAC0J,MAnBc;AAAA;;AAAA;AAmBtC,gEAAgC;AAAA,YAArBhF,CAAqB;AAC5BiF,QAAAA,KAAK,CAAC5J,MAAN,CAAa2E,CAAb,EAAgBzE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAhB,EAA0CC,MAA1C;AACH;AArBqC;AAAA;AAAA;AAAA;AAAA;;AAsBtC,QAAIR,OAAO,CAACuJ,SAAR,KAAsB,EAA1B,EAA8B;AAC1BtJ,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACuJ,SAAjC;AACH;;AACD,WAAOtJ,MAAP;AACH,GA3B4B;AA4B7BoC,EAAAA,MA5B6B,kBA4BtBC,KA5BsB,EA4BfC,MA5Be,EA4BP;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ+J,qBAAR,CAAb;;AACA/J,IAAAA,OAAO,CAAC0J,MAAR,GAAiB,EAAjB;;AACA,WAAOlH,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACmJ,IAAR,GAAe3G,MAAM,CAAClC,MAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAAC2F,IAAR,GAAenD,MAAM,CAACqC,KAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAACoJ,GAAR,GAAc5G,MAAM,CAACY,MAAP,EAAd;AACA;;AACJ,aAAK,CAAL;AACIpD,UAAAA,OAAO,CAACW,IAAR,GAAe6B,MAAM,CAACY,MAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACIpD,UAAAA,OAAO,CAAC6J,SAAR,GAAoBhG,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAAhC;AACA;;AACJ,aAAK,CAAL;AACI9E,UAAAA,OAAO,CAAC8J,OAAR,GAAkBjG,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAA9B;AACA;;AACJ,aAAK,CAAL;AACI9E,UAAAA,OAAO,CAAC0J,MAAR,CAAe1E,IAAf,CAAoB2E,KAAK,CAACtH,MAAN,CAAaG,MAAb,EAAqBA,MAAM,CAAClC,MAAP,EAArB,CAApB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACuJ,SAAR,GAAoB/G,MAAM,CAACY,MAAP,EAApB;AACA;;AACJ;AACIZ,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AA3BR;AA6BH;;AACD,WAAO7C,OAAP;AACH,GAlE4B;AAmE7B+C,EAAAA,QAnE6B,oBAmEpB3E,MAnEoB,EAmEZ;AACb,QAAM4B,OAAO,qBAAQ+J,qBAAR,CAAb;;AACA/J,IAAAA,OAAO,CAAC0J,MAAR,GAAiB,EAAjB;;AACA,QAAItL,MAAM,CAAC+K,IAAP,KAAgB/I,SAAhB,IAA6BhC,MAAM,CAAC+K,IAAP,KAAgB,IAAjD,EAAuD;AACnDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAerF,MAAM,CAAC1F,MAAM,CAAC+K,IAAR,CAArB;AACH,KAFD,MAGK;AACDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAe,CAAf;AACH;;AACD,QAAI/K,MAAM,CAACuH,IAAP,KAAgBvF,SAAhB,IAA6BhC,MAAM,CAACuH,IAAP,KAAgB,IAAjD,EAAuD;AACnD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAeR,eAAe,CAAC/G,MAAM,CAACuH,IAAR,CAA9B;AACH;;AACD,QAAIvH,MAAM,CAACgL,GAAP,KAAehJ,SAAf,IAA4BhC,MAAM,CAACgL,GAAP,KAAe,IAA/C,EAAqD;AACjDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAc/F,MAAM,CAACjF,MAAM,CAACgL,GAAR,CAApB;AACH,KAFD,MAGK;AACDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAc,EAAd;AACH;;AACD,QAAIhL,MAAM,CAACuC,IAAP,KAAgBP,SAAhB,IAA6BhC,MAAM,CAACuC,IAAP,KAAgB,IAAjD,EAAuD;AACnDX,MAAAA,OAAO,CAACW,IAAR,GAAe0C,MAAM,CAACjF,MAAM,CAACuC,IAAR,CAArB;AACH,KAFD,MAGK;AACDX,MAAAA,OAAO,CAACW,IAAR,GAAe,EAAf;AACH;;AACD,QAAIvC,MAAM,CAACyL,SAAP,KAAqBzJ,SAArB,IAAkChC,MAAM,CAACyL,SAAP,KAAqB,IAA3D,EAAiE;AAC7D7J,MAAAA,OAAO,CAAC6J,SAAR,GAAoB/F,MAAM,CAAC1F,MAAM,CAACyL,SAAR,CAA1B;AACH,KAFD,MAGK;AACD7J,MAAAA,OAAO,CAAC6J,SAAR,GAAoB,CAApB;AACH;;AACD,QAAIzL,MAAM,CAAC0L,OAAP,KAAmB1J,SAAnB,IAAgChC,MAAM,CAAC0L,OAAP,KAAmB,IAAvD,EAA6D;AACzD9J,MAAAA,OAAO,CAAC8J,OAAR,GAAkBhG,MAAM,CAAC1F,MAAM,CAAC0L,OAAR,CAAxB;AACH,KAFD,MAGK;AACD9J,MAAAA,OAAO,CAAC8J,OAAR,GAAkB,CAAlB;AACH;;AACD,QAAI1L,MAAM,CAACsL,MAAP,KAAkBtJ,SAAlB,IAA+BhC,MAAM,CAACsL,MAAP,KAAkB,IAArD,EAA2D;AAAA,mDACvCtL,MAAM,CAACsL,MADgC;AAAA;;AAAA;AACvD,kEAA+B;AAAA,cAApBxE,CAAoB;AAC3BlF,UAAAA,OAAO,CAAC0J,MAAR,CAAe1E,IAAf,CAAoB2E,KAAK,CAAC5G,QAAN,CAAemC,CAAf,CAApB;AACH;AAHsD;AAAA;AAAA;AAAA;AAAA;AAI1D;;AACD,QAAI9G,MAAM,CAACmL,SAAP,KAAqBnJ,SAArB,IAAkChC,MAAM,CAACmL,SAAP,KAAqB,IAA3D,EAAiE;AAC7DvJ,MAAAA,OAAO,CAACuJ,SAAR,GAAoBlG,MAAM,CAACjF,MAAM,CAACmL,SAAR,CAA1B;AACH,KAFD,MAGK;AACDvJ,MAAAA,OAAO,CAACuJ,SAAR,GAAoB,EAApB;AACH;;AACD,WAAOvJ,OAAP;AACH,GAnH4B;AAoH7BgD,EAAAA,MApH6B,kBAoHtBhD,OApHsB,EAoHb;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACmJ,IAAR,KAAiB/I,SAAjB,KAA+B6C,GAAG,CAACkG,IAAJ,GAAWnJ,OAAO,CAACmJ,IAAlD;AACAnJ,IAAAA,OAAO,CAAC2F,IAAR,KAAiBvF,SAAjB,KACK6C,GAAG,CAAC0C,IAAJ,GAAWL,eAAe,CAACtF,OAAO,CAAC2F,IAAR,KAAiBvF,SAAjB,GAA6BJ,OAAO,CAAC2F,IAArC,GAA4C,IAAIlD,UAAJ,EAA7C,CAD/B;AAEAzC,IAAAA,OAAO,CAACoJ,GAAR,KAAgBhJ,SAAhB,KAA8B6C,GAAG,CAACmG,GAAJ,GAAUpJ,OAAO,CAACoJ,GAAhD;AACApJ,IAAAA,OAAO,CAACW,IAAR,KAAiBP,SAAjB,KAA+B6C,GAAG,CAACtC,IAAJ,GAAWX,OAAO,CAACW,IAAlD;AACAX,IAAAA,OAAO,CAAC6J,SAAR,KAAsBzJ,SAAtB,KAAoC6C,GAAG,CAAC4G,SAAJ,GAAgB7J,OAAO,CAAC6J,SAA5D;AACA7J,IAAAA,OAAO,CAAC8J,OAAR,KAAoB1J,SAApB,KAAkC6C,GAAG,CAAC6G,OAAJ,GAAc9J,OAAO,CAAC8J,OAAxD;;AACA,QAAI9J,OAAO,CAAC0J,MAAZ,EAAoB;AAChBzG,MAAAA,GAAG,CAACyG,MAAJ,GAAa1J,OAAO,CAAC0J,MAAR,CAAerE,GAAf,CAAmB,UAACH,CAAD;AAAA,eAAQA,CAAC,GAAGyE,KAAK,CAAC3G,MAAN,CAAakC,CAAb,CAAH,GAAqB9E,SAA9B;AAAA,OAAnB,CAAb;AACH,KAFD,MAGK;AACD6C,MAAAA,GAAG,CAACyG,MAAJ,GAAa,EAAb;AACH;;AACD1J,IAAAA,OAAO,CAACuJ,SAAR,KAAsBnJ,SAAtB,KAAoC6C,GAAG,CAACsG,SAAJ,GAAgBvJ,OAAO,CAACuJ,SAA5D;AACA,WAAOtG,GAAP;AACH,GArI4B;AAsI7BC,EAAAA,WAtI6B,uBAsIjB9E,MAtIiB,EAsIT;AAChB,QAAM4B,OAAO,qBAAQ+J,qBAAR,CAAb;;AACA/J,IAAAA,OAAO,CAAC0J,MAAR,GAAiB,EAAjB;;AACA,QAAItL,MAAM,CAAC+K,IAAP,KAAgB/I,SAAhB,IAA6BhC,MAAM,CAAC+K,IAAP,KAAgB,IAAjD,EAAuD;AACnDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAe/K,MAAM,CAAC+K,IAAtB;AACH,KAFD,MAGK;AACDnJ,MAAAA,OAAO,CAACmJ,IAAR,GAAe,CAAf;AACH;;AACD,QAAI/K,MAAM,CAACuH,IAAP,KAAgBvF,SAAhB,IAA6BhC,MAAM,CAACuH,IAAP,KAAgB,IAAjD,EAAuD;AACnD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAevH,MAAM,CAACuH,IAAtB;AACH,KAFD,MAGK;AACD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAe,IAAIlD,UAAJ,EAAf;AACH;;AACD,QAAIrE,MAAM,CAACgL,GAAP,KAAehJ,SAAf,IAA4BhC,MAAM,CAACgL,GAAP,KAAe,IAA/C,EAAqD;AACjDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAchL,MAAM,CAACgL,GAArB;AACH,KAFD,MAGK;AACDpJ,MAAAA,OAAO,CAACoJ,GAAR,GAAc,EAAd;AACH;;AACD,QAAIhL,MAAM,CAACuC,IAAP,KAAgBP,SAAhB,IAA6BhC,MAAM,CAACuC,IAAP,KAAgB,IAAjD,EAAuD;AACnDX,MAAAA,OAAO,CAACW,IAAR,GAAevC,MAAM,CAACuC,IAAtB;AACH,KAFD,MAGK;AACDX,MAAAA,OAAO,CAACW,IAAR,GAAe,EAAf;AACH;;AACD,QAAIvC,MAAM,CAACyL,SAAP,KAAqBzJ,SAArB,IAAkChC,MAAM,CAACyL,SAAP,KAAqB,IAA3D,EAAiE;AAC7D7J,MAAAA,OAAO,CAAC6J,SAAR,GAAoBzL,MAAM,CAACyL,SAA3B;AACH,KAFD,MAGK;AACD7J,MAAAA,OAAO,CAAC6J,SAAR,GAAoB,CAApB;AACH;;AACD,QAAIzL,MAAM,CAAC0L,OAAP,KAAmB1J,SAAnB,IAAgChC,MAAM,CAAC0L,OAAP,KAAmB,IAAvD,EAA6D;AACzD9J,MAAAA,OAAO,CAAC8J,OAAR,GAAkB1L,MAAM,CAAC0L,OAAzB;AACH,KAFD,MAGK;AACD9J,MAAAA,OAAO,CAAC8J,OAAR,GAAkB,CAAlB;AACH;;AACD,QAAI1L,MAAM,CAACsL,MAAP,KAAkBtJ,SAAlB,IAA+BhC,MAAM,CAACsL,MAAP,KAAkB,IAArD,EAA2D;AAAA,mDACvCtL,MAAM,CAACsL,MADgC;AAAA;;AAAA;AACvD,kEAA+B;AAAA,cAApBxE,CAAoB;AAC3BlF,UAAAA,OAAO,CAAC0J,MAAR,CAAe1E,IAAf,CAAoB2E,KAAK,CAACzG,WAAN,CAAkBgC,CAAlB,CAApB;AACH;AAHsD;AAAA;AAAA;AAAA;AAAA;AAI1D;;AACD,QAAI9G,MAAM,CAACmL,SAAP,KAAqBnJ,SAArB,IAAkChC,MAAM,CAACmL,SAAP,KAAqB,IAA3D,EAAiE;AAC7DvJ,MAAAA,OAAO,CAACuJ,SAAR,GAAoBnL,MAAM,CAACmL,SAA3B;AACH,KAFD,MAGK;AACDvJ,MAAAA,OAAO,CAACuJ,SAAR,GAAoB,EAApB;AACH;;AACD,WAAOvJ,OAAP;AACH;AAzL4B,CAA1B;AA2LP,IAAMgK,oBAAoB,GAAG,EAA7B;AACA,OAAO,IAAM5B,gBAAgB,GAAG;AAC5BrI,EAAAA,MAD4B,kBACrBC,OADqB,EACc;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AAAA,iDACtBF,OAAO,CAACiK,gBADc;AAAA;;AAAA;AACtC,gEAA0C;AAAA,YAA/BvF,CAA+B;AACtCC,QAAAA,eAAe,CAAC5E,MAAhB,CAAuB2E,CAAvB,EAA0BzE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA1B,EAAoDC,MAApD;AACH;AAHqC;AAAA;AAAA;AAAA;AAAA;;AAItC,QAAIR,OAAO,CAACkK,qBAAR,KAAkC9J,SAAtC,EAAiD;AAC7CoE,MAAAA,eAAe,CAACzE,MAAhB,CAAuBC,OAAO,CAACkK,qBAA/B,EAAsDjK,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAtD,EAAgFC,MAAhF;AACH;;AANqC,iDAOtBR,OAAO,CAAC0J,MAPc;AAAA;;AAAA;AAOtC,gEAAgC;AAAA,YAArBhF,EAAqB;AAC5BiF,QAAAA,KAAK,CAAC5J,MAAN,CAAa2E,EAAb,EAAgBzE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAhB,EAA0CC,MAA1C;AACH;AATqC;AAAA;AAAA;AAAA;AAAA;;AAUtC,WAAOP,MAAP;AACH,GAZ2B;AAa5BoC,EAAAA,MAb4B,kBAarBC,KAbqB,EAadC,MAbc,EAaN;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQgK,oBAAR,CAAb;;AACAhK,IAAAA,OAAO,CAACiK,gBAAR,GAA2B,EAA3B;AACAjK,IAAAA,OAAO,CAAC0J,MAAR,GAAiB,EAAjB;;AACA,WAAOlH,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACiK,gBAAR,CAAyBjF,IAAzB,CAA8BL,eAAe,CAACtC,MAAhB,CAAuBG,MAAvB,EAA+BA,MAAM,CAAClC,MAAP,EAA/B,CAA9B;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACkK,qBAAR,GAAgC1F,eAAe,CAACnC,MAAhB,CAAuBG,MAAvB,EAA+BA,MAAM,CAAClC,MAAP,EAA/B,CAAhC;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAAC0J,MAAR,CAAe1E,IAAf,CAAoB2E,KAAK,CAACtH,MAAN,CAAaG,MAAb,EAAqBA,MAAM,CAAClC,MAAP,EAArB,CAApB;AACA;;AACJ;AACIkC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAZR;AAcH;;AACD,WAAO7C,OAAP;AACH,GArC2B;AAsC5B+C,EAAAA,QAtC4B,oBAsCnB3E,MAtCmB,EAsCX;AACb,QAAM4B,OAAO,qBAAQgK,oBAAR,CAAb;;AACAhK,IAAAA,OAAO,CAACiK,gBAAR,GAA2B,EAA3B;AACAjK,IAAAA,OAAO,CAAC0J,MAAR,GAAiB,EAAjB;;AACA,QAAItL,MAAM,CAAC6L,gBAAP,KAA4B7J,SAA5B,IACAhC,MAAM,CAAC6L,gBAAP,KAA4B,IADhC,EACsC;AAAA,mDAClB7L,MAAM,CAAC6L,gBADW;AAAA;;AAAA;AAClC,kEAAyC;AAAA,cAA9B/E,CAA8B;AACrClF,UAAAA,OAAO,CAACiK,gBAAR,CAAyBjF,IAAzB,CAA8BL,eAAe,CAAC5B,QAAhB,CAAyBmC,CAAzB,CAA9B;AACH;AAHiC;AAAA;AAAA;AAAA;AAAA;AAIrC;;AACD,QAAI9G,MAAM,CAAC8L,qBAAP,KAAiC9J,SAAjC,IACAhC,MAAM,CAAC8L,qBAAP,KAAiC,IADrC,EAC2C;AACvClK,MAAAA,OAAO,CAACkK,qBAAR,GAAgC1F,eAAe,CAACzB,QAAhB,CAAyB3E,MAAM,CAAC8L,qBAAhC,CAAhC;AACH,KAHD,MAIK;AACDlK,MAAAA,OAAO,CAACkK,qBAAR,GAAgC9J,SAAhC;AACH;;AACD,QAAIhC,MAAM,CAACsL,MAAP,KAAkBtJ,SAAlB,IAA+BhC,MAAM,CAACsL,MAAP,KAAkB,IAArD,EAA2D;AAAA,mDACvCtL,MAAM,CAACsL,MADgC;AAAA;;AAAA;AACvD,kEAA+B;AAAA,cAApBxE,EAAoB;AAC3BlF,UAAAA,OAAO,CAAC0J,MAAR,CAAe1E,IAAf,CAAoB2E,KAAK,CAAC5G,QAAN,CAAemC,EAAf,CAApB;AACH;AAHsD;AAAA;AAAA;AAAA;AAAA;AAI1D;;AACD,WAAOlF,OAAP;AACH,GA7D2B;AA8D5BgD,EAAAA,MA9D4B,kBA8DrBhD,OA9DqB,EA8DZ;AACZ,QAAMiD,GAAG,GAAG,EAAZ;;AACA,QAAIjD,OAAO,CAACiK,gBAAZ,EAA8B;AAC1BhH,MAAAA,GAAG,CAACgH,gBAAJ,GAAuBjK,OAAO,CAACiK,gBAAR,CAAyB5E,GAAzB,CAA6B,UAACH,CAAD;AAAA,eAAOA,CAAC,GAAGP,eAAe,CAAC3B,MAAhB,CAAuBkC,CAAvB,CAAH,GAA+B9E,SAAvC;AAAA,OAA7B,CAAvB;AACH,KAFD,MAGK;AACD6C,MAAAA,GAAG,CAACgH,gBAAJ,GAAuB,EAAvB;AACH;;AACDjK,IAAAA,OAAO,CAACkK,qBAAR,KAAkC9J,SAAlC,KACK6C,GAAG,CAACiH,qBAAJ,GAA4BlK,OAAO,CAACkK,qBAAR,GACvB1F,eAAe,CAACxB,MAAhB,CAAuBhD,OAAO,CAACkK,qBAA/B,CADuB,GAEvB9J,SAHV;;AAIA,QAAIJ,OAAO,CAAC0J,MAAZ,EAAoB;AAChBzG,MAAAA,GAAG,CAACyG,MAAJ,GAAa1J,OAAO,CAAC0J,MAAR,CAAerE,GAAf,CAAmB,UAACH,CAAD;AAAA,eAAQA,CAAC,GAAGyE,KAAK,CAAC3G,MAAN,CAAakC,CAAb,CAAH,GAAqB9E,SAA9B;AAAA,OAAnB,CAAb;AACH,KAFD,MAGK;AACD6C,MAAAA,GAAG,CAACyG,MAAJ,GAAa,EAAb;AACH;;AACD,WAAOzG,GAAP;AACH,GAjF2B;AAkF5BC,EAAAA,WAlF4B,uBAkFhB9E,MAlFgB,EAkFR;AAChB,QAAM4B,OAAO,qBAAQgK,oBAAR,CAAb;;AACAhK,IAAAA,OAAO,CAACiK,gBAAR,GAA2B,EAA3B;AACAjK,IAAAA,OAAO,CAAC0J,MAAR,GAAiB,EAAjB;;AACA,QAAItL,MAAM,CAAC6L,gBAAP,KAA4B7J,SAA5B,IACAhC,MAAM,CAAC6L,gBAAP,KAA4B,IADhC,EACsC;AAAA,mDAClB7L,MAAM,CAAC6L,gBADW;AAAA;;AAAA;AAClC,kEAAyC;AAAA,cAA9B/E,CAA8B;AACrClF,UAAAA,OAAO,CAACiK,gBAAR,CAAyBjF,IAAzB,CAA8BL,eAAe,CAACzB,WAAhB,CAA4BgC,CAA5B,CAA9B;AACH;AAHiC;AAAA;AAAA;AAAA;AAAA;AAIrC;;AACD,QAAI9G,MAAM,CAAC8L,qBAAP,KAAiC9J,SAAjC,IACAhC,MAAM,CAAC8L,qBAAP,KAAiC,IADrC,EAC2C;AACvClK,MAAAA,OAAO,CAACkK,qBAAR,GAAgC1F,eAAe,CAACtB,WAAhB,CAA4B9E,MAAM,CAAC8L,qBAAnC,CAAhC;AACH,KAHD,MAIK;AACDlK,MAAAA,OAAO,CAACkK,qBAAR,GAAgC9J,SAAhC;AACH;;AACD,QAAIhC,MAAM,CAACsL,MAAP,KAAkBtJ,SAAlB,IAA+BhC,MAAM,CAACsL,MAAP,KAAkB,IAArD,EAA2D;AAAA,mDACvCtL,MAAM,CAACsL,MADgC;AAAA;;AAAA;AACvD,kEAA+B;AAAA,cAApBxE,GAAoB;AAC3BlF,UAAAA,OAAO,CAAC0J,MAAR,CAAe1E,IAAf,CAAoB2E,KAAK,CAACzG,WAAN,CAAkBgC,GAAlB,CAApB;AACH;AAHsD;AAAA;AAAA;AAAA;AAAA;AAI1D;;AACD,WAAOlF,OAAP;AACH;AAzG2B,CAAzB;AA2GP,IAAMmK,kBAAkB,GAAG;AAAEC,EAAAA,YAAY,EAAE;AAAhB,CAA3B;AACA,OAAO,IAAM/B,cAAc,GAAG;AAC1BtI,EAAAA,MAD0B,kBACnBC,OADmB,EACgB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAAC2F,IAAR,CAAapD,MAAb,KAAwB,CAA5B,EAA+B;AAC3BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAAC2F,IAAhC;AACH;;AACD,QAAI3F,OAAO,CAACoK,YAAR,KAAyB,CAA7B,EAAgC;AAC5BnK,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAACoK,YAAhC;AACH;;AACD,WAAOnK,MAAP;AACH,GATyB;AAU1BoC,EAAAA,MAV0B,kBAUnBC,KAVmB,EAUZC,MAVY,EAUJ;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQmK,kBAAR,CAAb;;AACA,WAAO3H,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAAC2F,IAAR,GAAenD,MAAM,CAACqC,KAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAACoK,YAAR,GAAuBvG,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAAnC;AACA;;AACJ;AACItC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAO7C,OAAP;AACH,GA7ByB;AA8B1B+C,EAAAA,QA9B0B,oBA8BjB3E,MA9BiB,EA8BT;AACb,QAAM4B,OAAO,qBAAQmK,kBAAR,CAAb;;AACA,QAAI/L,MAAM,CAACuH,IAAP,KAAgBvF,SAAhB,IAA6BhC,MAAM,CAACuH,IAAP,KAAgB,IAAjD,EAAuD;AACnD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAeR,eAAe,CAAC/G,MAAM,CAACuH,IAAR,CAA9B;AACH;;AACD,QAAIvH,MAAM,CAACgM,YAAP,KAAwBhK,SAAxB,IAAqChC,MAAM,CAACgM,YAAP,KAAwB,IAAjE,EAAuE;AACnEpK,MAAAA,OAAO,CAACoK,YAAR,GAAuBtG,MAAM,CAAC1F,MAAM,CAACgM,YAAR,CAA7B;AACH,KAFD,MAGK;AACDpK,MAAAA,OAAO,CAACoK,YAAR,GAAuB,CAAvB;AACH;;AACD,WAAOpK,OAAP;AACH,GA1CyB;AA2C1BgD,EAAAA,MA3C0B,kBA2CnBhD,OA3CmB,EA2CV;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAAC2F,IAAR,KAAiBvF,SAAjB,KACK6C,GAAG,CAAC0C,IAAJ,GAAWL,eAAe,CAACtF,OAAO,CAAC2F,IAAR,KAAiBvF,SAAjB,GAA6BJ,OAAO,CAAC2F,IAArC,GAA4C,IAAIlD,UAAJ,EAA7C,CAD/B;AAEAzC,IAAAA,OAAO,CAACoK,YAAR,KAAyBhK,SAAzB,KACK6C,GAAG,CAACmH,YAAJ,GAAmBpK,OAAO,CAACoK,YADhC;AAEA,WAAOnH,GAAP;AACH,GAlDyB;AAmD1BC,EAAAA,WAnD0B,uBAmDd9E,MAnDc,EAmDN;AAChB,QAAM4B,OAAO,qBAAQmK,kBAAR,CAAb;;AACA,QAAI/L,MAAM,CAACuH,IAAP,KAAgBvF,SAAhB,IAA6BhC,MAAM,CAACuH,IAAP,KAAgB,IAAjD,EAAuD;AACnD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAevH,MAAM,CAACuH,IAAtB;AACH,KAFD,MAGK;AACD3F,MAAAA,OAAO,CAAC2F,IAAR,GAAe,IAAIlD,UAAJ,EAAf;AACH;;AACD,QAAIrE,MAAM,CAACgM,YAAP,KAAwBhK,SAAxB,IAAqChC,MAAM,CAACgM,YAAP,KAAwB,IAAjE,EAAuE;AACnEpK,MAAAA,OAAO,CAACoK,YAAR,GAAuBhM,MAAM,CAACgM,YAA9B;AACH,KAFD,MAGK;AACDpK,MAAAA,OAAO,CAACoK,YAAR,GAAuB,CAAvB;AACH;;AACD,WAAOpK,OAAP;AACH;AAlEyB,CAAvB;AAoEP,IAAMqK,yBAAyB,GAAG,EAAlC;AACA,OAAO,IAAM/B,qBAAqB,GAAG;AACjCvI,EAAAA,MADiC,kBAC1BC,OAD0B,EACS;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AAAA,iDACtBF,OAAO,CAACsK,SADc;AAAA;;AAAA;AACtC,gEAAmC;AAAA,YAAxB5F,CAAwB;AAC/BqC,QAAAA,QAAQ,CAAChH,MAAT,CAAgB2E,CAAhB,EAAmBzE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAnB,EAA6CC,MAA7C;AACH;AAHqC;AAAA;AAAA;AAAA;AAAA;;AAItC,WAAOP,MAAP;AACH,GANgC;AAOjCoC,EAAAA,MAPiC,kBAO1BC,KAP0B,EAOnBC,MAPmB,EAOX;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQqK,yBAAR,CAAb;;AACArK,IAAAA,OAAO,CAACsK,SAAR,GAAoB,EAApB;;AACA,WAAO9H,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACsK,SAAR,CAAkBtF,IAAlB,CAAuB+B,QAAQ,CAAC1E,MAAT,CAAgBG,MAAhB,EAAwBA,MAAM,CAAClC,MAAP,EAAxB,CAAvB;AACA;;AACJ;AACIkC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AANR;AAQH;;AACD,WAAO7C,OAAP;AACH,GAxBgC;AAyBjC+C,EAAAA,QAzBiC,oBAyBxB3E,MAzBwB,EAyBhB;AACb,QAAM4B,OAAO,qBAAQqK,yBAAR,CAAb;;AACArK,IAAAA,OAAO,CAACsK,SAAR,GAAoB,EAApB;;AACA,QAAIlM,MAAM,CAACkM,SAAP,KAAqBlK,SAArB,IAAkChC,MAAM,CAACkM,SAAP,KAAqB,IAA3D,EAAiE;AAAA,mDAC7ClM,MAAM,CAACkM,SADsC;AAAA;;AAAA;AAC7D,kEAAkC;AAAA,cAAvBpF,CAAuB;AAC9BlF,UAAAA,OAAO,CAACsK,SAAR,CAAkBtF,IAAlB,CAAuB+B,QAAQ,CAAChE,QAAT,CAAkBmC,CAAlB,CAAvB;AACH;AAH4D;AAAA;AAAA;AAAA;AAAA;AAIhE;;AACD,WAAOlF,OAAP;AACH,GAlCgC;AAmCjCgD,EAAAA,MAnCiC,kBAmC1BhD,OAnC0B,EAmCjB;AACZ,QAAMiD,GAAG,GAAG,EAAZ;;AACA,QAAIjD,OAAO,CAACsK,SAAZ,EAAuB;AACnBrH,MAAAA,GAAG,CAACqH,SAAJ,GAAgBtK,OAAO,CAACsK,SAAR,CAAkBjF,GAAlB,CAAsB,UAACH,CAAD;AAAA,eAAOA,CAAC,GAAG6B,QAAQ,CAAC/D,MAAT,CAAgBkC,CAAhB,CAAH,GAAwB9E,SAAhC;AAAA,OAAtB,CAAhB;AACH,KAFD,MAGK;AACD6C,MAAAA,GAAG,CAACqH,SAAJ,GAAgB,EAAhB;AACH;;AACD,WAAOrH,GAAP;AACH,GA5CgC;AA6CjCC,EAAAA,WA7CiC,uBA6CrB9E,MA7CqB,EA6Cb;AAChB,QAAM4B,OAAO,qBAAQqK,yBAAR,CAAb;;AACArK,IAAAA,OAAO,CAACsK,SAAR,GAAoB,EAApB;;AACA,QAAIlM,MAAM,CAACkM,SAAP,KAAqBlK,SAArB,IAAkChC,MAAM,CAACkM,SAAP,KAAqB,IAA3D,EAAiE;AAAA,mDAC7ClM,MAAM,CAACkM,SADsC;AAAA;;AAAA;AAC7D,kEAAkC;AAAA,cAAvBpF,CAAuB;AAC9BlF,UAAAA,OAAO,CAACsK,SAAR,CAAkBtF,IAAlB,CAAuB+B,QAAQ,CAAC7D,WAAT,CAAqBgC,CAArB,CAAvB;AACH;AAH4D;AAAA;AAAA;AAAA;AAAA;AAIhE;;AACD,WAAOlF,OAAP;AACH;AAtDgC,CAA9B;AAwDP,IAAMuK,yBAAyB,GAAG;AAAEC,EAAAA,MAAM,EAAE;AAAV,CAAlC;AACA,OAAO,IAAMjC,qBAAqB,GAAG;AACjCxI,EAAAA,MADiC,kBAC1BC,OAD0B,EACS;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACwK,MAAR,KAAmB,CAAvB,EAA0B;AACtBvK,MAAAA,MAAM,CAACK,MAAP,CAAc,CAAd,EAAiBkG,KAAjB,CAAuBxG,OAAO,CAACwK,MAA/B;AACH;;AACD,WAAOvK,MAAP;AACH,GANgC;AAOjCoC,EAAAA,MAPiC,kBAO1BC,KAP0B,EAOnBC,MAPmB,EAOX;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQuK,yBAAR,CAAb;;AACA,WAAO/H,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACwK,MAAR,GAAiBhI,MAAM,CAACgE,KAAP,EAAjB;AACA;;AACJ;AACIhE,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AANR;AAQH;;AACD,WAAO7C,OAAP;AACH,GAvBgC;AAwBjC+C,EAAAA,QAxBiC,oBAwBxB3E,MAxBwB,EAwBhB;AACb,QAAM4B,OAAO,qBAAQuK,yBAAR,CAAb;;AACA,QAAInM,MAAM,CAACoM,MAAP,KAAkBpK,SAAlB,IAA+BhC,MAAM,CAACoM,MAAP,KAAkB,IAArD,EAA2D;AACvDxK,MAAAA,OAAO,CAACwK,MAAR,GAAiBxL,oCAAoC,CAACZ,MAAM,CAACoM,MAAR,CAArD;AACH,KAFD,MAGK;AACDxK,MAAAA,OAAO,CAACwK,MAAR,GAAiB,CAAjB;AACH;;AACD,WAAOxK,OAAP;AACH,GAjCgC;AAkCjCgD,EAAAA,MAlCiC,kBAkC1BhD,OAlC0B,EAkCjB;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACwK,MAAR,KAAmBpK,SAAnB,KACK6C,GAAG,CAACuH,MAAJ,GAAalL,kCAAkC,CAACU,OAAO,CAACwK,MAAT,CADpD;AAEA,WAAOvH,GAAP;AACH,GAvCgC;AAwCjCC,EAAAA,WAxCiC,uBAwCrB9E,MAxCqB,EAwCb;AAChB,QAAM4B,OAAO,qBAAQuK,yBAAR,CAAb;;AACA,QAAInM,MAAM,CAACoM,MAAP,KAAkBpK,SAAlB,IAA+BhC,MAAM,CAACoM,MAAP,KAAkB,IAArD,EAA2D;AACvDxK,MAAAA,OAAO,CAACwK,MAAR,GAAiBpM,MAAM,CAACoM,MAAxB;AACH,KAFD,MAGK;AACDxK,MAAAA,OAAO,CAACwK,MAAR,GAAiB,CAAjB;AACH;;AACD,WAAOxK,OAAP;AACH;AAjDgC,CAA9B;AAmDP,IAAMyK,6BAA6B,GAAG,EAAtC;AACA,OAAO,IAAMjC,yBAAyB,GAAG;AACrCzI,EAAAA,MADqC,kBAC9BC,OAD8B,EACK;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACmH,KAAR,CAAc5E,MAAd,KAAyB,CAA7B,EAAgC;AAC5BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAACmH,KAAhC;AACH;;AACD,WAAOlH,MAAP;AACH,GANoC;AAOrCoC,EAAAA,MAPqC,kBAO9BC,KAP8B,EAOvBC,MAPuB,EAOf;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBACNyK,6BADM,CAAb;;AAGA,WAAOjI,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACmH,KAAR,GAAgB3E,MAAM,CAACqC,KAAP,EAAhB;AACA;;AACJ;AACIrC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AANR;AAQH;;AACD,WAAO7C,OAAP;AACH,GAzBoC;AA0BrC+C,EAAAA,QA1BqC,oBA0B5B3E,MA1B4B,EA0BpB;AACb,QAAM4B,OAAO,qBACNyK,6BADM,CAAb;;AAGA,QAAIrM,MAAM,CAAC+I,KAAP,KAAiB/G,SAAjB,IAA8BhC,MAAM,CAAC+I,KAAP,KAAiB,IAAnD,EAAyD;AACrDnH,MAAAA,OAAO,CAACmH,KAAR,GAAgBhC,eAAe,CAAC/G,MAAM,CAAC+I,KAAR,CAA/B;AACH;;AACD,WAAOnH,OAAP;AACH,GAlCoC;AAmCrCgD,EAAAA,MAnCqC,kBAmC9BhD,OAnC8B,EAmCrB;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACmH,KAAR,KAAkB/G,SAAlB,KACK6C,GAAG,CAACkE,KAAJ,GAAY7B,eAAe,CAACtF,OAAO,CAACmH,KAAR,KAAkB/G,SAAlB,GAA8BJ,OAAO,CAACmH,KAAtC,GAA8C,IAAI1E,UAAJ,EAA/C,CADhC;AAEA,WAAOQ,GAAP;AACH,GAxCoC;AAyCrCC,EAAAA,WAzCqC,uBAyCzB9E,MAzCyB,EAyCjB;AAChB,QAAM4B,OAAO,qBACNyK,6BADM,CAAb;;AAGA,QAAIrM,MAAM,CAAC+I,KAAP,KAAiB/G,SAAjB,IAA8BhC,MAAM,CAAC+I,KAAP,KAAiB,IAAnD,EAAyD;AACrDnH,MAAAA,OAAO,CAACmH,KAAR,GAAgB/I,MAAM,CAAC+I,KAAvB;AACH,KAFD,MAGK;AACDnH,MAAAA,OAAO,CAACmH,KAAR,GAAgB,IAAI1E,UAAJ,EAAhB;AACH;;AACD,WAAOzC,OAAP;AACH;AApDoC,CAAlC;AAsDP,IAAM0K,8BAA8B,GAAG;AACnCF,EAAAA,MAAM,EAAE,CAD2B;AAEnCG,EAAAA,aAAa,EAAE,CAFoB;AAGnCC,EAAAA,aAAa,EAAE;AAHoB,CAAvC;AAKA,OAAO,IAAMnC,0BAA0B,GAAG;AACtC1I,EAAAA,MADsC,kBAC/BC,OAD+B,EACI;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACwK,MAAR,KAAmB,CAAvB,EAA0B;AACtBvK,MAAAA,MAAM,CAACK,MAAP,CAAc,CAAd,EAAiBkG,KAAjB,CAAuBxG,OAAO,CAACwK,MAA/B;AACH;;AACDvK,IAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB;;AAJsC,iDAKtBP,OAAO,CAAC2K,aALc;AAAA;;AAAA;AAKtC,gEAAuC;AAAA,YAA5BjG,CAA4B;AACnCzE,QAAAA,MAAM,CAACK,MAAP,CAAcoE,CAAd;AACH;AAPqC;AAAA;AAAA;AAAA;AAAA;;AAQtCzE,IAAAA,MAAM,CAACO,MAAP;;AARsC,iDAStBR,OAAO,CAAC4K,aATc;AAAA;;AAAA;AAStC,gEAAuC;AAAA,YAA5BlG,GAA4B;AACnCzE,QAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBsB,GAAzB;AACH;AAXqC;AAAA;AAAA;AAAA;AAAA;;AAYtC,WAAOzE,MAAP;AACH,GAdqC;AAetCoC,EAAAA,MAfsC,kBAe/BC,KAf+B,EAexBC,MAfwB,EAehB;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBACN0K,8BADM,CAAb;;AAGA1K,IAAAA,OAAO,CAAC2K,aAAR,GAAwB,EAAxB;AACA3K,IAAAA,OAAO,CAAC4K,aAAR,GAAwB,EAAxB;;AACA,WAAOpI,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACwK,MAAR,GAAiBhI,MAAM,CAACgE,KAAP,EAAjB;AACA;;AACJ,aAAK,CAAL;AACI,cAAI,CAAC3D,GAAG,GAAG,CAAP,MAAc,CAAlB,EAAqB;AACjB,gBAAMgI,IAAI,GAAGrI,MAAM,CAAClC,MAAP,KAAkBkC,MAAM,CAACI,GAAtC;;AACA,mBAAOJ,MAAM,CAACI,GAAP,GAAaiI,IAApB,EAA0B;AACtB7K,cAAAA,OAAO,CAAC2K,aAAR,CAAsB3F,IAAtB,CAA2BxC,MAAM,CAAClC,MAAP,EAA3B;AACH;AACJ,WALD,MAMK;AACDN,YAAAA,OAAO,CAAC2K,aAAR,CAAsB3F,IAAtB,CAA2BxC,MAAM,CAAClC,MAAP,EAA3B;AACH;;AACD;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAAC4K,aAAR,CAAsB5F,IAAtB,CAA2BxC,MAAM,CAACY,MAAP,EAA3B;AACA;;AACJ;AACIZ,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AApBR;AAsBH;;AACD,WAAO7C,OAAP;AACH,GAjDqC;AAkDtC+C,EAAAA,QAlDsC,oBAkD7B3E,MAlD6B,EAkDrB;AACb,QAAM4B,OAAO,qBACN0K,8BADM,CAAb;;AAGA1K,IAAAA,OAAO,CAAC2K,aAAR,GAAwB,EAAxB;AACA3K,IAAAA,OAAO,CAAC4K,aAAR,GAAwB,EAAxB;;AACA,QAAIxM,MAAM,CAACoM,MAAP,KAAkBpK,SAAlB,IAA+BhC,MAAM,CAACoM,MAAP,KAAkB,IAArD,EAA2D;AACvDxK,MAAAA,OAAO,CAACwK,MAAR,GAAiBhL,yCAAyC,CAACpB,MAAM,CAACoM,MAAR,CAA1D;AACH,KAFD,MAGK;AACDxK,MAAAA,OAAO,CAACwK,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIpM,MAAM,CAACuM,aAAP,KAAyBvK,SAAzB,IAAsChC,MAAM,CAACuM,aAAP,KAAyB,IAAnE,EAAyE;AAAA,mDACrDvM,MAAM,CAACuM,aAD8C;AAAA;;AAAA;AACrE,kEAAsC;AAAA,cAA3BzF,CAA2B;AAClClF,UAAAA,OAAO,CAAC2K,aAAR,CAAsB3F,IAAtB,CAA2BlB,MAAM,CAACoB,CAAD,CAAjC;AACH;AAHoE;AAAA;AAAA;AAAA;AAAA;AAIxE;;AACD,QAAI9G,MAAM,CAACwM,aAAP,KAAyBxK,SAAzB,IAAsChC,MAAM,CAACwM,aAAP,KAAyB,IAAnE,EAAyE;AAAA,mDACrDxM,MAAM,CAACwM,aAD8C;AAAA;;AAAA;AACrE,kEAAsC;AAAA,cAA3B1F,GAA2B;AAClClF,UAAAA,OAAO,CAAC4K,aAAR,CAAsB5F,IAAtB,CAA2B3B,MAAM,CAAC6B,GAAD,CAAjC;AACH;AAHoE;AAAA;AAAA;AAAA;AAAA;AAIxE;;AACD,WAAOlF,OAAP;AACH,GAzEqC;AA0EtCgD,EAAAA,MA1EsC,kBA0E/BhD,OA1E+B,EA0EtB;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACwK,MAAR,KAAmBpK,SAAnB,KACK6C,GAAG,CAACuH,MAAJ,GAAa5K,uCAAuC,CAACI,OAAO,CAACwK,MAAT,CADzD;;AAEA,QAAIxK,OAAO,CAAC2K,aAAZ,EAA2B;AACvB1H,MAAAA,GAAG,CAAC0H,aAAJ,GAAoB3K,OAAO,CAAC2K,aAAR,CAAsBtF,GAAtB,CAA0B,UAACH,CAAD;AAAA,eAAOA,CAAP;AAAA,OAA1B,CAApB;AACH,KAFD,MAGK;AACDjC,MAAAA,GAAG,CAAC0H,aAAJ,GAAoB,EAApB;AACH;;AACD,QAAI3K,OAAO,CAAC4K,aAAZ,EAA2B;AACvB3H,MAAAA,GAAG,CAAC2H,aAAJ,GAAoB5K,OAAO,CAAC4K,aAAR,CAAsBvF,GAAtB,CAA0B,UAACH,CAAD;AAAA,eAAOA,CAAP;AAAA,OAA1B,CAApB;AACH,KAFD,MAGK;AACDjC,MAAAA,GAAG,CAAC2H,aAAJ,GAAoB,EAApB;AACH;;AACD,WAAO3H,GAAP;AACH,GA3FqC;AA4FtCC,EAAAA,WA5FsC,uBA4F1B9E,MA5F0B,EA4FlB;AAChB,QAAM4B,OAAO,qBACN0K,8BADM,CAAb;;AAGA1K,IAAAA,OAAO,CAAC2K,aAAR,GAAwB,EAAxB;AACA3K,IAAAA,OAAO,CAAC4K,aAAR,GAAwB,EAAxB;;AACA,QAAIxM,MAAM,CAACoM,MAAP,KAAkBpK,SAAlB,IAA+BhC,MAAM,CAACoM,MAAP,KAAkB,IAArD,EAA2D;AACvDxK,MAAAA,OAAO,CAACwK,MAAR,GAAiBpM,MAAM,CAACoM,MAAxB;AACH,KAFD,MAGK;AACDxK,MAAAA,OAAO,CAACwK,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIpM,MAAM,CAACuM,aAAP,KAAyBvK,SAAzB,IAAsChC,MAAM,CAACuM,aAAP,KAAyB,IAAnE,EAAyE;AAAA,mDACrDvM,MAAM,CAACuM,aAD8C;AAAA;;AAAA;AACrE,kEAAsC;AAAA,cAA3BzF,CAA2B;AAClClF,UAAAA,OAAO,CAAC2K,aAAR,CAAsB3F,IAAtB,CAA2BE,CAA3B;AACH;AAHoE;AAAA;AAAA;AAAA;AAAA;AAIxE;;AACD,QAAI9G,MAAM,CAACwM,aAAP,KAAyBxK,SAAzB,IAAsChC,MAAM,CAACwM,aAAP,KAAyB,IAAnE,EAAyE;AAAA,mDACrDxM,MAAM,CAACwM,aAD8C;AAAA;;AAAA;AACrE,kEAAsC;AAAA,cAA3B1F,GAA2B;AAClClF,UAAAA,OAAO,CAAC4K,aAAR,CAAsB5F,IAAtB,CAA2BE,GAA3B;AACH;AAHoE;AAAA;AAAA;AAAA;AAAA;AAIxE;;AACD,WAAOlF,OAAP;AACH;AAnHqC,CAAnC;AAqHP,IAAM8K,mBAAmB,GAAG,EAA5B;AACA,OAAO,IAAMtG,eAAe,GAAG;AAC3BzE,EAAAA,MAD2B,kBACpBC,OADoB,EACe;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAAC+K,KAAR,KAAkB3K,SAAtB,EAAiC;AAC7B4K,MAAAA,WAAW,CAACjL,MAAZ,CAAmBC,OAAO,CAAC+K,KAA3B,EAAkC9K,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAlC,EAA4DC,MAA5D;AACH;;AACD,QAAIR,OAAO,CAACiL,QAAR,KAAqB7K,SAAzB,EAAoC;AAChCvC,MAAAA,cAAc,CAACkC,MAAf,CAAsBC,OAAO,CAACiL,QAA9B,EAAwChL,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAxC,EAAkEC,MAAlE;AACH;;AACD,QAAIR,OAAO,CAACkL,SAAR,KAAsB9K,SAA1B,EAAqC;AACjCtC,MAAAA,eAAe,CAACiC,MAAhB,CAAuBC,OAAO,CAACkL,SAA/B,EAA0CjL,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA1C,EAAoEC,MAApE;AACH;;AACD,QAAIR,OAAO,CAACyD,OAAR,KAAoBrD,SAAxB,EAAmC;AAC/BrC,MAAAA,aAAa,CAACgC,MAAd,CAAqBC,OAAO,CAACyD,OAA7B,EAAsCxD,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAtC,EAAgEC,MAAhE;AACH;;AACD,WAAOP,MAAP;AACH,GAf0B;AAgB3BoC,EAAAA,MAhB2B,kBAgBpBC,KAhBoB,EAgBbC,MAhBa,EAgBL;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ8K,mBAAR,CAAb;;AACA,WAAOtI,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAAC+K,KAAR,GAAgBC,WAAW,CAAC3I,MAAZ,CAAmBG,MAAnB,EAA2BA,MAAM,CAAClC,MAAP,EAA3B,CAAhB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACiL,QAAR,GAAmBpN,cAAc,CAACwE,MAAf,CAAsBG,MAAtB,EAA8BA,MAAM,CAAClC,MAAP,EAA9B,CAAnB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACkL,SAAR,GAAoBpN,eAAe,CAACuE,MAAhB,CAAuBG,MAAvB,EAA+BA,MAAM,CAAClC,MAAP,EAA/B,CAApB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACyD,OAAR,GAAkB1F,aAAa,CAACsE,MAAd,CAAqBG,MAArB,EAA6BA,MAAM,CAAClC,MAAP,EAA7B,CAAlB;AACA;;AACJ;AACIkC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAfR;AAiBH;;AACD,WAAO7C,OAAP;AACH,GAzC0B;AA0C3B+C,EAAAA,QA1C2B,oBA0ClB3E,MA1CkB,EA0CV;AACb,QAAM4B,OAAO,qBAAQ8K,mBAAR,CAAb;;AACA,QAAI1M,MAAM,CAAC2M,KAAP,KAAiB3K,SAAjB,IAA8BhC,MAAM,CAAC2M,KAAP,KAAiB,IAAnD,EAAyD;AACrD/K,MAAAA,OAAO,CAAC+K,KAAR,GAAgBC,WAAW,CAACjI,QAAZ,CAAqB3E,MAAM,CAAC2M,KAA5B,CAAhB;AACH,KAFD,MAGK;AACD/K,MAAAA,OAAO,CAAC+K,KAAR,GAAgB3K,SAAhB;AACH;;AACD,QAAIhC,MAAM,CAAC6M,QAAP,KAAoB7K,SAApB,IAAiChC,MAAM,CAAC6M,QAAP,KAAoB,IAAzD,EAA+D;AAC3DjL,MAAAA,OAAO,CAACiL,QAAR,GAAmBpN,cAAc,CAACkF,QAAf,CAAwB3E,MAAM,CAAC6M,QAA/B,CAAnB;AACH,KAFD,MAGK;AACDjL,MAAAA,OAAO,CAACiL,QAAR,GAAmB7K,SAAnB;AACH;;AACD,QAAIhC,MAAM,CAAC8M,SAAP,KAAqB9K,SAArB,IAAkChC,MAAM,CAAC8M,SAAP,KAAqB,IAA3D,EAAiE;AAC7DlL,MAAAA,OAAO,CAACkL,SAAR,GAAoBpN,eAAe,CAACiF,QAAhB,CAAyB3E,MAAM,CAAC8M,SAAhC,CAApB;AACH,KAFD,MAGK;AACDlL,MAAAA,OAAO,CAACkL,SAAR,GAAoB9K,SAApB;AACH;;AACD,QAAIhC,MAAM,CAACqF,OAAP,KAAmBrD,SAAnB,IAAgChC,MAAM,CAACqF,OAAP,KAAmB,IAAvD,EAA6D;AACzDzD,MAAAA,OAAO,CAACyD,OAAR,GAAkB1F,aAAa,CAACgF,QAAd,CAAuB3E,MAAM,CAACqF,OAA9B,CAAlB;AACH,KAFD,MAGK;AACDzD,MAAAA,OAAO,CAACyD,OAAR,GAAkBrD,SAAlB;AACH;;AACD,WAAOJ,OAAP;AACH,GArE0B;AAsE3BgD,EAAAA,MAtE2B,kBAsEpBhD,OAtEoB,EAsEX;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAAC+K,KAAR,KAAkB3K,SAAlB,KACK6C,GAAG,CAAC8H,KAAJ,GAAY/K,OAAO,CAAC+K,KAAR,GACPC,WAAW,CAAChI,MAAZ,CAAmBhD,OAAO,CAAC+K,KAA3B,CADO,GAEP3K,SAHV;AAIAJ,IAAAA,OAAO,CAACiL,QAAR,KAAqB7K,SAArB,KACK6C,GAAG,CAACgI,QAAJ,GAAejL,OAAO,CAACiL,QAAR,GACVpN,cAAc,CAACmF,MAAf,CAAsBhD,OAAO,CAACiL,QAA9B,CADU,GAEV7K,SAHV;AAIAJ,IAAAA,OAAO,CAACkL,SAAR,KAAsB9K,SAAtB,KACK6C,GAAG,CAACiI,SAAJ,GAAgBlL,OAAO,CAACkL,SAAR,GACXpN,eAAe,CAACkF,MAAhB,CAAuBhD,OAAO,CAACkL,SAA/B,CADW,GAEX9K,SAHV;AAIAJ,IAAAA,OAAO,CAACyD,OAAR,KAAoBrD,SAApB,KACK6C,GAAG,CAACQ,OAAJ,GAAczD,OAAO,CAACyD,OAAR,GACT1F,aAAa,CAACiF,MAAd,CAAqBhD,OAAO,CAACyD,OAA7B,CADS,GAETrD,SAHV;AAIA,WAAO6C,GAAP;AACH,GAzF0B;AA0F3BC,EAAAA,WA1F2B,uBA0Ff9E,MA1Fe,EA0FP;AAChB,QAAM4B,OAAO,qBAAQ8K,mBAAR,CAAb;;AACA,QAAI1M,MAAM,CAAC2M,KAAP,KAAiB3K,SAAjB,IAA8BhC,MAAM,CAAC2M,KAAP,KAAiB,IAAnD,EAAyD;AACrD/K,MAAAA,OAAO,CAAC+K,KAAR,GAAgBC,WAAW,CAAC9H,WAAZ,CAAwB9E,MAAM,CAAC2M,KAA/B,CAAhB;AACH,KAFD,MAGK;AACD/K,MAAAA,OAAO,CAAC+K,KAAR,GAAgB3K,SAAhB;AACH;;AACD,QAAIhC,MAAM,CAAC6M,QAAP,KAAoB7K,SAApB,IAAiChC,MAAM,CAAC6M,QAAP,KAAoB,IAAzD,EAA+D;AAC3DjL,MAAAA,OAAO,CAACiL,QAAR,GAAmBpN,cAAc,CAACqF,WAAf,CAA2B9E,MAAM,CAAC6M,QAAlC,CAAnB;AACH,KAFD,MAGK;AACDjL,MAAAA,OAAO,CAACiL,QAAR,GAAmB7K,SAAnB;AACH;;AACD,QAAIhC,MAAM,CAAC8M,SAAP,KAAqB9K,SAArB,IAAkChC,MAAM,CAAC8M,SAAP,KAAqB,IAA3D,EAAiE;AAC7DlL,MAAAA,OAAO,CAACkL,SAAR,GAAoBpN,eAAe,CAACoF,WAAhB,CAA4B9E,MAAM,CAAC8M,SAAnC,CAApB;AACH,KAFD,MAGK;AACDlL,MAAAA,OAAO,CAACkL,SAAR,GAAoB9K,SAApB;AACH;;AACD,QAAIhC,MAAM,CAACqF,OAAP,KAAmBrD,SAAnB,IAAgChC,MAAM,CAACqF,OAAP,KAAmB,IAAvD,EAA6D;AACzDzD,MAAAA,OAAO,CAACyD,OAAR,GAAkB1F,aAAa,CAACmF,WAAd,CAA0B9E,MAAM,CAACqF,OAAjC,CAAlB;AACH,KAFD,MAGK;AACDzD,MAAAA,OAAO,CAACyD,OAAR,GAAkBrD,SAAlB;AACH;;AACD,WAAOJ,OAAP;AACH;AArH0B,CAAxB;AAuHP,IAAMmL,eAAe,GAAG;AAAEC,EAAAA,QAAQ,EAAE,CAAZ;AAAeC,EAAAA,MAAM,EAAE;AAAvB,CAAxB;AACA,OAAO,IAAML,WAAW,GAAG;AACvBjL,EAAAA,MADuB,kBAChBC,OADgB,EACmB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACoL,QAAR,KAAqB,CAAzB,EAA4B;AACxBnL,MAAAA,MAAM,CAACK,MAAP,CAAc,CAAd,EAAiBwE,KAAjB,CAAuB9E,OAAO,CAACoL,QAA/B;AACH;;AACD,QAAIpL,OAAO,CAACqL,MAAR,KAAmB,CAAvB,EAA0B;AACtBpL,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAACqL,MAAhC;AACH;;AACD,WAAOpL,MAAP;AACH,GATsB;AAUvBoC,EAAAA,MAVuB,kBAUhBC,KAVgB,EAUTC,MAVS,EAUD;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQmL,eAAR,CAAb;;AACA,WAAO3I,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACoL,QAAR,GAAmBvH,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAA/B;AACA;;AACJ,aAAK,CAAL;AACI9E,UAAAA,OAAO,CAACqL,MAAR,GAAiBxH,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAA7B;AACA;;AACJ;AACItC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAO7C,OAAP;AACH,GA7BsB;AA8BvB+C,EAAAA,QA9BuB,oBA8Bd3E,MA9Bc,EA8BN;AACb,QAAM4B,OAAO,qBAAQmL,eAAR,CAAb;;AACA,QAAI/M,MAAM,CAACgN,QAAP,KAAoBhL,SAApB,IAAiChC,MAAM,CAACgN,QAAP,KAAoB,IAAzD,EAA+D;AAC3DpL,MAAAA,OAAO,CAACoL,QAAR,GAAmBtH,MAAM,CAAC1F,MAAM,CAACgN,QAAR,CAAzB;AACH,KAFD,MAGK;AACDpL,MAAAA,OAAO,CAACoL,QAAR,GAAmB,CAAnB;AACH;;AACD,QAAIhN,MAAM,CAACiN,MAAP,KAAkBjL,SAAlB,IAA+BhC,MAAM,CAACiN,MAAP,KAAkB,IAArD,EAA2D;AACvDrL,MAAAA,OAAO,CAACqL,MAAR,GAAiBvH,MAAM,CAAC1F,MAAM,CAACiN,MAAR,CAAvB;AACH,KAFD,MAGK;AACDrL,MAAAA,OAAO,CAACqL,MAAR,GAAiB,CAAjB;AACH;;AACD,WAAOrL,OAAP;AACH,GA7CsB;AA8CvBgD,EAAAA,MA9CuB,kBA8ChBhD,OA9CgB,EA8CP;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACoL,QAAR,KAAqBhL,SAArB,KAAmC6C,GAAG,CAACmI,QAAJ,GAAepL,OAAO,CAACoL,QAA1D;AACApL,IAAAA,OAAO,CAACqL,MAAR,KAAmBjL,SAAnB,KAAiC6C,GAAG,CAACoI,MAAJ,GAAarL,OAAO,CAACqL,MAAtD;AACA,WAAOpI,GAAP;AACH,GAnDsB;AAoDvBC,EAAAA,WApDuB,uBAoDX9E,MApDW,EAoDH;AAChB,QAAM4B,OAAO,qBAAQmL,eAAR,CAAb;;AACA,QAAI/M,MAAM,CAACgN,QAAP,KAAoBhL,SAApB,IAAiChC,MAAM,CAACgN,QAAP,KAAoB,IAAzD,EAA+D;AAC3DpL,MAAAA,OAAO,CAACoL,QAAR,GAAmBhN,MAAM,CAACgN,QAA1B;AACH,KAFD,MAGK;AACDpL,MAAAA,OAAO,CAACoL,QAAR,GAAmB,CAAnB;AACH;;AACD,QAAIhN,MAAM,CAACiN,MAAP,KAAkBjL,SAAlB,IAA+BhC,MAAM,CAACiN,MAAP,KAAkB,IAArD,EAA2D;AACvDrL,MAAAA,OAAO,CAACqL,MAAR,GAAiBjN,MAAM,CAACiN,MAAxB;AACH,KAFD,MAGK;AACDrL,MAAAA,OAAO,CAACqL,MAAR,GAAiB,CAAjB;AACH;;AACD,WAAOrL,OAAP;AACH;AAnEsB,CAApB;AAqEP,IAAMsL,kBAAkB,GAAG;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA3B;AACA,OAAO,IAAMrF,cAAc,GAAG;AAC1BnG,EAAAA,MAD0B,kBACnBC,OADmB,EACgB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACuL,KAAR,KAAkB,CAAtB,EAAyB;AACrBtL,MAAAA,MAAM,CAACK,MAAP,CAAc,CAAd,EAAiBkG,KAAjB,CAAuBxG,OAAO,CAACuL,KAA/B;AACH;;AAHqC,iDAItBvL,OAAO,CAACwL,KAJc;AAAA;;AAAA;AAItC,gEAA+B;AAAA,YAApB9G,CAAoB;AAC3B+G,QAAAA,QAAQ,CAAC1L,MAAT,CAAgB2E,CAAhB,EAAmBzE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAnB,EAA6CC,MAA7C;AACH;AANqC;AAAA;AAAA;AAAA;AAAA;;AAOtC,WAAOP,MAAP;AACH,GATyB;AAU1BoC,EAAAA,MAV0B,kBAUnBC,KAVmB,EAUZC,MAVY,EAUJ;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQsL,kBAAR,CAAb;;AACAtL,IAAAA,OAAO,CAACwL,KAAR,GAAgB,EAAhB;;AACA,WAAOhJ,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACuL,KAAR,GAAgB/I,MAAM,CAACgE,KAAP,EAAhB;AACA;;AACJ,aAAK,CAAL;AACIxG,UAAAA,OAAO,CAACwL,KAAR,CAAcxG,IAAd,CAAmByG,QAAQ,CAACpJ,MAAT,CAAgBG,MAAhB,EAAwBA,MAAM,CAAClC,MAAP,EAAxB,CAAnB;AACA;;AACJ;AACIkC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAO7C,OAAP;AACH,GA9ByB;AA+B1B+C,EAAAA,QA/B0B,oBA+BjB3E,MA/BiB,EA+BT;AACb,QAAM4B,OAAO,qBAAQsL,kBAAR,CAAb;;AACAtL,IAAAA,OAAO,CAACwL,KAAR,GAAgB,EAAhB;;AACA,QAAIpN,MAAM,CAACmN,KAAP,KAAiBnL,SAAjB,IAA8BhC,MAAM,CAACmN,KAAP,KAAiB,IAAnD,EAAyD;AACrDvL,MAAAA,OAAO,CAACuL,KAAR,GAAgBzH,MAAM,CAAC1F,MAAM,CAACmN,KAAR,CAAtB;AACH,KAFD,MAGK;AACDvL,MAAAA,OAAO,CAACuL,KAAR,GAAgB,CAAhB;AACH;;AACD,QAAInN,MAAM,CAACoN,KAAP,KAAiBpL,SAAjB,IAA8BhC,MAAM,CAACoN,KAAP,KAAiB,IAAnD,EAAyD;AAAA,mDACrCpN,MAAM,CAACoN,KAD8B;AAAA;;AAAA;AACrD,kEAA8B;AAAA,cAAnBtG,CAAmB;AAC1BlF,UAAAA,OAAO,CAACwL,KAAR,CAAcxG,IAAd,CAAmByG,QAAQ,CAAC1I,QAAT,CAAkBmC,CAAlB,CAAnB;AACH;AAHoD;AAAA;AAAA;AAAA;AAAA;AAIxD;;AACD,WAAOlF,OAAP;AACH,GA9CyB;AA+C1BgD,EAAAA,MA/C0B,kBA+CnBhD,OA/CmB,EA+CV;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACuL,KAAR,KAAkBnL,SAAlB,KAAgC6C,GAAG,CAACsI,KAAJ,GAAYvL,OAAO,CAACuL,KAApD;;AACA,QAAIvL,OAAO,CAACwL,KAAZ,EAAmB;AACfvI,MAAAA,GAAG,CAACuI,KAAJ,GAAYxL,OAAO,CAACwL,KAAR,CAAcnG,GAAd,CAAkB,UAACH,CAAD;AAAA,eAAOA,CAAC,GAAGuG,QAAQ,CAACzI,MAAT,CAAgBkC,CAAhB,CAAH,GAAwB9E,SAAhC;AAAA,OAAlB,CAAZ;AACH,KAFD,MAGK;AACD6C,MAAAA,GAAG,CAACuI,KAAJ,GAAY,EAAZ;AACH;;AACD,WAAOvI,GAAP;AACH,GAzDyB;AA0D1BC,EAAAA,WA1D0B,uBA0Dd9E,MA1Dc,EA0DN;AAChB,QAAM4B,OAAO,qBAAQsL,kBAAR,CAAb;;AACAtL,IAAAA,OAAO,CAACwL,KAAR,GAAgB,EAAhB;;AACA,QAAIpN,MAAM,CAACmN,KAAP,KAAiBnL,SAAjB,IAA8BhC,MAAM,CAACmN,KAAP,KAAiB,IAAnD,EAAyD;AACrDvL,MAAAA,OAAO,CAACuL,KAAR,GAAgBnN,MAAM,CAACmN,KAAvB;AACH,KAFD,MAGK;AACDvL,MAAAA,OAAO,CAACuL,KAAR,GAAgB,CAAhB;AACH;;AACD,QAAInN,MAAM,CAACoN,KAAP,KAAiBpL,SAAjB,IAA8BhC,MAAM,CAACoN,KAAP,KAAiB,IAAnD,EAAyD;AAAA,mDACrCpN,MAAM,CAACoN,KAD8B;AAAA;;AAAA;AACrD,kEAA8B;AAAA,cAAnBtG,CAAmB;AAC1BlF,UAAAA,OAAO,CAACwL,KAAR,CAAcxG,IAAd,CAAmByG,QAAQ,CAACvI,WAAT,CAAqBgC,CAArB,CAAnB;AACH;AAHoD;AAAA;AAAA;AAAA;AAAA;AAIxD;;AACD,WAAOlF,OAAP;AACH;AAzEyB,CAAvB;AA2EP,IAAM0L,SAAS,GAAG;AAAEpF,EAAAA,IAAI,EAAE;AAAR,CAAlB;AACA,OAAO,IAAMqD,KAAK,GAAG;AACjB5J,EAAAA,MADiB,kBACVC,OADU,EACyB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACsG,IAAR,KAAiB,EAArB,EAAyB;AACrBrG,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkB8C,MAAlB,CAAyBpD,OAAO,CAACsG,IAAjC;AACH;;AAHqC,iDAItBtG,OAAO,CAAC2L,UAJc;AAAA;;AAAA;AAItC,gEAAoC;AAAA,YAAzBjH,CAAyB;AAChCkH,QAAAA,cAAc,CAAC7L,MAAf,CAAsB2E,CAAtB,EAAyBzE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAzB,EAAmDC,MAAnD;AACH;AANqC;AAAA;AAAA;AAAA;AAAA;;AAOtC,WAAOP,MAAP;AACH,GATgB;AAUjBoC,EAAAA,MAViB,kBAUVC,KAVU,EAUHC,MAVG,EAUK;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ0L,SAAR,CAAb;;AACA1L,IAAAA,OAAO,CAAC2L,UAAR,GAAqB,EAArB;;AACA,WAAOnJ,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACsG,IAAR,GAAe9D,MAAM,CAACY,MAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACIpD,UAAAA,OAAO,CAAC2L,UAAR,CAAmB3G,IAAnB,CAAwB4G,cAAc,CAACvJ,MAAf,CAAsBG,MAAtB,EAA8BA,MAAM,CAAClC,MAAP,EAA9B,CAAxB;AACA;;AACJ;AACIkC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAO7C,OAAP;AACH,GA9BgB;AA+BjB+C,EAAAA,QA/BiB,oBA+BR3E,MA/BQ,EA+BA;AACb,QAAM4B,OAAO,qBAAQ0L,SAAR,CAAb;;AACA1L,IAAAA,OAAO,CAAC2L,UAAR,GAAqB,EAArB;;AACA,QAAIvN,MAAM,CAACkI,IAAP,KAAgBlG,SAAhB,IAA6BhC,MAAM,CAACkI,IAAP,KAAgB,IAAjD,EAAuD;AACnDtG,MAAAA,OAAO,CAACsG,IAAR,GAAejD,MAAM,CAACjF,MAAM,CAACkI,IAAR,CAArB;AACH,KAFD,MAGK;AACDtG,MAAAA,OAAO,CAACsG,IAAR,GAAe,EAAf;AACH;;AACD,QAAIlI,MAAM,CAACuN,UAAP,KAAsBvL,SAAtB,IAAmChC,MAAM,CAACuN,UAAP,KAAsB,IAA7D,EAAmE;AAAA,mDAC/CvN,MAAM,CAACuN,UADwC;AAAA;;AAAA;AAC/D,kEAAmC;AAAA,cAAxBzG,CAAwB;AAC/BlF,UAAAA,OAAO,CAAC2L,UAAR,CAAmB3G,IAAnB,CAAwB4G,cAAc,CAAC7I,QAAf,CAAwBmC,CAAxB,CAAxB;AACH;AAH8D;AAAA;AAAA;AAAA;AAAA;AAIlE;;AACD,WAAOlF,OAAP;AACH,GA9CgB;AA+CjBgD,EAAAA,MA/CiB,kBA+CVhD,OA/CU,EA+CD;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACsG,IAAR,KAAiBlG,SAAjB,KAA+B6C,GAAG,CAACqD,IAAJ,GAAWtG,OAAO,CAACsG,IAAlD;;AACA,QAAItG,OAAO,CAAC2L,UAAZ,EAAwB;AACpB1I,MAAAA,GAAG,CAAC0I,UAAJ,GAAiB3L,OAAO,CAAC2L,UAAR,CAAmBtG,GAAnB,CAAuB,UAACH,CAAD;AAAA,eAAOA,CAAC,GAAG0G,cAAc,CAAC5I,MAAf,CAAsBkC,CAAtB,CAAH,GAA8B9E,SAAtC;AAAA,OAAvB,CAAjB;AACH,KAFD,MAGK;AACD6C,MAAAA,GAAG,CAAC0I,UAAJ,GAAiB,EAAjB;AACH;;AACD,WAAO1I,GAAP;AACH,GAzDgB;AA0DjBC,EAAAA,WA1DiB,uBA0DL9E,MA1DK,EA0DG;AAChB,QAAM4B,OAAO,qBAAQ0L,SAAR,CAAb;;AACA1L,IAAAA,OAAO,CAAC2L,UAAR,GAAqB,EAArB;;AACA,QAAIvN,MAAM,CAACkI,IAAP,KAAgBlG,SAAhB,IAA6BhC,MAAM,CAACkI,IAAP,KAAgB,IAAjD,EAAuD;AACnDtG,MAAAA,OAAO,CAACsG,IAAR,GAAelI,MAAM,CAACkI,IAAtB;AACH,KAFD,MAGK;AACDtG,MAAAA,OAAO,CAACsG,IAAR,GAAe,EAAf;AACH;;AACD,QAAIlI,MAAM,CAACuN,UAAP,KAAsBvL,SAAtB,IAAmChC,MAAM,CAACuN,UAAP,KAAsB,IAA7D,EAAmE;AAAA,mDAC/CvN,MAAM,CAACuN,UADwC;AAAA;;AAAA;AAC/D,kEAAmC;AAAA,cAAxBzG,CAAwB;AAC/BlF,UAAAA,OAAO,CAAC2L,UAAR,CAAmB3G,IAAnB,CAAwB4G,cAAc,CAAC1I,WAAf,CAA2BgC,CAA3B,CAAxB;AACH;AAH8D;AAAA;AAAA;AAAA;AAAA;AAIlE;;AACD,WAAOlF,OAAP;AACH;AAzEgB,CAAd;AA2EP,IAAM6L,kBAAkB,GAAG;AAAExE,EAAAA,KAAK,EAAE;AAAT,CAA3B;AACA,OAAO,IAAMuE,cAAc,GAAG;AAC1B7L,EAAAA,MAD0B,kBACnBC,OADmB,EACgB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACgE,GAAR,CAAYzB,MAAZ,KAAuB,CAA3B,EAA8B;AAC1BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAACgE,GAAhC;AACH;;AACD,QAAIhE,OAAO,CAACiE,KAAR,CAAc1B,MAAd,KAAyB,CAA7B,EAAgC;AAC5BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAACiE,KAAhC;AACH;;AACD,QAAIjE,OAAO,CAACqH,KAAR,KAAkB,IAAtB,EAA4B;AACxBpH,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBsF,IAAlB,CAAuB5F,OAAO,CAACqH,KAA/B;AACH;;AACD,WAAOpH,MAAP;AACH,GAZyB;AAa1BoC,EAAAA,MAb0B,kBAanBC,KAbmB,EAaZC,MAbY,EAaJ;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ6L,kBAAR,CAAb;;AACA,WAAOrJ,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACgE,GAAR,GAAcxB,MAAM,CAACqC,KAAP,EAAd;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAACiE,KAAR,GAAgBzB,MAAM,CAACqC,KAAP,EAAhB;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAACqH,KAAR,GAAgB7E,MAAM,CAACoD,IAAP,EAAhB;AACA;;AACJ;AACIpD,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAZR;AAcH;;AACD,WAAO7C,OAAP;AACH,GAnCyB;AAoC1B+C,EAAAA,QApC0B,oBAoCjB3E,MApCiB,EAoCT;AACb,QAAM4B,OAAO,qBAAQ6L,kBAAR,CAAb;;AACA,QAAIzN,MAAM,CAAC4F,GAAP,KAAe5D,SAAf,IAA4BhC,MAAM,CAAC4F,GAAP,KAAe,IAA/C,EAAqD;AACjDhE,MAAAA,OAAO,CAACgE,GAAR,GAAcmB,eAAe,CAAC/G,MAAM,CAAC4F,GAAR,CAA7B;AACH;;AACD,QAAI5F,MAAM,CAAC6F,KAAP,KAAiB7D,SAAjB,IAA8BhC,MAAM,CAAC6F,KAAP,KAAiB,IAAnD,EAAyD;AACrDjE,MAAAA,OAAO,CAACiE,KAAR,GAAgBkB,eAAe,CAAC/G,MAAM,CAAC6F,KAAR,CAA/B;AACH;;AACD,QAAI7F,MAAM,CAACiJ,KAAP,KAAiBjH,SAAjB,IAA8BhC,MAAM,CAACiJ,KAAP,KAAiB,IAAnD,EAAyD;AACrDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgBxB,OAAO,CAACzH,MAAM,CAACiJ,KAAR,CAAvB;AACH,KAFD,MAGK;AACDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgB,KAAhB;AACH;;AACD,WAAOrH,OAAP;AACH,GAnDyB;AAoD1BgD,EAAAA,MApD0B,kBAoDnBhD,OApDmB,EAoDV;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACgE,GAAR,KAAgB5D,SAAhB,KACK6C,GAAG,CAACe,GAAJ,GAAUsB,eAAe,CAACtF,OAAO,CAACgE,GAAR,KAAgB5D,SAAhB,GAA4BJ,OAAO,CAACgE,GAApC,GAA0C,IAAIvB,UAAJ,EAA3C,CAD9B;AAEAzC,IAAAA,OAAO,CAACiE,KAAR,KAAkB7D,SAAlB,KACK6C,GAAG,CAACgB,KAAJ,GAAYqB,eAAe,CAACtF,OAAO,CAACiE,KAAR,KAAkB7D,SAAlB,GAA8BJ,OAAO,CAACiE,KAAtC,GAA8C,IAAIxB,UAAJ,EAA/C,CADhC;AAEAzC,IAAAA,OAAO,CAACqH,KAAR,KAAkBjH,SAAlB,KAAgC6C,GAAG,CAACoE,KAAJ,GAAYrH,OAAO,CAACqH,KAApD;AACA,WAAOpE,GAAP;AACH,GA5DyB;AA6D1BC,EAAAA,WA7D0B,uBA6Dd9E,MA7Dc,EA6DN;AAChB,QAAM4B,OAAO,qBAAQ6L,kBAAR,CAAb;;AACA,QAAIzN,MAAM,CAAC4F,GAAP,KAAe5D,SAAf,IAA4BhC,MAAM,CAAC4F,GAAP,KAAe,IAA/C,EAAqD;AACjDhE,MAAAA,OAAO,CAACgE,GAAR,GAAc5F,MAAM,CAAC4F,GAArB;AACH,KAFD,MAGK;AACDhE,MAAAA,OAAO,CAACgE,GAAR,GAAc,IAAIvB,UAAJ,EAAd;AACH;;AACD,QAAIrE,MAAM,CAAC6F,KAAP,KAAiB7D,SAAjB,IAA8BhC,MAAM,CAAC6F,KAAP,KAAiB,IAAnD,EAAyD;AACrDjE,MAAAA,OAAO,CAACiE,KAAR,GAAgB7F,MAAM,CAAC6F,KAAvB;AACH,KAFD,MAGK;AACDjE,MAAAA,OAAO,CAACiE,KAAR,GAAgB,IAAIxB,UAAJ,EAAhB;AACH;;AACD,QAAIrE,MAAM,CAACiJ,KAAP,KAAiBjH,SAAjB,IAA8BhC,MAAM,CAACiJ,KAAP,KAAiB,IAAnD,EAAyD;AACrDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgBjJ,MAAM,CAACiJ,KAAvB;AACH,KAFD,MAGK;AACDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgB,KAAhB;AACH;;AACD,WAAOrH,OAAP;AACH;AAlFyB,CAAvB;AAoFP,IAAM8L,YAAY,GAAG;AAAErG,EAAAA,MAAM,EAAE,CAAV;AAAa4B,EAAAA,KAAK,EAAE;AAApB,CAArB;AACA,OAAO,IAAM0E,QAAQ,GAAG;AACpBhM,EAAAA,MADoB,kBACbC,OADa,EACsB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACyF,MAAR,KAAmB,CAAvB,EAA0B;AACtBxF,MAAAA,MAAM,CAACK,MAAP,CAAc,CAAd,EAAiBwE,KAAjB,CAAuB9E,OAAO,CAACyF,MAA/B;AACH;;AACD,QAAIzF,OAAO,CAACqH,KAAR,KAAkB,CAAtB,EAAyB;AACrBpH,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBA,MAAlB,CAAyBN,OAAO,CAACqH,KAAjC;AACH;;AACD,QAAIrH,OAAO,CAACuG,EAAR,CAAWhE,MAAX,KAAsB,CAA1B,EAA6B;AACzBtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAACuG,EAAhC;AACH;;AACD,QAAIvG,OAAO,CAACwK,MAAR,KAAmBpK,SAAvB,EAAkC;AAC9B+H,MAAAA,iBAAiB,CAACpI,MAAlB,CAAyBC,OAAO,CAACwK,MAAjC,EAAyCvK,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAzC,EAAmEC,MAAnE;AACH;;AACD,WAAOP,MAAP;AACH,GAfmB;AAgBpBoC,EAAAA,MAhBoB,kBAgBbC,KAhBa,EAgBNC,MAhBM,EAgBE;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ8L,YAAR,CAAb;;AACA,WAAOtJ,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACyF,MAAR,GAAiB5B,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAA7B;AACA;;AACJ,aAAK,CAAL;AACI9E,UAAAA,OAAO,CAACqH,KAAR,GAAgB7E,MAAM,CAAClC,MAAP,EAAhB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACuG,EAAR,GAAa/D,MAAM,CAACqC,KAAP,EAAb;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAACwK,MAAR,GAAiBrC,iBAAiB,CAAC9F,MAAlB,CAAyBG,MAAzB,EAAiCA,MAAM,CAAClC,MAAP,EAAjC,CAAjB;AACA;;AACJ;AACIkC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAfR;AAiBH;;AACD,WAAO7C,OAAP;AACH,GAzCmB;AA0CpB+C,EAAAA,QA1CoB,oBA0CX3E,MA1CW,EA0CH;AACb,QAAM4B,OAAO,qBAAQ8L,YAAR,CAAb;;AACA,QAAI1N,MAAM,CAACqH,MAAP,KAAkBrF,SAAlB,IAA+BhC,MAAM,CAACqH,MAAP,KAAkB,IAArD,EAA2D;AACvDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB3B,MAAM,CAAC1F,MAAM,CAACqH,MAAR,CAAvB;AACH,KAFD,MAGK;AACDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIrH,MAAM,CAACiJ,KAAP,KAAiBjH,SAAjB,IAA8BhC,MAAM,CAACiJ,KAAP,KAAiB,IAAnD,EAAyD;AACrDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgBvD,MAAM,CAAC1F,MAAM,CAACiJ,KAAR,CAAtB;AACH,KAFD,MAGK;AACDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgB,CAAhB;AACH;;AACD,QAAIjJ,MAAM,CAACmI,EAAP,KAAcnG,SAAd,IAA2BhC,MAAM,CAACmI,EAAP,KAAc,IAA7C,EAAmD;AAC/CvG,MAAAA,OAAO,CAACuG,EAAR,GAAapB,eAAe,CAAC/G,MAAM,CAACmI,EAAR,CAA5B;AACH;;AACD,QAAInI,MAAM,CAACoM,MAAP,KAAkBpK,SAAlB,IAA+BhC,MAAM,CAACoM,MAAP,KAAkB,IAArD,EAA2D;AACvDxK,MAAAA,OAAO,CAACwK,MAAR,GAAiBrC,iBAAiB,CAACpF,QAAlB,CAA2B3E,MAAM,CAACoM,MAAlC,CAAjB;AACH,KAFD,MAGK;AACDxK,MAAAA,OAAO,CAACwK,MAAR,GAAiBpK,SAAjB;AACH;;AACD,WAAOJ,OAAP;AACH,GAlEmB;AAmEpBgD,EAAAA,MAnEoB,kBAmEbhD,OAnEa,EAmEJ;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACyF,MAAR,KAAmBrF,SAAnB,KAAiC6C,GAAG,CAACwC,MAAJ,GAAazF,OAAO,CAACyF,MAAtD;AACAzF,IAAAA,OAAO,CAACqH,KAAR,KAAkBjH,SAAlB,KAAgC6C,GAAG,CAACoE,KAAJ,GAAYrH,OAAO,CAACqH,KAApD;AACArH,IAAAA,OAAO,CAACuG,EAAR,KAAenG,SAAf,KACK6C,GAAG,CAACsD,EAAJ,GAASjB,eAAe,CAACtF,OAAO,CAACuG,EAAR,KAAenG,SAAf,GAA2BJ,OAAO,CAACuG,EAAnC,GAAwC,IAAI9D,UAAJ,EAAzC,CAD7B;AAEAzC,IAAAA,OAAO,CAACwK,MAAR,KAAmBpK,SAAnB,KACK6C,GAAG,CAACuH,MAAJ,GAAaxK,OAAO,CAACwK,MAAR,GACRrC,iBAAiB,CAACnF,MAAlB,CAAyBhD,OAAO,CAACwK,MAAjC,CADQ,GAERpK,SAHV;AAIA,WAAO6C,GAAP;AACH,GA9EmB;AA+EpBC,EAAAA,WA/EoB,uBA+ER9E,MA/EQ,EA+EA;AAChB,QAAM4B,OAAO,qBAAQ8L,YAAR,CAAb;;AACA,QAAI1N,MAAM,CAACqH,MAAP,KAAkBrF,SAAlB,IAA+BhC,MAAM,CAACqH,MAAP,KAAkB,IAArD,EAA2D;AACvDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiBrH,MAAM,CAACqH,MAAxB;AACH,KAFD,MAGK;AACDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIrH,MAAM,CAACiJ,KAAP,KAAiBjH,SAAjB,IAA8BhC,MAAM,CAACiJ,KAAP,KAAiB,IAAnD,EAAyD;AACrDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgBjJ,MAAM,CAACiJ,KAAvB;AACH,KAFD,MAGK;AACDrH,MAAAA,OAAO,CAACqH,KAAR,GAAgB,CAAhB;AACH;;AACD,QAAIjJ,MAAM,CAACmI,EAAP,KAAcnG,SAAd,IAA2BhC,MAAM,CAACmI,EAAP,KAAc,IAA7C,EAAmD;AAC/CvG,MAAAA,OAAO,CAACuG,EAAR,GAAanI,MAAM,CAACmI,EAApB;AACH,KAFD,MAGK;AACDvG,MAAAA,OAAO,CAACuG,EAAR,GAAa,IAAI9D,UAAJ,EAAb;AACH;;AACD,QAAIrE,MAAM,CAACoM,MAAP,KAAkBpK,SAAlB,IAA+BhC,MAAM,CAACoM,MAAP,KAAkB,IAArD,EAA2D;AACvDxK,MAAAA,OAAO,CAACwK,MAAR,GAAiBrC,iBAAiB,CAACjF,WAAlB,CAA8B9E,MAAM,CAACoM,MAArC,CAAjB;AACH,KAFD,MAGK;AACDxK,MAAAA,OAAO,CAACwK,MAAR,GAAiBpK,SAAjB;AACH;;AACD,WAAOJ,OAAP;AACH;AA1GmB,CAAjB;AA4GP,IAAMgM,aAAa,GAAG;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAAtB;AACA,OAAO,IAAMC,SAAS,GAAG;AACrBnM,EAAAA,MADqB,kBACdC,OADc,EACqB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACmM,OAAR,CAAgB5J,MAAhB,KAA2B,CAA/B,EAAkC;AAC9BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAACmM,OAAhC;AACH;;AACD,QAAInM,OAAO,CAACiM,KAAR,KAAkB,CAAtB,EAAyB;AACrBhM,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAACiM,KAAhC;AACH;;AACD,WAAOhM,MAAP;AACH,GAToB;AAUrBoC,EAAAA,MAVqB,kBAUdC,KAVc,EAUPC,MAVO,EAUC;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQgM,aAAR,CAAb;;AACA,WAAOxJ,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACmM,OAAR,GAAkB3J,MAAM,CAACqC,KAAP,EAAlB;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAACiM,KAAR,GAAgBpI,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAA5B;AACA;;AACJ;AACItC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAO7C,OAAP;AACH,GA7BoB;AA8BrB+C,EAAAA,QA9BqB,oBA8BZ3E,MA9BY,EA8BJ;AACb,QAAM4B,OAAO,qBAAQgM,aAAR,CAAb;;AACA,QAAI5N,MAAM,CAAC+N,OAAP,KAAmB/L,SAAnB,IAAgChC,MAAM,CAAC+N,OAAP,KAAmB,IAAvD,EAA6D;AACzDnM,MAAAA,OAAO,CAACmM,OAAR,GAAkBhH,eAAe,CAAC/G,MAAM,CAAC+N,OAAR,CAAjC;AACH;;AACD,QAAI/N,MAAM,CAAC6N,KAAP,KAAiB7L,SAAjB,IAA8BhC,MAAM,CAAC6N,KAAP,KAAiB,IAAnD,EAAyD;AACrDjM,MAAAA,OAAO,CAACiM,KAAR,GAAgBnI,MAAM,CAAC1F,MAAM,CAAC6N,KAAR,CAAtB;AACH,KAFD,MAGK;AACDjM,MAAAA,OAAO,CAACiM,KAAR,GAAgB,CAAhB;AACH;;AACD,WAAOjM,OAAP;AACH,GA1CoB;AA2CrBgD,EAAAA,MA3CqB,kBA2CdhD,OA3Cc,EA2CL;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACmM,OAAR,KAAoB/L,SAApB,KACK6C,GAAG,CAACkJ,OAAJ,GAAc7G,eAAe,CAACtF,OAAO,CAACmM,OAAR,KAAoB/L,SAApB,GAAgCJ,OAAO,CAACmM,OAAxC,GAAkD,IAAI1J,UAAJ,EAAnD,CADlC;AAEAzC,IAAAA,OAAO,CAACiM,KAAR,KAAkB7L,SAAlB,KAAgC6C,GAAG,CAACgJ,KAAJ,GAAYjM,OAAO,CAACiM,KAApD;AACA,WAAOhJ,GAAP;AACH,GAjDoB;AAkDrBC,EAAAA,WAlDqB,uBAkDT9E,MAlDS,EAkDD;AAChB,QAAM4B,OAAO,qBAAQgM,aAAR,CAAb;;AACA,QAAI5N,MAAM,CAAC+N,OAAP,KAAmB/L,SAAnB,IAAgChC,MAAM,CAAC+N,OAAP,KAAmB,IAAvD,EAA6D;AACzDnM,MAAAA,OAAO,CAACmM,OAAR,GAAkB/N,MAAM,CAAC+N,OAAzB;AACH,KAFD,MAGK;AACDnM,MAAAA,OAAO,CAACmM,OAAR,GAAkB,IAAI1J,UAAJ,EAAlB;AACH;;AACD,QAAIrE,MAAM,CAAC6N,KAAP,KAAiB7L,SAAjB,IAA8BhC,MAAM,CAAC6N,KAAP,KAAiB,IAAnD,EAAyD;AACrDjM,MAAAA,OAAO,CAACiM,KAAR,GAAgB7N,MAAM,CAAC6N,KAAvB;AACH,KAFD,MAGK;AACDjM,MAAAA,OAAO,CAACiM,KAAR,GAAgB,CAAhB;AACH;;AACD,WAAOjM,OAAP;AACH;AAjEoB,CAAlB;AAmEP,IAAMoM,mBAAmB,GAAG;AAAEH,EAAAA,KAAK,EAAE;AAAT,CAA5B;AACA,OAAO,IAAMtH,eAAe,GAAG;AAC3B5E,EAAAA,MAD2B,kBACpBC,OADoB,EACe;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACqM,MAAR,KAAmBjM,SAAvB,EAAkC;AAC9BpC,MAAAA,SAAS,CAAC+B,MAAV,CAAiBC,OAAO,CAACqM,MAAzB,EAAiCpM,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAjC,EAA2DC,MAA3D;AACH;;AACD,QAAIR,OAAO,CAACiM,KAAR,KAAkB,CAAtB,EAAyB;AACrBhM,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAACiM,KAAhC;AACH;;AACD,WAAOhM,MAAP;AACH,GAT0B;AAU3BoC,EAAAA,MAV2B,kBAUpBC,KAVoB,EAUbC,MAVa,EAUL;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQoM,mBAAR,CAAb;;AACA,WAAO5J,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACqM,MAAR,GAAiBrO,SAAS,CAACqE,MAAV,CAAiBG,MAAjB,EAAyBA,MAAM,CAAClC,MAAP,EAAzB,CAAjB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACiM,KAAR,GAAgBpI,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAA5B;AACA;;AACJ;AACItC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAO7C,OAAP;AACH,GA7B0B;AA8B3B+C,EAAAA,QA9B2B,oBA8BlB3E,MA9BkB,EA8BV;AACb,QAAM4B,OAAO,qBAAQoM,mBAAR,CAAb;;AACA,QAAIhO,MAAM,CAACiO,MAAP,KAAkBjM,SAAlB,IAA+BhC,MAAM,CAACiO,MAAP,KAAkB,IAArD,EAA2D;AACvDrM,MAAAA,OAAO,CAACqM,MAAR,GAAiBrO,SAAS,CAAC+E,QAAV,CAAmB3E,MAAM,CAACiO,MAA1B,CAAjB;AACH,KAFD,MAGK;AACDrM,MAAAA,OAAO,CAACqM,MAAR,GAAiBjM,SAAjB;AACH;;AACD,QAAIhC,MAAM,CAAC6N,KAAP,KAAiB7L,SAAjB,IAA8BhC,MAAM,CAAC6N,KAAP,KAAiB,IAAnD,EAAyD;AACrDjM,MAAAA,OAAO,CAACiM,KAAR,GAAgBnI,MAAM,CAAC1F,MAAM,CAAC6N,KAAR,CAAtB;AACH,KAFD,MAGK;AACDjM,MAAAA,OAAO,CAACiM,KAAR,GAAgB,CAAhB;AACH;;AACD,WAAOjM,OAAP;AACH,GA7C0B;AA8C3BgD,EAAAA,MA9C2B,kBA8CpBhD,OA9CoB,EA8CX;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACqM,MAAR,KAAmBjM,SAAnB,KACK6C,GAAG,CAACoJ,MAAJ,GAAarM,OAAO,CAACqM,MAAR,GACRrO,SAAS,CAACgF,MAAV,CAAiBhD,OAAO,CAACqM,MAAzB,CADQ,GAERjM,SAHV;AAIAJ,IAAAA,OAAO,CAACiM,KAAR,KAAkB7L,SAAlB,KAAgC6C,GAAG,CAACgJ,KAAJ,GAAYjM,OAAO,CAACiM,KAApD;AACA,WAAOhJ,GAAP;AACH,GAtD0B;AAuD3BC,EAAAA,WAvD2B,uBAuDf9E,MAvDe,EAuDP;AAChB,QAAM4B,OAAO,qBAAQoM,mBAAR,CAAb;;AACA,QAAIhO,MAAM,CAACiO,MAAP,KAAkBjM,SAAlB,IAA+BhC,MAAM,CAACiO,MAAP,KAAkB,IAArD,EAA2D;AACvDrM,MAAAA,OAAO,CAACqM,MAAR,GAAiBrO,SAAS,CAACkF,WAAV,CAAsB9E,MAAM,CAACiO,MAA7B,CAAjB;AACH,KAFD,MAGK;AACDrM,MAAAA,OAAO,CAACqM,MAAR,GAAiBjM,SAAjB;AACH;;AACD,QAAIhC,MAAM,CAAC6N,KAAP,KAAiB7L,SAAjB,IAA8BhC,MAAM,CAAC6N,KAAP,KAAiB,IAAnD,EAAyD;AACrDjM,MAAAA,OAAO,CAACiM,KAAR,GAAgB7N,MAAM,CAAC6N,KAAvB;AACH,KAFD,MAGK;AACDjM,MAAAA,OAAO,CAACiM,KAAR,GAAgB,CAAhB;AACH;;AACD,WAAOjM,OAAP;AACH;AAtE0B,CAAxB;AAwEP,IAAMsM,YAAY,GAAG;AAAEC,EAAAA,eAAe,EAAE;AAAnB,CAArB;AACA,OAAO,IAAMd,QAAQ,GAAG;AACpB1L,EAAAA,MADoB,kBACbC,OADa,EACsB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACkL,SAAR,KAAsB9K,SAA1B,EAAqC;AACjC8L,MAAAA,SAAS,CAACnM,MAAV,CAAiBC,OAAO,CAACkL,SAAzB,EAAoCjL,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAApC,EAA8DC,MAA9D;AACH;;AACD,QAAIR,OAAO,CAACuM,eAAR,KAA4B,IAAhC,EAAsC;AAClCtM,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBsF,IAAlB,CAAuB5F,OAAO,CAACuM,eAA/B;AACH;;AACD,WAAOtM,MAAP;AACH,GATmB;AAUpBoC,EAAAA,MAVoB,kBAUbC,KAVa,EAUNC,MAVM,EAUE;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQsM,YAAR,CAAb;;AACA,WAAO9J,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACkL,SAAR,GAAoBgB,SAAS,CAAC7J,MAAV,CAAiBG,MAAjB,EAAyBA,MAAM,CAAClC,MAAP,EAAzB,CAApB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACuM,eAAR,GAA0B/J,MAAM,CAACoD,IAAP,EAA1B;AACA;;AACJ;AACIpD,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAO7C,OAAP;AACH,GA7BmB;AA8BpB+C,EAAAA,QA9BoB,oBA8BX3E,MA9BW,EA8BH;AACb,QAAM4B,OAAO,qBAAQsM,YAAR,CAAb;;AACA,QAAIlO,MAAM,CAAC8M,SAAP,KAAqB9K,SAArB,IAAkChC,MAAM,CAAC8M,SAAP,KAAqB,IAA3D,EAAiE;AAC7DlL,MAAAA,OAAO,CAACkL,SAAR,GAAoBgB,SAAS,CAACnJ,QAAV,CAAmB3E,MAAM,CAAC8M,SAA1B,CAApB;AACH,KAFD,MAGK;AACDlL,MAAAA,OAAO,CAACkL,SAAR,GAAoB9K,SAApB;AACH;;AACD,QAAIhC,MAAM,CAACmO,eAAP,KAA2BnM,SAA3B,IACAhC,MAAM,CAACmO,eAAP,KAA2B,IAD/B,EACqC;AACjCvM,MAAAA,OAAO,CAACuM,eAAR,GAA0B1G,OAAO,CAACzH,MAAM,CAACmO,eAAR,CAAjC;AACH,KAHD,MAIK;AACDvM,MAAAA,OAAO,CAACuM,eAAR,GAA0B,KAA1B;AACH;;AACD,WAAOvM,OAAP;AACH,GA9CmB;AA+CpBgD,EAAAA,MA/CoB,kBA+CbhD,OA/Ca,EA+CJ;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACkL,SAAR,KAAsB9K,SAAtB,KACK6C,GAAG,CAACiI,SAAJ,GAAgBlL,OAAO,CAACkL,SAAR,GACXgB,SAAS,CAAClJ,MAAV,CAAiBhD,OAAO,CAACkL,SAAzB,CADW,GAEX9K,SAHV;AAIAJ,IAAAA,OAAO,CAACuM,eAAR,KAA4BnM,SAA5B,KACK6C,GAAG,CAACsJ,eAAJ,GAAsBvM,OAAO,CAACuM,eADnC;AAEA,WAAOtJ,GAAP;AACH,GAxDmB;AAyDpBC,EAAAA,WAzDoB,uBAyDR9E,MAzDQ,EAyDA;AAChB,QAAM4B,OAAO,qBAAQsM,YAAR,CAAb;;AACA,QAAIlO,MAAM,CAAC8M,SAAP,KAAqB9K,SAArB,IAAkChC,MAAM,CAAC8M,SAAP,KAAqB,IAA3D,EAAiE;AAC7DlL,MAAAA,OAAO,CAACkL,SAAR,GAAoBgB,SAAS,CAAChJ,WAAV,CAAsB9E,MAAM,CAAC8M,SAA7B,CAApB;AACH,KAFD,MAGK;AACDlL,MAAAA,OAAO,CAACkL,SAAR,GAAoB9K,SAApB;AACH;;AACD,QAAIhC,MAAM,CAACmO,eAAP,KAA2BnM,SAA3B,IACAhC,MAAM,CAACmO,eAAP,KAA2B,IAD/B,EACqC;AACjCvM,MAAAA,OAAO,CAACuM,eAAR,GAA0BnO,MAAM,CAACmO,eAAjC;AACH,KAHD,MAIK;AACDvM,MAAAA,OAAO,CAACuM,eAAR,GAA0B,KAA1B;AACH;;AACD,WAAOvM,OAAP;AACH;AAzEmB,CAAjB;AA2EP,IAAMwM,YAAY,GAAG;AAAElG,EAAAA,IAAI,EAAE,CAAR;AAAWb,EAAAA,MAAM,EAAE,CAAnB;AAAsBgH,EAAAA,gBAAgB,EAAE;AAAxC,CAArB;AACA,OAAO,IAAMrG,QAAQ,GAAG;AACpBrG,EAAAA,MADoB,kBACbC,OADa,EACsB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACsG,IAAR,KAAiB,CAArB,EAAwB;AACpBrG,MAAAA,MAAM,CAACK,MAAP,CAAc,CAAd,EAAiBkG,KAAjB,CAAuBxG,OAAO,CAACsG,IAA/B;AACH;;AACD,QAAItG,OAAO,CAACkL,SAAR,KAAsB9K,SAA1B,EAAqC;AACjC8L,MAAAA,SAAS,CAACnM,MAAV,CAAiBC,OAAO,CAACkL,SAAzB,EAAoCjL,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAApC,EAA8DC,MAA9D;AACH;;AACD,QAAIR,OAAO,CAACyF,MAAR,KAAmB,CAAvB,EAA0B;AACtBxF,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAACyF,MAAhC;AACH;;AACD,QAAIzF,OAAO,CAACqE,IAAR,KAAiBjE,SAArB,EAAgC;AAC5B3C,MAAAA,SAAS,CAACsC,MAAV,CAAiBuE,WAAW,CAACtE,OAAO,CAACqE,IAAT,CAA5B,EAA4CpE,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA5C,EAAsEC,MAAtE;AACH;;AACD,QAAIR,OAAO,CAACyM,gBAAR,KAA6B,CAAjC,EAAoC;AAChCxM,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBwE,KAAlB,CAAwB9E,OAAO,CAACyM,gBAAhC;AACH;;AACD,WAAOxM,MAAP;AACH,GAlBmB;AAmBpBoC,EAAAA,MAnBoB,kBAmBbC,KAnBa,EAmBNC,MAnBM,EAmBE;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQwM,YAAR,CAAb;;AACA,WAAOhK,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACsG,IAAR,GAAe9D,MAAM,CAACgE,KAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACIxG,UAAAA,OAAO,CAACkL,SAAR,GAAoBgB,SAAS,CAAC7J,MAAV,CAAiBG,MAAjB,EAAyBA,MAAM,CAAClC,MAAP,EAAzB,CAApB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACyF,MAAR,GAAiB5B,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAA7B;AACA;;AACJ,aAAK,CAAL;AACI9E,UAAAA,OAAO,CAACqE,IAAR,GAAeU,aAAa,CAACtH,SAAS,CAAC4E,MAAV,CAAiBG,MAAjB,EAAyBA,MAAM,CAAClC,MAAP,EAAzB,CAAD,CAA5B;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAACyM,gBAAR,GAA2B5I,YAAY,CAACrB,MAAM,CAACsC,KAAP,EAAD,CAAvC;AACA;;AACJ;AACItC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAlBR;AAoBH;;AACD,WAAO7C,OAAP;AACH,GA/CmB;AAgDpB+C,EAAAA,QAhDoB,oBAgDX3E,MAhDW,EAgDH;AACb,QAAM4B,OAAO,qBAAQwM,YAAR,CAAb;;AACA,QAAIpO,MAAM,CAACkI,IAAP,KAAgBlG,SAAhB,IAA6BhC,MAAM,CAACkI,IAAP,KAAgB,IAAjD,EAAuD;AACnDtG,MAAAA,OAAO,CAACsG,IAAR,GAAe5H,oBAAoB,CAACN,MAAM,CAACkI,IAAR,CAAnC;AACH,KAFD,MAGK;AACDtG,MAAAA,OAAO,CAACsG,IAAR,GAAe,CAAf;AACH;;AACD,QAAIlI,MAAM,CAAC8M,SAAP,KAAqB9K,SAArB,IAAkChC,MAAM,CAAC8M,SAAP,KAAqB,IAA3D,EAAiE;AAC7DlL,MAAAA,OAAO,CAACkL,SAAR,GAAoBgB,SAAS,CAACnJ,QAAV,CAAmB3E,MAAM,CAAC8M,SAA1B,CAApB;AACH,KAFD,MAGK;AACDlL,MAAAA,OAAO,CAACkL,SAAR,GAAoB9K,SAApB;AACH;;AACD,QAAIhC,MAAM,CAACqH,MAAP,KAAkBrF,SAAlB,IAA+BhC,MAAM,CAACqH,MAAP,KAAkB,IAArD,EAA2D;AACvDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB3B,MAAM,CAAC1F,MAAM,CAACqH,MAAR,CAAvB;AACH,KAFD,MAGK;AACDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIrH,MAAM,CAACiG,IAAP,KAAgBjE,SAAhB,IAA6BhC,MAAM,CAACiG,IAAP,KAAgB,IAAjD,EAAuD;AACnDrE,MAAAA,OAAO,CAACqE,IAAR,GAAeY,iBAAiB,CAAC7G,MAAM,CAACiG,IAAR,CAAhC;AACH,KAFD,MAGK;AACDrE,MAAAA,OAAO,CAACqE,IAAR,GAAejE,SAAf;AACH;;AACD,QAAIhC,MAAM,CAACqO,gBAAP,KAA4BrM,SAA5B,IACAhC,MAAM,CAACqO,gBAAP,KAA4B,IADhC,EACsC;AAClCzM,MAAAA,OAAO,CAACyM,gBAAR,GAA2B3I,MAAM,CAAC1F,MAAM,CAACqO,gBAAR,CAAjC;AACH,KAHD,MAIK;AACDzM,MAAAA,OAAO,CAACyM,gBAAR,GAA2B,CAA3B;AACH;;AACD,WAAOzM,OAAP;AACH,GAlFmB;AAmFpBgD,EAAAA,MAnFoB,kBAmFbhD,OAnFa,EAmFJ;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACsG,IAAR,KAAiBlG,SAAjB,KAA+B6C,GAAG,CAACqD,IAAJ,GAAWxH,kBAAkB,CAACkB,OAAO,CAACsG,IAAT,CAA5D;AACAtG,IAAAA,OAAO,CAACkL,SAAR,KAAsB9K,SAAtB,KACK6C,GAAG,CAACiI,SAAJ,GAAgBlL,OAAO,CAACkL,SAAR,GACXgB,SAAS,CAAClJ,MAAV,CAAiBhD,OAAO,CAACkL,SAAzB,CADW,GAEX9K,SAHV;AAIAJ,IAAAA,OAAO,CAACyF,MAAR,KAAmBrF,SAAnB,KAAiC6C,GAAG,CAACwC,MAAJ,GAAazF,OAAO,CAACyF,MAAtD;AACAzF,IAAAA,OAAO,CAACqE,IAAR,KAAiBjE,SAAjB,KACK6C,GAAG,CAACoB,IAAJ,GACGrE,OAAO,CAACqE,IAAR,KAAiBjE,SAAjB,GAA6BJ,OAAO,CAACqE,IAAR,CAAae,WAAb,EAA7B,GAA0D,IAFlE;AAGApF,IAAAA,OAAO,CAACyM,gBAAR,KAA6BrM,SAA7B,KACK6C,GAAG,CAACwJ,gBAAJ,GAAuBzM,OAAO,CAACyM,gBADpC;AAEA,WAAOxJ,GAAP;AACH,GAjGmB;AAkGpBC,EAAAA,WAlGoB,uBAkGR9E,MAlGQ,EAkGA;AAChB,QAAM4B,OAAO,qBAAQwM,YAAR,CAAb;;AACA,QAAIpO,MAAM,CAACkI,IAAP,KAAgBlG,SAAhB,IAA6BhC,MAAM,CAACkI,IAAP,KAAgB,IAAjD,EAAuD;AACnDtG,MAAAA,OAAO,CAACsG,IAAR,GAAelI,MAAM,CAACkI,IAAtB;AACH,KAFD,MAGK;AACDtG,MAAAA,OAAO,CAACsG,IAAR,GAAe,CAAf;AACH;;AACD,QAAIlI,MAAM,CAAC8M,SAAP,KAAqB9K,SAArB,IAAkChC,MAAM,CAAC8M,SAAP,KAAqB,IAA3D,EAAiE;AAC7DlL,MAAAA,OAAO,CAACkL,SAAR,GAAoBgB,SAAS,CAAChJ,WAAV,CAAsB9E,MAAM,CAAC8M,SAA7B,CAApB;AACH,KAFD,MAGK;AACDlL,MAAAA,OAAO,CAACkL,SAAR,GAAoB9K,SAApB;AACH;;AACD,QAAIhC,MAAM,CAACqH,MAAP,KAAkBrF,SAAlB,IAA+BhC,MAAM,CAACqH,MAAP,KAAkB,IAArD,EAA2D;AACvDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiBrH,MAAM,CAACqH,MAAxB;AACH,KAFD,MAGK;AACDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIrH,MAAM,CAACiG,IAAP,KAAgBjE,SAAhB,IAA6BhC,MAAM,CAACiG,IAAP,KAAgB,IAAjD,EAAuD;AACnDrE,MAAAA,OAAO,CAACqE,IAAR,GAAejG,MAAM,CAACiG,IAAtB;AACH,KAFD,MAGK;AACDrE,MAAAA,OAAO,CAACqE,IAAR,GAAejE,SAAf;AACH;;AACD,QAAIhC,MAAM,CAACqO,gBAAP,KAA4BrM,SAA5B,IACAhC,MAAM,CAACqO,gBAAP,KAA4B,IADhC,EACsC;AAClCzM,MAAAA,OAAO,CAACyM,gBAAR,GAA2BrO,MAAM,CAACqO,gBAAlC;AACH,KAHD,MAIK;AACDzM,MAAAA,OAAO,CAACyM,gBAAR,GAA2B,CAA3B;AACH;;AACD,WAAOzM,OAAP;AACH;AApImB,CAAjB;AAsIP,IAAM0M,YAAY,GAAG;AAAEjH,EAAAA,MAAM,EAAE,CAAV;AAAayB,EAAAA,MAAM,EAAE,CAArB;AAAwByF,EAAAA,MAAM,EAAE;AAAhC,CAArB;AACA,OAAO,IAAM5F,QAAQ,GAAG;AACpBhH,EAAAA,MADoB,kBACbC,OADa,EACsB;AAAA,QAA1BC,MAA0B,uEAAjBzC,MAAM,CAAC0C,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACyF,MAAR,KAAmB,CAAvB,EAA0B;AACtBxF,MAAAA,MAAM,CAACK,MAAP,CAAc,CAAd,EAAiBsD,MAAjB,CAAwB5D,OAAO,CAACyF,MAAhC;AACH;;AACD,QAAIzF,OAAO,CAACkH,MAAR,KAAmB,CAAvB,EAA0B;AACtBjH,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBA,MAAlB,CAAyBN,OAAO,CAACkH,MAAjC;AACH;;AACD,QAAIlH,OAAO,CAAC2M,MAAR,KAAmB,CAAvB,EAA0B;AACtB1M,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBA,MAAlB,CAAyBN,OAAO,CAAC2M,MAAjC;AACH;;AACD,QAAI3M,OAAO,CAAC+F,IAAR,CAAaxD,MAAb,KAAwB,CAA5B,EAA+B;AAC3BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAAC+F,IAAhC;AACH;;AACD,QAAI/F,OAAO,CAAC4M,QAAR,CAAiBrK,MAAjB,KAA4B,CAAhC,EAAmC;AAC/BtC,MAAAA,MAAM,CAACK,MAAP,CAAc,EAAd,EAAkBuE,KAAlB,CAAwB7E,OAAO,CAAC4M,QAAhC;AACH;;AACD,WAAO3M,MAAP;AACH,GAlBmB;AAmBpBoC,EAAAA,MAnBoB,kBAmBbC,KAnBa,EAmBNC,MAnBM,EAmBE;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIpF,MAAJ,CAAWiF,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKnC,SAAX,GAAuBoC,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMvC,OAAO,qBAAQ0M,YAAR,CAAb;;AACA,WAAOlK,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAAClC,MAAP,EAAZ;;AACA,cAAQuC,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACI7C,UAAAA,OAAO,CAACyF,MAAR,GAAiB5B,YAAY,CAACrB,MAAM,CAACoB,MAAP,EAAD,CAA7B;AACA;;AACJ,aAAK,CAAL;AACI5D,UAAAA,OAAO,CAACkH,MAAR,GAAiB1E,MAAM,CAAClC,MAAP,EAAjB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAAC2M,MAAR,GAAiBnK,MAAM,CAAClC,MAAP,EAAjB;AACA;;AACJ,aAAK,CAAL;AACIN,UAAAA,OAAO,CAAC+F,IAAR,GAAevD,MAAM,CAACqC,KAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACI7E,UAAAA,OAAO,CAAC4M,QAAR,GAAmBpK,MAAM,CAACqC,KAAP,EAAnB;AACA;;AACJ;AACIrC,UAAAA,MAAM,CAACM,QAAP,CAAgBD,GAAG,GAAG,CAAtB;AACA;AAlBR;AAoBH;;AACD,WAAO7C,OAAP;AACH,GA/CmB;AAgDpB+C,EAAAA,QAhDoB,oBAgDX3E,MAhDW,EAgDH;AACb,QAAM4B,OAAO,qBAAQ0M,YAAR,CAAb;;AACA,QAAItO,MAAM,CAACqH,MAAP,KAAkBrF,SAAlB,IAA+BhC,MAAM,CAACqH,MAAP,KAAkB,IAArD,EAA2D;AACvDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB3B,MAAM,CAAC1F,MAAM,CAACqH,MAAR,CAAvB;AACH,KAFD,MAGK;AACDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIrH,MAAM,CAAC8I,MAAP,KAAkB9G,SAAlB,IAA+BhC,MAAM,CAAC8I,MAAP,KAAkB,IAArD,EAA2D;AACvDlH,MAAAA,OAAO,CAACkH,MAAR,GAAiBpD,MAAM,CAAC1F,MAAM,CAAC8I,MAAR,CAAvB;AACH,KAFD,MAGK;AACDlH,MAAAA,OAAO,CAACkH,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAI9I,MAAM,CAACuO,MAAP,KAAkBvM,SAAlB,IAA+BhC,MAAM,CAACuO,MAAP,KAAkB,IAArD,EAA2D;AACvD3M,MAAAA,OAAO,CAAC2M,MAAR,GAAiB7I,MAAM,CAAC1F,MAAM,CAACuO,MAAR,CAAvB;AACH,KAFD,MAGK;AACD3M,MAAAA,OAAO,CAAC2M,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIvO,MAAM,CAAC2H,IAAP,KAAgB3F,SAAhB,IAA6BhC,MAAM,CAAC2H,IAAP,KAAgB,IAAjD,EAAuD;AACnD/F,MAAAA,OAAO,CAAC+F,IAAR,GAAeZ,eAAe,CAAC/G,MAAM,CAAC2H,IAAR,CAA9B;AACH;;AACD,QAAI3H,MAAM,CAACwO,QAAP,KAAoBxM,SAApB,IAAiChC,MAAM,CAACwO,QAAP,KAAoB,IAAzD,EAA+D;AAC3D5M,MAAAA,OAAO,CAAC4M,QAAR,GAAmBzH,eAAe,CAAC/G,MAAM,CAACwO,QAAR,CAAlC;AACH;;AACD,WAAO5M,OAAP;AACH,GA3EmB;AA4EpBgD,EAAAA,MA5EoB,kBA4EbhD,OA5Ea,EA4EJ;AACZ,QAAMiD,GAAG,GAAG,EAAZ;AACAjD,IAAAA,OAAO,CAACyF,MAAR,KAAmBrF,SAAnB,KAAiC6C,GAAG,CAACwC,MAAJ,GAAazF,OAAO,CAACyF,MAAtD;AACAzF,IAAAA,OAAO,CAACkH,MAAR,KAAmB9G,SAAnB,KAAiC6C,GAAG,CAACiE,MAAJ,GAAalH,OAAO,CAACkH,MAAtD;AACAlH,IAAAA,OAAO,CAAC2M,MAAR,KAAmBvM,SAAnB,KAAiC6C,GAAG,CAAC0J,MAAJ,GAAa3M,OAAO,CAAC2M,MAAtD;AACA3M,IAAAA,OAAO,CAAC+F,IAAR,KAAiB3F,SAAjB,KACK6C,GAAG,CAAC8C,IAAJ,GAAWT,eAAe,CAACtF,OAAO,CAAC+F,IAAR,KAAiB3F,SAAjB,GAA6BJ,OAAO,CAAC+F,IAArC,GAA4C,IAAItD,UAAJ,EAA7C,CAD/B;AAEAzC,IAAAA,OAAO,CAAC4M,QAAR,KAAqBxM,SAArB,KACK6C,GAAG,CAAC2J,QAAJ,GAAetH,eAAe,CAACtF,OAAO,CAAC4M,QAAR,KAAqBxM,SAArB,GAAiCJ,OAAO,CAAC4M,QAAzC,GAAoD,IAAInK,UAAJ,EAArD,CADnC;AAEA,WAAOQ,GAAP;AACH,GAtFmB;AAuFpBC,EAAAA,WAvFoB,uBAuFR9E,MAvFQ,EAuFA;AAChB,QAAM4B,OAAO,qBAAQ0M,YAAR,CAAb;;AACA,QAAItO,MAAM,CAACqH,MAAP,KAAkBrF,SAAlB,IAA+BhC,MAAM,CAACqH,MAAP,KAAkB,IAArD,EAA2D;AACvDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiBrH,MAAM,CAACqH,MAAxB;AACH,KAFD,MAGK;AACDzF,MAAAA,OAAO,CAACyF,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIrH,MAAM,CAAC8I,MAAP,KAAkB9G,SAAlB,IAA+BhC,MAAM,CAAC8I,MAAP,KAAkB,IAArD,EAA2D;AACvDlH,MAAAA,OAAO,CAACkH,MAAR,GAAiB9I,MAAM,CAAC8I,MAAxB;AACH,KAFD,MAGK;AACDlH,MAAAA,OAAO,CAACkH,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAI9I,MAAM,CAACuO,MAAP,KAAkBvM,SAAlB,IAA+BhC,MAAM,CAACuO,MAAP,KAAkB,IAArD,EAA2D;AACvD3M,MAAAA,OAAO,CAAC2M,MAAR,GAAiBvO,MAAM,CAACuO,MAAxB;AACH,KAFD,MAGK;AACD3M,MAAAA,OAAO,CAAC2M,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAIvO,MAAM,CAAC2H,IAAP,KAAgB3F,SAAhB,IAA6BhC,MAAM,CAAC2H,IAAP,KAAgB,IAAjD,EAAuD;AACnD/F,MAAAA,OAAO,CAAC+F,IAAR,GAAe3H,MAAM,CAAC2H,IAAtB;AACH,KAFD,MAGK;AACD/F,MAAAA,OAAO,CAAC+F,IAAR,GAAe,IAAItD,UAAJ,EAAf;AACH;;AACD,QAAIrE,MAAM,CAACwO,QAAP,KAAoBxM,SAApB,IAAiChC,MAAM,CAACwO,QAAP,KAAoB,IAAzD,EAA+D;AAC3D5M,MAAAA,OAAO,CAAC4M,QAAR,GAAmBxO,MAAM,CAACwO,QAA1B;AACH,KAFD,MAGK;AACD5M,MAAAA,OAAO,CAAC4M,QAAR,GAAmB,IAAInK,UAAJ,EAAnB;AACH;;AACD,WAAOzC,OAAP;AACH;AAxHmB,CAAjB;AA0HP,WAAa6M,yBAAb;AACI,qCAAYC,GAAZ,EAAiB;AAAA;;AACb,SAAKA,GAAL,GAAWA,GAAX;AACH;;AAHL;AAAA;AAAA,WAII,cAAKC,OAAL,EAAc;AACV,UAAMpH,IAAI,GAAGtF,WAAW,CAACN,MAAZ,CAAmBgN,OAAnB,EAA4BC,MAA5B,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,MAApD,EAA4DpH,IAA5D,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAUgC,YAAY,CAACtF,MAAb,CAAoB,IAAIhF,MAAJ,CAAWsI,IAAX,CAApB,CAAV;AAAA,OAAb,CAAP;AACH;AARL;AAAA;AAAA,WASI,eAAMoH,OAAN,EAAe;AACX,UAAMpH,IAAI,GAAGjF,YAAY,CAACX,MAAb,CAAoBgN,OAApB,EAA6BC,MAA7B,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,OAApD,EAA6DpH,IAA7D,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAUiC,aAAa,CAACvF,MAAd,CAAqB,IAAIhF,MAAJ,CAAWsI,IAAX,CAArB,CAAV;AAAA,OAAb,CAAP;AACH;AAbL;AAAA;AAAA,WAcI,cAAKoH,OAAL,EAAc;AACV,UAAMpH,IAAI,GAAG/E,WAAW,CAACb,MAAZ,CAAmBgN,OAAnB,EAA4BC,MAA5B,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,MAApD,EAA4DpH,IAA5D,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAUkC,YAAY,CAACxF,MAAb,CAAoB,IAAIhF,MAAJ,CAAWsI,IAAX,CAApB,CAAV;AAAA,OAAb,CAAP;AACH;AAlBL;AAAA;AAAA,WAmBI,mBAAUoH,OAAV,EAAmB;AACf,UAAMpH,IAAI,GAAG7E,gBAAgB,CAACf,MAAjB,CAAwBgN,OAAxB,EAAiCC,MAAjC,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,WAApD,EAAiEpH,IAAjE,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAUmC,iBAAiB,CAACzF,MAAlB,CAAyB,IAAIhF,MAAJ,CAAWsI,IAAX,CAAzB,CAAV;AAAA,OAAb,CAAP;AACH;AAvBL;AAAA;AAAA,WAwBI,mBAAUoH,OAAV,EAAmB;AACf,UAAMpH,IAAI,GAAGnE,gBAAgB,CAACzB,MAAjB,CAAwBgN,OAAxB,EAAiCC,MAAjC,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,WAApD,EAAiEpH,IAAjE,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAUwC,iBAAiB,CAAC9F,MAAlB,CAAyB,IAAIhF,MAAJ,CAAWsI,IAAX,CAAzB,CAAV;AAAA,OAAb,CAAP;AACH;AA5BL;AAAA;AAAA,WA6BI,iBAAQoH,OAAR,EAAiB;AACb,UAAMpH,IAAI,GAAGrE,cAAc,CAACvB,MAAf,CAAsBgN,OAAtB,EAA+BC,MAA/B,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,SAApD,EAA+DpH,IAA/D,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAUuC,eAAe,CAAC7F,MAAhB,CAAuB,IAAIhF,MAAJ,CAAWsI,IAAX,CAAvB,CAAV;AAAA,OAAb,CAAP;AACH;AAjCL;AAAA;AAAA,WAkCI,eAAMoH,OAAN,EAAe;AACX,UAAMpH,IAAI,GAAGzE,YAAY,CAACnB,MAAb,CAAoBgN,OAApB,EAA6BC,MAA7B,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,OAApD,EAA6DpH,IAA7D,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAUqC,aAAa,CAAC3F,MAAd,CAAqB,IAAIhF,MAAJ,CAAWsI,IAAX,CAArB,CAAV;AAAA,OAAb,CAAP;AACH;AAtCL;AAAA;AAAA,WAuCI,gBAAOoH,OAAP,EAAgB;AACZ,UAAMpH,IAAI,GAAG/D,aAAa,CAAC7B,MAAd,CAAqBgN,OAArB,EAA8BC,MAA9B,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,QAApD,EAA8DpH,IAA9D,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAU0C,cAAc,CAAChG,MAAf,CAAsB,IAAIhF,MAAJ,CAAWsI,IAAX,CAAtB,CAAV;AAAA,OAAb,CAAP;AACH;AA3CL;AAAA;AAAA,WA4CI,mBAAUoH,OAAV,EAAmB;AACf,UAAMpH,IAAI,GAAG3E,gBAAgB,CAACjB,MAAjB,CAAwBgN,OAAxB,EAAiCC,MAAjC,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,WAApD,EAAiEpH,IAAjE,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAUoC,iBAAiB,CAAC1F,MAAlB,CAAyB,IAAIhF,MAAJ,CAAWsI,IAAX,CAAzB,CAAV;AAAA,OAAb,CAAP;AACH;AAhDL;AAAA;AAAA,WAiDI,oBAAWoH,OAAX,EAAoB;AAChB,UAAMpH,IAAI,GAAGvE,iBAAiB,CAACrB,MAAlB,CAAyBgN,OAAzB,EAAkCC,MAAlC,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,YAApD,EAAkEpH,IAAlE,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAUsC,kBAAkB,CAAC5F,MAAnB,CAA0B,IAAIhF,MAAJ,CAAWsI,IAAX,CAA1B,CAAV;AAAA,OAAb,CAAP;AACH;AArDL;AAAA;AAAA,WAsDI,kBAASoH,OAAT,EAAkB;AACd,UAAMpH,IAAI,GAAGjE,eAAe,CAAC3B,MAAhB,CAAuBgN,OAAvB,EAAgCC,MAAhC,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,UAApD,EAAgEpH,IAAhE,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAUyC,gBAAgB,CAAC/F,MAAjB,CAAwB,IAAIhF,MAAJ,CAAWsI,IAAX,CAAxB,CAAV;AAAA,OAAb,CAAP;AACH;AA1DL;AAAA;AAAA,WA2DI,uBAAcoH,OAAd,EAAuB;AACnB,UAAMpH,IAAI,GAAG7D,oBAAoB,CAAC/B,MAArB,CAA4BgN,OAA5B,EAAqCC,MAArC,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,eAApD,EAAqEpH,IAArE,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAU2C,qBAAqB,CAACjG,MAAtB,CAA6B,IAAIhF,MAAJ,CAAWsI,IAAX,CAA7B,CAAV;AAAA,OAAb,CAAP;AACH;AA/DL;AAAA;AAAA,WAgEI,uBAAcoH,OAAd,EAAuB;AACnB,UAAMpH,IAAI,GAAG3D,oBAAoB,CAACjC,MAArB,CAA4BgN,OAA5B,EAAqCC,MAArC,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,eAApD,EAAqEpH,IAArE,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAU4C,qBAAqB,CAAClG,MAAtB,CAA6B,IAAIhF,MAAJ,CAAWsI,IAAX,CAA7B,CAAV;AAAA,OAAb,CAAP;AACH;AApEL;AAAA;AAAA,WAqEI,2BAAkBoH,OAAlB,EAA2B;AACvB,UAAMpH,IAAI,GAAGzD,wBAAwB,CAACnC,MAAzB,CAAgCgN,OAAhC,EAAyCC,MAAzC,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,mBAApD,EAAyEpH,IAAzE,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAU6C,yBAAyB,CAACnG,MAA1B,CAAiC,IAAIhF,MAAJ,CAAWsI,IAAX,CAAjC,CAAV;AAAA,OAAb,CAAP;AACH;AAzEL;AAAA;AAAA,WA0EI,4BAAmBoH,OAAnB,EAA4B;AACxB,UAAMpH,IAAI,GAAGvD,yBAAyB,CAACrC,MAA1B,CAAiCgN,OAAjC,EAA0CC,MAA1C,EAAb;AACA,UAAMC,OAAO,GAAG,KAAKH,GAAL,CAASC,OAAT,CAAiB,iCAAjB,EAAoD,oBAApD,EAA0EpH,IAA1E,CAAhB;AACA,aAAOsH,OAAO,CAACC,IAAR,CAAa,UAACvH,IAAD;AAAA,eAAU8C,0BAA0B,CAACpG,MAA3B,CAAkC,IAAIhF,MAAJ,CAAWsI,IAAX,CAAlC,CAAV;AAAA,OAAb,CAAP;AACH;AA9EL;;AAAA;AAAA;;AAgFA,IAAIwH,UAAU,GAAI,YAAM;AACpB,MAAI,OAAOA,UAAP,KAAsB,WAA1B,EACI,OAAOA,UAAP;AACJ,MAAI,OAAOC,IAAP,KAAgB,WAApB,EACI,OAAOA,IAAP;AACJ,MAAI,OAAOC,MAAP,KAAkB,WAAtB,EACI,OAAOA,MAAP;AACJ,MAAI,OAAOC,MAAP,KAAkB,WAAtB,EACI,OAAOA,MAAP;AACJ,QAAM,gCAAN;AACH,CAVgB,EAAjB;;AAWA,IAAMC,IAAI,GAAGJ,UAAU,CAACI,IAAX,IACR,UAACC,GAAD;AAAA,SAASL,UAAU,CAACM,MAAX,CAAkBC,IAAlB,CAAuBF,GAAvB,EAA4B,QAA5B,EAAsCG,QAAtC,CAA+C,QAA/C,CAAT;AAAA,CADL;;AAEA,SAASxI,eAAT,CAAyBqI,GAAzB,EAA8B;AAC1B,MAAMI,GAAG,GAAGL,IAAI,CAACC,GAAD,CAAhB;AACA,MAAMK,GAAG,GAAG,IAAIpL,UAAJ,CAAemL,GAAG,CAACrL,MAAnB,CAAZ;;AACA,OAAK,IAAIuL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,GAAG,CAACrL,MAAxB,EAAgC,EAAEuL,CAAlC,EAAqC;AACjCD,IAAAA,GAAG,CAACC,CAAD,CAAH,GAASF,GAAG,CAACG,UAAJ,CAAeD,CAAf,CAAT;AACH;;AACD,SAAOD,GAAP;AACH;;AACD,IAAMG,IAAI,GAAGb,UAAU,CAACa,IAAX,IACR,UAACJ,GAAD;AAAA,SAAST,UAAU,CAACM,MAAX,CAAkBC,IAAlB,CAAuBE,GAAvB,EAA4B,QAA5B,EAAsCD,QAAtC,CAA+C,QAA/C,CAAT;AAAA,CADL;;AAEA,SAASrI,eAAT,CAAyBuI,GAAzB,EAA8B;AAC1B,MAAMD,GAAG,GAAG,EAAZ;;AACA,OAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,GAAG,CAACI,UAAxB,EAAoC,EAAEH,CAAtC,EAAyC;AACrCF,IAAAA,GAAG,CAAC5I,IAAJ,CAAS3B,MAAM,CAAC6K,YAAP,CAAoBL,GAAG,CAACC,CAAD,CAAvB,CAAT;AACH;;AACD,SAAOE,IAAI,CAACJ,GAAG,CAACO,IAAJ,CAAS,EAAT,CAAD,CAAX;AACH;;AACD,SAAS7J,WAAT,CAAqB8J,IAArB,EAA2B;AACvB,MAAMC,OAAO,GAAGD,IAAI,CAACE,OAAL,KAAiB,IAAjC;AACA,MAAMC,KAAK,GAAIH,IAAI,CAACE,OAAL,KAAiB,IAAlB,GAA0B,OAAxC;AACA,SAAO;AAAED,IAAAA,OAAO,EAAPA,OAAF;AAAWE,IAAAA,KAAK,EAALA;AAAX,GAAP;AACH;;AACD,SAASxJ,aAAT,CAAuByJ,CAAvB,EAA0B;AACtB,MAAIC,MAAM,GAAGD,CAAC,CAACH,OAAF,GAAY,IAAzB;AACAI,EAAAA,MAAM,IAAID,CAAC,CAACD,KAAF,GAAU,OAApB;AACA,SAAO,IAAIG,IAAJ,CAASD,MAAT,CAAP;AACH;;AACD,SAASxJ,iBAAT,CAA2B0J,CAA3B,EAA8B;AAC1B,MAAIA,CAAC,YAAYD,IAAjB,EAAuB;AACnB,WAAOC,CAAP;AACH,GAFD,MAGK,IAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B;AAC5B,WAAO,IAAID,IAAJ,CAASC,CAAT,CAAP;AACH,GAFI,MAGA;AACD,WAAO5J,aAAa,CAACtH,SAAS,CAACsF,QAAV,CAAmB4L,CAAnB,CAAD,CAApB;AACH;AACJ;;AACD,SAAS9K,YAAT,CAAsB+K,IAAtB,EAA4B;AACxB,MAAIA,IAAI,CAACC,EAAL,CAAQ/K,MAAM,CAACgL,gBAAf,CAAJ,EAAsC;AAClC,UAAM,IAAI3B,UAAU,CAAC4B,KAAf,CAAqB,8CAArB,CAAN;AACH;;AACD,SAAOH,IAAI,CAACI,QAAL,EAAP;AACH;;AACD,IAAI1R,IAAI,CAACI,IAAL,KAAcA,IAAlB,EAAwB;AACpBJ,EAAAA,IAAI,CAACI,IAAL,GAAYA,IAAZ;AACAH,EAAAA,SAAS;AACZ","sourcesContent":["/* eslint-disable */\nimport { Reader, util, configure, Writer } from \"protobufjs/minimal\";\nimport { Timestamp } from \"../../google/protobuf/timestamp\";\nimport * as Long from \"long\";\nimport { Header } from \"../../tendermint/types/types\";\nimport { ProofOps } from \"../../tendermint/crypto/proof\";\nimport { EvidenceParams, ValidatorParams, VersionParams, } from \"../../tendermint/types/params\";\nimport { PublicKey } from \"../../tendermint/crypto/keys\";\nexport const protobufPackage = \"tendermint.abci\";\nexport var CheckTxType;\n(function (CheckTxType) {\n    CheckTxType[CheckTxType[\"NEW\"] = 0] = \"NEW\";\n    CheckTxType[CheckTxType[\"RECHECK\"] = 1] = \"RECHECK\";\n    CheckTxType[CheckTxType[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(CheckTxType || (CheckTxType = {}));\nexport function checkTxTypeFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"NEW\":\n            return CheckTxType.NEW;\n        case 1:\n        case \"RECHECK\":\n            return CheckTxType.RECHECK;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return CheckTxType.UNRECOGNIZED;\n    }\n}\nexport function checkTxTypeToJSON(object) {\n    switch (object) {\n        case CheckTxType.NEW:\n            return \"NEW\";\n        case CheckTxType.RECHECK:\n            return \"RECHECK\";\n        default:\n            return \"UNKNOWN\";\n    }\n}\nexport var EvidenceType;\n(function (EvidenceType) {\n    EvidenceType[EvidenceType[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    EvidenceType[EvidenceType[\"DUPLICATE_VOTE\"] = 1] = \"DUPLICATE_VOTE\";\n    EvidenceType[EvidenceType[\"LIGHT_CLIENT_ATTACK\"] = 2] = \"LIGHT_CLIENT_ATTACK\";\n    EvidenceType[EvidenceType[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(EvidenceType || (EvidenceType = {}));\nexport function evidenceTypeFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"UNKNOWN\":\n            return EvidenceType.UNKNOWN;\n        case 1:\n        case \"DUPLICATE_VOTE\":\n            return EvidenceType.DUPLICATE_VOTE;\n        case 2:\n        case \"LIGHT_CLIENT_ATTACK\":\n            return EvidenceType.LIGHT_CLIENT_ATTACK;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return EvidenceType.UNRECOGNIZED;\n    }\n}\nexport function evidenceTypeToJSON(object) {\n    switch (object) {\n        case EvidenceType.UNKNOWN:\n            return \"UNKNOWN\";\n        case EvidenceType.DUPLICATE_VOTE:\n            return \"DUPLICATE_VOTE\";\n        case EvidenceType.LIGHT_CLIENT_ATTACK:\n            return \"LIGHT_CLIENT_ATTACK\";\n        default:\n            return \"UNKNOWN\";\n    }\n}\nexport var ResponseOfferSnapshot_Result;\n(function (ResponseOfferSnapshot_Result) {\n    /** UNKNOWN - Unknown result, abort all snapshot restoration */\n    ResponseOfferSnapshot_Result[ResponseOfferSnapshot_Result[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    /** ACCEPT - Snapshot accepted, apply chunks */\n    ResponseOfferSnapshot_Result[ResponseOfferSnapshot_Result[\"ACCEPT\"] = 1] = \"ACCEPT\";\n    /** ABORT - Abort all snapshot restoration */\n    ResponseOfferSnapshot_Result[ResponseOfferSnapshot_Result[\"ABORT\"] = 2] = \"ABORT\";\n    /** REJECT - Reject this specific snapshot, try others */\n    ResponseOfferSnapshot_Result[ResponseOfferSnapshot_Result[\"REJECT\"] = 3] = \"REJECT\";\n    /** REJECT_FORMAT - Reject all snapshots of this format, try others */\n    ResponseOfferSnapshot_Result[ResponseOfferSnapshot_Result[\"REJECT_FORMAT\"] = 4] = \"REJECT_FORMAT\";\n    /** REJECT_SENDER - Reject all snapshots from the sender(s), try others */\n    ResponseOfferSnapshot_Result[ResponseOfferSnapshot_Result[\"REJECT_SENDER\"] = 5] = \"REJECT_SENDER\";\n    ResponseOfferSnapshot_Result[ResponseOfferSnapshot_Result[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ResponseOfferSnapshot_Result || (ResponseOfferSnapshot_Result = {}));\nexport function responseOfferSnapshot_ResultFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"UNKNOWN\":\n            return ResponseOfferSnapshot_Result.UNKNOWN;\n        case 1:\n        case \"ACCEPT\":\n            return ResponseOfferSnapshot_Result.ACCEPT;\n        case 2:\n        case \"ABORT\":\n            return ResponseOfferSnapshot_Result.ABORT;\n        case 3:\n        case \"REJECT\":\n            return ResponseOfferSnapshot_Result.REJECT;\n        case 4:\n        case \"REJECT_FORMAT\":\n            return ResponseOfferSnapshot_Result.REJECT_FORMAT;\n        case 5:\n        case \"REJECT_SENDER\":\n            return ResponseOfferSnapshot_Result.REJECT_SENDER;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ResponseOfferSnapshot_Result.UNRECOGNIZED;\n    }\n}\nexport function responseOfferSnapshot_ResultToJSON(object) {\n    switch (object) {\n        case ResponseOfferSnapshot_Result.UNKNOWN:\n            return \"UNKNOWN\";\n        case ResponseOfferSnapshot_Result.ACCEPT:\n            return \"ACCEPT\";\n        case ResponseOfferSnapshot_Result.ABORT:\n            return \"ABORT\";\n        case ResponseOfferSnapshot_Result.REJECT:\n            return \"REJECT\";\n        case ResponseOfferSnapshot_Result.REJECT_FORMAT:\n            return \"REJECT_FORMAT\";\n        case ResponseOfferSnapshot_Result.REJECT_SENDER:\n            return \"REJECT_SENDER\";\n        default:\n            return \"UNKNOWN\";\n    }\n}\nexport var ResponseApplySnapshotChunk_Result;\n(function (ResponseApplySnapshotChunk_Result) {\n    /** UNKNOWN - Unknown result, abort all snapshot restoration */\n    ResponseApplySnapshotChunk_Result[ResponseApplySnapshotChunk_Result[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    /** ACCEPT - Chunk successfully accepted */\n    ResponseApplySnapshotChunk_Result[ResponseApplySnapshotChunk_Result[\"ACCEPT\"] = 1] = \"ACCEPT\";\n    /** ABORT - Abort all snapshot restoration */\n    ResponseApplySnapshotChunk_Result[ResponseApplySnapshotChunk_Result[\"ABORT\"] = 2] = \"ABORT\";\n    /** RETRY - Retry chunk (combine with refetch and reject) */\n    ResponseApplySnapshotChunk_Result[ResponseApplySnapshotChunk_Result[\"RETRY\"] = 3] = \"RETRY\";\n    /** RETRY_SNAPSHOT - Retry snapshot (combine with refetch and reject) */\n    ResponseApplySnapshotChunk_Result[ResponseApplySnapshotChunk_Result[\"RETRY_SNAPSHOT\"] = 4] = \"RETRY_SNAPSHOT\";\n    /** REJECT_SNAPSHOT - Reject this snapshot, try others */\n    ResponseApplySnapshotChunk_Result[ResponseApplySnapshotChunk_Result[\"REJECT_SNAPSHOT\"] = 5] = \"REJECT_SNAPSHOT\";\n    ResponseApplySnapshotChunk_Result[ResponseApplySnapshotChunk_Result[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ResponseApplySnapshotChunk_Result || (ResponseApplySnapshotChunk_Result = {}));\nexport function responseApplySnapshotChunk_ResultFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"UNKNOWN\":\n            return ResponseApplySnapshotChunk_Result.UNKNOWN;\n        case 1:\n        case \"ACCEPT\":\n            return ResponseApplySnapshotChunk_Result.ACCEPT;\n        case 2:\n        case \"ABORT\":\n            return ResponseApplySnapshotChunk_Result.ABORT;\n        case 3:\n        case \"RETRY\":\n            return ResponseApplySnapshotChunk_Result.RETRY;\n        case 4:\n        case \"RETRY_SNAPSHOT\":\n            return ResponseApplySnapshotChunk_Result.RETRY_SNAPSHOT;\n        case 5:\n        case \"REJECT_SNAPSHOT\":\n            return ResponseApplySnapshotChunk_Result.REJECT_SNAPSHOT;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ResponseApplySnapshotChunk_Result.UNRECOGNIZED;\n    }\n}\nexport function responseApplySnapshotChunk_ResultToJSON(object) {\n    switch (object) {\n        case ResponseApplySnapshotChunk_Result.UNKNOWN:\n            return \"UNKNOWN\";\n        case ResponseApplySnapshotChunk_Result.ACCEPT:\n            return \"ACCEPT\";\n        case ResponseApplySnapshotChunk_Result.ABORT:\n            return \"ABORT\";\n        case ResponseApplySnapshotChunk_Result.RETRY:\n            return \"RETRY\";\n        case ResponseApplySnapshotChunk_Result.RETRY_SNAPSHOT:\n            return \"RETRY_SNAPSHOT\";\n        case ResponseApplySnapshotChunk_Result.REJECT_SNAPSHOT:\n            return \"REJECT_SNAPSHOT\";\n        default:\n            return \"UNKNOWN\";\n    }\n}\nconst baseRequest = {};\nexport const Request = {\n    encode(message, writer = Writer.create()) {\n        if (message.echo !== undefined) {\n            RequestEcho.encode(message.echo, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.flush !== undefined) {\n            RequestFlush.encode(message.flush, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.info !== undefined) {\n            RequestInfo.encode(message.info, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.setOption !== undefined) {\n            RequestSetOption.encode(message.setOption, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.initChain !== undefined) {\n            RequestInitChain.encode(message.initChain, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.query !== undefined) {\n            RequestQuery.encode(message.query, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.beginBlock !== undefined) {\n            RequestBeginBlock.encode(message.beginBlock, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.checkTx !== undefined) {\n            RequestCheckTx.encode(message.checkTx, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.deliverTx !== undefined) {\n            RequestDeliverTx.encode(message.deliverTx, writer.uint32(74).fork()).ldelim();\n        }\n        if (message.endBlock !== undefined) {\n            RequestEndBlock.encode(message.endBlock, writer.uint32(82).fork()).ldelim();\n        }\n        if (message.commit !== undefined) {\n            RequestCommit.encode(message.commit, writer.uint32(90).fork()).ldelim();\n        }\n        if (message.listSnapshots !== undefined) {\n            RequestListSnapshots.encode(message.listSnapshots, writer.uint32(98).fork()).ldelim();\n        }\n        if (message.offerSnapshot !== undefined) {\n            RequestOfferSnapshot.encode(message.offerSnapshot, writer.uint32(106).fork()).ldelim();\n        }\n        if (message.loadSnapshotChunk !== undefined) {\n            RequestLoadSnapshotChunk.encode(message.loadSnapshotChunk, writer.uint32(114).fork()).ldelim();\n        }\n        if (message.applySnapshotChunk !== undefined) {\n            RequestApplySnapshotChunk.encode(message.applySnapshotChunk, writer.uint32(122).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequest };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.echo = RequestEcho.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.flush = RequestFlush.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.info = RequestInfo.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.setOption = RequestSetOption.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.initChain = RequestInitChain.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.query = RequestQuery.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.beginBlock = RequestBeginBlock.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.checkTx = RequestCheckTx.decode(reader, reader.uint32());\n                    break;\n                case 9:\n                    message.deliverTx = RequestDeliverTx.decode(reader, reader.uint32());\n                    break;\n                case 10:\n                    message.endBlock = RequestEndBlock.decode(reader, reader.uint32());\n                    break;\n                case 11:\n                    message.commit = RequestCommit.decode(reader, reader.uint32());\n                    break;\n                case 12:\n                    message.listSnapshots = RequestListSnapshots.decode(reader, reader.uint32());\n                    break;\n                case 13:\n                    message.offerSnapshot = RequestOfferSnapshot.decode(reader, reader.uint32());\n                    break;\n                case 14:\n                    message.loadSnapshotChunk = RequestLoadSnapshotChunk.decode(reader, reader.uint32());\n                    break;\n                case 15:\n                    message.applySnapshotChunk = RequestApplySnapshotChunk.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequest };\n        if (object.echo !== undefined && object.echo !== null) {\n            message.echo = RequestEcho.fromJSON(object.echo);\n        }\n        else {\n            message.echo = undefined;\n        }\n        if (object.flush !== undefined && object.flush !== null) {\n            message.flush = RequestFlush.fromJSON(object.flush);\n        }\n        else {\n            message.flush = undefined;\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = RequestInfo.fromJSON(object.info);\n        }\n        else {\n            message.info = undefined;\n        }\n        if (object.setOption !== undefined && object.setOption !== null) {\n            message.setOption = RequestSetOption.fromJSON(object.setOption);\n        }\n        else {\n            message.setOption = undefined;\n        }\n        if (object.initChain !== undefined && object.initChain !== null) {\n            message.initChain = RequestInitChain.fromJSON(object.initChain);\n        }\n        else {\n            message.initChain = undefined;\n        }\n        if (object.query !== undefined && object.query !== null) {\n            message.query = RequestQuery.fromJSON(object.query);\n        }\n        else {\n            message.query = undefined;\n        }\n        if (object.beginBlock !== undefined && object.beginBlock !== null) {\n            message.beginBlock = RequestBeginBlock.fromJSON(object.beginBlock);\n        }\n        else {\n            message.beginBlock = undefined;\n        }\n        if (object.checkTx !== undefined && object.checkTx !== null) {\n            message.checkTx = RequestCheckTx.fromJSON(object.checkTx);\n        }\n        else {\n            message.checkTx = undefined;\n        }\n        if (object.deliverTx !== undefined && object.deliverTx !== null) {\n            message.deliverTx = RequestDeliverTx.fromJSON(object.deliverTx);\n        }\n        else {\n            message.deliverTx = undefined;\n        }\n        if (object.endBlock !== undefined && object.endBlock !== null) {\n            message.endBlock = RequestEndBlock.fromJSON(object.endBlock);\n        }\n        else {\n            message.endBlock = undefined;\n        }\n        if (object.commit !== undefined && object.commit !== null) {\n            message.commit = RequestCommit.fromJSON(object.commit);\n        }\n        else {\n            message.commit = undefined;\n        }\n        if (object.listSnapshots !== undefined && object.listSnapshots !== null) {\n            message.listSnapshots = RequestListSnapshots.fromJSON(object.listSnapshots);\n        }\n        else {\n            message.listSnapshots = undefined;\n        }\n        if (object.offerSnapshot !== undefined && object.offerSnapshot !== null) {\n            message.offerSnapshot = RequestOfferSnapshot.fromJSON(object.offerSnapshot);\n        }\n        else {\n            message.offerSnapshot = undefined;\n        }\n        if (object.loadSnapshotChunk !== undefined &&\n            object.loadSnapshotChunk !== null) {\n            message.loadSnapshotChunk = RequestLoadSnapshotChunk.fromJSON(object.loadSnapshotChunk);\n        }\n        else {\n            message.loadSnapshotChunk = undefined;\n        }\n        if (object.applySnapshotChunk !== undefined &&\n            object.applySnapshotChunk !== null) {\n            message.applySnapshotChunk = RequestApplySnapshotChunk.fromJSON(object.applySnapshotChunk);\n        }\n        else {\n            message.applySnapshotChunk = undefined;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.echo !== undefined &&\n            (obj.echo = message.echo ? RequestEcho.toJSON(message.echo) : undefined);\n        message.flush !== undefined &&\n            (obj.flush = message.flush\n                ? RequestFlush.toJSON(message.flush)\n                : undefined);\n        message.info !== undefined &&\n            (obj.info = message.info ? RequestInfo.toJSON(message.info) : undefined);\n        message.setOption !== undefined &&\n            (obj.setOption = message.setOption\n                ? RequestSetOption.toJSON(message.setOption)\n                : undefined);\n        message.initChain !== undefined &&\n            (obj.initChain = message.initChain\n                ? RequestInitChain.toJSON(message.initChain)\n                : undefined);\n        message.query !== undefined &&\n            (obj.query = message.query\n                ? RequestQuery.toJSON(message.query)\n                : undefined);\n        message.beginBlock !== undefined &&\n            (obj.beginBlock = message.beginBlock\n                ? RequestBeginBlock.toJSON(message.beginBlock)\n                : undefined);\n        message.checkTx !== undefined &&\n            (obj.checkTx = message.checkTx\n                ? RequestCheckTx.toJSON(message.checkTx)\n                : undefined);\n        message.deliverTx !== undefined &&\n            (obj.deliverTx = message.deliverTx\n                ? RequestDeliverTx.toJSON(message.deliverTx)\n                : undefined);\n        message.endBlock !== undefined &&\n            (obj.endBlock = message.endBlock\n                ? RequestEndBlock.toJSON(message.endBlock)\n                : undefined);\n        message.commit !== undefined &&\n            (obj.commit = message.commit\n                ? RequestCommit.toJSON(message.commit)\n                : undefined);\n        message.listSnapshots !== undefined &&\n            (obj.listSnapshots = message.listSnapshots\n                ? RequestListSnapshots.toJSON(message.listSnapshots)\n                : undefined);\n        message.offerSnapshot !== undefined &&\n            (obj.offerSnapshot = message.offerSnapshot\n                ? RequestOfferSnapshot.toJSON(message.offerSnapshot)\n                : undefined);\n        message.loadSnapshotChunk !== undefined &&\n            (obj.loadSnapshotChunk = message.loadSnapshotChunk\n                ? RequestLoadSnapshotChunk.toJSON(message.loadSnapshotChunk)\n                : undefined);\n        message.applySnapshotChunk !== undefined &&\n            (obj.applySnapshotChunk = message.applySnapshotChunk\n                ? RequestApplySnapshotChunk.toJSON(message.applySnapshotChunk)\n                : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequest };\n        if (object.echo !== undefined && object.echo !== null) {\n            message.echo = RequestEcho.fromPartial(object.echo);\n        }\n        else {\n            message.echo = undefined;\n        }\n        if (object.flush !== undefined && object.flush !== null) {\n            message.flush = RequestFlush.fromPartial(object.flush);\n        }\n        else {\n            message.flush = undefined;\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = RequestInfo.fromPartial(object.info);\n        }\n        else {\n            message.info = undefined;\n        }\n        if (object.setOption !== undefined && object.setOption !== null) {\n            message.setOption = RequestSetOption.fromPartial(object.setOption);\n        }\n        else {\n            message.setOption = undefined;\n        }\n        if (object.initChain !== undefined && object.initChain !== null) {\n            message.initChain = RequestInitChain.fromPartial(object.initChain);\n        }\n        else {\n            message.initChain = undefined;\n        }\n        if (object.query !== undefined && object.query !== null) {\n            message.query = RequestQuery.fromPartial(object.query);\n        }\n        else {\n            message.query = undefined;\n        }\n        if (object.beginBlock !== undefined && object.beginBlock !== null) {\n            message.beginBlock = RequestBeginBlock.fromPartial(object.beginBlock);\n        }\n        else {\n            message.beginBlock = undefined;\n        }\n        if (object.checkTx !== undefined && object.checkTx !== null) {\n            message.checkTx = RequestCheckTx.fromPartial(object.checkTx);\n        }\n        else {\n            message.checkTx = undefined;\n        }\n        if (object.deliverTx !== undefined && object.deliverTx !== null) {\n            message.deliverTx = RequestDeliverTx.fromPartial(object.deliverTx);\n        }\n        else {\n            message.deliverTx = undefined;\n        }\n        if (object.endBlock !== undefined && object.endBlock !== null) {\n            message.endBlock = RequestEndBlock.fromPartial(object.endBlock);\n        }\n        else {\n            message.endBlock = undefined;\n        }\n        if (object.commit !== undefined && object.commit !== null) {\n            message.commit = RequestCommit.fromPartial(object.commit);\n        }\n        else {\n            message.commit = undefined;\n        }\n        if (object.listSnapshots !== undefined && object.listSnapshots !== null) {\n            message.listSnapshots = RequestListSnapshots.fromPartial(object.listSnapshots);\n        }\n        else {\n            message.listSnapshots = undefined;\n        }\n        if (object.offerSnapshot !== undefined && object.offerSnapshot !== null) {\n            message.offerSnapshot = RequestOfferSnapshot.fromPartial(object.offerSnapshot);\n        }\n        else {\n            message.offerSnapshot = undefined;\n        }\n        if (object.loadSnapshotChunk !== undefined &&\n            object.loadSnapshotChunk !== null) {\n            message.loadSnapshotChunk = RequestLoadSnapshotChunk.fromPartial(object.loadSnapshotChunk);\n        }\n        else {\n            message.loadSnapshotChunk = undefined;\n        }\n        if (object.applySnapshotChunk !== undefined &&\n            object.applySnapshotChunk !== null) {\n            message.applySnapshotChunk = RequestApplySnapshotChunk.fromPartial(object.applySnapshotChunk);\n        }\n        else {\n            message.applySnapshotChunk = undefined;\n        }\n        return message;\n    },\n};\nconst baseRequestEcho = { message: \"\" };\nexport const RequestEcho = {\n    encode(message, writer = Writer.create()) {\n        if (message.message !== \"\") {\n            writer.uint32(10).string(message.message);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestEcho };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.message = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestEcho };\n        if (object.message !== undefined && object.message !== null) {\n            message.message = String(object.message);\n        }\n        else {\n            message.message = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.message !== undefined && (obj.message = message.message);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestEcho };\n        if (object.message !== undefined && object.message !== null) {\n            message.message = object.message;\n        }\n        else {\n            message.message = \"\";\n        }\n        return message;\n    },\n};\nconst baseRequestFlush = {};\nexport const RequestFlush = {\n    encode(_, writer = Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestFlush };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        const message = { ...baseRequestFlush };\n        return message;\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = { ...baseRequestFlush };\n        return message;\n    },\n};\nconst baseRequestInfo = { version: \"\", blockVersion: 0, p2pVersion: 0 };\nexport const RequestInfo = {\n    encode(message, writer = Writer.create()) {\n        if (message.version !== \"\") {\n            writer.uint32(10).string(message.version);\n        }\n        if (message.blockVersion !== 0) {\n            writer.uint32(16).uint64(message.blockVersion);\n        }\n        if (message.p2pVersion !== 0) {\n            writer.uint32(24).uint64(message.p2pVersion);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestInfo };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.version = reader.string();\n                    break;\n                case 2:\n                    message.blockVersion = longToNumber(reader.uint64());\n                    break;\n                case 3:\n                    message.p2pVersion = longToNumber(reader.uint64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestInfo };\n        if (object.version !== undefined && object.version !== null) {\n            message.version = String(object.version);\n        }\n        else {\n            message.version = \"\";\n        }\n        if (object.blockVersion !== undefined && object.blockVersion !== null) {\n            message.blockVersion = Number(object.blockVersion);\n        }\n        else {\n            message.blockVersion = 0;\n        }\n        if (object.p2pVersion !== undefined && object.p2pVersion !== null) {\n            message.p2pVersion = Number(object.p2pVersion);\n        }\n        else {\n            message.p2pVersion = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.version !== undefined && (obj.version = message.version);\n        message.blockVersion !== undefined &&\n            (obj.blockVersion = message.blockVersion);\n        message.p2pVersion !== undefined && (obj.p2pVersion = message.p2pVersion);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestInfo };\n        if (object.version !== undefined && object.version !== null) {\n            message.version = object.version;\n        }\n        else {\n            message.version = \"\";\n        }\n        if (object.blockVersion !== undefined && object.blockVersion !== null) {\n            message.blockVersion = object.blockVersion;\n        }\n        else {\n            message.blockVersion = 0;\n        }\n        if (object.p2pVersion !== undefined && object.p2pVersion !== null) {\n            message.p2pVersion = object.p2pVersion;\n        }\n        else {\n            message.p2pVersion = 0;\n        }\n        return message;\n    },\n};\nconst baseRequestSetOption = { key: \"\", value: \"\" };\nexport const RequestSetOption = {\n    encode(message, writer = Writer.create()) {\n        if (message.key !== \"\") {\n            writer.uint32(10).string(message.key);\n        }\n        if (message.value !== \"\") {\n            writer.uint32(18).string(message.value);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestSetOption };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.key = reader.string();\n                    break;\n                case 2:\n                    message.value = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestSetOption };\n        if (object.key !== undefined && object.key !== null) {\n            message.key = String(object.key);\n        }\n        else {\n            message.key = \"\";\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = String(object.value);\n        }\n        else {\n            message.value = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.key !== undefined && (obj.key = message.key);\n        message.value !== undefined && (obj.value = message.value);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestSetOption };\n        if (object.key !== undefined && object.key !== null) {\n            message.key = object.key;\n        }\n        else {\n            message.key = \"\";\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = object.value;\n        }\n        else {\n            message.value = \"\";\n        }\n        return message;\n    },\n};\nconst baseRequestInitChain = { chainId: \"\", initialHeight: 0 };\nexport const RequestInitChain = {\n    encode(message, writer = Writer.create()) {\n        if (message.time !== undefined) {\n            Timestamp.encode(toTimestamp(message.time), writer.uint32(10).fork()).ldelim();\n        }\n        if (message.chainId !== \"\") {\n            writer.uint32(18).string(message.chainId);\n        }\n        if (message.consensusParams !== undefined) {\n            ConsensusParams.encode(message.consensusParams, writer.uint32(26).fork()).ldelim();\n        }\n        for (const v of message.validators) {\n            ValidatorUpdate.encode(v, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.appStateBytes.length !== 0) {\n            writer.uint32(42).bytes(message.appStateBytes);\n        }\n        if (message.initialHeight !== 0) {\n            writer.uint32(48).int64(message.initialHeight);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestInitChain };\n        message.validators = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.time = fromTimestamp(Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 2:\n                    message.chainId = reader.string();\n                    break;\n                case 3:\n                    message.consensusParams = ConsensusParams.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.validators.push(ValidatorUpdate.decode(reader, reader.uint32()));\n                    break;\n                case 5:\n                    message.appStateBytes = reader.bytes();\n                    break;\n                case 6:\n                    message.initialHeight = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestInitChain };\n        message.validators = [];\n        if (object.time !== undefined && object.time !== null) {\n            message.time = fromJsonTimestamp(object.time);\n        }\n        else {\n            message.time = undefined;\n        }\n        if (object.chainId !== undefined && object.chainId !== null) {\n            message.chainId = String(object.chainId);\n        }\n        else {\n            message.chainId = \"\";\n        }\n        if (object.consensusParams !== undefined &&\n            object.consensusParams !== null) {\n            message.consensusParams = ConsensusParams.fromJSON(object.consensusParams);\n        }\n        else {\n            message.consensusParams = undefined;\n        }\n        if (object.validators !== undefined && object.validators !== null) {\n            for (const e of object.validators) {\n                message.validators.push(ValidatorUpdate.fromJSON(e));\n            }\n        }\n        if (object.appStateBytes !== undefined && object.appStateBytes !== null) {\n            message.appStateBytes = bytesFromBase64(object.appStateBytes);\n        }\n        if (object.initialHeight !== undefined && object.initialHeight !== null) {\n            message.initialHeight = Number(object.initialHeight);\n        }\n        else {\n            message.initialHeight = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.time !== undefined &&\n            (obj.time =\n                message.time !== undefined ? message.time.toISOString() : null);\n        message.chainId !== undefined && (obj.chainId = message.chainId);\n        message.consensusParams !== undefined &&\n            (obj.consensusParams = message.consensusParams\n                ? ConsensusParams.toJSON(message.consensusParams)\n                : undefined);\n        if (message.validators) {\n            obj.validators = message.validators.map((e) => e ? ValidatorUpdate.toJSON(e) : undefined);\n        }\n        else {\n            obj.validators = [];\n        }\n        message.appStateBytes !== undefined &&\n            (obj.appStateBytes = base64FromBytes(message.appStateBytes !== undefined\n                ? message.appStateBytes\n                : new Uint8Array()));\n        message.initialHeight !== undefined &&\n            (obj.initialHeight = message.initialHeight);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestInitChain };\n        message.validators = [];\n        if (object.time !== undefined && object.time !== null) {\n            message.time = object.time;\n        }\n        else {\n            message.time = undefined;\n        }\n        if (object.chainId !== undefined && object.chainId !== null) {\n            message.chainId = object.chainId;\n        }\n        else {\n            message.chainId = \"\";\n        }\n        if (object.consensusParams !== undefined &&\n            object.consensusParams !== null) {\n            message.consensusParams = ConsensusParams.fromPartial(object.consensusParams);\n        }\n        else {\n            message.consensusParams = undefined;\n        }\n        if (object.validators !== undefined && object.validators !== null) {\n            for (const e of object.validators) {\n                message.validators.push(ValidatorUpdate.fromPartial(e));\n            }\n        }\n        if (object.appStateBytes !== undefined && object.appStateBytes !== null) {\n            message.appStateBytes = object.appStateBytes;\n        }\n        else {\n            message.appStateBytes = new Uint8Array();\n        }\n        if (object.initialHeight !== undefined && object.initialHeight !== null) {\n            message.initialHeight = object.initialHeight;\n        }\n        else {\n            message.initialHeight = 0;\n        }\n        return message;\n    },\n};\nconst baseRequestQuery = { path: \"\", height: 0, prove: false };\nexport const RequestQuery = {\n    encode(message, writer = Writer.create()) {\n        if (message.data.length !== 0) {\n            writer.uint32(10).bytes(message.data);\n        }\n        if (message.path !== \"\") {\n            writer.uint32(18).string(message.path);\n        }\n        if (message.height !== 0) {\n            writer.uint32(24).int64(message.height);\n        }\n        if (message.prove === true) {\n            writer.uint32(32).bool(message.prove);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestQuery };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.data = reader.bytes();\n                    break;\n                case 2:\n                    message.path = reader.string();\n                    break;\n                case 3:\n                    message.height = longToNumber(reader.int64());\n                    break;\n                case 4:\n                    message.prove = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestQuery };\n        if (object.data !== undefined && object.data !== null) {\n            message.data = bytesFromBase64(object.data);\n        }\n        if (object.path !== undefined && object.path !== null) {\n            message.path = String(object.path);\n        }\n        else {\n            message.path = \"\";\n        }\n        if (object.height !== undefined && object.height !== null) {\n            message.height = Number(object.height);\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.prove !== undefined && object.prove !== null) {\n            message.prove = Boolean(object.prove);\n        }\n        else {\n            message.prove = false;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.data !== undefined &&\n            (obj.data = base64FromBytes(message.data !== undefined ? message.data : new Uint8Array()));\n        message.path !== undefined && (obj.path = message.path);\n        message.height !== undefined && (obj.height = message.height);\n        message.prove !== undefined && (obj.prove = message.prove);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestQuery };\n        if (object.data !== undefined && object.data !== null) {\n            message.data = object.data;\n        }\n        else {\n            message.data = new Uint8Array();\n        }\n        if (object.path !== undefined && object.path !== null) {\n            message.path = object.path;\n        }\n        else {\n            message.path = \"\";\n        }\n        if (object.height !== undefined && object.height !== null) {\n            message.height = object.height;\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.prove !== undefined && object.prove !== null) {\n            message.prove = object.prove;\n        }\n        else {\n            message.prove = false;\n        }\n        return message;\n    },\n};\nconst baseRequestBeginBlock = {};\nexport const RequestBeginBlock = {\n    encode(message, writer = Writer.create()) {\n        if (message.hash.length !== 0) {\n            writer.uint32(10).bytes(message.hash);\n        }\n        if (message.header !== undefined) {\n            Header.encode(message.header, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.lastCommitInfo !== undefined) {\n            LastCommitInfo.encode(message.lastCommitInfo, writer.uint32(26).fork()).ldelim();\n        }\n        for (const v of message.byzantineValidators) {\n            Evidence.encode(v, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestBeginBlock };\n        message.byzantineValidators = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.hash = reader.bytes();\n                    break;\n                case 2:\n                    message.header = Header.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.lastCommitInfo = LastCommitInfo.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.byzantineValidators.push(Evidence.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestBeginBlock };\n        message.byzantineValidators = [];\n        if (object.hash !== undefined && object.hash !== null) {\n            message.hash = bytesFromBase64(object.hash);\n        }\n        if (object.header !== undefined && object.header !== null) {\n            message.header = Header.fromJSON(object.header);\n        }\n        else {\n            message.header = undefined;\n        }\n        if (object.lastCommitInfo !== undefined && object.lastCommitInfo !== null) {\n            message.lastCommitInfo = LastCommitInfo.fromJSON(object.lastCommitInfo);\n        }\n        else {\n            message.lastCommitInfo = undefined;\n        }\n        if (object.byzantineValidators !== undefined &&\n            object.byzantineValidators !== null) {\n            for (const e of object.byzantineValidators) {\n                message.byzantineValidators.push(Evidence.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.hash !== undefined &&\n            (obj.hash = base64FromBytes(message.hash !== undefined ? message.hash : new Uint8Array()));\n        message.header !== undefined &&\n            (obj.header = message.header ? Header.toJSON(message.header) : undefined);\n        message.lastCommitInfo !== undefined &&\n            (obj.lastCommitInfo = message.lastCommitInfo\n                ? LastCommitInfo.toJSON(message.lastCommitInfo)\n                : undefined);\n        if (message.byzantineValidators) {\n            obj.byzantineValidators = message.byzantineValidators.map((e) => e ? Evidence.toJSON(e) : undefined);\n        }\n        else {\n            obj.byzantineValidators = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestBeginBlock };\n        message.byzantineValidators = [];\n        if (object.hash !== undefined && object.hash !== null) {\n            message.hash = object.hash;\n        }\n        else {\n            message.hash = new Uint8Array();\n        }\n        if (object.header !== undefined && object.header !== null) {\n            message.header = Header.fromPartial(object.header);\n        }\n        else {\n            message.header = undefined;\n        }\n        if (object.lastCommitInfo !== undefined && object.lastCommitInfo !== null) {\n            message.lastCommitInfo = LastCommitInfo.fromPartial(object.lastCommitInfo);\n        }\n        else {\n            message.lastCommitInfo = undefined;\n        }\n        if (object.byzantineValidators !== undefined &&\n            object.byzantineValidators !== null) {\n            for (const e of object.byzantineValidators) {\n                message.byzantineValidators.push(Evidence.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseRequestCheckTx = { type: 0 };\nexport const RequestCheckTx = {\n    encode(message, writer = Writer.create()) {\n        if (message.tx.length !== 0) {\n            writer.uint32(10).bytes(message.tx);\n        }\n        if (message.type !== 0) {\n            writer.uint32(16).int32(message.type);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestCheckTx };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.tx = reader.bytes();\n                    break;\n                case 2:\n                    message.type = reader.int32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestCheckTx };\n        if (object.tx !== undefined && object.tx !== null) {\n            message.tx = bytesFromBase64(object.tx);\n        }\n        if (object.type !== undefined && object.type !== null) {\n            message.type = checkTxTypeFromJSON(object.type);\n        }\n        else {\n            message.type = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.tx !== undefined &&\n            (obj.tx = base64FromBytes(message.tx !== undefined ? message.tx : new Uint8Array()));\n        message.type !== undefined && (obj.type = checkTxTypeToJSON(message.type));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestCheckTx };\n        if (object.tx !== undefined && object.tx !== null) {\n            message.tx = object.tx;\n        }\n        else {\n            message.tx = new Uint8Array();\n        }\n        if (object.type !== undefined && object.type !== null) {\n            message.type = object.type;\n        }\n        else {\n            message.type = 0;\n        }\n        return message;\n    },\n};\nconst baseRequestDeliverTx = {};\nexport const RequestDeliverTx = {\n    encode(message, writer = Writer.create()) {\n        if (message.tx.length !== 0) {\n            writer.uint32(10).bytes(message.tx);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestDeliverTx };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.tx = reader.bytes();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestDeliverTx };\n        if (object.tx !== undefined && object.tx !== null) {\n            message.tx = bytesFromBase64(object.tx);\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.tx !== undefined &&\n            (obj.tx = base64FromBytes(message.tx !== undefined ? message.tx : new Uint8Array()));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestDeliverTx };\n        if (object.tx !== undefined && object.tx !== null) {\n            message.tx = object.tx;\n        }\n        else {\n            message.tx = new Uint8Array();\n        }\n        return message;\n    },\n};\nconst baseRequestEndBlock = { height: 0 };\nexport const RequestEndBlock = {\n    encode(message, writer = Writer.create()) {\n        if (message.height !== 0) {\n            writer.uint32(8).int64(message.height);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestEndBlock };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.height = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestEndBlock };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = Number(object.height);\n        }\n        else {\n            message.height = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.height !== undefined && (obj.height = message.height);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestEndBlock };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = object.height;\n        }\n        else {\n            message.height = 0;\n        }\n        return message;\n    },\n};\nconst baseRequestCommit = {};\nexport const RequestCommit = {\n    encode(_, writer = Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestCommit };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        const message = { ...baseRequestCommit };\n        return message;\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = { ...baseRequestCommit };\n        return message;\n    },\n};\nconst baseRequestListSnapshots = {};\nexport const RequestListSnapshots = {\n    encode(_, writer = Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestListSnapshots };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        const message = { ...baseRequestListSnapshots };\n        return message;\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = { ...baseRequestListSnapshots };\n        return message;\n    },\n};\nconst baseRequestOfferSnapshot = {};\nexport const RequestOfferSnapshot = {\n    encode(message, writer = Writer.create()) {\n        if (message.snapshot !== undefined) {\n            Snapshot.encode(message.snapshot, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.appHash.length !== 0) {\n            writer.uint32(18).bytes(message.appHash);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestOfferSnapshot };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.snapshot = Snapshot.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.appHash = reader.bytes();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestOfferSnapshot };\n        if (object.snapshot !== undefined && object.snapshot !== null) {\n            message.snapshot = Snapshot.fromJSON(object.snapshot);\n        }\n        else {\n            message.snapshot = undefined;\n        }\n        if (object.appHash !== undefined && object.appHash !== null) {\n            message.appHash = bytesFromBase64(object.appHash);\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.snapshot !== undefined &&\n            (obj.snapshot = message.snapshot\n                ? Snapshot.toJSON(message.snapshot)\n                : undefined);\n        message.appHash !== undefined &&\n            (obj.appHash = base64FromBytes(message.appHash !== undefined ? message.appHash : new Uint8Array()));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestOfferSnapshot };\n        if (object.snapshot !== undefined && object.snapshot !== null) {\n            message.snapshot = Snapshot.fromPartial(object.snapshot);\n        }\n        else {\n            message.snapshot = undefined;\n        }\n        if (object.appHash !== undefined && object.appHash !== null) {\n            message.appHash = object.appHash;\n        }\n        else {\n            message.appHash = new Uint8Array();\n        }\n        return message;\n    },\n};\nconst baseRequestLoadSnapshotChunk = { height: 0, format: 0, chunk: 0 };\nexport const RequestLoadSnapshotChunk = {\n    encode(message, writer = Writer.create()) {\n        if (message.height !== 0) {\n            writer.uint32(8).uint64(message.height);\n        }\n        if (message.format !== 0) {\n            writer.uint32(16).uint32(message.format);\n        }\n        if (message.chunk !== 0) {\n            writer.uint32(24).uint32(message.chunk);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = {\n            ...baseRequestLoadSnapshotChunk,\n        };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.height = longToNumber(reader.uint64());\n                    break;\n                case 2:\n                    message.format = reader.uint32();\n                    break;\n                case 3:\n                    message.chunk = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = {\n            ...baseRequestLoadSnapshotChunk,\n        };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = Number(object.height);\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.format !== undefined && object.format !== null) {\n            message.format = Number(object.format);\n        }\n        else {\n            message.format = 0;\n        }\n        if (object.chunk !== undefined && object.chunk !== null) {\n            message.chunk = Number(object.chunk);\n        }\n        else {\n            message.chunk = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.height !== undefined && (obj.height = message.height);\n        message.format !== undefined && (obj.format = message.format);\n        message.chunk !== undefined && (obj.chunk = message.chunk);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = {\n            ...baseRequestLoadSnapshotChunk,\n        };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = object.height;\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.format !== undefined && object.format !== null) {\n            message.format = object.format;\n        }\n        else {\n            message.format = 0;\n        }\n        if (object.chunk !== undefined && object.chunk !== null) {\n            message.chunk = object.chunk;\n        }\n        else {\n            message.chunk = 0;\n        }\n        return message;\n    },\n};\nconst baseRequestApplySnapshotChunk = { index: 0, sender: \"\" };\nexport const RequestApplySnapshotChunk = {\n    encode(message, writer = Writer.create()) {\n        if (message.index !== 0) {\n            writer.uint32(8).uint32(message.index);\n        }\n        if (message.chunk.length !== 0) {\n            writer.uint32(18).bytes(message.chunk);\n        }\n        if (message.sender !== \"\") {\n            writer.uint32(26).string(message.sender);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = {\n            ...baseRequestApplySnapshotChunk,\n        };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.index = reader.uint32();\n                    break;\n                case 2:\n                    message.chunk = reader.bytes();\n                    break;\n                case 3:\n                    message.sender = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = {\n            ...baseRequestApplySnapshotChunk,\n        };\n        if (object.index !== undefined && object.index !== null) {\n            message.index = Number(object.index);\n        }\n        else {\n            message.index = 0;\n        }\n        if (object.chunk !== undefined && object.chunk !== null) {\n            message.chunk = bytesFromBase64(object.chunk);\n        }\n        if (object.sender !== undefined && object.sender !== null) {\n            message.sender = String(object.sender);\n        }\n        else {\n            message.sender = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.index !== undefined && (obj.index = message.index);\n        message.chunk !== undefined &&\n            (obj.chunk = base64FromBytes(message.chunk !== undefined ? message.chunk : new Uint8Array()));\n        message.sender !== undefined && (obj.sender = message.sender);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = {\n            ...baseRequestApplySnapshotChunk,\n        };\n        if (object.index !== undefined && object.index !== null) {\n            message.index = object.index;\n        }\n        else {\n            message.index = 0;\n        }\n        if (object.chunk !== undefined && object.chunk !== null) {\n            message.chunk = object.chunk;\n        }\n        else {\n            message.chunk = new Uint8Array();\n        }\n        if (object.sender !== undefined && object.sender !== null) {\n            message.sender = object.sender;\n        }\n        else {\n            message.sender = \"\";\n        }\n        return message;\n    },\n};\nconst baseResponse = {};\nexport const Response = {\n    encode(message, writer = Writer.create()) {\n        if (message.exception !== undefined) {\n            ResponseException.encode(message.exception, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.echo !== undefined) {\n            ResponseEcho.encode(message.echo, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.flush !== undefined) {\n            ResponseFlush.encode(message.flush, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.info !== undefined) {\n            ResponseInfo.encode(message.info, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.setOption !== undefined) {\n            ResponseSetOption.encode(message.setOption, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.initChain !== undefined) {\n            ResponseInitChain.encode(message.initChain, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.query !== undefined) {\n            ResponseQuery.encode(message.query, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.beginBlock !== undefined) {\n            ResponseBeginBlock.encode(message.beginBlock, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.checkTx !== undefined) {\n            ResponseCheckTx.encode(message.checkTx, writer.uint32(74).fork()).ldelim();\n        }\n        if (message.deliverTx !== undefined) {\n            ResponseDeliverTx.encode(message.deliverTx, writer.uint32(82).fork()).ldelim();\n        }\n        if (message.endBlock !== undefined) {\n            ResponseEndBlock.encode(message.endBlock, writer.uint32(90).fork()).ldelim();\n        }\n        if (message.commit !== undefined) {\n            ResponseCommit.encode(message.commit, writer.uint32(98).fork()).ldelim();\n        }\n        if (message.listSnapshots !== undefined) {\n            ResponseListSnapshots.encode(message.listSnapshots, writer.uint32(106).fork()).ldelim();\n        }\n        if (message.offerSnapshot !== undefined) {\n            ResponseOfferSnapshot.encode(message.offerSnapshot, writer.uint32(114).fork()).ldelim();\n        }\n        if (message.loadSnapshotChunk !== undefined) {\n            ResponseLoadSnapshotChunk.encode(message.loadSnapshotChunk, writer.uint32(122).fork()).ldelim();\n        }\n        if (message.applySnapshotChunk !== undefined) {\n            ResponseApplySnapshotChunk.encode(message.applySnapshotChunk, writer.uint32(130).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponse };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.exception = ResponseException.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.echo = ResponseEcho.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.flush = ResponseFlush.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.info = ResponseInfo.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.setOption = ResponseSetOption.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.initChain = ResponseInitChain.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.query = ResponseQuery.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.beginBlock = ResponseBeginBlock.decode(reader, reader.uint32());\n                    break;\n                case 9:\n                    message.checkTx = ResponseCheckTx.decode(reader, reader.uint32());\n                    break;\n                case 10:\n                    message.deliverTx = ResponseDeliverTx.decode(reader, reader.uint32());\n                    break;\n                case 11:\n                    message.endBlock = ResponseEndBlock.decode(reader, reader.uint32());\n                    break;\n                case 12:\n                    message.commit = ResponseCommit.decode(reader, reader.uint32());\n                    break;\n                case 13:\n                    message.listSnapshots = ResponseListSnapshots.decode(reader, reader.uint32());\n                    break;\n                case 14:\n                    message.offerSnapshot = ResponseOfferSnapshot.decode(reader, reader.uint32());\n                    break;\n                case 15:\n                    message.loadSnapshotChunk = ResponseLoadSnapshotChunk.decode(reader, reader.uint32());\n                    break;\n                case 16:\n                    message.applySnapshotChunk = ResponseApplySnapshotChunk.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponse };\n        if (object.exception !== undefined && object.exception !== null) {\n            message.exception = ResponseException.fromJSON(object.exception);\n        }\n        else {\n            message.exception = undefined;\n        }\n        if (object.echo !== undefined && object.echo !== null) {\n            message.echo = ResponseEcho.fromJSON(object.echo);\n        }\n        else {\n            message.echo = undefined;\n        }\n        if (object.flush !== undefined && object.flush !== null) {\n            message.flush = ResponseFlush.fromJSON(object.flush);\n        }\n        else {\n            message.flush = undefined;\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = ResponseInfo.fromJSON(object.info);\n        }\n        else {\n            message.info = undefined;\n        }\n        if (object.setOption !== undefined && object.setOption !== null) {\n            message.setOption = ResponseSetOption.fromJSON(object.setOption);\n        }\n        else {\n            message.setOption = undefined;\n        }\n        if (object.initChain !== undefined && object.initChain !== null) {\n            message.initChain = ResponseInitChain.fromJSON(object.initChain);\n        }\n        else {\n            message.initChain = undefined;\n        }\n        if (object.query !== undefined && object.query !== null) {\n            message.query = ResponseQuery.fromJSON(object.query);\n        }\n        else {\n            message.query = undefined;\n        }\n        if (object.beginBlock !== undefined && object.beginBlock !== null) {\n            message.beginBlock = ResponseBeginBlock.fromJSON(object.beginBlock);\n        }\n        else {\n            message.beginBlock = undefined;\n        }\n        if (object.checkTx !== undefined && object.checkTx !== null) {\n            message.checkTx = ResponseCheckTx.fromJSON(object.checkTx);\n        }\n        else {\n            message.checkTx = undefined;\n        }\n        if (object.deliverTx !== undefined && object.deliverTx !== null) {\n            message.deliverTx = ResponseDeliverTx.fromJSON(object.deliverTx);\n        }\n        else {\n            message.deliverTx = undefined;\n        }\n        if (object.endBlock !== undefined && object.endBlock !== null) {\n            message.endBlock = ResponseEndBlock.fromJSON(object.endBlock);\n        }\n        else {\n            message.endBlock = undefined;\n        }\n        if (object.commit !== undefined && object.commit !== null) {\n            message.commit = ResponseCommit.fromJSON(object.commit);\n        }\n        else {\n            message.commit = undefined;\n        }\n        if (object.listSnapshots !== undefined && object.listSnapshots !== null) {\n            message.listSnapshots = ResponseListSnapshots.fromJSON(object.listSnapshots);\n        }\n        else {\n            message.listSnapshots = undefined;\n        }\n        if (object.offerSnapshot !== undefined && object.offerSnapshot !== null) {\n            message.offerSnapshot = ResponseOfferSnapshot.fromJSON(object.offerSnapshot);\n        }\n        else {\n            message.offerSnapshot = undefined;\n        }\n        if (object.loadSnapshotChunk !== undefined &&\n            object.loadSnapshotChunk !== null) {\n            message.loadSnapshotChunk = ResponseLoadSnapshotChunk.fromJSON(object.loadSnapshotChunk);\n        }\n        else {\n            message.loadSnapshotChunk = undefined;\n        }\n        if (object.applySnapshotChunk !== undefined &&\n            object.applySnapshotChunk !== null) {\n            message.applySnapshotChunk = ResponseApplySnapshotChunk.fromJSON(object.applySnapshotChunk);\n        }\n        else {\n            message.applySnapshotChunk = undefined;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.exception !== undefined &&\n            (obj.exception = message.exception\n                ? ResponseException.toJSON(message.exception)\n                : undefined);\n        message.echo !== undefined &&\n            (obj.echo = message.echo ? ResponseEcho.toJSON(message.echo) : undefined);\n        message.flush !== undefined &&\n            (obj.flush = message.flush\n                ? ResponseFlush.toJSON(message.flush)\n                : undefined);\n        message.info !== undefined &&\n            (obj.info = message.info ? ResponseInfo.toJSON(message.info) : undefined);\n        message.setOption !== undefined &&\n            (obj.setOption = message.setOption\n                ? ResponseSetOption.toJSON(message.setOption)\n                : undefined);\n        message.initChain !== undefined &&\n            (obj.initChain = message.initChain\n                ? ResponseInitChain.toJSON(message.initChain)\n                : undefined);\n        message.query !== undefined &&\n            (obj.query = message.query\n                ? ResponseQuery.toJSON(message.query)\n                : undefined);\n        message.beginBlock !== undefined &&\n            (obj.beginBlock = message.beginBlock\n                ? ResponseBeginBlock.toJSON(message.beginBlock)\n                : undefined);\n        message.checkTx !== undefined &&\n            (obj.checkTx = message.checkTx\n                ? ResponseCheckTx.toJSON(message.checkTx)\n                : undefined);\n        message.deliverTx !== undefined &&\n            (obj.deliverTx = message.deliverTx\n                ? ResponseDeliverTx.toJSON(message.deliverTx)\n                : undefined);\n        message.endBlock !== undefined &&\n            (obj.endBlock = message.endBlock\n                ? ResponseEndBlock.toJSON(message.endBlock)\n                : undefined);\n        message.commit !== undefined &&\n            (obj.commit = message.commit\n                ? ResponseCommit.toJSON(message.commit)\n                : undefined);\n        message.listSnapshots !== undefined &&\n            (obj.listSnapshots = message.listSnapshots\n                ? ResponseListSnapshots.toJSON(message.listSnapshots)\n                : undefined);\n        message.offerSnapshot !== undefined &&\n            (obj.offerSnapshot = message.offerSnapshot\n                ? ResponseOfferSnapshot.toJSON(message.offerSnapshot)\n                : undefined);\n        message.loadSnapshotChunk !== undefined &&\n            (obj.loadSnapshotChunk = message.loadSnapshotChunk\n                ? ResponseLoadSnapshotChunk.toJSON(message.loadSnapshotChunk)\n                : undefined);\n        message.applySnapshotChunk !== undefined &&\n            (obj.applySnapshotChunk = message.applySnapshotChunk\n                ? ResponseApplySnapshotChunk.toJSON(message.applySnapshotChunk)\n                : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponse };\n        if (object.exception !== undefined && object.exception !== null) {\n            message.exception = ResponseException.fromPartial(object.exception);\n        }\n        else {\n            message.exception = undefined;\n        }\n        if (object.echo !== undefined && object.echo !== null) {\n            message.echo = ResponseEcho.fromPartial(object.echo);\n        }\n        else {\n            message.echo = undefined;\n        }\n        if (object.flush !== undefined && object.flush !== null) {\n            message.flush = ResponseFlush.fromPartial(object.flush);\n        }\n        else {\n            message.flush = undefined;\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = ResponseInfo.fromPartial(object.info);\n        }\n        else {\n            message.info = undefined;\n        }\n        if (object.setOption !== undefined && object.setOption !== null) {\n            message.setOption = ResponseSetOption.fromPartial(object.setOption);\n        }\n        else {\n            message.setOption = undefined;\n        }\n        if (object.initChain !== undefined && object.initChain !== null) {\n            message.initChain = ResponseInitChain.fromPartial(object.initChain);\n        }\n        else {\n            message.initChain = undefined;\n        }\n        if (object.query !== undefined && object.query !== null) {\n            message.query = ResponseQuery.fromPartial(object.query);\n        }\n        else {\n            message.query = undefined;\n        }\n        if (object.beginBlock !== undefined && object.beginBlock !== null) {\n            message.beginBlock = ResponseBeginBlock.fromPartial(object.beginBlock);\n        }\n        else {\n            message.beginBlock = undefined;\n        }\n        if (object.checkTx !== undefined && object.checkTx !== null) {\n            message.checkTx = ResponseCheckTx.fromPartial(object.checkTx);\n        }\n        else {\n            message.checkTx = undefined;\n        }\n        if (object.deliverTx !== undefined && object.deliverTx !== null) {\n            message.deliverTx = ResponseDeliverTx.fromPartial(object.deliverTx);\n        }\n        else {\n            message.deliverTx = undefined;\n        }\n        if (object.endBlock !== undefined && object.endBlock !== null) {\n            message.endBlock = ResponseEndBlock.fromPartial(object.endBlock);\n        }\n        else {\n            message.endBlock = undefined;\n        }\n        if (object.commit !== undefined && object.commit !== null) {\n            message.commit = ResponseCommit.fromPartial(object.commit);\n        }\n        else {\n            message.commit = undefined;\n        }\n        if (object.listSnapshots !== undefined && object.listSnapshots !== null) {\n            message.listSnapshots = ResponseListSnapshots.fromPartial(object.listSnapshots);\n        }\n        else {\n            message.listSnapshots = undefined;\n        }\n        if (object.offerSnapshot !== undefined && object.offerSnapshot !== null) {\n            message.offerSnapshot = ResponseOfferSnapshot.fromPartial(object.offerSnapshot);\n        }\n        else {\n            message.offerSnapshot = undefined;\n        }\n        if (object.loadSnapshotChunk !== undefined &&\n            object.loadSnapshotChunk !== null) {\n            message.loadSnapshotChunk = ResponseLoadSnapshotChunk.fromPartial(object.loadSnapshotChunk);\n        }\n        else {\n            message.loadSnapshotChunk = undefined;\n        }\n        if (object.applySnapshotChunk !== undefined &&\n            object.applySnapshotChunk !== null) {\n            message.applySnapshotChunk = ResponseApplySnapshotChunk.fromPartial(object.applySnapshotChunk);\n        }\n        else {\n            message.applySnapshotChunk = undefined;\n        }\n        return message;\n    },\n};\nconst baseResponseException = { error: \"\" };\nexport const ResponseException = {\n    encode(message, writer = Writer.create()) {\n        if (message.error !== \"\") {\n            writer.uint32(10).string(message.error);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseException };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.error = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseException };\n        if (object.error !== undefined && object.error !== null) {\n            message.error = String(object.error);\n        }\n        else {\n            message.error = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.error !== undefined && (obj.error = message.error);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseException };\n        if (object.error !== undefined && object.error !== null) {\n            message.error = object.error;\n        }\n        else {\n            message.error = \"\";\n        }\n        return message;\n    },\n};\nconst baseResponseEcho = { message: \"\" };\nexport const ResponseEcho = {\n    encode(message, writer = Writer.create()) {\n        if (message.message !== \"\") {\n            writer.uint32(10).string(message.message);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseEcho };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.message = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseEcho };\n        if (object.message !== undefined && object.message !== null) {\n            message.message = String(object.message);\n        }\n        else {\n            message.message = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.message !== undefined && (obj.message = message.message);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseEcho };\n        if (object.message !== undefined && object.message !== null) {\n            message.message = object.message;\n        }\n        else {\n            message.message = \"\";\n        }\n        return message;\n    },\n};\nconst baseResponseFlush = {};\nexport const ResponseFlush = {\n    encode(_, writer = Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseFlush };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        const message = { ...baseResponseFlush };\n        return message;\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = { ...baseResponseFlush };\n        return message;\n    },\n};\nconst baseResponseInfo = {\n    data: \"\",\n    version: \"\",\n    appVersion: 0,\n    lastBlockHeight: 0,\n};\nexport const ResponseInfo = {\n    encode(message, writer = Writer.create()) {\n        if (message.data !== \"\") {\n            writer.uint32(10).string(message.data);\n        }\n        if (message.version !== \"\") {\n            writer.uint32(18).string(message.version);\n        }\n        if (message.appVersion !== 0) {\n            writer.uint32(24).uint64(message.appVersion);\n        }\n        if (message.lastBlockHeight !== 0) {\n            writer.uint32(32).int64(message.lastBlockHeight);\n        }\n        if (message.lastBlockAppHash.length !== 0) {\n            writer.uint32(42).bytes(message.lastBlockAppHash);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseInfo };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.data = reader.string();\n                    break;\n                case 2:\n                    message.version = reader.string();\n                    break;\n                case 3:\n                    message.appVersion = longToNumber(reader.uint64());\n                    break;\n                case 4:\n                    message.lastBlockHeight = longToNumber(reader.int64());\n                    break;\n                case 5:\n                    message.lastBlockAppHash = reader.bytes();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseInfo };\n        if (object.data !== undefined && object.data !== null) {\n            message.data = String(object.data);\n        }\n        else {\n            message.data = \"\";\n        }\n        if (object.version !== undefined && object.version !== null) {\n            message.version = String(object.version);\n        }\n        else {\n            message.version = \"\";\n        }\n        if (object.appVersion !== undefined && object.appVersion !== null) {\n            message.appVersion = Number(object.appVersion);\n        }\n        else {\n            message.appVersion = 0;\n        }\n        if (object.lastBlockHeight !== undefined &&\n            object.lastBlockHeight !== null) {\n            message.lastBlockHeight = Number(object.lastBlockHeight);\n        }\n        else {\n            message.lastBlockHeight = 0;\n        }\n        if (object.lastBlockAppHash !== undefined &&\n            object.lastBlockAppHash !== null) {\n            message.lastBlockAppHash = bytesFromBase64(object.lastBlockAppHash);\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.data !== undefined && (obj.data = message.data);\n        message.version !== undefined && (obj.version = message.version);\n        message.appVersion !== undefined && (obj.appVersion = message.appVersion);\n        message.lastBlockHeight !== undefined &&\n            (obj.lastBlockHeight = message.lastBlockHeight);\n        message.lastBlockAppHash !== undefined &&\n            (obj.lastBlockAppHash = base64FromBytes(message.lastBlockAppHash !== undefined\n                ? message.lastBlockAppHash\n                : new Uint8Array()));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseInfo };\n        if (object.data !== undefined && object.data !== null) {\n            message.data = object.data;\n        }\n        else {\n            message.data = \"\";\n        }\n        if (object.version !== undefined && object.version !== null) {\n            message.version = object.version;\n        }\n        else {\n            message.version = \"\";\n        }\n        if (object.appVersion !== undefined && object.appVersion !== null) {\n            message.appVersion = object.appVersion;\n        }\n        else {\n            message.appVersion = 0;\n        }\n        if (object.lastBlockHeight !== undefined &&\n            object.lastBlockHeight !== null) {\n            message.lastBlockHeight = object.lastBlockHeight;\n        }\n        else {\n            message.lastBlockHeight = 0;\n        }\n        if (object.lastBlockAppHash !== undefined &&\n            object.lastBlockAppHash !== null) {\n            message.lastBlockAppHash = object.lastBlockAppHash;\n        }\n        else {\n            message.lastBlockAppHash = new Uint8Array();\n        }\n        return message;\n    },\n};\nconst baseResponseSetOption = { code: 0, log: \"\", info: \"\" };\nexport const ResponseSetOption = {\n    encode(message, writer = Writer.create()) {\n        if (message.code !== 0) {\n            writer.uint32(8).uint32(message.code);\n        }\n        if (message.log !== \"\") {\n            writer.uint32(26).string(message.log);\n        }\n        if (message.info !== \"\") {\n            writer.uint32(34).string(message.info);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseSetOption };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.code = reader.uint32();\n                    break;\n                case 3:\n                    message.log = reader.string();\n                    break;\n                case 4:\n                    message.info = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseSetOption };\n        if (object.code !== undefined && object.code !== null) {\n            message.code = Number(object.code);\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = String(object.log);\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = String(object.info);\n        }\n        else {\n            message.info = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.code !== undefined && (obj.code = message.code);\n        message.log !== undefined && (obj.log = message.log);\n        message.info !== undefined && (obj.info = message.info);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseSetOption };\n        if (object.code !== undefined && object.code !== null) {\n            message.code = object.code;\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = object.log;\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = object.info;\n        }\n        else {\n            message.info = \"\";\n        }\n        return message;\n    },\n};\nconst baseResponseInitChain = {};\nexport const ResponseInitChain = {\n    encode(message, writer = Writer.create()) {\n        if (message.consensusParams !== undefined) {\n            ConsensusParams.encode(message.consensusParams, writer.uint32(10).fork()).ldelim();\n        }\n        for (const v of message.validators) {\n            ValidatorUpdate.encode(v, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.appHash.length !== 0) {\n            writer.uint32(26).bytes(message.appHash);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseInitChain };\n        message.validators = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.consensusParams = ConsensusParams.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.validators.push(ValidatorUpdate.decode(reader, reader.uint32()));\n                    break;\n                case 3:\n                    message.appHash = reader.bytes();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseInitChain };\n        message.validators = [];\n        if (object.consensusParams !== undefined &&\n            object.consensusParams !== null) {\n            message.consensusParams = ConsensusParams.fromJSON(object.consensusParams);\n        }\n        else {\n            message.consensusParams = undefined;\n        }\n        if (object.validators !== undefined && object.validators !== null) {\n            for (const e of object.validators) {\n                message.validators.push(ValidatorUpdate.fromJSON(e));\n            }\n        }\n        if (object.appHash !== undefined && object.appHash !== null) {\n            message.appHash = bytesFromBase64(object.appHash);\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.consensusParams !== undefined &&\n            (obj.consensusParams = message.consensusParams\n                ? ConsensusParams.toJSON(message.consensusParams)\n                : undefined);\n        if (message.validators) {\n            obj.validators = message.validators.map((e) => e ? ValidatorUpdate.toJSON(e) : undefined);\n        }\n        else {\n            obj.validators = [];\n        }\n        message.appHash !== undefined &&\n            (obj.appHash = base64FromBytes(message.appHash !== undefined ? message.appHash : new Uint8Array()));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseInitChain };\n        message.validators = [];\n        if (object.consensusParams !== undefined &&\n            object.consensusParams !== null) {\n            message.consensusParams = ConsensusParams.fromPartial(object.consensusParams);\n        }\n        else {\n            message.consensusParams = undefined;\n        }\n        if (object.validators !== undefined && object.validators !== null) {\n            for (const e of object.validators) {\n                message.validators.push(ValidatorUpdate.fromPartial(e));\n            }\n        }\n        if (object.appHash !== undefined && object.appHash !== null) {\n            message.appHash = object.appHash;\n        }\n        else {\n            message.appHash = new Uint8Array();\n        }\n        return message;\n    },\n};\nconst baseResponseQuery = {\n    code: 0,\n    log: \"\",\n    info: \"\",\n    index: 0,\n    height: 0,\n    codespace: \"\",\n};\nexport const ResponseQuery = {\n    encode(message, writer = Writer.create()) {\n        if (message.code !== 0) {\n            writer.uint32(8).uint32(message.code);\n        }\n        if (message.log !== \"\") {\n            writer.uint32(26).string(message.log);\n        }\n        if (message.info !== \"\") {\n            writer.uint32(34).string(message.info);\n        }\n        if (message.index !== 0) {\n            writer.uint32(40).int64(message.index);\n        }\n        if (message.key.length !== 0) {\n            writer.uint32(50).bytes(message.key);\n        }\n        if (message.value.length !== 0) {\n            writer.uint32(58).bytes(message.value);\n        }\n        if (message.proofOps !== undefined) {\n            ProofOps.encode(message.proofOps, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.height !== 0) {\n            writer.uint32(72).int64(message.height);\n        }\n        if (message.codespace !== \"\") {\n            writer.uint32(82).string(message.codespace);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseQuery };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.code = reader.uint32();\n                    break;\n                case 3:\n                    message.log = reader.string();\n                    break;\n                case 4:\n                    message.info = reader.string();\n                    break;\n                case 5:\n                    message.index = longToNumber(reader.int64());\n                    break;\n                case 6:\n                    message.key = reader.bytes();\n                    break;\n                case 7:\n                    message.value = reader.bytes();\n                    break;\n                case 8:\n                    message.proofOps = ProofOps.decode(reader, reader.uint32());\n                    break;\n                case 9:\n                    message.height = longToNumber(reader.int64());\n                    break;\n                case 10:\n                    message.codespace = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseQuery };\n        if (object.code !== undefined && object.code !== null) {\n            message.code = Number(object.code);\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = String(object.log);\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = String(object.info);\n        }\n        else {\n            message.info = \"\";\n        }\n        if (object.index !== undefined && object.index !== null) {\n            message.index = Number(object.index);\n        }\n        else {\n            message.index = 0;\n        }\n        if (object.key !== undefined && object.key !== null) {\n            message.key = bytesFromBase64(object.key);\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = bytesFromBase64(object.value);\n        }\n        if (object.proofOps !== undefined && object.proofOps !== null) {\n            message.proofOps = ProofOps.fromJSON(object.proofOps);\n        }\n        else {\n            message.proofOps = undefined;\n        }\n        if (object.height !== undefined && object.height !== null) {\n            message.height = Number(object.height);\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.codespace !== undefined && object.codespace !== null) {\n            message.codespace = String(object.codespace);\n        }\n        else {\n            message.codespace = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.code !== undefined && (obj.code = message.code);\n        message.log !== undefined && (obj.log = message.log);\n        message.info !== undefined && (obj.info = message.info);\n        message.index !== undefined && (obj.index = message.index);\n        message.key !== undefined &&\n            (obj.key = base64FromBytes(message.key !== undefined ? message.key : new Uint8Array()));\n        message.value !== undefined &&\n            (obj.value = base64FromBytes(message.value !== undefined ? message.value : new Uint8Array()));\n        message.proofOps !== undefined &&\n            (obj.proofOps = message.proofOps\n                ? ProofOps.toJSON(message.proofOps)\n                : undefined);\n        message.height !== undefined && (obj.height = message.height);\n        message.codespace !== undefined && (obj.codespace = message.codespace);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseQuery };\n        if (object.code !== undefined && object.code !== null) {\n            message.code = object.code;\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = object.log;\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = object.info;\n        }\n        else {\n            message.info = \"\";\n        }\n        if (object.index !== undefined && object.index !== null) {\n            message.index = object.index;\n        }\n        else {\n            message.index = 0;\n        }\n        if (object.key !== undefined && object.key !== null) {\n            message.key = object.key;\n        }\n        else {\n            message.key = new Uint8Array();\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = object.value;\n        }\n        else {\n            message.value = new Uint8Array();\n        }\n        if (object.proofOps !== undefined && object.proofOps !== null) {\n            message.proofOps = ProofOps.fromPartial(object.proofOps);\n        }\n        else {\n            message.proofOps = undefined;\n        }\n        if (object.height !== undefined && object.height !== null) {\n            message.height = object.height;\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.codespace !== undefined && object.codespace !== null) {\n            message.codespace = object.codespace;\n        }\n        else {\n            message.codespace = \"\";\n        }\n        return message;\n    },\n};\nconst baseResponseBeginBlock = {};\nexport const ResponseBeginBlock = {\n    encode(message, writer = Writer.create()) {\n        for (const v of message.events) {\n            Event.encode(v, writer.uint32(10).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseBeginBlock };\n        message.events = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.events.push(Event.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseBeginBlock };\n        message.events = [];\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.events) {\n            obj.events = message.events.map((e) => (e ? Event.toJSON(e) : undefined));\n        }\n        else {\n            obj.events = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseBeginBlock };\n        message.events = [];\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseResponseCheckTx = {\n    code: 0,\n    log: \"\",\n    info: \"\",\n    gasWanted: 0,\n    gasUsed: 0,\n    codespace: \"\",\n};\nexport const ResponseCheckTx = {\n    encode(message, writer = Writer.create()) {\n        if (message.code !== 0) {\n            writer.uint32(8).uint32(message.code);\n        }\n        if (message.data.length !== 0) {\n            writer.uint32(18).bytes(message.data);\n        }\n        if (message.log !== \"\") {\n            writer.uint32(26).string(message.log);\n        }\n        if (message.info !== \"\") {\n            writer.uint32(34).string(message.info);\n        }\n        if (message.gasWanted !== 0) {\n            writer.uint32(40).int64(message.gasWanted);\n        }\n        if (message.gasUsed !== 0) {\n            writer.uint32(48).int64(message.gasUsed);\n        }\n        for (const v of message.events) {\n            Event.encode(v, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.codespace !== \"\") {\n            writer.uint32(66).string(message.codespace);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseCheckTx };\n        message.events = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.code = reader.uint32();\n                    break;\n                case 2:\n                    message.data = reader.bytes();\n                    break;\n                case 3:\n                    message.log = reader.string();\n                    break;\n                case 4:\n                    message.info = reader.string();\n                    break;\n                case 5:\n                    message.gasWanted = longToNumber(reader.int64());\n                    break;\n                case 6:\n                    message.gasUsed = longToNumber(reader.int64());\n                    break;\n                case 7:\n                    message.events.push(Event.decode(reader, reader.uint32()));\n                    break;\n                case 8:\n                    message.codespace = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseCheckTx };\n        message.events = [];\n        if (object.code !== undefined && object.code !== null) {\n            message.code = Number(object.code);\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.data !== undefined && object.data !== null) {\n            message.data = bytesFromBase64(object.data);\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = String(object.log);\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = String(object.info);\n        }\n        else {\n            message.info = \"\";\n        }\n        if (object.gasWanted !== undefined && object.gasWanted !== null) {\n            message.gasWanted = Number(object.gasWanted);\n        }\n        else {\n            message.gasWanted = 0;\n        }\n        if (object.gasUsed !== undefined && object.gasUsed !== null) {\n            message.gasUsed = Number(object.gasUsed);\n        }\n        else {\n            message.gasUsed = 0;\n        }\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromJSON(e));\n            }\n        }\n        if (object.codespace !== undefined && object.codespace !== null) {\n            message.codespace = String(object.codespace);\n        }\n        else {\n            message.codespace = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.code !== undefined && (obj.code = message.code);\n        message.data !== undefined &&\n            (obj.data = base64FromBytes(message.data !== undefined ? message.data : new Uint8Array()));\n        message.log !== undefined && (obj.log = message.log);\n        message.info !== undefined && (obj.info = message.info);\n        message.gasWanted !== undefined && (obj.gasWanted = message.gasWanted);\n        message.gasUsed !== undefined && (obj.gasUsed = message.gasUsed);\n        if (message.events) {\n            obj.events = message.events.map((e) => (e ? Event.toJSON(e) : undefined));\n        }\n        else {\n            obj.events = [];\n        }\n        message.codespace !== undefined && (obj.codespace = message.codespace);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseCheckTx };\n        message.events = [];\n        if (object.code !== undefined && object.code !== null) {\n            message.code = object.code;\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.data !== undefined && object.data !== null) {\n            message.data = object.data;\n        }\n        else {\n            message.data = new Uint8Array();\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = object.log;\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = object.info;\n        }\n        else {\n            message.info = \"\";\n        }\n        if (object.gasWanted !== undefined && object.gasWanted !== null) {\n            message.gasWanted = object.gasWanted;\n        }\n        else {\n            message.gasWanted = 0;\n        }\n        if (object.gasUsed !== undefined && object.gasUsed !== null) {\n            message.gasUsed = object.gasUsed;\n        }\n        else {\n            message.gasUsed = 0;\n        }\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromPartial(e));\n            }\n        }\n        if (object.codespace !== undefined && object.codespace !== null) {\n            message.codespace = object.codespace;\n        }\n        else {\n            message.codespace = \"\";\n        }\n        return message;\n    },\n};\nconst baseResponseDeliverTx = {\n    code: 0,\n    log: \"\",\n    info: \"\",\n    gasWanted: 0,\n    gasUsed: 0,\n    codespace: \"\",\n};\nexport const ResponseDeliverTx = {\n    encode(message, writer = Writer.create()) {\n        if (message.code !== 0) {\n            writer.uint32(8).uint32(message.code);\n        }\n        if (message.data.length !== 0) {\n            writer.uint32(18).bytes(message.data);\n        }\n        if (message.log !== \"\") {\n            writer.uint32(26).string(message.log);\n        }\n        if (message.info !== \"\") {\n            writer.uint32(34).string(message.info);\n        }\n        if (message.gasWanted !== 0) {\n            writer.uint32(40).int64(message.gasWanted);\n        }\n        if (message.gasUsed !== 0) {\n            writer.uint32(48).int64(message.gasUsed);\n        }\n        for (const v of message.events) {\n            Event.encode(v, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.codespace !== \"\") {\n            writer.uint32(66).string(message.codespace);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseDeliverTx };\n        message.events = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.code = reader.uint32();\n                    break;\n                case 2:\n                    message.data = reader.bytes();\n                    break;\n                case 3:\n                    message.log = reader.string();\n                    break;\n                case 4:\n                    message.info = reader.string();\n                    break;\n                case 5:\n                    message.gasWanted = longToNumber(reader.int64());\n                    break;\n                case 6:\n                    message.gasUsed = longToNumber(reader.int64());\n                    break;\n                case 7:\n                    message.events.push(Event.decode(reader, reader.uint32()));\n                    break;\n                case 8:\n                    message.codespace = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseDeliverTx };\n        message.events = [];\n        if (object.code !== undefined && object.code !== null) {\n            message.code = Number(object.code);\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.data !== undefined && object.data !== null) {\n            message.data = bytesFromBase64(object.data);\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = String(object.log);\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = String(object.info);\n        }\n        else {\n            message.info = \"\";\n        }\n        if (object.gasWanted !== undefined && object.gasWanted !== null) {\n            message.gasWanted = Number(object.gasWanted);\n        }\n        else {\n            message.gasWanted = 0;\n        }\n        if (object.gasUsed !== undefined && object.gasUsed !== null) {\n            message.gasUsed = Number(object.gasUsed);\n        }\n        else {\n            message.gasUsed = 0;\n        }\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromJSON(e));\n            }\n        }\n        if (object.codespace !== undefined && object.codespace !== null) {\n            message.codespace = String(object.codespace);\n        }\n        else {\n            message.codespace = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.code !== undefined && (obj.code = message.code);\n        message.data !== undefined &&\n            (obj.data = base64FromBytes(message.data !== undefined ? message.data : new Uint8Array()));\n        message.log !== undefined && (obj.log = message.log);\n        message.info !== undefined && (obj.info = message.info);\n        message.gasWanted !== undefined && (obj.gasWanted = message.gasWanted);\n        message.gasUsed !== undefined && (obj.gasUsed = message.gasUsed);\n        if (message.events) {\n            obj.events = message.events.map((e) => (e ? Event.toJSON(e) : undefined));\n        }\n        else {\n            obj.events = [];\n        }\n        message.codespace !== undefined && (obj.codespace = message.codespace);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseDeliverTx };\n        message.events = [];\n        if (object.code !== undefined && object.code !== null) {\n            message.code = object.code;\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.data !== undefined && object.data !== null) {\n            message.data = object.data;\n        }\n        else {\n            message.data = new Uint8Array();\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = object.log;\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = object.info;\n        }\n        else {\n            message.info = \"\";\n        }\n        if (object.gasWanted !== undefined && object.gasWanted !== null) {\n            message.gasWanted = object.gasWanted;\n        }\n        else {\n            message.gasWanted = 0;\n        }\n        if (object.gasUsed !== undefined && object.gasUsed !== null) {\n            message.gasUsed = object.gasUsed;\n        }\n        else {\n            message.gasUsed = 0;\n        }\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromPartial(e));\n            }\n        }\n        if (object.codespace !== undefined && object.codespace !== null) {\n            message.codespace = object.codespace;\n        }\n        else {\n            message.codespace = \"\";\n        }\n        return message;\n    },\n};\nconst baseResponseEndBlock = {};\nexport const ResponseEndBlock = {\n    encode(message, writer = Writer.create()) {\n        for (const v of message.validatorUpdates) {\n            ValidatorUpdate.encode(v, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.consensusParamUpdates !== undefined) {\n            ConsensusParams.encode(message.consensusParamUpdates, writer.uint32(18).fork()).ldelim();\n        }\n        for (const v of message.events) {\n            Event.encode(v, writer.uint32(26).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseEndBlock };\n        message.validatorUpdates = [];\n        message.events = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.validatorUpdates.push(ValidatorUpdate.decode(reader, reader.uint32()));\n                    break;\n                case 2:\n                    message.consensusParamUpdates = ConsensusParams.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.events.push(Event.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseEndBlock };\n        message.validatorUpdates = [];\n        message.events = [];\n        if (object.validatorUpdates !== undefined &&\n            object.validatorUpdates !== null) {\n            for (const e of object.validatorUpdates) {\n                message.validatorUpdates.push(ValidatorUpdate.fromJSON(e));\n            }\n        }\n        if (object.consensusParamUpdates !== undefined &&\n            object.consensusParamUpdates !== null) {\n            message.consensusParamUpdates = ConsensusParams.fromJSON(object.consensusParamUpdates);\n        }\n        else {\n            message.consensusParamUpdates = undefined;\n        }\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.validatorUpdates) {\n            obj.validatorUpdates = message.validatorUpdates.map((e) => e ? ValidatorUpdate.toJSON(e) : undefined);\n        }\n        else {\n            obj.validatorUpdates = [];\n        }\n        message.consensusParamUpdates !== undefined &&\n            (obj.consensusParamUpdates = message.consensusParamUpdates\n                ? ConsensusParams.toJSON(message.consensusParamUpdates)\n                : undefined);\n        if (message.events) {\n            obj.events = message.events.map((e) => (e ? Event.toJSON(e) : undefined));\n        }\n        else {\n            obj.events = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseEndBlock };\n        message.validatorUpdates = [];\n        message.events = [];\n        if (object.validatorUpdates !== undefined &&\n            object.validatorUpdates !== null) {\n            for (const e of object.validatorUpdates) {\n                message.validatorUpdates.push(ValidatorUpdate.fromPartial(e));\n            }\n        }\n        if (object.consensusParamUpdates !== undefined &&\n            object.consensusParamUpdates !== null) {\n            message.consensusParamUpdates = ConsensusParams.fromPartial(object.consensusParamUpdates);\n        }\n        else {\n            message.consensusParamUpdates = undefined;\n        }\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseResponseCommit = { retainHeight: 0 };\nexport const ResponseCommit = {\n    encode(message, writer = Writer.create()) {\n        if (message.data.length !== 0) {\n            writer.uint32(18).bytes(message.data);\n        }\n        if (message.retainHeight !== 0) {\n            writer.uint32(24).int64(message.retainHeight);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseCommit };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 2:\n                    message.data = reader.bytes();\n                    break;\n                case 3:\n                    message.retainHeight = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseCommit };\n        if (object.data !== undefined && object.data !== null) {\n            message.data = bytesFromBase64(object.data);\n        }\n        if (object.retainHeight !== undefined && object.retainHeight !== null) {\n            message.retainHeight = Number(object.retainHeight);\n        }\n        else {\n            message.retainHeight = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.data !== undefined &&\n            (obj.data = base64FromBytes(message.data !== undefined ? message.data : new Uint8Array()));\n        message.retainHeight !== undefined &&\n            (obj.retainHeight = message.retainHeight);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseCommit };\n        if (object.data !== undefined && object.data !== null) {\n            message.data = object.data;\n        }\n        else {\n            message.data = new Uint8Array();\n        }\n        if (object.retainHeight !== undefined && object.retainHeight !== null) {\n            message.retainHeight = object.retainHeight;\n        }\n        else {\n            message.retainHeight = 0;\n        }\n        return message;\n    },\n};\nconst baseResponseListSnapshots = {};\nexport const ResponseListSnapshots = {\n    encode(message, writer = Writer.create()) {\n        for (const v of message.snapshots) {\n            Snapshot.encode(v, writer.uint32(10).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseListSnapshots };\n        message.snapshots = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.snapshots.push(Snapshot.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseListSnapshots };\n        message.snapshots = [];\n        if (object.snapshots !== undefined && object.snapshots !== null) {\n            for (const e of object.snapshots) {\n                message.snapshots.push(Snapshot.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.snapshots) {\n            obj.snapshots = message.snapshots.map((e) => e ? Snapshot.toJSON(e) : undefined);\n        }\n        else {\n            obj.snapshots = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseListSnapshots };\n        message.snapshots = [];\n        if (object.snapshots !== undefined && object.snapshots !== null) {\n            for (const e of object.snapshots) {\n                message.snapshots.push(Snapshot.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseResponseOfferSnapshot = { result: 0 };\nexport const ResponseOfferSnapshot = {\n    encode(message, writer = Writer.create()) {\n        if (message.result !== 0) {\n            writer.uint32(8).int32(message.result);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseOfferSnapshot };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.result = reader.int32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseOfferSnapshot };\n        if (object.result !== undefined && object.result !== null) {\n            message.result = responseOfferSnapshot_ResultFromJSON(object.result);\n        }\n        else {\n            message.result = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.result !== undefined &&\n            (obj.result = responseOfferSnapshot_ResultToJSON(message.result));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseOfferSnapshot };\n        if (object.result !== undefined && object.result !== null) {\n            message.result = object.result;\n        }\n        else {\n            message.result = 0;\n        }\n        return message;\n    },\n};\nconst baseResponseLoadSnapshotChunk = {};\nexport const ResponseLoadSnapshotChunk = {\n    encode(message, writer = Writer.create()) {\n        if (message.chunk.length !== 0) {\n            writer.uint32(10).bytes(message.chunk);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = {\n            ...baseResponseLoadSnapshotChunk,\n        };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.chunk = reader.bytes();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = {\n            ...baseResponseLoadSnapshotChunk,\n        };\n        if (object.chunk !== undefined && object.chunk !== null) {\n            message.chunk = bytesFromBase64(object.chunk);\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.chunk !== undefined &&\n            (obj.chunk = base64FromBytes(message.chunk !== undefined ? message.chunk : new Uint8Array()));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = {\n            ...baseResponseLoadSnapshotChunk,\n        };\n        if (object.chunk !== undefined && object.chunk !== null) {\n            message.chunk = object.chunk;\n        }\n        else {\n            message.chunk = new Uint8Array();\n        }\n        return message;\n    },\n};\nconst baseResponseApplySnapshotChunk = {\n    result: 0,\n    refetchChunks: 0,\n    rejectSenders: \"\",\n};\nexport const ResponseApplySnapshotChunk = {\n    encode(message, writer = Writer.create()) {\n        if (message.result !== 0) {\n            writer.uint32(8).int32(message.result);\n        }\n        writer.uint32(18).fork();\n        for (const v of message.refetchChunks) {\n            writer.uint32(v);\n        }\n        writer.ldelim();\n        for (const v of message.rejectSenders) {\n            writer.uint32(26).string(v);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = {\n            ...baseResponseApplySnapshotChunk,\n        };\n        message.refetchChunks = [];\n        message.rejectSenders = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.result = reader.int32();\n                    break;\n                case 2:\n                    if ((tag & 7) === 2) {\n                        const end2 = reader.uint32() + reader.pos;\n                        while (reader.pos < end2) {\n                            message.refetchChunks.push(reader.uint32());\n                        }\n                    }\n                    else {\n                        message.refetchChunks.push(reader.uint32());\n                    }\n                    break;\n                case 3:\n                    message.rejectSenders.push(reader.string());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = {\n            ...baseResponseApplySnapshotChunk,\n        };\n        message.refetchChunks = [];\n        message.rejectSenders = [];\n        if (object.result !== undefined && object.result !== null) {\n            message.result = responseApplySnapshotChunk_ResultFromJSON(object.result);\n        }\n        else {\n            message.result = 0;\n        }\n        if (object.refetchChunks !== undefined && object.refetchChunks !== null) {\n            for (const e of object.refetchChunks) {\n                message.refetchChunks.push(Number(e));\n            }\n        }\n        if (object.rejectSenders !== undefined && object.rejectSenders !== null) {\n            for (const e of object.rejectSenders) {\n                message.rejectSenders.push(String(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.result !== undefined &&\n            (obj.result = responseApplySnapshotChunk_ResultToJSON(message.result));\n        if (message.refetchChunks) {\n            obj.refetchChunks = message.refetchChunks.map((e) => e);\n        }\n        else {\n            obj.refetchChunks = [];\n        }\n        if (message.rejectSenders) {\n            obj.rejectSenders = message.rejectSenders.map((e) => e);\n        }\n        else {\n            obj.rejectSenders = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = {\n            ...baseResponseApplySnapshotChunk,\n        };\n        message.refetchChunks = [];\n        message.rejectSenders = [];\n        if (object.result !== undefined && object.result !== null) {\n            message.result = object.result;\n        }\n        else {\n            message.result = 0;\n        }\n        if (object.refetchChunks !== undefined && object.refetchChunks !== null) {\n            for (const e of object.refetchChunks) {\n                message.refetchChunks.push(e);\n            }\n        }\n        if (object.rejectSenders !== undefined && object.rejectSenders !== null) {\n            for (const e of object.rejectSenders) {\n                message.rejectSenders.push(e);\n            }\n        }\n        return message;\n    },\n};\nconst baseConsensusParams = {};\nexport const ConsensusParams = {\n    encode(message, writer = Writer.create()) {\n        if (message.block !== undefined) {\n            BlockParams.encode(message.block, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.evidence !== undefined) {\n            EvidenceParams.encode(message.evidence, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.validator !== undefined) {\n            ValidatorParams.encode(message.validator, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.version !== undefined) {\n            VersionParams.encode(message.version, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseConsensusParams };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.block = BlockParams.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.evidence = EvidenceParams.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.validator = ValidatorParams.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.version = VersionParams.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseConsensusParams };\n        if (object.block !== undefined && object.block !== null) {\n            message.block = BlockParams.fromJSON(object.block);\n        }\n        else {\n            message.block = undefined;\n        }\n        if (object.evidence !== undefined && object.evidence !== null) {\n            message.evidence = EvidenceParams.fromJSON(object.evidence);\n        }\n        else {\n            message.evidence = undefined;\n        }\n        if (object.validator !== undefined && object.validator !== null) {\n            message.validator = ValidatorParams.fromJSON(object.validator);\n        }\n        else {\n            message.validator = undefined;\n        }\n        if (object.version !== undefined && object.version !== null) {\n            message.version = VersionParams.fromJSON(object.version);\n        }\n        else {\n            message.version = undefined;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.block !== undefined &&\n            (obj.block = message.block\n                ? BlockParams.toJSON(message.block)\n                : undefined);\n        message.evidence !== undefined &&\n            (obj.evidence = message.evidence\n                ? EvidenceParams.toJSON(message.evidence)\n                : undefined);\n        message.validator !== undefined &&\n            (obj.validator = message.validator\n                ? ValidatorParams.toJSON(message.validator)\n                : undefined);\n        message.version !== undefined &&\n            (obj.version = message.version\n                ? VersionParams.toJSON(message.version)\n                : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseConsensusParams };\n        if (object.block !== undefined && object.block !== null) {\n            message.block = BlockParams.fromPartial(object.block);\n        }\n        else {\n            message.block = undefined;\n        }\n        if (object.evidence !== undefined && object.evidence !== null) {\n            message.evidence = EvidenceParams.fromPartial(object.evidence);\n        }\n        else {\n            message.evidence = undefined;\n        }\n        if (object.validator !== undefined && object.validator !== null) {\n            message.validator = ValidatorParams.fromPartial(object.validator);\n        }\n        else {\n            message.validator = undefined;\n        }\n        if (object.version !== undefined && object.version !== null) {\n            message.version = VersionParams.fromPartial(object.version);\n        }\n        else {\n            message.version = undefined;\n        }\n        return message;\n    },\n};\nconst baseBlockParams = { maxBytes: 0, maxGas: 0 };\nexport const BlockParams = {\n    encode(message, writer = Writer.create()) {\n        if (message.maxBytes !== 0) {\n            writer.uint32(8).int64(message.maxBytes);\n        }\n        if (message.maxGas !== 0) {\n            writer.uint32(16).int64(message.maxGas);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseBlockParams };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.maxBytes = longToNumber(reader.int64());\n                    break;\n                case 2:\n                    message.maxGas = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseBlockParams };\n        if (object.maxBytes !== undefined && object.maxBytes !== null) {\n            message.maxBytes = Number(object.maxBytes);\n        }\n        else {\n            message.maxBytes = 0;\n        }\n        if (object.maxGas !== undefined && object.maxGas !== null) {\n            message.maxGas = Number(object.maxGas);\n        }\n        else {\n            message.maxGas = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.maxBytes !== undefined && (obj.maxBytes = message.maxBytes);\n        message.maxGas !== undefined && (obj.maxGas = message.maxGas);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseBlockParams };\n        if (object.maxBytes !== undefined && object.maxBytes !== null) {\n            message.maxBytes = object.maxBytes;\n        }\n        else {\n            message.maxBytes = 0;\n        }\n        if (object.maxGas !== undefined && object.maxGas !== null) {\n            message.maxGas = object.maxGas;\n        }\n        else {\n            message.maxGas = 0;\n        }\n        return message;\n    },\n};\nconst baseLastCommitInfo = { round: 0 };\nexport const LastCommitInfo = {\n    encode(message, writer = Writer.create()) {\n        if (message.round !== 0) {\n            writer.uint32(8).int32(message.round);\n        }\n        for (const v of message.votes) {\n            VoteInfo.encode(v, writer.uint32(18).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseLastCommitInfo };\n        message.votes = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.round = reader.int32();\n                    break;\n                case 2:\n                    message.votes.push(VoteInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseLastCommitInfo };\n        message.votes = [];\n        if (object.round !== undefined && object.round !== null) {\n            message.round = Number(object.round);\n        }\n        else {\n            message.round = 0;\n        }\n        if (object.votes !== undefined && object.votes !== null) {\n            for (const e of object.votes) {\n                message.votes.push(VoteInfo.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.round !== undefined && (obj.round = message.round);\n        if (message.votes) {\n            obj.votes = message.votes.map((e) => e ? VoteInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.votes = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseLastCommitInfo };\n        message.votes = [];\n        if (object.round !== undefined && object.round !== null) {\n            message.round = object.round;\n        }\n        else {\n            message.round = 0;\n        }\n        if (object.votes !== undefined && object.votes !== null) {\n            for (const e of object.votes) {\n                message.votes.push(VoteInfo.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseEvent = { type: \"\" };\nexport const Event = {\n    encode(message, writer = Writer.create()) {\n        if (message.type !== \"\") {\n            writer.uint32(10).string(message.type);\n        }\n        for (const v of message.attributes) {\n            EventAttribute.encode(v, writer.uint32(18).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseEvent };\n        message.attributes = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.type = reader.string();\n                    break;\n                case 2:\n                    message.attributes.push(EventAttribute.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseEvent };\n        message.attributes = [];\n        if (object.type !== undefined && object.type !== null) {\n            message.type = String(object.type);\n        }\n        else {\n            message.type = \"\";\n        }\n        if (object.attributes !== undefined && object.attributes !== null) {\n            for (const e of object.attributes) {\n                message.attributes.push(EventAttribute.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.type !== undefined && (obj.type = message.type);\n        if (message.attributes) {\n            obj.attributes = message.attributes.map((e) => e ? EventAttribute.toJSON(e) : undefined);\n        }\n        else {\n            obj.attributes = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseEvent };\n        message.attributes = [];\n        if (object.type !== undefined && object.type !== null) {\n            message.type = object.type;\n        }\n        else {\n            message.type = \"\";\n        }\n        if (object.attributes !== undefined && object.attributes !== null) {\n            for (const e of object.attributes) {\n                message.attributes.push(EventAttribute.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseEventAttribute = { index: false };\nexport const EventAttribute = {\n    encode(message, writer = Writer.create()) {\n        if (message.key.length !== 0) {\n            writer.uint32(10).bytes(message.key);\n        }\n        if (message.value.length !== 0) {\n            writer.uint32(18).bytes(message.value);\n        }\n        if (message.index === true) {\n            writer.uint32(24).bool(message.index);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseEventAttribute };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.key = reader.bytes();\n                    break;\n                case 2:\n                    message.value = reader.bytes();\n                    break;\n                case 3:\n                    message.index = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseEventAttribute };\n        if (object.key !== undefined && object.key !== null) {\n            message.key = bytesFromBase64(object.key);\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = bytesFromBase64(object.value);\n        }\n        if (object.index !== undefined && object.index !== null) {\n            message.index = Boolean(object.index);\n        }\n        else {\n            message.index = false;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.key !== undefined &&\n            (obj.key = base64FromBytes(message.key !== undefined ? message.key : new Uint8Array()));\n        message.value !== undefined &&\n            (obj.value = base64FromBytes(message.value !== undefined ? message.value : new Uint8Array()));\n        message.index !== undefined && (obj.index = message.index);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseEventAttribute };\n        if (object.key !== undefined && object.key !== null) {\n            message.key = object.key;\n        }\n        else {\n            message.key = new Uint8Array();\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = object.value;\n        }\n        else {\n            message.value = new Uint8Array();\n        }\n        if (object.index !== undefined && object.index !== null) {\n            message.index = object.index;\n        }\n        else {\n            message.index = false;\n        }\n        return message;\n    },\n};\nconst baseTxResult = { height: 0, index: 0 };\nexport const TxResult = {\n    encode(message, writer = Writer.create()) {\n        if (message.height !== 0) {\n            writer.uint32(8).int64(message.height);\n        }\n        if (message.index !== 0) {\n            writer.uint32(16).uint32(message.index);\n        }\n        if (message.tx.length !== 0) {\n            writer.uint32(26).bytes(message.tx);\n        }\n        if (message.result !== undefined) {\n            ResponseDeliverTx.encode(message.result, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseTxResult };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.height = longToNumber(reader.int64());\n                    break;\n                case 2:\n                    message.index = reader.uint32();\n                    break;\n                case 3:\n                    message.tx = reader.bytes();\n                    break;\n                case 4:\n                    message.result = ResponseDeliverTx.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseTxResult };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = Number(object.height);\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.index !== undefined && object.index !== null) {\n            message.index = Number(object.index);\n        }\n        else {\n            message.index = 0;\n        }\n        if (object.tx !== undefined && object.tx !== null) {\n            message.tx = bytesFromBase64(object.tx);\n        }\n        if (object.result !== undefined && object.result !== null) {\n            message.result = ResponseDeliverTx.fromJSON(object.result);\n        }\n        else {\n            message.result = undefined;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.height !== undefined && (obj.height = message.height);\n        message.index !== undefined && (obj.index = message.index);\n        message.tx !== undefined &&\n            (obj.tx = base64FromBytes(message.tx !== undefined ? message.tx : new Uint8Array()));\n        message.result !== undefined &&\n            (obj.result = message.result\n                ? ResponseDeliverTx.toJSON(message.result)\n                : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseTxResult };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = object.height;\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.index !== undefined && object.index !== null) {\n            message.index = object.index;\n        }\n        else {\n            message.index = 0;\n        }\n        if (object.tx !== undefined && object.tx !== null) {\n            message.tx = object.tx;\n        }\n        else {\n            message.tx = new Uint8Array();\n        }\n        if (object.result !== undefined && object.result !== null) {\n            message.result = ResponseDeliverTx.fromPartial(object.result);\n        }\n        else {\n            message.result = undefined;\n        }\n        return message;\n    },\n};\nconst baseValidator = { power: 0 };\nexport const Validator = {\n    encode(message, writer = Writer.create()) {\n        if (message.address.length !== 0) {\n            writer.uint32(10).bytes(message.address);\n        }\n        if (message.power !== 0) {\n            writer.uint32(24).int64(message.power);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseValidator };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.address = reader.bytes();\n                    break;\n                case 3:\n                    message.power = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseValidator };\n        if (object.address !== undefined && object.address !== null) {\n            message.address = bytesFromBase64(object.address);\n        }\n        if (object.power !== undefined && object.power !== null) {\n            message.power = Number(object.power);\n        }\n        else {\n            message.power = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.address !== undefined &&\n            (obj.address = base64FromBytes(message.address !== undefined ? message.address : new Uint8Array()));\n        message.power !== undefined && (obj.power = message.power);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseValidator };\n        if (object.address !== undefined && object.address !== null) {\n            message.address = object.address;\n        }\n        else {\n            message.address = new Uint8Array();\n        }\n        if (object.power !== undefined && object.power !== null) {\n            message.power = object.power;\n        }\n        else {\n            message.power = 0;\n        }\n        return message;\n    },\n};\nconst baseValidatorUpdate = { power: 0 };\nexport const ValidatorUpdate = {\n    encode(message, writer = Writer.create()) {\n        if (message.pubKey !== undefined) {\n            PublicKey.encode(message.pubKey, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.power !== 0) {\n            writer.uint32(16).int64(message.power);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseValidatorUpdate };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.pubKey = PublicKey.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.power = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseValidatorUpdate };\n        if (object.pubKey !== undefined && object.pubKey !== null) {\n            message.pubKey = PublicKey.fromJSON(object.pubKey);\n        }\n        else {\n            message.pubKey = undefined;\n        }\n        if (object.power !== undefined && object.power !== null) {\n            message.power = Number(object.power);\n        }\n        else {\n            message.power = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.pubKey !== undefined &&\n            (obj.pubKey = message.pubKey\n                ? PublicKey.toJSON(message.pubKey)\n                : undefined);\n        message.power !== undefined && (obj.power = message.power);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseValidatorUpdate };\n        if (object.pubKey !== undefined && object.pubKey !== null) {\n            message.pubKey = PublicKey.fromPartial(object.pubKey);\n        }\n        else {\n            message.pubKey = undefined;\n        }\n        if (object.power !== undefined && object.power !== null) {\n            message.power = object.power;\n        }\n        else {\n            message.power = 0;\n        }\n        return message;\n    },\n};\nconst baseVoteInfo = { signedLastBlock: false };\nexport const VoteInfo = {\n    encode(message, writer = Writer.create()) {\n        if (message.validator !== undefined) {\n            Validator.encode(message.validator, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.signedLastBlock === true) {\n            writer.uint32(16).bool(message.signedLastBlock);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseVoteInfo };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.validator = Validator.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.signedLastBlock = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseVoteInfo };\n        if (object.validator !== undefined && object.validator !== null) {\n            message.validator = Validator.fromJSON(object.validator);\n        }\n        else {\n            message.validator = undefined;\n        }\n        if (object.signedLastBlock !== undefined &&\n            object.signedLastBlock !== null) {\n            message.signedLastBlock = Boolean(object.signedLastBlock);\n        }\n        else {\n            message.signedLastBlock = false;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.validator !== undefined &&\n            (obj.validator = message.validator\n                ? Validator.toJSON(message.validator)\n                : undefined);\n        message.signedLastBlock !== undefined &&\n            (obj.signedLastBlock = message.signedLastBlock);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseVoteInfo };\n        if (object.validator !== undefined && object.validator !== null) {\n            message.validator = Validator.fromPartial(object.validator);\n        }\n        else {\n            message.validator = undefined;\n        }\n        if (object.signedLastBlock !== undefined &&\n            object.signedLastBlock !== null) {\n            message.signedLastBlock = object.signedLastBlock;\n        }\n        else {\n            message.signedLastBlock = false;\n        }\n        return message;\n    },\n};\nconst baseEvidence = { type: 0, height: 0, totalVotingPower: 0 };\nexport const Evidence = {\n    encode(message, writer = Writer.create()) {\n        if (message.type !== 0) {\n            writer.uint32(8).int32(message.type);\n        }\n        if (message.validator !== undefined) {\n            Validator.encode(message.validator, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.height !== 0) {\n            writer.uint32(24).int64(message.height);\n        }\n        if (message.time !== undefined) {\n            Timestamp.encode(toTimestamp(message.time), writer.uint32(34).fork()).ldelim();\n        }\n        if (message.totalVotingPower !== 0) {\n            writer.uint32(40).int64(message.totalVotingPower);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseEvidence };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.type = reader.int32();\n                    break;\n                case 2:\n                    message.validator = Validator.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.height = longToNumber(reader.int64());\n                    break;\n                case 4:\n                    message.time = fromTimestamp(Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 5:\n                    message.totalVotingPower = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseEvidence };\n        if (object.type !== undefined && object.type !== null) {\n            message.type = evidenceTypeFromJSON(object.type);\n        }\n        else {\n            message.type = 0;\n        }\n        if (object.validator !== undefined && object.validator !== null) {\n            message.validator = Validator.fromJSON(object.validator);\n        }\n        else {\n            message.validator = undefined;\n        }\n        if (object.height !== undefined && object.height !== null) {\n            message.height = Number(object.height);\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.time !== undefined && object.time !== null) {\n            message.time = fromJsonTimestamp(object.time);\n        }\n        else {\n            message.time = undefined;\n        }\n        if (object.totalVotingPower !== undefined &&\n            object.totalVotingPower !== null) {\n            message.totalVotingPower = Number(object.totalVotingPower);\n        }\n        else {\n            message.totalVotingPower = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.type !== undefined && (obj.type = evidenceTypeToJSON(message.type));\n        message.validator !== undefined &&\n            (obj.validator = message.validator\n                ? Validator.toJSON(message.validator)\n                : undefined);\n        message.height !== undefined && (obj.height = message.height);\n        message.time !== undefined &&\n            (obj.time =\n                message.time !== undefined ? message.time.toISOString() : null);\n        message.totalVotingPower !== undefined &&\n            (obj.totalVotingPower = message.totalVotingPower);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseEvidence };\n        if (object.type !== undefined && object.type !== null) {\n            message.type = object.type;\n        }\n        else {\n            message.type = 0;\n        }\n        if (object.validator !== undefined && object.validator !== null) {\n            message.validator = Validator.fromPartial(object.validator);\n        }\n        else {\n            message.validator = undefined;\n        }\n        if (object.height !== undefined && object.height !== null) {\n            message.height = object.height;\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.time !== undefined && object.time !== null) {\n            message.time = object.time;\n        }\n        else {\n            message.time = undefined;\n        }\n        if (object.totalVotingPower !== undefined &&\n            object.totalVotingPower !== null) {\n            message.totalVotingPower = object.totalVotingPower;\n        }\n        else {\n            message.totalVotingPower = 0;\n        }\n        return message;\n    },\n};\nconst baseSnapshot = { height: 0, format: 0, chunks: 0 };\nexport const Snapshot = {\n    encode(message, writer = Writer.create()) {\n        if (message.height !== 0) {\n            writer.uint32(8).uint64(message.height);\n        }\n        if (message.format !== 0) {\n            writer.uint32(16).uint32(message.format);\n        }\n        if (message.chunks !== 0) {\n            writer.uint32(24).uint32(message.chunks);\n        }\n        if (message.hash.length !== 0) {\n            writer.uint32(34).bytes(message.hash);\n        }\n        if (message.metadata.length !== 0) {\n            writer.uint32(42).bytes(message.metadata);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseSnapshot };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.height = longToNumber(reader.uint64());\n                    break;\n                case 2:\n                    message.format = reader.uint32();\n                    break;\n                case 3:\n                    message.chunks = reader.uint32();\n                    break;\n                case 4:\n                    message.hash = reader.bytes();\n                    break;\n                case 5:\n                    message.metadata = reader.bytes();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseSnapshot };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = Number(object.height);\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.format !== undefined && object.format !== null) {\n            message.format = Number(object.format);\n        }\n        else {\n            message.format = 0;\n        }\n        if (object.chunks !== undefined && object.chunks !== null) {\n            message.chunks = Number(object.chunks);\n        }\n        else {\n            message.chunks = 0;\n        }\n        if (object.hash !== undefined && object.hash !== null) {\n            message.hash = bytesFromBase64(object.hash);\n        }\n        if (object.metadata !== undefined && object.metadata !== null) {\n            message.metadata = bytesFromBase64(object.metadata);\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.height !== undefined && (obj.height = message.height);\n        message.format !== undefined && (obj.format = message.format);\n        message.chunks !== undefined && (obj.chunks = message.chunks);\n        message.hash !== undefined &&\n            (obj.hash = base64FromBytes(message.hash !== undefined ? message.hash : new Uint8Array()));\n        message.metadata !== undefined &&\n            (obj.metadata = base64FromBytes(message.metadata !== undefined ? message.metadata : new Uint8Array()));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseSnapshot };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = object.height;\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.format !== undefined && object.format !== null) {\n            message.format = object.format;\n        }\n        else {\n            message.format = 0;\n        }\n        if (object.chunks !== undefined && object.chunks !== null) {\n            message.chunks = object.chunks;\n        }\n        else {\n            message.chunks = 0;\n        }\n        if (object.hash !== undefined && object.hash !== null) {\n            message.hash = object.hash;\n        }\n        else {\n            message.hash = new Uint8Array();\n        }\n        if (object.metadata !== undefined && object.metadata !== null) {\n            message.metadata = object.metadata;\n        }\n        else {\n            message.metadata = new Uint8Array();\n        }\n        return message;\n    },\n};\nexport class ABCIApplicationClientImpl {\n    constructor(rpc) {\n        this.rpc = rpc;\n    }\n    Echo(request) {\n        const data = RequestEcho.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"Echo\", data);\n        return promise.then((data) => ResponseEcho.decode(new Reader(data)));\n    }\n    Flush(request) {\n        const data = RequestFlush.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"Flush\", data);\n        return promise.then((data) => ResponseFlush.decode(new Reader(data)));\n    }\n    Info(request) {\n        const data = RequestInfo.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"Info\", data);\n        return promise.then((data) => ResponseInfo.decode(new Reader(data)));\n    }\n    SetOption(request) {\n        const data = RequestSetOption.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"SetOption\", data);\n        return promise.then((data) => ResponseSetOption.decode(new Reader(data)));\n    }\n    DeliverTx(request) {\n        const data = RequestDeliverTx.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"DeliverTx\", data);\n        return promise.then((data) => ResponseDeliverTx.decode(new Reader(data)));\n    }\n    CheckTx(request) {\n        const data = RequestCheckTx.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"CheckTx\", data);\n        return promise.then((data) => ResponseCheckTx.decode(new Reader(data)));\n    }\n    Query(request) {\n        const data = RequestQuery.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"Query\", data);\n        return promise.then((data) => ResponseQuery.decode(new Reader(data)));\n    }\n    Commit(request) {\n        const data = RequestCommit.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"Commit\", data);\n        return promise.then((data) => ResponseCommit.decode(new Reader(data)));\n    }\n    InitChain(request) {\n        const data = RequestInitChain.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"InitChain\", data);\n        return promise.then((data) => ResponseInitChain.decode(new Reader(data)));\n    }\n    BeginBlock(request) {\n        const data = RequestBeginBlock.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"BeginBlock\", data);\n        return promise.then((data) => ResponseBeginBlock.decode(new Reader(data)));\n    }\n    EndBlock(request) {\n        const data = RequestEndBlock.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"EndBlock\", data);\n        return promise.then((data) => ResponseEndBlock.decode(new Reader(data)));\n    }\n    ListSnapshots(request) {\n        const data = RequestListSnapshots.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"ListSnapshots\", data);\n        return promise.then((data) => ResponseListSnapshots.decode(new Reader(data)));\n    }\n    OfferSnapshot(request) {\n        const data = RequestOfferSnapshot.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"OfferSnapshot\", data);\n        return promise.then((data) => ResponseOfferSnapshot.decode(new Reader(data)));\n    }\n    LoadSnapshotChunk(request) {\n        const data = RequestLoadSnapshotChunk.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"LoadSnapshotChunk\", data);\n        return promise.then((data) => ResponseLoadSnapshotChunk.decode(new Reader(data)));\n    }\n    ApplySnapshotChunk(request) {\n        const data = RequestApplySnapshotChunk.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"ApplySnapshotChunk\", data);\n        return promise.then((data) => ResponseApplySnapshotChunk.decode(new Reader(data)));\n    }\n}\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\")\n        return globalThis;\n    if (typeof self !== \"undefined\")\n        return self;\n    if (typeof window !== \"undefined\")\n        return window;\n    if (typeof global !== \"undefined\")\n        return global;\n    throw \"Unable to locate global object\";\n})();\nconst atob = globalThis.atob ||\n    ((b64) => globalThis.Buffer.from(b64, \"base64\").toString(\"binary\"));\nfunction bytesFromBase64(b64) {\n    const bin = atob(b64);\n    const arr = new Uint8Array(bin.length);\n    for (let i = 0; i < bin.length; ++i) {\n        arr[i] = bin.charCodeAt(i);\n    }\n    return arr;\n}\nconst btoa = globalThis.btoa ||\n    ((bin) => globalThis.Buffer.from(bin, \"binary\").toString(\"base64\"));\nfunction base64FromBytes(arr) {\n    const bin = [];\n    for (let i = 0; i < arr.byteLength; ++i) {\n        bin.push(String.fromCharCode(arr[i]));\n    }\n    return btoa(bin.join(\"\"));\n}\nfunction toTimestamp(date) {\n    const seconds = date.getTime() / 1000;\n    const nanos = (date.getTime() % 1000) * 1000000;\n    return { seconds, nanos };\n}\nfunction fromTimestamp(t) {\n    let millis = t.seconds * 1000;\n    millis += t.nanos / 1000000;\n    return new Date(millis);\n}\nfunction fromJsonTimestamp(o) {\n    if (o instanceof Date) {\n        return o;\n    }\n    else if (typeof o === \"string\") {\n        return new Date(o);\n    }\n    else {\n        return fromTimestamp(Timestamp.fromJSON(o));\n    }\n}\nfunction longToNumber(long) {\n    if (long.gt(Number.MAX_SAFE_INTEGER)) {\n        throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n    }\n    return long.toNumber();\n}\nif (util.Long !== Long) {\n    util.Long = Long;\n    configure();\n}\n"]}]}